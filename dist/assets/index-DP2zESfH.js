(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var Et=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function Ch(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function sg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),s}var Eh={exports:{}},Ji={},Ph={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xa=Symbol.for("react.element"),rg=Symbol.for("react.portal"),ng=Symbol.for("react.fragment"),ag=Symbol.for("react.strict_mode"),ig=Symbol.for("react.profiler"),lg=Symbol.for("react.provider"),og=Symbol.for("react.context"),cg=Symbol.for("react.forward_ref"),dg=Symbol.for("react.suspense"),ug=Symbol.for("react.memo"),hg=Symbol.for("react.lazy"),Ed=Symbol.iterator;function mg(e){return e===null||typeof e!="object"?null:(e=Ed&&e[Ed]||e["@@iterator"],typeof e=="function"?e:null)}var Th={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rh=Object.assign,Mh={};function dn(e,t,s){this.props=e,this.context=t,this.refs=Mh,this.updater=s||Th}dn.prototype.isReactComponent={};dn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};dn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ah(){}Ah.prototype=dn.prototype;function uc(e,t,s){this.props=e,this.context=t,this.refs=Mh,this.updater=s||Th}var hc=uc.prototype=new Ah;hc.constructor=uc;Rh(hc,dn.prototype);hc.isPureReactComponent=!0;var Pd=Array.isArray,Dh=Object.prototype.hasOwnProperty,mc={current:null},Lh={key:!0,ref:!0,__self:!0,__source:!0};function $h(e,t,s){var n,a={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Dh.call(t,n)&&!Lh.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:xa,type:e,key:i,ref:l,props:a,_owner:mc.current}}function fg(e,t){return{$$typeof:xa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fc(e){return typeof e=="object"&&e!==null&&e.$$typeof===xa}function pg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Td=/\/+/g;function bl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pg(""+e.key):t.toString(36)}function si(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case xa:case rg:l=!0}}if(l)return l=e,a=a(l),e=n===""?"."+bl(l,0):n,Pd(a)?(s="",e!=null&&(s=e.replace(Td,"$&/")+"/"),si(a,t,s,"",function(d){return d})):a!=null&&(fc(a)&&(a=fg(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Td,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=n===""?".":n+":",Pd(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+bl(i,o);l+=si(i,t,s,c,a)}else if(c=mg(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+bl(i,o++),l+=si(i,t,s,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Aa(e,t,s){if(e==null)return e;var n=[],a=0;return si(e,n,"","",function(i){return t.call(s,i,a++)}),n}function gg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var st={current:null},ri={transition:null},xg={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:ri,ReactCurrentOwner:mc};function Ih(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Aa,forEach:function(e,t,s){Aa(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Aa(e,function(){t++}),t},toArray:function(e){return Aa(e,function(t){return t})||[]},only:function(e){if(!fc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=dn;oe.Fragment=ng;oe.Profiler=ig;oe.PureComponent=uc;oe.StrictMode=ag;oe.Suspense=dg;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xg;oe.act=Ih;oe.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Rh({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=mc.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Dh.call(t,c)&&!Lh.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:xa,type:e.type,key:a,ref:i,props:n,_owner:l}};oe.createContext=function(e){return e={$$typeof:og,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lg,_context:e},e.Consumer=e};oe.createElement=$h;oe.createFactory=function(e){var t=$h.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:cg,render:e}};oe.isValidElement=fc;oe.lazy=function(e){return{$$typeof:hg,_payload:{_status:-1,_result:e},_init:gg}};oe.memo=function(e,t){return{$$typeof:ug,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=ri.transition;ri.transition={};try{e()}finally{ri.transition=t}};oe.unstable_act=Ih;oe.useCallback=function(e,t){return st.current.useCallback(e,t)};oe.useContext=function(e){return st.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return st.current.useDeferredValue(e)};oe.useEffect=function(e,t){return st.current.useEffect(e,t)};oe.useId=function(){return st.current.useId()};oe.useImperativeHandle=function(e,t,s){return st.current.useImperativeHandle(e,t,s)};oe.useInsertionEffect=function(e,t){return st.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return st.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return st.current.useMemo(e,t)};oe.useReducer=function(e,t,s){return st.current.useReducer(e,t,s)};oe.useRef=function(e){return st.current.useRef(e)};oe.useState=function(e){return st.current.useState(e)};oe.useSyncExternalStore=function(e,t,s){return st.current.useSyncExternalStore(e,t,s)};oe.useTransition=function(){return st.current.useTransition()};oe.version="18.3.1";Ph.exports=oe;var b=Ph.exports;const H=Ch(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg=b,vg=Symbol.for("react.element"),wg=Symbol.for("react.fragment"),bg=Object.prototype.hasOwnProperty,jg=yg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ng={key:!0,ref:!0,__self:!0,__source:!0};function Oh(e,t,s){var n,a={},i=null,l=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)bg.call(t,n)&&!Ng.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:vg,type:e,key:i,ref:l,props:a,_owner:jg.current}}Ji.Fragment=wg;Ji.jsx=Oh;Ji.jsxs=Oh;Eh.exports=Ji;var r=Eh.exports,Uh={exports:{}},wt={},zh={exports:{}},Fh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,V){var Q=z.length;z.push(V);e:for(;0<Q;){var R=Q-1>>>1,C=z[R];if(0<a(C,V))z[R]=V,z[Q]=C,Q=R;else break e}}function s(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var V=z[0],Q=z.pop();if(Q!==V){z[0]=Q;e:for(var R=0,C=z.length,S=C>>>1;R<S;){var O=2*(R+1)-1,ee=z[O],te=O+1,Ce=z[te];if(0>a(ee,Q))te<C&&0>a(Ce,ee)?(z[R]=Ce,z[te]=Q,R=te):(z[R]=ee,z[O]=Q,R=O);else if(te<C&&0>a(Ce,Q))z[R]=Ce,z[te]=Q,R=te;else break e}}return V}function a(z,V){var Q=z.sortIndex-V.sortIndex;return Q!==0?Q:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,m=3,f=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(z){for(var V=s(d);V!==null;){if(V.callback===null)n(d);else if(V.startTime<=z)n(d),V.sortIndex=V.expirationTime,t(c,V);else break;V=s(d)}}function N(z){if(g=!1,j(z),!y)if(s(c)!==null)y=!0,B(E);else{var V=s(d);V!==null&&me(N,V.startTime-z)}}function E(z,V){y=!1,g&&(g=!1,p(A),A=-1),f=!0;var Q=m;try{for(j(V),h=s(c);h!==null&&(!(h.expirationTime>V)||z&&!$());){var R=h.callback;if(typeof R=="function"){h.callback=null,m=h.priorityLevel;var C=R(h.expirationTime<=V);V=e.unstable_now(),typeof C=="function"?h.callback=C:h===s(c)&&n(c),j(V)}else n(c);h=s(c)}if(h!==null)var S=!0;else{var O=s(d);O!==null&&me(N,O.startTime-V),S=!1}return S}finally{h=null,m=Q,f=!1}}var P=!1,k=null,A=-1,M=5,T=-1;function $(){return!(e.unstable_now()-T<M)}function F(){if(k!==null){var z=e.unstable_now();T=z;var V=!0;try{V=k(!0,z)}finally{V?J():(P=!1,k=null)}}else P=!1}var J;if(typeof w=="function")J=function(){w(F)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,X=Z.port2;Z.port1.onmessage=F,J=function(){X.postMessage(null)}}else J=function(){v(F,0)};function B(z){k=z,P||(P=!0,J())}function me(z,V){A=v(function(){z(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){y||f||(y=!0,B(E))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(z){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var Q=m;m=V;try{return z()}finally{m=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=m;m=z;try{return V()}finally{m=Q}},e.unstable_scheduleCallback=function(z,V,Q){var R=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?R+Q:R):Q=R,z){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=Q+C,z={id:u++,callback:V,priorityLevel:z,startTime:Q,expirationTime:C,sortIndex:-1},Q>R?(z.sortIndex=Q,t(d,z),s(c)===null&&z===s(d)&&(g?(p(A),A=-1):g=!0,me(N,Q-R))):(z.sortIndex=C,t(c,z),y||f||(y=!0,B(E))),z},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(z){var V=m;return function(){var Q=m;m=V;try{return z.apply(this,arguments)}finally{m=Q}}}})(Fh);zh.exports=Fh;var _g=zh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg=b,vt=_g;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bh=new Set,Qn={};function yr(e,t){Qr(e,t),Qr(e+"Capture",t)}function Qr(e,t){for(Qn[e]=t,e=0;e<t.length;e++)Bh.add(t[e])}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),no=Object.prototype.hasOwnProperty,Sg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rd={},Md={};function Cg(e){return no.call(Md,e)?!0:no.call(Rd,e)?!1:Sg.test(e)?Md[e]=!0:(Rd[e]=!0,!1)}function Eg(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Pg(e,t,s,n){if(t===null||typeof t>"u"||Eg(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rt(e,t,s,n,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new rt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];He[t]=new rt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new rt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new rt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new rt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new rt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new rt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new rt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new rt(e,5,!1,e.toLowerCase(),null,!1,!1)});var pc=/[\-:]([a-z])/g;function gc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(pc,gc);He[t]=new rt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(pc,gc);He[t]=new rt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(pc,gc);He[t]=new rt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new rt(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new rt(e,1,!1,e.toLowerCase(),null,!0,!0)});function xc(e,t,s,n){var a=He.hasOwnProperty(t)?He[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Pg(t,s,a,n)&&(s=null),n||a===null?Cg(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var bs=kg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Da=Symbol.for("react.element"),Tr=Symbol.for("react.portal"),Rr=Symbol.for("react.fragment"),yc=Symbol.for("react.strict_mode"),ao=Symbol.for("react.profiler"),qh=Symbol.for("react.provider"),Hh=Symbol.for("react.context"),vc=Symbol.for("react.forward_ref"),io=Symbol.for("react.suspense"),lo=Symbol.for("react.suspense_list"),wc=Symbol.for("react.memo"),Ss=Symbol.for("react.lazy"),Wh=Symbol.for("react.offscreen"),Ad=Symbol.iterator;function wn(e){return e===null||typeof e!="object"?null:(e=Ad&&e[Ad]||e["@@iterator"],typeof e=="function"?e:null)}var Se=Object.assign,jl;function An(e){if(jl===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);jl=t&&t[1]||""}return`
`+jl+e}var Nl=!1;function _l(e,t){if(!e||Nl)return"";Nl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{Nl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?An(e):""}function Tg(e){switch(e.tag){case 5:return An(e.type);case 16:return An("Lazy");case 13:return An("Suspense");case 19:return An("SuspenseList");case 0:case 2:case 15:return e=_l(e.type,!1),e;case 11:return e=_l(e.type.render,!1),e;case 1:return e=_l(e.type,!0),e;default:return""}}function oo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rr:return"Fragment";case Tr:return"Portal";case ao:return"Profiler";case yc:return"StrictMode";case io:return"Suspense";case lo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hh:return(e.displayName||"Context")+".Consumer";case qh:return(e._context.displayName||"Context")+".Provider";case vc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wc:return t=e.displayName||null,t!==null?t:oo(e.type)||"Memo";case Ss:t=e._payload,e=e._init;try{return oo(e(t))}catch{}}return null}function Rg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oo(t);case 8:return t===yc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Mg(e){var t=Vh(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function La(e){e._valueTracker||(e._valueTracker=Mg(e))}function Gh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=Vh(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function yi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function co(e,t){var s=t.checked;return Se({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Dd(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=Bs(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jh(e,t){t=t.checked,t!=null&&xc(e,"checked",t,!1)}function uo(e,t){Jh(e,t);var s=Bs(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ho(e,t.type,s):t.hasOwnProperty("defaultValue")&&ho(e,t.type,Bs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ld(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function ho(e,t,s){(t!=="number"||yi(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Dn=Array.isArray;function Br(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+Bs(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function mo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return Se({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $d(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(U(92));if(Dn(s)){if(1<s.length)throw Error(U(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Bs(s)}}function Kh(e,t){var s=Bs(t.value),n=Bs(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function Id(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $a,Yh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$a.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Un={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ag=["Webkit","ms","Moz","O"];Object.keys(Un).forEach(function(e){Ag.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Un[t]=Un[e]})});function Xh(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Un.hasOwnProperty(e)&&Un[e]?(""+t).trim():t+"px"}function Zh(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=Xh(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var Dg=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function po(e,t){if(t){if(Dg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function go(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xo=null;function bc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yo=null,qr=null,Hr=null;function Od(e){if(e=wa(e)){if(typeof yo!="function")throw Error(U(280));var t=e.stateNode;t&&(t=Zi(t),yo(e.stateNode,e.type,t))}}function em(e){qr?Hr?Hr.push(e):Hr=[e]:qr=e}function tm(){if(qr){var e=qr,t=Hr;if(Hr=qr=null,Od(e),t)for(e=0;e<t.length;e++)Od(t[e])}}function sm(e,t){return e(t)}function rm(){}var kl=!1;function nm(e,t,s){if(kl)return e(t,s);kl=!0;try{return sm(e,t,s)}finally{kl=!1,(qr!==null||Hr!==null)&&(rm(),tm())}}function Xn(e,t){var s=e.stateNode;if(s===null)return null;var n=Zi(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(U(231,t,typeof s));return s}var vo=!1;if(gs)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){vo=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{vo=!1}function Lg(e,t,s,n,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var zn=!1,vi=null,wi=!1,wo=null,$g={onError:function(e){zn=!0,vi=e}};function Ig(e,t,s,n,a,i,l,o,c){zn=!1,vi=null,Lg.apply($g,arguments)}function Og(e,t,s,n,a,i,l,o,c){if(Ig.apply(this,arguments),zn){if(zn){var d=vi;zn=!1,vi=null}else throw Error(U(198));wi||(wi=!0,wo=d)}}function vr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function am(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ud(e){if(vr(e)!==e)throw Error(U(188))}function Ug(e){var t=e.alternate;if(!t){if(t=vr(e),t===null)throw Error(U(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return Ud(a),e;if(i===n)return Ud(a),t;i=i.sibling}throw Error(U(188))}if(s.return!==n.return)s=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===s){l=!0,s=a,n=i;break}if(o===n){l=!0,n=a,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,n=a;break}if(o===n){l=!0,n=i,s=a;break}o=o.sibling}if(!l)throw Error(U(189))}}if(s.alternate!==n)throw Error(U(190))}if(s.tag!==3)throw Error(U(188));return s.stateNode.current===s?e:t}function im(e){return e=Ug(e),e!==null?lm(e):null}function lm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lm(e);if(t!==null)return t;e=e.sibling}return null}var om=vt.unstable_scheduleCallback,zd=vt.unstable_cancelCallback,zg=vt.unstable_shouldYield,Fg=vt.unstable_requestPaint,Re=vt.unstable_now,Bg=vt.unstable_getCurrentPriorityLevel,jc=vt.unstable_ImmediatePriority,cm=vt.unstable_UserBlockingPriority,bi=vt.unstable_NormalPriority,qg=vt.unstable_LowPriority,dm=vt.unstable_IdlePriority,Ki=null,ns=null;function Hg(e){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(Ki,e,void 0,(e.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:Gg,Wg=Math.log,Vg=Math.LN2;function Gg(e){return e>>>=0,e===0?32:31-(Wg(e)/Vg|0)|0}var Ia=64,Oa=4194304;function Ln(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ji(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,l=s&268435455;if(l!==0){var o=l&~a;o!==0?n=Ln(o):(i&=l,i!==0&&(n=Ln(i)))}else l=s&~a,l!==0?n=Ln(l):i!==0&&(n=Ln(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-qt(t),a=1<<s,n|=e[s],t&=~a;return n}function Jg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kg(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-qt(i),o=1<<l,c=a[l];c===-1?(!(o&s)||o&n)&&(a[l]=Jg(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function bo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function um(){var e=Ia;return Ia<<=1,!(Ia&4194240)&&(Ia=64),e}function Sl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ya(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qt(t),e[t]=s}function Qg(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-qt(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}function Nc(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-qt(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var ge=0;function hm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var mm,_c,fm,pm,gm,jo=!1,Ua=[],Ds=null,Ls=null,$s=null,Zn=new Map,ea=new Map,Ps=[],Yg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fd(e,t){switch(e){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":Zn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(t.pointerId)}}function jn(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=wa(t),t!==null&&_c(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Xg(e,t,s,n,a){switch(t){case"focusin":return Ds=jn(Ds,e,t,s,n,a),!0;case"dragenter":return Ls=jn(Ls,e,t,s,n,a),!0;case"mouseover":return $s=jn($s,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return Zn.set(i,jn(Zn.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ea.set(i,jn(ea.get(i)||null,e,t,s,n,a)),!0}return!1}function xm(e){var t=ir(e.target);if(t!==null){var s=vr(t);if(s!==null){if(t=s.tag,t===13){if(t=am(s),t!==null){e.blockedOn=t,gm(e.priority,function(){fm(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ni(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=No(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);xo=n,s.target.dispatchEvent(n),xo=null}else return t=wa(s),t!==null&&_c(t),e.blockedOn=s,!1;t.shift()}return!0}function Bd(e,t,s){ni(e)&&s.delete(t)}function Zg(){jo=!1,Ds!==null&&ni(Ds)&&(Ds=null),Ls!==null&&ni(Ls)&&(Ls=null),$s!==null&&ni($s)&&($s=null),Zn.forEach(Bd),ea.forEach(Bd)}function Nn(e,t){e.blockedOn===t&&(e.blockedOn=null,jo||(jo=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,Zg)))}function ta(e){function t(a){return Nn(a,e)}if(0<Ua.length){Nn(Ua[0],e);for(var s=1;s<Ua.length;s++){var n=Ua[s];n.blockedOn===e&&(n.blockedOn=null)}}for(Ds!==null&&Nn(Ds,e),Ls!==null&&Nn(Ls,e),$s!==null&&Nn($s,e),Zn.forEach(t),ea.forEach(t),s=0;s<Ps.length;s++)n=Ps[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ps.length&&(s=Ps[0],s.blockedOn===null);)xm(s),s.blockedOn===null&&Ps.shift()}var Wr=bs.ReactCurrentBatchConfig,Ni=!0;function e0(e,t,s,n){var a=ge,i=Wr.transition;Wr.transition=null;try{ge=1,kc(e,t,s,n)}finally{ge=a,Wr.transition=i}}function t0(e,t,s,n){var a=ge,i=Wr.transition;Wr.transition=null;try{ge=4,kc(e,t,s,n)}finally{ge=a,Wr.transition=i}}function kc(e,t,s,n){if(Ni){var a=No(e,t,s,n);if(a===null)$l(e,t,n,_i,s),Fd(e,n);else if(Xg(a,e,t,s,n))n.stopPropagation();else if(Fd(e,n),t&4&&-1<Yg.indexOf(e)){for(;a!==null;){var i=wa(a);if(i!==null&&mm(i),i=No(e,t,s,n),i===null&&$l(e,t,n,_i,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else $l(e,t,n,null,s)}}var _i=null;function No(e,t,s,n){if(_i=null,e=bc(n),e=ir(e),e!==null)if(t=vr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=am(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _i=e,null}function ym(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bg()){case jc:return 1;case cm:return 4;case bi:case qg:return 16;case dm:return 536870912;default:return 16}default:return 16}}var Ms=null,Sc=null,ai=null;function vm(){if(ai)return ai;var e,t=Sc,s=t.length,n,a="value"in Ms?Ms.value:Ms.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var l=s-e;for(n=1;n<=l&&t[s-n]===a[i-n];n++);return ai=a.slice(e,1<n?1-n:void 0)}function ii(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function za(){return!0}function qd(){return!1}function bt(e){function t(s,n,a,i,l){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(s=e[o],this[o]=s?s(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?za:qd,this.isPropagationStopped=qd,this}return Se(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=za)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=za)},persist:function(){},isPersistent:za}),t}var un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=bt(un),va=Se({},un,{view:0,detail:0}),s0=bt(va),Cl,El,_n,Qi=Se({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ec,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_n&&(_n&&e.type==="mousemove"?(Cl=e.screenX-_n.screenX,El=e.screenY-_n.screenY):El=Cl=0,_n=e),Cl)},movementY:function(e){return"movementY"in e?e.movementY:El}}),Hd=bt(Qi),r0=Se({},Qi,{dataTransfer:0}),n0=bt(r0),a0=Se({},va,{relatedTarget:0}),Pl=bt(a0),i0=Se({},un,{animationName:0,elapsedTime:0,pseudoElement:0}),l0=bt(i0),o0=Se({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),c0=bt(o0),d0=Se({},un,{data:0}),Wd=bt(d0),u0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=m0[e])?!!t[e]:!1}function Ec(){return f0}var p0=Se({},va,{key:function(e){if(e.key){var t=u0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?h0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ec,charCode:function(e){return e.type==="keypress"?ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),g0=bt(p0),x0=Se({},Qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vd=bt(x0),y0=Se({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ec}),v0=bt(y0),w0=Se({},un,{propertyName:0,elapsedTime:0,pseudoElement:0}),b0=bt(w0),j0=Se({},Qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),N0=bt(j0),_0=[9,13,27,32],Pc=gs&&"CompositionEvent"in window,Fn=null;gs&&"documentMode"in document&&(Fn=document.documentMode);var k0=gs&&"TextEvent"in window&&!Fn,wm=gs&&(!Pc||Fn&&8<Fn&&11>=Fn),Gd=" ",Jd=!1;function bm(e,t){switch(e){case"keyup":return _0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mr=!1;function S0(e,t){switch(e){case"compositionend":return jm(t);case"keypress":return t.which!==32?null:(Jd=!0,Gd);case"textInput":return e=t.data,e===Gd&&Jd?null:e;default:return null}}function C0(e,t){if(Mr)return e==="compositionend"||!Pc&&bm(e,t)?(e=vm(),ai=Sc=Ms=null,Mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wm&&t.locale!=="ko"?null:t.data;default:return null}}var E0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!E0[e.type]:t==="textarea"}function Nm(e,t,s,n){em(n),t=ki(t,"onChange"),0<t.length&&(s=new Cc("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Bn=null,sa=null;function P0(e){Dm(e,0)}function Yi(e){var t=Lr(e);if(Gh(t))return e}function T0(e,t){if(e==="change")return t}var _m=!1;if(gs){var Tl;if(gs){var Rl="oninput"in document;if(!Rl){var Qd=document.createElement("div");Qd.setAttribute("oninput","return;"),Rl=typeof Qd.oninput=="function"}Tl=Rl}else Tl=!1;_m=Tl&&(!document.documentMode||9<document.documentMode)}function Yd(){Bn&&(Bn.detachEvent("onpropertychange",km),sa=Bn=null)}function km(e){if(e.propertyName==="value"&&Yi(sa)){var t=[];Nm(t,sa,e,bc(e)),nm(P0,t)}}function R0(e,t,s){e==="focusin"?(Yd(),Bn=t,sa=s,Bn.attachEvent("onpropertychange",km)):e==="focusout"&&Yd()}function M0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yi(sa)}function A0(e,t){if(e==="click")return Yi(t)}function D0(e,t){if(e==="input"||e==="change")return Yi(t)}function L0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:L0;function ra(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!no.call(t,a)||!Vt(e[a],t[a]))return!1}return!0}function Xd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zd(e,t){var s=Xd(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Xd(s)}}function Sm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cm(){for(var e=window,t=yi();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=yi(e.document)}return t}function Tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $0(e){var t=Cm(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Sm(s.ownerDocument.documentElement,s)){if(n!==null&&Tc(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Zd(s,i);var l=Zd(s,n);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var I0=gs&&"documentMode"in document&&11>=document.documentMode,Ar=null,_o=null,qn=null,ko=!1;function eu(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ko||Ar==null||Ar!==yi(n)||(n=Ar,"selectionStart"in n&&Tc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),qn&&ra(qn,n)||(qn=n,n=ki(_o,"onSelect"),0<n.length&&(t=new Cc("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=Ar)))}function Fa(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Dr={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},Ml={},Em={};gs&&(Em=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function Xi(e){if(Ml[e])return Ml[e];if(!Dr[e])return e;var t=Dr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Em)return Ml[e]=t[s];return e}var Pm=Xi("animationend"),Tm=Xi("animationiteration"),Rm=Xi("animationstart"),Mm=Xi("transitionend"),Am=new Map,tu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vs(e,t){Am.set(e,t),yr(t,[e])}for(var Al=0;Al<tu.length;Al++){var Dl=tu[Al],O0=Dl.toLowerCase(),U0=Dl[0].toUpperCase()+Dl.slice(1);Vs(O0,"on"+U0)}Vs(Pm,"onAnimationEnd");Vs(Tm,"onAnimationIteration");Vs(Rm,"onAnimationStart");Vs("dblclick","onDoubleClick");Vs("focusin","onFocus");Vs("focusout","onBlur");Vs(Mm,"onTransitionEnd");Qr("onMouseEnter",["mouseout","mouseover"]);Qr("onMouseLeave",["mouseout","mouseover"]);Qr("onPointerEnter",["pointerout","pointerover"]);Qr("onPointerLeave",["pointerout","pointerover"]);yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z0=new Set("cancel close invalid load scroll toggle".split(" ").concat($n));function su(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,Og(n,t,void 0,e),e.currentTarget=null}function Dm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;su(a,o,d),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;su(a,o,d),i=c}}}if(wi)throw e=wo,wi=!1,wo=null,e}function we(e,t){var s=t[To];s===void 0&&(s=t[To]=new Set);var n=e+"__bubble";s.has(n)||(Lm(t,e,2,!1),s.add(n))}function Ll(e,t,s){var n=0;t&&(n|=4),Lm(s,e,n,t)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function na(e){if(!e[Ba]){e[Ba]=!0,Bh.forEach(function(s){s!=="selectionchange"&&(z0.has(s)||Ll(s,!1,e),Ll(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ba]||(t[Ba]=!0,Ll("selectionchange",!1,t))}}function Lm(e,t,s,n){switch(ym(t)){case 1:var a=e0;break;case 4:a=t0;break;default:a=kc}s=a.bind(null,t,s,e),a=void 0,!vo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function $l(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=ir(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}nm(function(){var d=i,u=bc(s),h=[];e:{var m=Am.get(e);if(m!==void 0){var f=Cc,y=e;switch(e){case"keypress":if(ii(s)===0)break e;case"keydown":case"keyup":f=g0;break;case"focusin":y="focus",f=Pl;break;case"focusout":y="blur",f=Pl;break;case"beforeblur":case"afterblur":f=Pl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=n0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=v0;break;case Pm:case Tm:case Rm:f=l0;break;case Mm:f=b0;break;case"scroll":f=s0;break;case"wheel":f=N0;break;case"copy":case"cut":case"paste":f=c0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Vd}var g=(t&4)!==0,v=!g&&e==="scroll",p=g?m!==null?m+"Capture":null:m;g=[];for(var w=d,j;w!==null;){j=w;var N=j.stateNode;if(j.tag===5&&N!==null&&(j=N,p!==null&&(N=Xn(w,p),N!=null&&g.push(aa(w,N,j)))),v)break;w=w.return}0<g.length&&(m=new f(m,y,null,s,u),h.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&s!==xo&&(y=s.relatedTarget||s.fromElement)&&(ir(y)||y[xs]))break e;if((f||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,f?(y=s.relatedTarget||s.toElement,f=d,y=y?ir(y):null,y!==null&&(v=vr(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=d),f!==y)){if(g=Hd,N="onMouseLeave",p="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(g=Vd,N="onPointerLeave",p="onPointerEnter",w="pointer"),v=f==null?m:Lr(f),j=y==null?m:Lr(y),m=new g(N,w+"leave",f,s,u),m.target=v,m.relatedTarget=j,N=null,ir(u)===d&&(g=new g(p,w+"enter",y,s,u),g.target=j,g.relatedTarget=v,N=g),v=N,f&&y)t:{for(g=f,p=y,w=0,j=g;j;j=kr(j))w++;for(j=0,N=p;N;N=kr(N))j++;for(;0<w-j;)g=kr(g),w--;for(;0<j-w;)p=kr(p),j--;for(;w--;){if(g===p||p!==null&&g===p.alternate)break t;g=kr(g),p=kr(p)}g=null}else g=null;f!==null&&ru(h,m,f,g,!1),y!==null&&v!==null&&ru(h,v,y,g,!0)}}e:{if(m=d?Lr(d):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var E=T0;else if(Kd(m))if(_m)E=D0;else{E=M0;var P=R0}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=A0);if(E&&(E=E(e,d))){Nm(h,E,s,u);break e}P&&P(e,m,d),e==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&ho(m,"number",m.value)}switch(P=d?Lr(d):window,e){case"focusin":(Kd(P)||P.contentEditable==="true")&&(Ar=P,_o=d,qn=null);break;case"focusout":qn=_o=Ar=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,eu(h,s,u);break;case"selectionchange":if(I0)break;case"keydown":case"keyup":eu(h,s,u)}var k;if(Pc)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Mr?bm(e,s)&&(A="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(A="onCompositionStart");A&&(wm&&s.locale!=="ko"&&(Mr||A!=="onCompositionStart"?A==="onCompositionEnd"&&Mr&&(k=vm()):(Ms=u,Sc="value"in Ms?Ms.value:Ms.textContent,Mr=!0)),P=ki(d,A),0<P.length&&(A=new Wd(A,e,null,s,u),h.push({event:A,listeners:P}),k?A.data=k:(k=jm(s),k!==null&&(A.data=k)))),(k=k0?S0(e,s):C0(e,s))&&(d=ki(d,"onBeforeInput"),0<d.length&&(u=new Wd("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=k))}Dm(h,t)})}function aa(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ki(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Xn(e,s),i!=null&&n.unshift(aa(e,i,a)),i=Xn(e,t),i!=null&&n.push(aa(e,i,a))),e=e.return}return n}function kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ru(e,t,s,n,a){for(var i=t._reactName,l=[];s!==null&&s!==n;){var o=s,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=Xn(s,i),c!=null&&l.unshift(aa(s,c,o))):a||(c=Xn(s,i),c!=null&&l.push(aa(s,c,o)))),s=s.return}l.length!==0&&e.push({event:t,listeners:l})}var F0=/\r\n?/g,B0=/\u0000|\uFFFD/g;function nu(e){return(typeof e=="string"?e:""+e).replace(F0,`
`).replace(B0,"")}function qa(e,t,s){if(t=nu(t),nu(e)!==t&&s)throw Error(U(425))}function Si(){}var So=null,Co=null;function Eo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Po=typeof setTimeout=="function"?setTimeout:void 0,q0=typeof clearTimeout=="function"?clearTimeout:void 0,au=typeof Promise=="function"?Promise:void 0,H0=typeof queueMicrotask=="function"?queueMicrotask:typeof au<"u"?function(e){return au.resolve(null).then(e).catch(W0)}:Po;function W0(e){setTimeout(function(){throw e})}function Il(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),ta(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);ta(t)}function Is(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function iu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var hn=Math.random().toString(36).slice(2),ss="__reactFiber$"+hn,ia="__reactProps$"+hn,xs="__reactContainer$"+hn,To="__reactEvents$"+hn,V0="__reactListeners$"+hn,G0="__reactHandles$"+hn;function ir(e){var t=e[ss];if(t)return t;for(var s=e.parentNode;s;){if(t=s[xs]||s[ss]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=iu(e);e!==null;){if(s=e[ss])return s;e=iu(e)}return t}e=s,s=e.parentNode}return null}function wa(e){return e=e[ss]||e[xs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function Zi(e){return e[ia]||null}var Ro=[],$r=-1;function Gs(e){return{current:e}}function be(e){0>$r||(e.current=Ro[$r],Ro[$r]=null,$r--)}function ye(e,t){$r++,Ro[$r]=e.current,e.current=t}var qs={},Qe=Gs(qs),ut=Gs(!1),hr=qs;function Yr(e,t){var s=e.type.contextTypes;if(!s)return qs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ht(e){return e=e.childContextTypes,e!=null}function Ci(){be(ut),be(Qe)}function lu(e,t,s){if(Qe.current!==qs)throw Error(U(168));ye(Qe,t),ye(ut,s)}function $m(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(U(108,Rg(e)||"Unknown",a));return Se({},s,n)}function Ei(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qs,hr=Qe.current,ye(Qe,e),ye(ut,ut.current),!0}function ou(e,t,s){var n=e.stateNode;if(!n)throw Error(U(169));s?(e=$m(e,t,hr),n.__reactInternalMemoizedMergedChildContext=e,be(ut),be(Qe),ye(Qe,e)):be(ut),ye(ut,s)}var ds=null,el=!1,Ol=!1;function Im(e){ds===null?ds=[e]:ds.push(e)}function J0(e){el=!0,Im(e)}function Js(){if(!Ol&&ds!==null){Ol=!0;var e=0,t=ge;try{var s=ds;for(ge=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}ds=null,el=!1}catch(a){throw ds!==null&&(ds=ds.slice(e+1)),om(jc,Js),a}finally{ge=t,Ol=!1}}return null}var Ir=[],Or=0,Pi=null,Ti=0,_t=[],kt=0,mr=null,us=1,hs="";function sr(e,t){Ir[Or++]=Ti,Ir[Or++]=Pi,Pi=e,Ti=t}function Om(e,t,s){_t[kt++]=us,_t[kt++]=hs,_t[kt++]=mr,mr=e;var n=us;e=hs;var a=32-qt(n)-1;n&=~(1<<a),s+=1;var i=32-qt(t)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,us=1<<32-qt(t)+a|s<<a|n,hs=i+e}else us=1<<i|s<<a|n,hs=e}function Rc(e){e.return!==null&&(sr(e,1),Om(e,1,0))}function Mc(e){for(;e===Pi;)Pi=Ir[--Or],Ir[Or]=null,Ti=Ir[--Or],Ir[Or]=null;for(;e===mr;)mr=_t[--kt],_t[kt]=null,hs=_t[--kt],_t[kt]=null,us=_t[--kt],_t[kt]=null}var yt=null,xt=null,je=!1,Ut=null;function Um(e,t){var s=St(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function cu(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yt=e,xt=Is(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yt=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=mr!==null?{id:us,overflow:hs}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=St(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,yt=e,xt=null,!0):!1;default:return!1}}function Mo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ao(e){if(je){var t=xt;if(t){var s=t;if(!cu(e,t)){if(Mo(e))throw Error(U(418));t=Is(s.nextSibling);var n=yt;t&&cu(e,t)?Um(n,s):(e.flags=e.flags&-4097|2,je=!1,yt=e)}}else{if(Mo(e))throw Error(U(418));e.flags=e.flags&-4097|2,je=!1,yt=e}}}function du(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yt=e}function Ha(e){if(e!==yt)return!1;if(!je)return du(e),je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Eo(e.type,e.memoizedProps)),t&&(t=xt)){if(Mo(e))throw zm(),Error(U(418));for(;t;)Um(e,t),t=Is(t.nextSibling)}if(du(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){xt=Is(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=yt?Is(e.stateNode.nextSibling):null;return!0}function zm(){for(var e=xt;e;)e=Is(e.nextSibling)}function Xr(){xt=yt=null,je=!1}function Ac(e){Ut===null?Ut=[e]:Ut.push(e)}var K0=bs.ReactCurrentBatchConfig;function kn(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(U(309));var n=s.stateNode}if(!n)throw Error(U(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(U(284));if(!s._owner)throw Error(U(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function uu(e){var t=e._init;return t(e._payload)}function Fm(e){function t(p,w){if(e){var j=p.deletions;j===null?(p.deletions=[w],p.flags|=16):j.push(w)}}function s(p,w){if(!e)return null;for(;w!==null;)t(p,w),w=w.sibling;return null}function n(p,w){for(p=new Map;w!==null;)w.key!==null?p.set(w.key,w):p.set(w.index,w),w=w.sibling;return p}function a(p,w){return p=Fs(p,w),p.index=0,p.sibling=null,p}function i(p,w,j){return p.index=j,e?(j=p.alternate,j!==null?(j=j.index,j<w?(p.flags|=2,w):j):(p.flags|=2,w)):(p.flags|=1048576,w)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function o(p,w,j,N){return w===null||w.tag!==6?(w=Wl(j,p.mode,N),w.return=p,w):(w=a(w,j),w.return=p,w)}function c(p,w,j,N){var E=j.type;return E===Rr?u(p,w,j.props.children,N,j.key):w!==null&&(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ss&&uu(E)===w.type)?(N=a(w,j.props),N.ref=kn(p,w,j),N.return=p,N):(N=mi(j.type,j.key,j.props,null,p.mode,N),N.ref=kn(p,w,j),N.return=p,N)}function d(p,w,j,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==j.containerInfo||w.stateNode.implementation!==j.implementation?(w=Vl(j,p.mode,N),w.return=p,w):(w=a(w,j.children||[]),w.return=p,w)}function u(p,w,j,N,E){return w===null||w.tag!==7?(w=dr(j,p.mode,N,E),w.return=p,w):(w=a(w,j),w.return=p,w)}function h(p,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Wl(""+w,p.mode,j),w.return=p,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Da:return j=mi(w.type,w.key,w.props,null,p.mode,j),j.ref=kn(p,null,w),j.return=p,j;case Tr:return w=Vl(w,p.mode,j),w.return=p,w;case Ss:var N=w._init;return h(p,N(w._payload),j)}if(Dn(w)||wn(w))return w=dr(w,p.mode,j,null),w.return=p,w;Wa(p,w)}return null}function m(p,w,j,N){var E=w!==null?w.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return E!==null?null:o(p,w,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Da:return j.key===E?c(p,w,j,N):null;case Tr:return j.key===E?d(p,w,j,N):null;case Ss:return E=j._init,m(p,w,E(j._payload),N)}if(Dn(j)||wn(j))return E!==null?null:u(p,w,j,N,null);Wa(p,j)}return null}function f(p,w,j,N,E){if(typeof N=="string"&&N!==""||typeof N=="number")return p=p.get(j)||null,o(w,p,""+N,E);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Da:return p=p.get(N.key===null?j:N.key)||null,c(w,p,N,E);case Tr:return p=p.get(N.key===null?j:N.key)||null,d(w,p,N,E);case Ss:var P=N._init;return f(p,w,j,P(N._payload),E)}if(Dn(N)||wn(N))return p=p.get(j)||null,u(w,p,N,E,null);Wa(w,N)}return null}function y(p,w,j,N){for(var E=null,P=null,k=w,A=w=0,M=null;k!==null&&A<j.length;A++){k.index>A?(M=k,k=null):M=k.sibling;var T=m(p,k,j[A],N);if(T===null){k===null&&(k=M);break}e&&k&&T.alternate===null&&t(p,k),w=i(T,w,A),P===null?E=T:P.sibling=T,P=T,k=M}if(A===j.length)return s(p,k),je&&sr(p,A),E;if(k===null){for(;A<j.length;A++)k=h(p,j[A],N),k!==null&&(w=i(k,w,A),P===null?E=k:P.sibling=k,P=k);return je&&sr(p,A),E}for(k=n(p,k);A<j.length;A++)M=f(k,p,A,j[A],N),M!==null&&(e&&M.alternate!==null&&k.delete(M.key===null?A:M.key),w=i(M,w,A),P===null?E=M:P.sibling=M,P=M);return e&&k.forEach(function($){return t(p,$)}),je&&sr(p,A),E}function g(p,w,j,N){var E=wn(j);if(typeof E!="function")throw Error(U(150));if(j=E.call(j),j==null)throw Error(U(151));for(var P=E=null,k=w,A=w=0,M=null,T=j.next();k!==null&&!T.done;A++,T=j.next()){k.index>A?(M=k,k=null):M=k.sibling;var $=m(p,k,T.value,N);if($===null){k===null&&(k=M);break}e&&k&&$.alternate===null&&t(p,k),w=i($,w,A),P===null?E=$:P.sibling=$,P=$,k=M}if(T.done)return s(p,k),je&&sr(p,A),E;if(k===null){for(;!T.done;A++,T=j.next())T=h(p,T.value,N),T!==null&&(w=i(T,w,A),P===null?E=T:P.sibling=T,P=T);return je&&sr(p,A),E}for(k=n(p,k);!T.done;A++,T=j.next())T=f(k,p,A,T.value,N),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?A:T.key),w=i(T,w,A),P===null?E=T:P.sibling=T,P=T);return e&&k.forEach(function(F){return t(p,F)}),je&&sr(p,A),E}function v(p,w,j,N){if(typeof j=="object"&&j!==null&&j.type===Rr&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Da:e:{for(var E=j.key,P=w;P!==null;){if(P.key===E){if(E=j.type,E===Rr){if(P.tag===7){s(p,P.sibling),w=a(P,j.props.children),w.return=p,p=w;break e}}else if(P.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ss&&uu(E)===P.type){s(p,P.sibling),w=a(P,j.props),w.ref=kn(p,P,j),w.return=p,p=w;break e}s(p,P);break}else t(p,P);P=P.sibling}j.type===Rr?(w=dr(j.props.children,p.mode,N,j.key),w.return=p,p=w):(N=mi(j.type,j.key,j.props,null,p.mode,N),N.ref=kn(p,w,j),N.return=p,p=N)}return l(p);case Tr:e:{for(P=j.key;w!==null;){if(w.key===P)if(w.tag===4&&w.stateNode.containerInfo===j.containerInfo&&w.stateNode.implementation===j.implementation){s(p,w.sibling),w=a(w,j.children||[]),w.return=p,p=w;break e}else{s(p,w);break}else t(p,w);w=w.sibling}w=Vl(j,p.mode,N),w.return=p,p=w}return l(p);case Ss:return P=j._init,v(p,w,P(j._payload),N)}if(Dn(j))return y(p,w,j,N);if(wn(j))return g(p,w,j,N);Wa(p,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,w!==null&&w.tag===6?(s(p,w.sibling),w=a(w,j),w.return=p,p=w):(s(p,w),w=Wl(j,p.mode,N),w.return=p,p=w),l(p)):s(p,w)}return v}var Zr=Fm(!0),Bm=Fm(!1),Ri=Gs(null),Mi=null,Ur=null,Dc=null;function Lc(){Dc=Ur=Mi=null}function $c(e){var t=Ri.current;be(Ri),e._currentValue=t}function Do(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function Vr(e,t){Mi=e,Dc=Ur=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(Dc!==e)if(e={context:e,memoizedValue:t,next:null},Ur===null){if(Mi===null)throw Error(U(308));Ur=e,Mi.dependencies={lanes:0,firstContext:e}}else Ur=Ur.next=e;return t}var lr=null;function Ic(e){lr===null?lr=[e]:lr.push(e)}function qm(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,Ic(t)):(s.next=a.next,a.next=s),t.interleaved=s,ys(e,n)}function ys(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Cs=!1;function Oc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,fe&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,ys(e,s)}return a=n.interleaved,a===null?(t.next=t,Ic(n)):(t.next=a.next,a.next=t),n.interleaved=t,ys(e,s)}function li(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Nc(e,s)}}function hu(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=l:i=i.next=l,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Ai(e,t,s,n){var a=e.updateQueue;Cs=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;l=0,u=d=c=null,o=i;do{var m=o.lane,f=o.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,g=o;switch(m=t,f=s,g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(f,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,m=typeof y=="function"?y.call(f,h,m):y,m==null)break e;h=Se({},h,m);break e;case 2:Cs=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[o]:m.push(o))}else f={eventTime:f,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=f,c=h):u=u.next=f,l|=m;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;m=o,o=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);pr|=l,e.lanes=l,e.memoizedState=h}}function mu(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(U(191,a));a.call(n)}}}var ba={},as=Gs(ba),la=Gs(ba),oa=Gs(ba);function or(e){if(e===ba)throw Error(U(174));return e}function Uc(e,t){switch(ye(oa,t),ye(la,e),ye(as,ba),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fo(t,e)}be(as),ye(as,t)}function en(){be(as),be(la),be(oa)}function Wm(e){or(oa.current);var t=or(as.current),s=fo(t,e.type);t!==s&&(ye(la,e),ye(as,s))}function zc(e){la.current===e&&(be(as),be(la))}var _e=Gs(0);function Di(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ul=[];function Fc(){for(var e=0;e<Ul.length;e++)Ul[e]._workInProgressVersionPrimary=null;Ul.length=0}var oi=bs.ReactCurrentDispatcher,zl=bs.ReactCurrentBatchConfig,fr=0,ke=null,De=null,Oe=null,Li=!1,Hn=!1,ca=0,Q0=0;function Ge(){throw Error(U(321))}function Bc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Vt(e[s],t[s]))return!1;return!0}function qc(e,t,s,n,a,i){if(fr=i,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oi.current=e===null||e.memoizedState===null?ex:tx,e=s(n,a),Hn){i=0;do{if(Hn=!1,ca=0,25<=i)throw Error(U(301));i+=1,Oe=De=null,t.updateQueue=null,oi.current=sx,e=s(n,a)}while(Hn)}if(oi.current=$i,t=De!==null&&De.next!==null,fr=0,Oe=De=ke=null,Li=!1,t)throw Error(U(300));return e}function Hc(){var e=ca!==0;return ca=0,e}function ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?ke.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function Tt(){if(De===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var t=Oe===null?ke.memoizedState:Oe.next;if(t!==null)Oe=t,De=e;else{if(e===null)throw Error(U(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Oe===null?ke.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function da(e,t){return typeof t=="function"?t(e):t}function Fl(e){var t=Tt(),s=t.queue;if(s===null)throw Error(U(311));s.lastRenderedReducer=e;var n=De,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((fr&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=n):c=c.next=h,ke.lanes|=u,pr|=u}d=d.next}while(d!==null&&d!==i);c===null?l=n:c.next=o,Vt(n,t.memoizedState)||(dt=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do i=a.lane,ke.lanes|=i,pr|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Bl(e){var t=Tt(),s=t.queue;if(s===null)throw Error(U(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);Vt(i,t.memoizedState)||(dt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function Vm(){}function Gm(e,t){var s=ke,n=Tt(),a=t(),i=!Vt(n.memoizedState,a);if(i&&(n.memoizedState=a,dt=!0),n=n.queue,Wc(Qm.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||Oe!==null&&Oe.memoizedState.tag&1){if(s.flags|=2048,ua(9,Km.bind(null,s,n,a,t),void 0,null),Ue===null)throw Error(U(349));fr&30||Jm(s,t,a)}return a}function Jm(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Km(e,t,s,n){t.value=s,t.getSnapshot=n,Ym(t)&&Xm(e)}function Qm(e,t,s){return s(function(){Ym(t)&&Xm(e)})}function Ym(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Vt(e,s)}catch{return!0}}function Xm(e){var t=ys(e,1);t!==null&&Ht(t,e,1,-1)}function fu(e){var t=ts();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},t.queue=e,e=e.dispatch=Z0.bind(null,ke,e),[t.memoizedState,e]}function ua(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function Zm(){return Tt().memoizedState}function ci(e,t,s,n){var a=ts();ke.flags|=e,a.memoizedState=ua(1|t,s,void 0,n===void 0?null:n)}function tl(e,t,s,n){var a=Tt();n=n===void 0?null:n;var i=void 0;if(De!==null){var l=De.memoizedState;if(i=l.destroy,n!==null&&Bc(n,l.deps)){a.memoizedState=ua(t,s,i,n);return}}ke.flags|=e,a.memoizedState=ua(1|t,s,i,n)}function pu(e,t){return ci(8390656,8,e,t)}function Wc(e,t){return tl(2048,8,e,t)}function ef(e,t){return tl(4,2,e,t)}function tf(e,t){return tl(4,4,e,t)}function sf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rf(e,t,s){return s=s!=null?s.concat([e]):null,tl(4,4,sf.bind(null,t,e),s)}function Vc(){}function nf(e,t){var s=Tt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Bc(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function af(e,t){var s=Tt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Bc(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function lf(e,t,s){return fr&21?(Vt(s,t)||(s=um(),ke.lanes|=s,pr|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=s)}function Y0(e,t){var s=ge;ge=s!==0&&4>s?s:4,e(!0);var n=zl.transition;zl.transition={};try{e(!1),t()}finally{ge=s,zl.transition=n}}function of(){return Tt().memoizedState}function X0(e,t,s){var n=zs(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},cf(e))df(t,s);else if(s=qm(e,t,s,n),s!==null){var a=et();Ht(s,e,n,a),uf(s,t,n)}}function Z0(e,t,s){var n=zs(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(cf(e))df(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,s);if(a.hasEagerState=!0,a.eagerState=o,Vt(o,l)){var c=t.interleaved;c===null?(a.next=a,Ic(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=qm(e,t,a,n),s!==null&&(a=et(),Ht(s,e,n,a),uf(s,t,n))}}function cf(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function df(e,t){Hn=Li=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function uf(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Nc(e,s)}}var $i={readContext:Pt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},ex={readContext:Pt,useCallback:function(e,t){return ts().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:pu,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,ci(4194308,4,sf.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ci(4194308,4,e,t)},useInsertionEffect:function(e,t){return ci(4,2,e,t)},useMemo:function(e,t){var s=ts();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=ts();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=X0.bind(null,ke,e),[n.memoizedState,e]},useRef:function(e){var t=ts();return e={current:e},t.memoizedState=e},useState:fu,useDebugValue:Vc,useDeferredValue:function(e){return ts().memoizedState=e},useTransition:function(){var e=fu(!1),t=e[0];return e=Y0.bind(null,e[1]),ts().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=ke,a=ts();if(je){if(s===void 0)throw Error(U(407));s=s()}else{if(s=t(),Ue===null)throw Error(U(349));fr&30||Jm(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,pu(Qm.bind(null,n,i,e),[e]),n.flags|=2048,ua(9,Km.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=ts(),t=Ue.identifierPrefix;if(je){var s=hs,n=us;s=(n&~(1<<32-qt(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=ca++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Q0++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tx={readContext:Pt,useCallback:nf,useContext:Pt,useEffect:Wc,useImperativeHandle:rf,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:af,useReducer:Fl,useRef:Zm,useState:function(){return Fl(da)},useDebugValue:Vc,useDeferredValue:function(e){var t=Tt();return lf(t,De.memoizedState,e)},useTransition:function(){var e=Fl(da)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:Vm,useSyncExternalStore:Gm,useId:of,unstable_isNewReconciler:!1},sx={readContext:Pt,useCallback:nf,useContext:Pt,useEffect:Wc,useImperativeHandle:rf,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:af,useReducer:Bl,useRef:Zm,useState:function(){return Bl(da)},useDebugValue:Vc,useDeferredValue:function(e){var t=Tt();return De===null?t.memoizedState=e:lf(t,De.memoizedState,e)},useTransition:function(){var e=Bl(da)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:Vm,useSyncExternalStore:Gm,useId:of,unstable_isNewReconciler:!1};function $t(e,t){if(e&&e.defaultProps){t=Se({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Lo(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:Se({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var sl={isMounted:function(e){return(e=e._reactInternals)?vr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=et(),a=zs(e),i=fs(n,a);i.payload=t,s!=null&&(i.callback=s),t=Os(e,i,a),t!==null&&(Ht(t,e,a,n),li(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=et(),a=zs(e),i=fs(n,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=Os(e,i,a),t!==null&&(Ht(t,e,a,n),li(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=et(),n=zs(e),a=fs(s,n);a.tag=2,t!=null&&(a.callback=t),t=Os(e,a,n),t!==null&&(Ht(t,e,n,s),li(t,e,n))}};function gu(e,t,s,n,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!ra(s,n)||!ra(a,i):!0}function hf(e,t,s){var n=!1,a=qs,i=t.contextType;return typeof i=="object"&&i!==null?i=Pt(i):(a=ht(t)?hr:Qe.current,n=t.contextTypes,i=(n=n!=null)?Yr(e,a):qs),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function xu(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&sl.enqueueReplaceState(t,t.state,null)}function $o(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},Oc(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Pt(i):(i=ht(t)?hr:Qe.current,a.context=Yr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Lo(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&sl.enqueueReplaceState(a,a.state,null),Ai(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function tn(e,t){try{var s="",n=t;do s+=Tg(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function ql(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Io(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var rx=typeof WeakMap=="function"?WeakMap:Map;function mf(e,t,s){s=fs(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Oi||(Oi=!0,Go=n),Io(e,t)},s}function ff(e,t,s){s=fs(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){Io(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Io(e,t),typeof n!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),s}function yu(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new rx;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=xx.bind(null,e,t,s),t.then(e,e))}function vu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wu(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=fs(-1,1),t.tag=2,Os(s,t,1))),s.lanes|=1),e)}var nx=bs.ReactCurrentOwner,dt=!1;function Xe(e,t,s,n){t.child=e===null?Bm(t,null,s,n):Zr(t,e.child,s,n)}function bu(e,t,s,n,a){s=s.render;var i=t.ref;return Vr(t,a),n=qc(e,t,s,n,i,a),s=Hc(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,vs(e,t,a)):(je&&s&&Rc(t),t.flags|=1,Xe(e,t,n,a),t.child)}function ju(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!ed(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,pf(e,t,i,n,a)):(e=mi(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(s=s.compare,s=s!==null?s:ra,s(l,n)&&e.ref===t.ref)return vs(e,t,a)}return t.flags|=1,e=Fs(i,n),e.ref=t.ref,e.return=t,t.child=e}function pf(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(ra(i,n)&&e.ref===t.ref)if(dt=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(dt=!0);else return t.lanes=e.lanes,vs(e,t,a)}return Oo(e,t,s,n,a)}function gf(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Fr,gt),gt|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ye(Fr,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,ye(Fr,gt),gt|=n}else i!==null?(n=i.baseLanes|s,t.memoizedState=null):n=s,ye(Fr,gt),gt|=n;return Xe(e,t,a,s),t.child}function xf(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Oo(e,t,s,n,a){var i=ht(s)?hr:Qe.current;return i=Yr(t,i),Vr(t,a),s=qc(e,t,s,n,i,a),n=Hc(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,vs(e,t,a)):(je&&n&&Rc(t),t.flags|=1,Xe(e,t,s,a),t.child)}function Nu(e,t,s,n,a){if(ht(s)){var i=!0;Ei(t)}else i=!1;if(Vr(t,a),t.stateNode===null)di(e,t),hf(t,s,n),$o(t,s,n,a),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=Pt(d):(d=ht(s)?hr:Qe.current,d=Yr(t,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&xu(t,l,n,d),Cs=!1;var m=t.memoizedState;l.state=m,Ai(t,n,l,a),c=t.memoizedState,o!==n||m!==c||ut.current||Cs?(typeof u=="function"&&(Lo(t,s,u,n),c=t.memoizedState),(o=Cs||gu(t,s,o,n,m,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Hm(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:$t(t.type,o),l.props=d,h=t.pendingProps,m=l.context,c=s.contextType,typeof c=="object"&&c!==null?c=Pt(c):(c=ht(s)?hr:Qe.current,c=Yr(t,c));var f=s.getDerivedStateFromProps;(u=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||m!==c)&&xu(t,l,n,c),Cs=!1,m=t.memoizedState,l.state=m,Ai(t,n,l,a);var y=t.memoizedState;o!==h||m!==y||ut.current||Cs?(typeof f=="function"&&(Lo(t,s,f,n),y=t.memoizedState),(d=Cs||gu(t,s,d,n,m,y,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,y,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),l.props=n,l.state=y,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Uo(e,t,s,n,i,a)}function Uo(e,t,s,n,a,i){xf(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return a&&ou(t,s,!1),vs(e,t,i);n=t.stateNode,nx.current=t;var o=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=Zr(t,e.child,null,i),t.child=Zr(t,null,o,i)):Xe(e,t,o,i),t.memoizedState=n.state,a&&ou(t,s,!0),t.child}function yf(e){var t=e.stateNode;t.pendingContext?lu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lu(e,t.context,!1),Uc(e,t.containerInfo)}function _u(e,t,s,n,a){return Xr(),Ac(a),t.flags|=256,Xe(e,t,s,n),t.child}var zo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function vf(e,t,s){var n=t.pendingProps,a=_e.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ye(_e,a&1),e===null)return Ao(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=al(l,n,0,null),e=dr(e,n,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Fo(s),t.memoizedState=zo,e):Gc(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return ax(e,t,l,n,o,a,s);if(i){i=n.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Fs(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Fs(o,i):(i=dr(i,l,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?Fo(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~s,t.memoizedState=zo,n}return i=e.child,e=i.sibling,n=Fs(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Gc(e,t){return t=al({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Va(e,t,s,n){return n!==null&&Ac(n),Zr(t,e.child,null,s),e=Gc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ax(e,t,s,n,a,i,l){if(s)return t.flags&256?(t.flags&=-257,n=ql(Error(U(422))),Va(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=al({mode:"visible",children:n.children},a,0,null),i=dr(i,a,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Zr(t,e.child,null,l),t.child.memoizedState=Fo(l),t.memoizedState=zo,i);if(!(t.mode&1))return Va(e,t,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(U(419)),n=ql(i,n,void 0),Va(e,t,l,n)}if(o=(l&e.childLanes)!==0,dt||o){if(n=Ue,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ys(e,a),Ht(n,e,a,-1))}return Zc(),n=ql(Error(U(421))),Va(e,t,l,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=yx.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,xt=Is(a.nextSibling),yt=t,je=!0,Ut=null,e!==null&&(_t[kt++]=us,_t[kt++]=hs,_t[kt++]=mr,us=e.id,hs=e.overflow,mr=t),t=Gc(t,n.children),t.flags|=4096,t)}function ku(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Do(e.return,t,s)}function Hl(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function wf(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Xe(e,t,n.children,s),n=_e.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ku(e,s,t);else if(e.tag===19)ku(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ye(_e,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&Di(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Hl(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Di(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Hl(t,!0,s,null,i);break;case"together":Hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function di(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vs(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),pr|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,s=Fs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Fs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function ix(e,t,s){switch(t.tag){case 3:yf(t),Xr();break;case 5:Wm(t);break;case 1:ht(t.type)&&Ei(t);break;case 4:Uc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ye(Ri,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ye(_e,_e.current&1),t.flags|=128,null):s&t.child.childLanes?vf(e,t,s):(ye(_e,_e.current&1),e=vs(e,t,s),e!==null?e.sibling:null);ye(_e,_e.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return wf(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ye(_e,_e.current),n)break;return null;case 22:case 23:return t.lanes=0,gf(e,t,s)}return vs(e,t,s)}var bf,Bo,jf,Nf;bf=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bo=function(){};jf=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,or(as.current);var i=null;switch(s){case"input":a=co(e,a),n=co(e,n),i=[];break;case"select":a=Se({},a,{value:void 0}),n=Se({},n,{value:void 0}),i=[];break;case"textarea":a=mo(e,a),n=mo(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Si)}po(s,n);var l;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Qn.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(s||(s={}),s[l]=c[l])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Qn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&we("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Nf=function(e,t,s,n){s!==n&&(t.flags|=4)};function Sn(e,t){if(!je)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function lx(e,t,s){var n=t.pendingProps;switch(Mc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return ht(t.type)&&Ci(),Je(t),null;case 3:return n=t.stateNode,en(),be(ut),be(Qe),Fc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ha(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ut!==null&&(Qo(Ut),Ut=null))),Bo(e,t),Je(t),null;case 5:zc(t);var a=or(oa.current);if(s=t.type,e!==null&&t.stateNode!=null)jf(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(U(166));return Je(t),null}if(e=or(as.current),Ha(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[ss]=t,n[ia]=i,e=(t.mode&1)!==0,s){case"dialog":we("cancel",n),we("close",n);break;case"iframe":case"object":case"embed":we("load",n);break;case"video":case"audio":for(a=0;a<$n.length;a++)we($n[a],n);break;case"source":we("error",n);break;case"img":case"image":case"link":we("error",n),we("load",n);break;case"details":we("toggle",n);break;case"input":Dd(n,i),we("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},we("invalid",n);break;case"textarea":$d(n,i),we("invalid",n)}po(s,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&qa(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&qa(n.textContent,o,e),a=["children",""+o]):Qn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&we("scroll",n)}switch(s){case"input":La(n),Ld(n,i,!0);break;case"textarea":La(n),Id(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Si)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qh(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(s,{is:n.is}):(e=l.createElement(s),s==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,s),e[ss]=t,e[ia]=n,bf(e,t,!1,!1),t.stateNode=e;e:{switch(l=go(s,n),s){case"dialog":we("cancel",e),we("close",e),a=n;break;case"iframe":case"object":case"embed":we("load",e),a=n;break;case"video":case"audio":for(a=0;a<$n.length;a++)we($n[a],e);a=n;break;case"source":we("error",e),a=n;break;case"img":case"image":case"link":we("error",e),we("load",e),a=n;break;case"details":we("toggle",e),a=n;break;case"input":Dd(e,n),a=co(e,n),we("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Se({},n,{value:void 0}),we("invalid",e);break;case"textarea":$d(e,n),a=mo(e,n),we("invalid",e);break;default:a=n}po(s,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Zh(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Yh(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Yn(e,c):typeof c=="number"&&Yn(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&we("scroll",e):c!=null&&xc(e,i,c,l))}switch(s){case"input":La(e),Ld(e,n,!1);break;case"textarea":La(e),Id(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Bs(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Br(e,!!n.multiple,i,!1):n.defaultValue!=null&&Br(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Si)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Je(t),null;case 6:if(e&&t.stateNode!=null)Nf(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(U(166));if(s=or(oa.current),or(as.current),Ha(t)){if(n=t.stateNode,s=t.memoizedProps,n[ss]=t,(i=n.nodeValue!==s)&&(e=yt,e!==null))switch(e.tag){case 3:qa(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qa(n.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[ss]=t,t.stateNode=n}return Je(t),null;case 13:if(be(_e),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(je&&xt!==null&&t.mode&1&&!(t.flags&128))zm(),Xr(),t.flags|=98560,i=!1;else if(i=Ha(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(U(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[ss]=t}else Xr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Je(t),i=!1}else Ut!==null&&(Qo(Ut),Ut=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||_e.current&1?Le===0&&(Le=3):Zc())),t.updateQueue!==null&&(t.flags|=4),Je(t),null);case 4:return en(),Bo(e,t),e===null&&na(t.stateNode.containerInfo),Je(t),null;case 10:return $c(t.type._context),Je(t),null;case 17:return ht(t.type)&&Ci(),Je(t),null;case 19:if(be(_e),i=t.memoizedState,i===null)return Je(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)Sn(i,!1);else{if(Le!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Di(e),l!==null){for(t.flags|=128,Sn(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)i=s,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ye(_e,_e.current&1|2),t.child}e=e.sibling}i.tail!==null&&Re()>sn&&(t.flags|=128,n=!0,Sn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Di(l),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Sn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!je)return Je(t),null}else 2*Re()-i.renderingStartTime>sn&&s!==1073741824&&(t.flags|=128,n=!0,Sn(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(s=i.last,s!==null?s.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Re(),t.sibling=null,s=_e.current,ye(_e,n?s&1|2:s&1),t):(Je(t),null);case 22:case 23:return Xc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?gt&1073741824&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function ox(e,t){switch(Mc(t),t.tag){case 1:return ht(t.type)&&Ci(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return en(),be(ut),be(Qe),Fc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zc(t),null;case 13:if(be(_e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Xr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(_e),null;case 4:return en(),null;case 10:return $c(t.type._context),null;case 22:case 23:return Xc(),null;case 24:return null;default:return null}}var Ga=!1,Ke=!1,cx=typeof WeakSet=="function"?WeakSet:Set,K=null;function zr(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ee(e,t,n)}else s.current=null}function qo(e,t,s){try{s()}catch(n){Ee(e,t,n)}}var Su=!1;function dx(e,t){if(So=Ni,e=Cm(),Tc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var f;h!==s||a!==0&&h.nodeType!==3||(o=l+a),h!==i||n!==0&&h.nodeType!==3||(c=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(f=h.firstChild)!==null;)m=h,h=f;for(;;){if(h===e)break t;if(m===s&&++d===a&&(o=l),m===i&&++u===n&&(c=l),(f=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=f}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Co={focusedElem:e,selectionRange:s},Ni=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,v=y.memoizedState,p=t.stateNode,w=p.getSnapshotBeforeUpdate(t.elementType===t.type?g:$t(t.type,g),v);p.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(N){Ee(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return y=Su,Su=!1,y}function Wn(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&qo(t,s,i)}a=a.next}while(a!==n)}}function rl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function Ho(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function _f(e){var t=e.alternate;t!==null&&(e.alternate=null,_f(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ss],delete t[ia],delete t[To],delete t[V0],delete t[G0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kf(e){return e.tag===5||e.tag===3||e.tag===4}function Cu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wo(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Si));else if(n!==4&&(e=e.child,e!==null))for(Wo(e,t,s),e=e.sibling;e!==null;)Wo(e,t,s),e=e.sibling}function Vo(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Vo(e,t,s),e=e.sibling;e!==null;)Vo(e,t,s),e=e.sibling}var Fe=null,It=!1;function Ns(e,t,s){for(s=s.child;s!==null;)Sf(e,t,s),s=s.sibling}function Sf(e,t,s){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(Ki,s)}catch{}switch(s.tag){case 5:Ke||zr(s,t);case 6:var n=Fe,a=It;Fe=null,Ns(e,t,s),Fe=n,It=a,Fe!==null&&(It?(e=Fe,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Fe.removeChild(s.stateNode));break;case 18:Fe!==null&&(It?(e=Fe,s=s.stateNode,e.nodeType===8?Il(e.parentNode,s):e.nodeType===1&&Il(e,s),ta(e)):Il(Fe,s.stateNode));break;case 4:n=Fe,a=It,Fe=s.stateNode.containerInfo,It=!0,Ns(e,t,s),Fe=n,It=a;break;case 0:case 11:case 14:case 15:if(!Ke&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&qo(s,t,l),a=a.next}while(a!==n)}Ns(e,t,s);break;case 1:if(!Ke&&(zr(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){Ee(s,t,o)}Ns(e,t,s);break;case 21:Ns(e,t,s);break;case 22:s.mode&1?(Ke=(n=Ke)||s.memoizedState!==null,Ns(e,t,s),Ke=n):Ns(e,t,s);break;default:Ns(e,t,s)}}function Eu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new cx),t.forEach(function(n){var a=vx.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function Lt(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Fe=o.stateNode,It=!1;break e;case 3:Fe=o.stateNode.containerInfo,It=!0;break e;case 4:Fe=o.stateNode.containerInfo,It=!0;break e}o=o.return}if(Fe===null)throw Error(U(160));Sf(i,l,a),Fe=null,It=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Ee(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cf(t,e),t=t.sibling}function Cf(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lt(t,e),Xt(e),n&4){try{Wn(3,e,e.return),rl(3,e)}catch(g){Ee(e,e.return,g)}try{Wn(5,e,e.return)}catch(g){Ee(e,e.return,g)}}break;case 1:Lt(t,e),Xt(e),n&512&&s!==null&&zr(s,s.return);break;case 5:if(Lt(t,e),Xt(e),n&512&&s!==null&&zr(s,s.return),e.flags&32){var a=e.stateNode;try{Yn(a,"")}catch(g){Ee(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=s!==null?s.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Jh(a,i),go(o,l);var d=go(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];u==="style"?Zh(a,h):u==="dangerouslySetInnerHTML"?Yh(a,h):u==="children"?Yn(a,h):xc(a,u,h,d)}switch(o){case"input":uo(a,i);break;case"textarea":Kh(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Br(a,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?Br(a,!!i.multiple,i.defaultValue,!0):Br(a,!!i.multiple,i.multiple?[]:"",!1))}a[ia]=i}catch(g){Ee(e,e.return,g)}}break;case 6:if(Lt(t,e),Xt(e),n&4){if(e.stateNode===null)throw Error(U(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Ee(e,e.return,g)}}break;case 3:if(Lt(t,e),Xt(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{ta(t.containerInfo)}catch(g){Ee(e,e.return,g)}break;case 4:Lt(t,e),Xt(e);break;case 13:Lt(t,e),Xt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Qc=Re())),n&4&&Eu(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(Ke=(d=Ke)||u,Lt(t,e),Ke=d):Lt(t,e),Xt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(K=e,u=e.child;u!==null;){for(h=K=u;K!==null;){switch(m=K,f=m.child,m.tag){case 0:case 11:case 14:case 15:Wn(4,m,m.return);break;case 1:zr(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){n=m,s=m.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){Ee(n,s,g)}}break;case 5:zr(m,m.return);break;case 22:if(m.memoizedState!==null){Tu(h);continue}}f!==null?(f.return=m,K=f):Tu(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Xh("display",l))}catch(g){Ee(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Ee(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Lt(t,e),Xt(e),n&4&&Eu(e);break;case 21:break;default:Lt(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(kf(s)){var n=s;break e}s=s.return}throw Error(U(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Yn(a,""),n.flags&=-33);var i=Cu(e);Vo(e,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=Cu(e);Wo(e,o,l);break;default:throw Error(U(161))}}catch(c){Ee(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ux(e,t,s){K=e,Ef(e)}function Ef(e,t,s){for(var n=(e.mode&1)!==0;K!==null;){var a=K,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||Ga;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||Ke;o=Ga;var d=Ke;if(Ga=l,(Ke=c)&&!d)for(K=a;K!==null;)l=K,c=l.child,l.tag===22&&l.memoizedState!==null?Ru(a):c!==null?(c.return=l,K=c):Ru(a);for(;i!==null;)K=i,Ef(i),i=i.sibling;K=a,Ga=o,Ke=d}Pu(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,K=i):Pu(e)}}function Pu(e){for(;K!==null;){var t=K;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ke||rl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ke)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:$t(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&mu(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}mu(t,l,s)}break;case 5:var o=t.stateNode;if(s===null&&t.flags&4){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ta(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Ke||t.flags&512&&Ho(t)}catch(m){Ee(t,t.return,m)}}if(t===e){K=null;break}if(s=t.sibling,s!==null){s.return=t.return,K=s;break}K=t.return}}function Tu(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var s=t.sibling;if(s!==null){s.return=t.return,K=s;break}K=t.return}}function Ru(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{rl(4,t)}catch(c){Ee(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ee(t,a,c)}}var i=t.return;try{Ho(t)}catch(c){Ee(t,i,c)}break;case 5:var l=t.return;try{Ho(t)}catch(c){Ee(t,l,c)}}}catch(c){Ee(t,t.return,c)}if(t===e){K=null;break}var o=t.sibling;if(o!==null){o.return=t.return,K=o;break}K=t.return}}var hx=Math.ceil,Ii=bs.ReactCurrentDispatcher,Jc=bs.ReactCurrentOwner,Ct=bs.ReactCurrentBatchConfig,fe=0,Ue=null,Me=null,qe=0,gt=0,Fr=Gs(0),Le=0,ha=null,pr=0,nl=0,Kc=0,Vn=null,ot=null,Qc=0,sn=1/0,os=null,Oi=!1,Go=null,Us=null,Ja=!1,As=null,Ui=0,Gn=0,Jo=null,ui=-1,hi=0;function et(){return fe&6?Re():ui!==-1?ui:ui=Re()}function zs(e){return e.mode&1?fe&2&&qe!==0?qe&-qe:K0.transition!==null?(hi===0&&(hi=um()),hi):(e=ge,e!==0||(e=window.event,e=e===void 0?16:ym(e.type)),e):1}function Ht(e,t,s,n){if(50<Gn)throw Gn=0,Jo=null,Error(U(185));ya(e,s,n),(!(fe&2)||e!==Ue)&&(e===Ue&&(!(fe&2)&&(nl|=s),Le===4&&Ts(e,qe)),mt(e,n),s===1&&fe===0&&!(t.mode&1)&&(sn=Re()+500,el&&Js()))}function mt(e,t){var s=e.callbackNode;Kg(e,t);var n=ji(e,e===Ue?qe:0);if(n===0)s!==null&&zd(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&zd(s),t===1)e.tag===0?J0(Mu.bind(null,e)):Im(Mu.bind(null,e)),H0(function(){!(fe&6)&&Js()}),s=null;else{switch(hm(n)){case 1:s=jc;break;case 4:s=cm;break;case 16:s=bi;break;case 536870912:s=dm;break;default:s=bi}s=$f(s,Pf.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Pf(e,t){if(ui=-1,hi=0,fe&6)throw Error(U(327));var s=e.callbackNode;if(Gr()&&e.callbackNode!==s)return null;var n=ji(e,e===Ue?qe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=zi(e,n);else{t=n;var a=fe;fe|=2;var i=Rf();(Ue!==e||qe!==t)&&(os=null,sn=Re()+500,cr(e,t));do try{px();break}catch(o){Tf(e,o)}while(!0);Lc(),Ii.current=i,fe=a,Me!==null?t=0:(Ue=null,qe=0,t=Le)}if(t!==0){if(t===2&&(a=bo(e),a!==0&&(n=a,t=Ko(e,a))),t===1)throw s=ha,cr(e,0),Ts(e,n),mt(e,Re()),s;if(t===6)Ts(e,n);else{if(a=e.current.alternate,!(n&30)&&!mx(a)&&(t=zi(e,n),t===2&&(i=bo(e),i!==0&&(n=i,t=Ko(e,i))),t===1))throw s=ha,cr(e,0),Ts(e,n),mt(e,Re()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(U(345));case 2:rr(e,ot,os);break;case 3:if(Ts(e,n),(n&130023424)===n&&(t=Qc+500-Re(),10<t)){if(ji(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){et(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Po(rr.bind(null,e,ot,os),t);break}rr(e,ot,os);break;case 4:if(Ts(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-qt(n);i=1<<l,l=t[l],l>a&&(a=l),n&=~i}if(n=a,n=Re()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*hx(n/1960))-n,10<n){e.timeoutHandle=Po(rr.bind(null,e,ot,os),n);break}rr(e,ot,os);break;case 5:rr(e,ot,os);break;default:throw Error(U(329))}}}return mt(e,Re()),e.callbackNode===s?Pf.bind(null,e):null}function Ko(e,t){var s=Vn;return e.current.memoizedState.isDehydrated&&(cr(e,t).flags|=256),e=zi(e,t),e!==2&&(t=ot,ot=s,t!==null&&Qo(t)),e}function Qo(e){ot===null?ot=e:ot.push.apply(ot,e)}function mx(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!Vt(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ts(e,t){for(t&=~Kc,t&=~nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-qt(t),n=1<<s;e[s]=-1,t&=~n}}function Mu(e){if(fe&6)throw Error(U(327));Gr();var t=ji(e,0);if(!(t&1))return mt(e,Re()),null;var s=zi(e,t);if(e.tag!==0&&s===2){var n=bo(e);n!==0&&(t=n,s=Ko(e,n))}if(s===1)throw s=ha,cr(e,0),Ts(e,t),mt(e,Re()),s;if(s===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,rr(e,ot,os),mt(e,Re()),null}function Yc(e,t){var s=fe;fe|=1;try{return e(t)}finally{fe=s,fe===0&&(sn=Re()+500,el&&Js())}}function gr(e){As!==null&&As.tag===0&&!(fe&6)&&Gr();var t=fe;fe|=1;var s=Ct.transition,n=ge;try{if(Ct.transition=null,ge=1,e)return e()}finally{ge=n,Ct.transition=s,fe=t,!(fe&6)&&Js()}}function Xc(){gt=Fr.current,be(Fr)}function cr(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,q0(s)),Me!==null)for(s=Me.return;s!==null;){var n=s;switch(Mc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ci();break;case 3:en(),be(ut),be(Qe),Fc();break;case 5:zc(n);break;case 4:en();break;case 13:be(_e);break;case 19:be(_e);break;case 10:$c(n.type._context);break;case 22:case 23:Xc()}s=s.return}if(Ue=e,Me=e=Fs(e.current,null),qe=gt=t,Le=0,ha=null,Kc=nl=pr=0,ot=Vn=null,lr!==null){for(t=0;t<lr.length;t++)if(s=lr[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}s.pending=n}lr=null}return e}function Tf(e,t){do{var s=Me;try{if(Lc(),oi.current=$i,Li){for(var n=ke.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Li=!1}if(fr=0,Oe=De=ke=null,Hn=!1,ca=0,Jc.current=null,s===null||s.return===null){Le=1,ha=t,Me=null;break}e:{var i=e,l=s.return,o=s,c=t;if(t=qe,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=vu(l);if(f!==null){f.flags&=-257,wu(f,l,o,i,t),f.mode&1&&yu(i,d,t),t=f,c=d;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){yu(i,d,t),Zc();break e}c=Error(U(426))}}else if(je&&o.mode&1){var v=vu(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),wu(v,l,o,i,t),Ac(tn(c,o));break e}}i=c=tn(c,o),Le!==4&&(Le=2),Vn===null?Vn=[i]:Vn.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=mf(i,c,t);hu(i,p);break e;case 1:o=c;var w=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Us===null||!Us.has(j)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=ff(i,o,t);hu(i,N);break e}}i=i.return}while(i!==null)}Af(s)}catch(E){t=E,Me===s&&s!==null&&(Me=s=s.return);continue}break}while(!0)}function Rf(){var e=Ii.current;return Ii.current=$i,e===null?$i:e}function Zc(){(Le===0||Le===3||Le===2)&&(Le=4),Ue===null||!(pr&268435455)&&!(nl&268435455)||Ts(Ue,qe)}function zi(e,t){var s=fe;fe|=2;var n=Rf();(Ue!==e||qe!==t)&&(os=null,cr(e,t));do try{fx();break}catch(a){Tf(e,a)}while(!0);if(Lc(),fe=s,Ii.current=n,Me!==null)throw Error(U(261));return Ue=null,qe=0,Le}function fx(){for(;Me!==null;)Mf(Me)}function px(){for(;Me!==null&&!zg();)Mf(Me)}function Mf(e){var t=Lf(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?Af(e):Me=t,Jc.current=null}function Af(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=ox(s,t),s!==null){s.flags&=32767,Me=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Le=6,Me=null;return}}else if(s=lx(s,t,gt),s!==null){Me=s;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);Le===0&&(Le=5)}function rr(e,t,s){var n=ge,a=Ct.transition;try{Ct.transition=null,ge=1,gx(e,t,s,n)}finally{Ct.transition=a,ge=n}return null}function gx(e,t,s,n){do Gr();while(As!==null);if(fe&6)throw Error(U(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(Qg(e,i),e===Ue&&(Me=Ue=null,qe=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ja||(Ja=!0,$f(bi,function(){return Gr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Ct.transition,Ct.transition=null;var l=ge;ge=1;var o=fe;fe|=4,Jc.current=null,dx(e,s),Cf(s,e),$0(Co),Ni=!!So,Co=So=null,e.current=s,ux(s),Fg(),fe=o,ge=l,Ct.transition=i}else e.current=s;if(Ja&&(Ja=!1,As=e,Ui=a),i=e.pendingLanes,i===0&&(Us=null),Hg(s.stateNode),mt(e,Re()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Oi)throw Oi=!1,e=Go,Go=null,e;return Ui&1&&e.tag!==0&&Gr(),i=e.pendingLanes,i&1?e===Jo?Gn++:(Gn=0,Jo=e):Gn=0,Js(),null}function Gr(){if(As!==null){var e=hm(Ui),t=Ct.transition,s=ge;try{if(Ct.transition=null,ge=16>e?16:e,As===null)var n=!1;else{if(e=As,As=null,Ui=0,fe&6)throw Error(U(331));var a=fe;for(fe|=4,K=e.current;K!==null;){var i=K,l=i.child;if(K.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(K=d;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:Wn(8,u,i)}var h=u.child;if(h!==null)h.return=u,K=h;else for(;K!==null;){u=K;var m=u.sibling,f=u.return;if(_f(u),u===d){K=null;break}if(m!==null){m.return=f,K=m;break}K=f}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}K=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,K=l;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wn(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,K=p;break e}K=i.return}}var w=e.current;for(K=w;K!==null;){l=K;var j=l.child;if(l.subtreeFlags&2064&&j!==null)j.return=l,K=j;else e:for(l=w;K!==null;){if(o=K,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:rl(9,o)}}catch(E){Ee(o,o.return,E)}if(o===l){K=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,K=N;break e}K=o.return}}if(fe=a,Js(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(Ki,e)}catch{}n=!0}return n}finally{ge=s,Ct.transition=t}}return!1}function Au(e,t,s){t=tn(s,t),t=mf(e,t,1),e=Os(e,t,1),t=et(),e!==null&&(ya(e,1,t),mt(e,t))}function Ee(e,t,s){if(e.tag===3)Au(e,e,s);else for(;t!==null;){if(t.tag===3){Au(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Us===null||!Us.has(n))){e=tn(s,e),e=ff(t,e,1),t=Os(t,e,1),e=et(),t!==null&&(ya(t,1,e),mt(t,e));break}}t=t.return}}function xx(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&s,Ue===e&&(qe&s)===s&&(Le===4||Le===3&&(qe&130023424)===qe&&500>Re()-Qc?cr(e,0):Kc|=s),mt(e,t)}function Df(e,t){t===0&&(e.mode&1?(t=Oa,Oa<<=1,!(Oa&130023424)&&(Oa=4194304)):t=1);var s=et();e=ys(e,t),e!==null&&(ya(e,t,s),mt(e,s))}function yx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Df(e,s)}function vx(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(U(314))}n!==null&&n.delete(t),Df(e,s)}var Lf;Lf=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||ut.current)dt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return dt=!1,ix(e,t,s);dt=!!(e.flags&131072)}else dt=!1,je&&t.flags&1048576&&Om(t,Ti,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;di(e,t),e=t.pendingProps;var a=Yr(t,Qe.current);Vr(t,s),a=qc(null,t,n,e,a,s);var i=Hc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ht(n)?(i=!0,Ei(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Oc(t),a.updater=sl,t.stateNode=a,a._reactInternals=t,$o(t,n,e,s),t=Uo(null,t,n,!0,i,s)):(t.tag=0,je&&i&&Rc(t),Xe(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(di(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=bx(n),e=$t(n,e),a){case 0:t=Oo(null,t,n,e,s);break e;case 1:t=Nu(null,t,n,e,s);break e;case 11:t=bu(null,t,n,e,s);break e;case 14:t=ju(null,t,n,$t(n.type,e),s);break e}throw Error(U(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$t(n,a),Oo(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$t(n,a),Nu(e,t,n,a,s);case 3:e:{if(yf(t),e===null)throw Error(U(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Hm(e,t),Ai(t,n,null,s);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=tn(Error(U(423)),t),t=_u(e,t,n,s,a);break e}else if(n!==a){a=tn(Error(U(424)),t),t=_u(e,t,n,s,a);break e}else for(xt=Is(t.stateNode.containerInfo.firstChild),yt=t,je=!0,Ut=null,s=Bm(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Xr(),n===a){t=vs(e,t,s);break e}Xe(e,t,n,s)}t=t.child}return t;case 5:return Wm(t),e===null&&Ao(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Eo(n,a)?l=null:i!==null&&Eo(n,i)&&(t.flags|=32),xf(e,t),Xe(e,t,l,s),t.child;case 6:return e===null&&Ao(t),null;case 13:return vf(e,t,s);case 4:return Uc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Zr(t,null,n,s):Xe(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$t(n,a),bu(e,t,n,a,s);case 7:return Xe(e,t,t.pendingProps,s),t.child;case 8:return Xe(e,t,t.pendingProps.children,s),t.child;case 12:return Xe(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,ye(Ri,n._currentValue),n._currentValue=l,i!==null)if(Vt(i.value,l)){if(i.children===a.children&&!ut.current){t=vs(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=fs(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),Do(i.return,s,t),o.lanes|=s;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(U(341));l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),Do(l,s,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Xe(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Vr(t,s),a=Pt(a),n=n(a),t.flags|=1,Xe(e,t,n,s),t.child;case 14:return n=t.type,a=$t(n,t.pendingProps),a=$t(n.type,a),ju(e,t,n,a,s);case 15:return pf(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$t(n,a),di(e,t),t.tag=1,ht(n)?(e=!0,Ei(t)):e=!1,Vr(t,s),hf(t,n,a),$o(t,n,a,s),Uo(null,t,n,!0,e,s);case 19:return wf(e,t,s);case 22:return gf(e,t,s)}throw Error(U(156,t.tag))};function $f(e,t){return om(e,t)}function wx(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,s,n){return new wx(e,t,s,n)}function ed(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bx(e){if(typeof e=="function")return ed(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vc)return 11;if(e===wc)return 14}return 2}function Fs(e,t){var s=e.alternate;return s===null?(s=St(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function mi(e,t,s,n,a,i){var l=2;if(n=e,typeof e=="function")ed(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Rr:return dr(s.children,a,i,t);case yc:l=8,a|=8;break;case ao:return e=St(12,s,t,a|2),e.elementType=ao,e.lanes=i,e;case io:return e=St(13,s,t,a),e.elementType=io,e.lanes=i,e;case lo:return e=St(19,s,t,a),e.elementType=lo,e.lanes=i,e;case Wh:return al(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qh:l=10;break e;case Hh:l=9;break e;case vc:l=11;break e;case wc:l=14;break e;case Ss:l=16,n=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=St(l,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function dr(e,t,s,n){return e=St(7,e,n,t),e.lanes=s,e}function al(e,t,s,n){return e=St(22,e,n,t),e.elementType=Wh,e.lanes=s,e.stateNode={isHidden:!1},e}function Wl(e,t,s){return e=St(6,e,null,t),e.lanes=s,e}function Vl(e,t,s){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jx(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function td(e,t,s,n,a,i,l,o,c){return e=new jx(e,t,s,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=St(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oc(i),e}function Nx(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function If(e){if(!e)return qs;e=e._reactInternals;e:{if(vr(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var s=e.type;if(ht(s))return $m(e,s,t)}return t}function Of(e,t,s,n,a,i,l,o,c){return e=td(s,n,!0,e,a,i,l,o,c),e.context=If(null),s=e.current,n=et(),a=zs(s),i=fs(n,a),i.callback=t??null,Os(s,i,a),e.current.lanes=a,ya(e,a,n),mt(e,n),e}function il(e,t,s,n){var a=t.current,i=et(),l=zs(a);return s=If(s),t.context===null?t.context=s:t.pendingContext=s,t=fs(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Os(a,t,l),e!==null&&(Ht(e,a,l,i),li(e,a,l)),l}function Fi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Du(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function sd(e,t){Du(e,t),(e=e.alternate)&&Du(e,t)}function _x(){return null}var Uf=typeof reportError=="function"?reportError:function(e){console.error(e)};function rd(e){this._internalRoot=e}ll.prototype.render=rd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));il(e,t,null,null)};ll.prototype.unmount=rd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gr(function(){il(null,e,null,null)}),t[xs]=null}};function ll(e){this._internalRoot=e}ll.prototype.unstable_scheduleHydration=function(e){if(e){var t=pm();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Ps.length&&t!==0&&t<Ps[s].priority;s++);Ps.splice(s,0,e),s===0&&xm(e)}};function nd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lu(){}function kx(e,t,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Fi(l);i.call(d)}}var l=Of(t,n,e,0,null,!1,!1,"",Lu);return e._reactRootContainer=l,e[xs]=l.current,na(e.nodeType===8?e.parentNode:e),gr(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=Fi(c);o.call(d)}}var c=td(e,0,!1,null,null,!1,!1,"",Lu);return e._reactRootContainer=c,e[xs]=c.current,na(e.nodeType===8?e.parentNode:e),gr(function(){il(t,c,s,n)}),c}function cl(e,t,s,n,a){var i=s._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Fi(l);o.call(c)}}il(t,l,e,a)}else l=kx(s,t,e,a,n);return Fi(l)}mm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Ln(t.pendingLanes);s!==0&&(Nc(t,s|1),mt(t,Re()),!(fe&6)&&(sn=Re()+500,Js()))}break;case 13:gr(function(){var n=ys(e,1);if(n!==null){var a=et();Ht(n,e,1,a)}}),sd(e,1)}};_c=function(e){if(e.tag===13){var t=ys(e,134217728);if(t!==null){var s=et();Ht(t,e,134217728,s)}sd(e,134217728)}};fm=function(e){if(e.tag===13){var t=zs(e),s=ys(e,t);if(s!==null){var n=et();Ht(s,e,t,n)}sd(e,t)}};pm=function(){return ge};gm=function(e,t){var s=ge;try{return ge=e,t()}finally{ge=s}};yo=function(e,t,s){switch(t){case"input":if(uo(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=Zi(n);if(!a)throw Error(U(90));Gh(n),uo(n,a)}}}break;case"textarea":Kh(e,s);break;case"select":t=s.value,t!=null&&Br(e,!!s.multiple,t,!1)}};sm=Yc;rm=gr;var Sx={usingClientEntryPoint:!1,Events:[wa,Lr,Zi,em,tm,Yc]},Cn={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cx={bundleType:Cn.bundleType,version:Cn.version,rendererPackageName:Cn.rendererPackageName,rendererConfig:Cn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=im(e),e===null?null:e.stateNode},findFiberByHostInstance:Cn.findFiberByHostInstance||_x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{Ki=Ka.inject(Cx),ns=Ka}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sx;wt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nd(t))throw Error(U(200));return Nx(e,t,null,s)};wt.createRoot=function(e,t){if(!nd(e))throw Error(U(299));var s=!1,n="",a=Uf;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=td(e,1,!1,null,null,s,!1,n,a),e[xs]=t.current,na(e.nodeType===8?e.parentNode:e),new rd(t)};wt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=im(t),e=e===null?null:e.stateNode,e};wt.flushSync=function(e){return gr(e)};wt.hydrate=function(e,t,s){if(!ol(t))throw Error(U(200));return cl(null,e,t,!0,s)};wt.hydrateRoot=function(e,t,s){if(!nd(e))throw Error(U(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",l=Uf;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),t=Of(t,null,e,1,s??null,a,!1,i,l),e[xs]=t.current,na(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new ll(t)};wt.render=function(e,t,s){if(!ol(t))throw Error(U(200));return cl(null,e,t,!1,s)};wt.unmountComponentAtNode=function(e){if(!ol(e))throw Error(U(40));return e._reactRootContainer?(gr(function(){cl(null,null,e,!1,function(){e._reactRootContainer=null,e[xs]=null})}),!0):!1};wt.unstable_batchedUpdates=Yc;wt.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!ol(s))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return cl(e,t,s,!1,n)};wt.version="18.3.1-next-f1338f8080-20240426";function zf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zf)}catch(e){console.error(e)}}zf(),Uh.exports=wt;var ad=Uh.exports;const Ex=Ch(ad);var Ff,$u=ad;Ff=$u.createRoot,$u.hydrateRoot;var id={};Object.defineProperty(id,"__esModule",{value:!0});id.parse=Lx;id.serialize=$x;const Px=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Tx=/^[\u0021-\u003A\u003C-\u007E]*$/,Rx=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Mx=/^[\u0020-\u003A\u003D-\u007E]*$/,Ax=Object.prototype.toString,Dx=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function Lx(e,t){const s=new Dx,n=e.length;if(n<2)return s;const a=(t==null?void 0:t.decode)||Ix;let i=0;do{const l=e.indexOf("=",i);if(l===-1)break;const o=e.indexOf(";",i),c=o===-1?n:o;if(l>c){i=e.lastIndexOf(";",l-1)+1;continue}const d=Iu(e,i,l),u=Ou(e,l,d),h=e.slice(d,u);if(s[h]===void 0){let m=Iu(e,l+1,c),f=Ou(e,c,m);const y=a(e.slice(m,f));s[h]=y}i=c+1}while(i<n);return s}function Iu(e,t,s){do{const n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<s);return s}function Ou(e,t,s){for(;t>s;){const n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return s}function $x(e,t,s){const n=(s==null?void 0:s.encode)||encodeURIComponent;if(!Px.test(e))throw new TypeError(`argument name is invalid: ${e}`);const a=n(t);if(!Tx.test(a))throw new TypeError(`argument val is invalid: ${t}`);let i=e+"="+a;if(!s)return i;if(s.maxAge!==void 0){if(!Number.isInteger(s.maxAge))throw new TypeError(`option maxAge is invalid: ${s.maxAge}`);i+="; Max-Age="+s.maxAge}if(s.domain){if(!Rx.test(s.domain))throw new TypeError(`option domain is invalid: ${s.domain}`);i+="; Domain="+s.domain}if(s.path){if(!Mx.test(s.path))throw new TypeError(`option path is invalid: ${s.path}`);i+="; Path="+s.path}if(s.expires){if(!Ox(s.expires)||!Number.isFinite(s.expires.valueOf()))throw new TypeError(`option expires is invalid: ${s.expires}`);i+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.partitioned&&(i+="; Partitioned"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${s.sameSite}`)}return i}function Ix(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function Ox(e){return Ax.call(e)==="[object Date]"}/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Uu="popstate";function Ux(e={}){function t(n,a){let{pathname:i,search:l,hash:o}=n.location;return Yo("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:ma(a)}return Fx(t,s,null,e)}function Ne(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zx(){return Math.random().toString(36).substring(2,10)}function zu(e,t){return{usr:e.state,key:e.key,idx:t}}function Yo(e,t,s=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?mn(t):t,state:s,key:t&&t.key||n||zx()}}function ma({pathname:e="/",search:t="",hash:s=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function mn(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Fx(e,t,s,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,o="POP",c=null,d=u();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function u(){return(l.state||{idx:null}).idx}function h(){o="POP";let v=u(),p=v==null?null:v-d;d=v,c&&c({action:o,location:g.location,delta:p})}function m(v,p){o="PUSH";let w=Yo(g.location,v,p);d=u()+1;let j=zu(w,d),N=g.createHref(w);try{l.pushState(j,"",N)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(N)}i&&c&&c({action:o,location:g.location,delta:1})}function f(v,p){o="REPLACE";let w=Yo(g.location,v,p);d=u();let j=zu(w,d),N=g.createHref(w);l.replaceState(j,"",N),i&&c&&c({action:o,location:g.location,delta:0})}function y(v){let p=a.location.origin!=="null"?a.location.origin:a.location.href,w=typeof v=="string"?v:ma(v);return w=w.replace(/ $/,"%20"),Ne(p,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,p)}let g={get action(){return o},get location(){return e(a,l)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Uu,h),c=v,()=>{a.removeEventListener(Uu,h),c=null}},createHref(v){return t(a,v)},createURL:y,encodeLocation(v){let p=y(v);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:m,replace:f,go(v){return l.go(v)}};return g}function Bf(e,t,s="/"){return Bx(e,t,s,!1)}function Bx(e,t,s,n){let a=typeof t=="string"?mn(t):t,i=Hs(a.pathname||"/",s);if(i==null)return null;let l=qf(e);qx(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=ey(i);o=Xx(l[c],d,n)}return o}function qf(e,t=[],s=[],n=""){let a=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Ne(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let d=ps([n,c.relativePath]),u=s.concat(c);i.children&&i.children.length>0&&(Ne(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),qf(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:Qx(d,i.index),routesMeta:u})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let c of Hf(i.path))a(i,l,c)}),t}function Hf(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=Hf(n.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function qx(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Yx(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var Hx=/^:[\w-]+$/,Wx=3,Vx=2,Gx=1,Jx=10,Kx=-2,Fu=e=>e==="*";function Qx(e,t){let s=e.split("/"),n=s.length;return s.some(Fu)&&(n+=Kx),t&&(n+=Vx),s.filter(a=>!Fu(a)).reduce((a,i)=>a+(Hx.test(i)?Wx:i===""?Gx:Jx),n)}function Yx(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Xx(e,t,s=!1){let{routesMeta:n}=e,a={},i="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=Bi({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&s&&!n[n.length-1].route.index&&(h=Bi({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(a,h.params),l.push({params:a,pathname:ps([i,h.pathname]),pathnameBase:ny(ps([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=ps([i,h.pathnameBase]))}return l}function Bi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=Zx(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:h},m)=>{if(u==="*"){let y=o[m]||"";l=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const f=o[m];return h&&!f?d[u]=void 0:d[u]=(f||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function Zx(e,t=!1,s=!0){Gt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function ey(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Hs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function ty(e,t="/"){let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?mn(e):e;return{pathname:s?s.startsWith("/")?s:sy(s,t):t,search:ay(n),hash:iy(a)}}function sy(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Gl(e,t,s,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ry(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function ld(e){let t=ry(e);return t.map((s,n)=>n===t.length-1?s.pathname:s.pathnameBase)}function od(e,t,s,n=!1){let a;typeof e=="string"?a=mn(e):(a={...e},Ne(!a.pathname||!a.pathname.includes("?"),Gl("?","pathname","search",a)),Ne(!a.pathname||!a.pathname.includes("#"),Gl("#","pathname","hash",a)),Ne(!a.search||!a.search.includes("#"),Gl("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=s;else{let h=t.length-1;if(!n&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}o=h>=0?t[h]:"/"}let c=ty(a,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var ps=e=>e.join("/").replace(/\/\/+/g,"/"),ny=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ay=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ly(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Wf=["POST","PUT","PATCH","DELETE"];new Set(Wf);var oy=["GET",...Wf];new Set(oy);var fn=b.createContext(null);fn.displayName="DataRouter";var dl=b.createContext(null);dl.displayName="DataRouterState";var Vf=b.createContext({isTransitioning:!1});Vf.displayName="ViewTransition";var cy=b.createContext(new Map);cy.displayName="Fetchers";var dy=b.createContext(null);dy.displayName="Await";var Jt=b.createContext(null);Jt.displayName="Navigation";var ja=b.createContext(null);ja.displayName="Location";var is=b.createContext({outlet:null,matches:[],isDataRoute:!1});is.displayName="Route";var cd=b.createContext(null);cd.displayName="RouteError";function uy(e,{relative:t}={}){Ne(pn(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=b.useContext(Jt),{hash:a,pathname:i,search:l}=_a(e,{relative:t}),o=i;return s!=="/"&&(o=i==="/"?s:ps([s,i])),n.createHref({pathname:o,search:l,hash:a})}function pn(){return b.useContext(ja)!=null}function ls(){return Ne(pn(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(ja).location}var Gf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Jf(e){b.useContext(Jt).static||b.useLayoutEffect(e)}function Na(){let{isDataRoute:e}=b.useContext(is);return e?_y():hy()}function hy(){Ne(pn(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(fn),{basename:t,navigator:s}=b.useContext(Jt),{matches:n}=b.useContext(is),{pathname:a}=ls(),i=JSON.stringify(ld(n)),l=b.useRef(!1);return Jf(()=>{l.current=!0}),b.useCallback((c,d={})=>{if(Gt(l.current,Gf),!l.current)return;if(typeof c=="number"){s.go(c);return}let u=od(c,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:ps([t,u.pathname])),(d.replace?s.replace:s.push)(u,d.state,d)},[t,s,i,a,e])}b.createContext(null);function _a(e,{relative:t}={}){let{matches:s}=b.useContext(is),{pathname:n}=ls(),a=JSON.stringify(ld(s));return b.useMemo(()=>od(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function my(e,t){return Kf(e,t)}function Kf(e,t,s,n){var w;Ne(pn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:i}=b.useContext(Jt),{matches:l}=b.useContext(is),o=l[l.length-1],c=o?o.params:{},d=o?o.pathname:"/",u=o?o.pathnameBase:"/",h=o&&o.route;{let j=h&&h.path||"";Qf(d,!h||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let m=ls(),f;if(t){let j=typeof t=="string"?mn(t):t;Ne(u==="/"||((w=j.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${j.pathname}" was given in the \`location\` prop.`),f=j}else f=m;let y=f.pathname||"/",g=y;if(u!=="/"){let j=u.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(j.length).join("/")}let v=!i&&s&&s.matches&&s.matches.length>0?s.matches:Bf(e,{pathname:g});Gt(h||v!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Gt(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let p=yy(v&&v.map(j=>Object.assign({},j,{params:Object.assign({},c,j.params),pathname:ps([u,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?u:ps([u,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,s,n);return t&&p?b.createElement(ja.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},p):p}function fy(){let e=Ny(),t=ly(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:i},"ErrorBoundary")," or"," ",b.createElement("code",{style:i},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),s?b.createElement("pre",{style:a},s):null,l)}var py=b.createElement(fy,null),gy=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?b.createElement(is.Provider,{value:this.props.routeContext},b.createElement(cd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xy({routeContext:e,match:t,children:s}){let n=b.useContext(fn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(is.Provider,{value:e},s)}function yy(e,t=[],s=null,n=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let a=e,i=s==null?void 0:s.errors;if(i!=null){let c=a.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);Ne(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,o=-1;if(s)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(o=c),d.route.id){let{loaderData:u,errors:h}=s,m=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||m){l=!0,o>=0?a=a.slice(0,o+1):a=[a[0]];break}}}return a.reduceRight((c,d,u)=>{let h,m=!1,f=null,y=null;s&&(h=i&&d.route.id?i[d.route.id]:void 0,f=d.route.errorElement||py,l&&(o<0&&u===0?(Qf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):o===u&&(m=!0,y=d.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,u+1)),v=()=>{let p;return h?p=f:m?p=y:d.route.Component?p=b.createElement(d.route.Component,null):d.route.element?p=d.route.element:p=c,b.createElement(xy,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:s!=null},children:p})};return s&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?b.createElement(gy,{location:s.location,revalidation:s.revalidation,component:f,error:h,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}function dd(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vy(e){let t=b.useContext(fn);return Ne(t,dd(e)),t}function wy(e){let t=b.useContext(dl);return Ne(t,dd(e)),t}function by(e){let t=b.useContext(is);return Ne(t,dd(e)),t}function ud(e){let t=by(e),s=t.matches[t.matches.length-1];return Ne(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function jy(){return ud("useRouteId")}function Ny(){var n;let e=b.useContext(cd),t=wy("useRouteError"),s=ud("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function _y(){let{router:e}=vy("useNavigate"),t=ud("useNavigate"),s=b.useRef(!1);return Jf(()=>{s.current=!0}),b.useCallback(async(a,i={})=>{Gt(s.current,Gf),s.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var Bu={};function Qf(e,t,s){!t&&!Bu[e]&&(Bu[e]=!0,Gt(!1,s))}b.memo(ky);function ky({routes:e,future:t,state:s}){return Kf(e,void 0,s,t)}function En({to:e,replace:t,state:s,relative:n}){Ne(pn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=b.useContext(Jt);Gt(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=b.useContext(is),{pathname:l}=ls(),o=Na(),c=od(e,ld(i),l,n==="path"),d=JSON.stringify(c);return b.useEffect(()=>{o(JSON.parse(d),{replace:t,state:s,relative:n})},[o,d,n,t,s]),null}function zt(e){Ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Sy({basename:e="/",children:t=null,location:s,navigationType:n="POP",navigator:a,static:i=!1}){Ne(!pn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),o=b.useMemo(()=>({basename:l,navigator:a,static:i,future:{}}),[l,a,i]);typeof s=="string"&&(s=mn(s));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:m="default"}=s,f=b.useMemo(()=>{let y=Hs(c,l);return y==null?null:{location:{pathname:y,search:d,hash:u,state:h,key:m},navigationType:n}},[l,c,d,u,h,m,n]);return Gt(f!=null,`<Router basename="${l}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:b.createElement(Jt.Provider,{value:o},b.createElement(ja.Provider,{children:t,value:f}))}function hd({children:e,location:t}){return my(Xo(e),t)}function Xo(e,t=[]){let s=[];return b.Children.forEach(e,(n,a)=>{if(!b.isValidElement(n))return;let i=[...t,a];if(n.type===b.Fragment){s.push.apply(s,Xo(n.props.children,i));return}Ne(n.type===zt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ne(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Xo(n.props.children,i)),s.push(l)}),s}var fi="get",pi="application/x-www-form-urlencoded";function ul(e){return e!=null&&typeof e.tagName=="string"}function Cy(e){return ul(e)&&e.tagName.toLowerCase()==="button"}function Ey(e){return ul(e)&&e.tagName.toLowerCase()==="form"}function Py(e){return ul(e)&&e.tagName.toLowerCase()==="input"}function Ty(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ry(e,t){return e.button===0&&(!t||t==="_self")&&!Ty(e)}var Qa=null;function My(){if(Qa===null)try{new FormData(document.createElement("form"),0),Qa=!1}catch{Qa=!0}return Qa}var Ay=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jl(e){return e!=null&&!Ay.has(e)?(Gt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pi}"`),null):e}function Dy(e,t){let s,n,a,i,l;if(Ey(e)){let o=e.getAttribute("action");n=o?Hs(o,t):null,s=e.getAttribute("method")||fi,a=Jl(e.getAttribute("enctype"))||pi,i=new FormData(e)}else if(Cy(e)||Py(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(n=c?Hs(c,t):null,s=e.getAttribute("formmethod")||o.getAttribute("method")||fi,a=Jl(e.getAttribute("formenctype"))||Jl(o.getAttribute("enctype"))||pi,i=new FormData(o,e),!My()){let{name:d,type:u,value:h}=e;if(u==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,h)}}else{if(ul(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=fi,n=null,a=pi,l=e}return i&&a==="text/plain"&&(l=i,i=void 0),{action:n,method:s.toLowerCase(),encType:a,formData:i,body:l}}function md(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function Ly(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $y(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Iy(e,t,s){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let l=await Ly(i,s);return l.links?l.links():[]}return[]}));return Fy(n.flat(1).filter($y).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function qu(e,t,s,n,a,i){let l=(c,d)=>s[d]?c.route.id!==s[d].route.id:!0,o=(c,d)=>{var u;return s[d].pathname!==c.pathname||((u=s[d].route.path)==null?void 0:u.endsWith("*"))&&s[d].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,d)=>l(c,d)||o(c,d)):i==="data"?t.filter((c,d)=>{var h;let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(l(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((h=s[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Oy(e,t,{includeHydrateFallback:s}={}){return Uy(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function Uy(e){return[...new Set(e)]}function zy(e){let t={},s=Object.keys(e).sort();for(let n of s)t[n]=e[n];return t}function Fy(e,t){let s=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(zy(a));return s.has(i)||(s.add(i),n.push({key:i,link:a})),n},[])}function By(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function qy(){let e=b.useContext(fn);return md(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Hy(){let e=b.useContext(dl);return md(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var fd=b.createContext(void 0);fd.displayName="FrameworkContext";function Yf(){let e=b.useContext(fd);return md(e,"You must render this element inside a <HydratedRouter> element"),e}function Wy(e,t){let s=b.useContext(fd),[n,a]=b.useState(!1),[i,l]=b.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=b.useRef(null);b.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let g=p=>{p.forEach(w=>{l(w.isIntersecting)})},v=new IntersectionObserver(g,{threshold:.5});return m.current&&v.observe(m.current),()=>{v.disconnect()}}},[e]),b.useEffect(()=>{if(n){let g=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(g)}}},[n]);let f=()=>{a(!0)},y=()=>{a(!1),l(!1)};return s?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Pn(o,f),onBlur:Pn(c,y),onMouseEnter:Pn(d,f),onMouseLeave:Pn(u,y),onTouchStart:Pn(h,f)}]:[!1,m,{}]}function Pn(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function Vy({page:e,...t}){let{router:s}=qy(),n=b.useMemo(()=>Bf(s.routes,e,s.basename),[s.routes,e,s.basename]);return n?b.createElement(Jy,{page:e,matches:n,...t}):null}function Gy(e){let{manifest:t,routeModules:s}=Yf(),[n,a]=b.useState([]);return b.useEffect(()=>{let i=!1;return Iy(e,t,s).then(l=>{i||a(l)}),()=>{i=!0}},[e,t,s]),n}function Jy({page:e,matches:t,...s}){let n=ls(),{manifest:a,routeModules:i}=Yf(),{loaderData:l,matches:o}=Hy(),c=b.useMemo(()=>qu(e,t,o,a,n,"data"),[e,t,o,a,n]),d=b.useMemo(()=>qu(e,t,o,a,n,"assets"),[e,t,o,a,n]),u=b.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let f=new Set,y=!1;if(t.forEach(v=>{var w;let p=a.routes[v.route.id];!p||!p.hasLoader||(!c.some(j=>j.route.id===v.route.id)&&v.route.id in l&&((w=i[v.route.id])!=null&&w.shouldRevalidate)||p.hasClientLoader?y=!0:f.add(v.route.id))}),f.size===0)return[];let g=By(e);return y&&f.size>0&&g.searchParams.set("_routes",t.filter(v=>f.has(v.route.id)).map(v=>v.route.id).join(",")),[g.pathname+g.search]},[l,n,a,c,t,e,i]),h=b.useMemo(()=>Oy(d,a),[d,a]),m=Gy(d);return b.createElement(b.Fragment,null,u.map(f=>b.createElement("link",{key:f,rel:"prefetch",as:"fetch",href:f,...s})),h.map(f=>b.createElement("link",{key:f,rel:"modulepreload",href:f,...s})),m.map(({key:f,link:y})=>b.createElement("link",{key:f,...y})))}function Ky(...e){return t=>{e.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var Xf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Xf&&(window.__reactRouterVersion="7.2.0")}catch{}function Qy({basename:e,children:t,window:s}){let n=b.useRef();n.current==null&&(n.current=Ux({window:s,v5Compat:!0}));let a=n.current,[i,l]=b.useState({action:a.action,location:a.location}),o=b.useCallback(c=>{b.startTransition(()=>l(c))},[l]);return b.useLayoutEffect(()=>a.listen(o),[a,o]),b.createElement(Sy,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var Zf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qi=b.forwardRef(function({onClick:t,discover:s="render",prefetch:n="none",relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:h,...m},f){let{basename:y}=b.useContext(Jt),g=typeof d=="string"&&Zf.test(d),v,p=!1;if(typeof d=="string"&&g&&(v=d,Xf))try{let M=new URL(window.location.href),T=d.startsWith("//")?new URL(M.protocol+d):new URL(d),$=Hs(T.pathname,y);T.origin===M.origin&&$!=null?d=$+T.search+T.hash:p=!0}catch{Gt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=uy(d,{relative:a}),[j,N,E]=Wy(n,m),P=ev(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:a,viewTransition:h});function k(M){t&&t(M),M.defaultPrevented||P(M)}let A=b.createElement("a",{...m,...E,href:v||w,onClick:p||i?t:k,ref:Ky(f,N),target:c,"data-discover":!g&&s==="render"?"true":void 0});return j&&!g?b.createElement(b.Fragment,null,A,b.createElement(Vy,{page:w})):A});qi.displayName="Link";var Yy=b.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:n="",end:a=!1,style:i,to:l,viewTransition:o,children:c,...d},u){let h=_a(l,{relative:d.relative}),m=ls(),f=b.useContext(dl),{navigator:y,basename:g}=b.useContext(Jt),v=f!=null&&av(h)&&o===!0,p=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,w=m.pathname,j=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;s||(w=w.toLowerCase(),j=j?j.toLowerCase():null,p=p.toLowerCase()),j&&g&&(j=Hs(j,g)||j);const N=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let E=w===p||!a&&w.startsWith(p)&&w.charAt(N)==="/",P=j!=null&&(j===p||!a&&j.startsWith(p)&&j.charAt(p.length)==="/"),k={isActive:E,isPending:P,isTransitioning:v},A=E?t:void 0,M;typeof n=="function"?M=n(k):M=[n,E?"active":null,P?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let T=typeof i=="function"?i(k):i;return b.createElement(qi,{...d,"aria-current":A,className:M,ref:u,style:T,to:l,viewTransition:o},typeof c=="function"?c(k):c)});Yy.displayName="NavLink";var Xy=b.forwardRef(({discover:e="render",fetcherKey:t,navigate:s,reloadDocument:n,replace:a,state:i,method:l=fi,action:o,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...m},f)=>{let y=rv(),g=nv(o,{relative:d}),v=l.toLowerCase()==="get"?"get":"post",p=typeof o=="string"&&Zf.test(o),w=j=>{if(c&&c(j),j.defaultPrevented)return;j.preventDefault();let N=j.nativeEvent.submitter,E=(N==null?void 0:N.getAttribute("formmethod"))||l;y(N||j.currentTarget,{fetcherKey:t,method:E,navigate:s,replace:a,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return b.createElement("form",{ref:f,method:v,action:g,onSubmit:n?c:w,...m,"data-discover":!p&&e==="render"?"true":void 0})});Xy.displayName="Form";function Zy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ep(e){let t=b.useContext(fn);return Ne(t,Zy(e)),t}function ev(e,{target:t,replace:s,state:n,preventScrollReset:a,relative:i,viewTransition:l}={}){let o=Na(),c=ls(),d=_a(e,{relative:i});return b.useCallback(u=>{if(Ry(u,t)){u.preventDefault();let h=s!==void 0?s:ma(c)===ma(d);o(e,{replace:h,state:n,preventScrollReset:a,relative:i,viewTransition:l})}},[c,o,d,s,n,t,e,a,i,l])}var tv=0,sv=()=>`__${String(++tv)}__`;function rv(){let{router:e}=ep("useSubmit"),{basename:t}=b.useContext(Jt),s=jy();return b.useCallback(async(n,a={})=>{let{action:i,method:l,encType:o,formData:c,body:d}=Dy(n,t);if(a.navigate===!1){let u=a.fetcherKey||sv();await e.fetch(u,s,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||l,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||l,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,s])}function nv(e,{relative:t}={}){let{basename:s}=b.useContext(Jt),n=b.useContext(is);Ne(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={..._a(e||".",{relative:t})},l=ls();if(e==null){i.search=l.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(u=>u==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let u=o.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(i.pathname=i.pathname==="/"?s:ps([s,i.pathname])),ma(i)}function av(e,t={}){let s=b.useContext(Vf);Ne(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ep("useViewTransitionState"),a=_a(e,{relative:t.relative});if(!s.isTransitioning)return!1;let i=Hs(s.currentLocation.pathname,n)||s.currentLocation.pathname,l=Hs(s.nextLocation.pathname,n)||s.nextLocation.pathname;return Bi(a.pathname,l)!=null||Bi(a.pathname,i)!=null}new TextEncoder;function iv(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}const lv=e=>{switch(e){case"success":return dv;case"info":return hv;case"warning":return uv;case"error":return mv;default:return null}},ov=Array(12).fill(0),cv=({visible:e,className:t})=>H.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},H.createElement("div",{className:"sonner-spinner"},ov.map((s,n)=>H.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),dv=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),uv=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),hv=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),mv=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fv=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},H.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),H.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),pv=()=>{const[e,t]=H.useState(document.hidden);return H.useEffect(()=>{const s=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),e};let Zo=1;class gv{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;const{message:n,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:Zo++,l=this.toasts.find(c=>c.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),l?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:n}),{...c,...t,id:i,dismissible:o,title:n}):c):this.addToast({title:n,...a,dismissible:o,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:t,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(n=>n({id:s.id,dismiss:!0}))}),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let n;s.loading!==void 0&&(n=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,l;const o=a.then(async d=>{if(l=["resolve",d],H.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(yv(d)&&!d.ok){i=!1;const h=typeof s.error=="function"?await s.error(`HTTP error! status: ${d.status}`):s.error,m=typeof s.description=="function"?await s.description(`HTTP error! status: ${d.status}`):s.description,y=typeof h=="object"&&!H.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:m,...y})}else if(d instanceof Error){i=!1;const h=typeof s.error=="function"?await s.error(d):s.error,m=typeof s.description=="function"?await s.description(d):s.description,y=typeof h=="object"&&!H.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:m,...y})}else if(s.success!==void 0){i=!1;const h=typeof s.success=="function"?await s.success(d):s.success,m=typeof s.description=="function"?await s.description(d):s.description,y=typeof h=="object"&&!H.isValidElement(h)?h:{message:h};this.create({id:n,type:"success",description:m,...y})}}).catch(async d=>{if(l=["reject",d],s.error!==void 0){i=!1;const u=typeof s.error=="function"?await s.error(d):s.error,h=typeof s.description=="function"?await s.description(d):s.description,f=typeof u=="object"&&!H.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),s.finally==null||s.finally.call(s)}),c=()=>new Promise((d,u)=>o.then(()=>l[0]==="reject"?u(l[1]):d(l[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(t,s)=>{const n=(s==null?void 0:s.id)||Zo++;return this.create({jsx:t(n),id:n,...s}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const lt=new gv,xv=(e,t)=>{const s=(t==null?void 0:t.id)||Zo++;return lt.addToast({title:e,...t,id:s}),s},yv=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",vv=xv,wv=()=>lt.toasts,bv=()=>lt.getActiveToasts(),de=Object.assign(vv,{success:lt.success,info:lt.info,warning:lt.warning,error:lt.error,custom:lt.custom,message:lt.message,promise:lt.promise,dismiss:lt.dismiss,loading:lt.loading},{getHistory:wv,getToasts:bv});iv("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ya(e){return e.label!==void 0}const jv=3,Nv="24px",_v="16px",Hu=4e3,kv=356,Sv=14,Cv=45,Ev=200;function Zt(...e){return e.filter(Boolean).join(" ")}function Pv(e){const[t,s]=e.split("-"),n=[];return t&&n.push(t),s&&n.push(s),n}const Tv=e=>{var t,s,n,a,i,l,o,c,d;const{invert:u,toast:h,unstyled:m,interacting:f,setHeights:y,visibleToasts:g,heights:v,index:p,toasts:w,expanded:j,removeToast:N,defaultRichColors:E,closeButton:P,style:k,cancelButtonStyle:A,actionButtonStyle:M,className:T="",descriptionClassName:$="",duration:F,position:J,gap:Z,expandByDefault:X,classNames:B,icons:me,closeButtonAriaLabel:z="Close toast"}=e,[V,Q]=H.useState(null),[R,C]=H.useState(null),[S,O]=H.useState(!1),[ee,te]=H.useState(!1),[Ce,_]=H.useState(!1),[q,W]=H.useState(!1),[D,ce]=H.useState(!1),[pe,ue]=H.useState(0),[Ae,Qt]=H.useState(0),We=H.useRef(h.duration||F||Hu),Yt=H.useRef(null),ne=H.useRef(null),Nr=p===0,Ys=p+1<=g,Te=h.type,nt=h.dismissible!==!1,Rt=h.className||"",at=h.descriptionClassName||"",x=H.useMemo(()=>v.findIndex(ie=>ie.toastId===h.id)||0,[v,h.id]),L=H.useMemo(()=>{var ie;return(ie=h.closeButton)!=null?ie:P},[h.closeButton,P]),G=H.useMemo(()=>h.duration||F||Hu,[h.duration,F]),se=H.useRef(0),ae=H.useRef(0),ve=H.useRef(0),Ye=H.useRef(null),[Xs,jt]=J.split("-"),yn=H.useMemo(()=>v.reduce((ie,$e,Ve)=>Ve>=x?ie:ie+$e.height,0),[v,x]),vn=pv(),Pa=h.invert||u,_r=Te==="loading";ae.current=H.useMemo(()=>x*Z+yn,[x,yn]),H.useEffect(()=>{We.current=G},[G]),H.useEffect(()=>{O(!0)},[]),H.useEffect(()=>{const ie=ne.current;if(ie){const $e=ie.getBoundingClientRect().height;return Qt($e),y(Ve=>[{toastId:h.id,height:$e,position:h.position},...Ve]),()=>y(Ve=>Ve.filter(ft=>ft.toastId!==h.id))}},[y,h.id]),H.useLayoutEffect(()=>{if(!S)return;const ie=ne.current,$e=ie.style.height;ie.style.height="auto";const Ve=ie.getBoundingClientRect().height;ie.style.height=$e,Qt(Ve),y(ft=>ft.find(ze=>ze.toastId===h.id)?ft.map(ze=>ze.toastId===h.id?{...ze,height:Ve}:ze):[{toastId:h.id,height:Ve,position:h.position},...ft])},[S,h.title,h.description,y,h.id,h.jsx,h.action,h.cancel]);const Mt=H.useCallback(()=>{te(!0),ue(ae.current),y(ie=>ie.filter($e=>$e.toastId!==h.id)),setTimeout(()=>{N(h)},Ev)},[h,N,y,ae]);H.useEffect(()=>{if(h.promise&&Te==="loading"||h.duration===1/0||h.type==="loading")return;let ie;return j||f||vn?(()=>{if(ve.current<se.current){const ft=new Date().getTime()-se.current;We.current=We.current-ft}ve.current=new Date().getTime()})():(()=>{We.current!==1/0&&(se.current=new Date().getTime(),ie=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),Mt()},We.current))})(),()=>clearTimeout(ie)},[j,f,h,Te,vn,Mt]),H.useEffect(()=>{h.delete&&(Mt(),h.onDismiss==null||h.onDismiss.call(h,h))},[Mt,h.delete]);function Ta(){var ie;if(me!=null&&me.loading){var $e;return H.createElement("div",{className:Zt(B==null?void 0:B.loader,h==null||($e=h.classNames)==null?void 0:$e.loader,"sonner-loader"),"data-visible":Te==="loading"},me.loading)}return H.createElement(cv,{className:Zt(B==null?void 0:B.loader,h==null||(ie=h.classNames)==null?void 0:ie.loader),visible:Te==="loading"})}const Zs=h.icon||(me==null?void 0:me[Te])||lv(Te);var kd,Sd;return H.createElement("li",{tabIndex:0,ref:ne,className:Zt(T,Rt,B==null?void 0:B.toast,h==null||(t=h.classNames)==null?void 0:t.toast,B==null?void 0:B.default,B==null?void 0:B[Te],h==null||(s=h.classNames)==null?void 0:s[Te]),"data-sonner-toast":"","data-rich-colors":(kd=h.richColors)!=null?kd:E,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":S,"data-promise":!!h.promise,"data-swiped":D,"data-removed":ee,"data-visible":Ys,"data-y-position":Xs,"data-x-position":jt,"data-index":p,"data-front":Nr,"data-swiping":Ce,"data-dismissible":nt,"data-type":Te,"data-invert":Pa,"data-swipe-out":q,"data-swipe-direction":R,"data-expanded":!!(j||X&&S),style:{"--index":p,"--toasts-before":p,"--z-index":w.length-p,"--offset":`${ee?pe:ae.current}px`,"--initial-height":X?"auto":`${Ae}px`,...k,...h.style},onDragEnd:()=>{_(!1),Q(null),Ye.current=null},onPointerDown:ie=>{_r||!nt||(Yt.current=new Date,ue(ae.current),ie.target.setPointerCapture(ie.pointerId),ie.target.tagName!=="BUTTON"&&(_(!0),Ye.current={x:ie.clientX,y:ie.clientY}))},onPointerUp:()=>{var ie,$e,Ve;if(q||!nt)return;Ye.current=null;const ft=Number(((ie=ne.current)==null?void 0:ie.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ra=Number((($e=ne.current)==null?void 0:$e.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ze=new Date().getTime()-((Ve=Yt.current)==null?void 0:Ve.getTime()),Nt=V==="x"?ft:Ra,Ma=Math.abs(Nt)/ze;if(Math.abs(Nt)>=Cv||Ma>.11){ue(ae.current),h.onDismiss==null||h.onDismiss.call(h,h),C(V==="x"?ft>0?"right":"left":Ra>0?"down":"up"),Mt(),W(!0);return}else{var At,Dt;(At=ne.current)==null||At.style.setProperty("--swipe-amount-x","0px"),(Dt=ne.current)==null||Dt.style.setProperty("--swipe-amount-y","0px")}ce(!1),_(!1),Q(null)},onPointerMove:ie=>{var $e,Ve,ft;if(!Ye.current||!nt||(($e=window.getSelection())==null?void 0:$e.toString().length)>0)return;const ze=ie.clientY-Ye.current.y,Nt=ie.clientX-Ye.current.x;var Ma;const At=(Ma=e.swipeDirections)!=null?Ma:Pv(J);!V&&(Math.abs(Nt)>1||Math.abs(ze)>1)&&Q(Math.abs(Nt)>Math.abs(ze)?"x":"y");let Dt={x:0,y:0};const Cd=er=>1/(1.5+Math.abs(er)/20);if(V==="y"){if(At.includes("top")||At.includes("bottom"))if(At.includes("top")&&ze<0||At.includes("bottom")&&ze>0)Dt.y=ze;else{const er=ze*Cd(ze);Dt.y=Math.abs(er)<Math.abs(ze)?er:ze}}else if(V==="x"&&(At.includes("left")||At.includes("right")))if(At.includes("left")&&Nt<0||At.includes("right")&&Nt>0)Dt.x=Nt;else{const er=Nt*Cd(Nt);Dt.x=Math.abs(er)<Math.abs(Nt)?er:Nt}(Math.abs(Dt.x)>0||Math.abs(Dt.y)>0)&&ce(!0),(Ve=ne.current)==null||Ve.style.setProperty("--swipe-amount-x",`${Dt.x}px`),(ft=ne.current)==null||ft.style.setProperty("--swipe-amount-y",`${Dt.y}px`)}},L&&!h.jsx&&Te!=="loading"?H.createElement("button",{"aria-label":z,"data-disabled":_r,"data-close-button":!0,onClick:_r||!nt?()=>{}:()=>{Mt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Zt(B==null?void 0:B.closeButton,h==null||(n=h.classNames)==null?void 0:n.closeButton)},(Sd=me==null?void 0:me.close)!=null?Sd:fv):null,(Te||h.icon||h.promise)&&h.icon!==null&&((me==null?void 0:me[Te])!==null||h.icon)?H.createElement("div",{"data-icon":"",className:Zt(B==null?void 0:B.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Ta():null,h.type!=="loading"?Zs:null):null,H.createElement("div",{"data-content":"",className:Zt(B==null?void 0:B.content,h==null||(i=h.classNames)==null?void 0:i.content)},H.createElement("div",{"data-title":"",className:Zt(B==null?void 0:B.title,h==null||(l=h.classNames)==null?void 0:l.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?H.createElement("div",{"data-description":"",className:Zt($,at,B==null?void 0:B.description,h==null||(o=h.classNames)==null?void 0:o.description)},typeof h.description=="function"?h.description():h.description):null),H.isValidElement(h.cancel)?h.cancel:h.cancel&&Ya(h.cancel)?H.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||A,onClick:ie=>{Ya(h.cancel)&&nt&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,ie),Mt())},className:Zt(B==null?void 0:B.cancelButton,h==null||(c=h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,H.isValidElement(h.action)?h.action:h.action&&Ya(h.action)?H.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||M,onClick:ie=>{Ya(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,ie),!ie.defaultPrevented&&Mt())},className:Zt(B==null?void 0:B.actionButton,h==null||(d=h.classNames)==null?void 0:d.actionButton)},h.action.label):null)};function Wu(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Rv(e,t){const s={};return[e,t].forEach((n,a)=>{const i=a===1,l=i?"--mobile-offset":"--offset",o=i?_v:Nv;function c(d){["top","right","bottom","left"].forEach(u=>{s[`${l}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?s[`${l}-${d}`]=o:s[`${l}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(o)}),s}const Mv=H.forwardRef(function(t,s){const{invert:n,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:l,closeButton:o,className:c,offset:d,mobileOffset:u,theme:h="light",richColors:m,duration:f,style:y,visibleToasts:g=jv,toastOptions:v,dir:p=Wu(),gap:w=Sv,icons:j,containerAriaLabel:N="Notifications"}=t,[E,P]=H.useState([]),k=H.useMemo(()=>Array.from(new Set([a].concat(E.filter(R=>R.position).map(R=>R.position)))),[E,a]),[A,M]=H.useState([]),[T,$]=H.useState(!1),[F,J]=H.useState(!1),[Z,X]=H.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),B=H.useRef(null),me=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),z=H.useRef(null),V=H.useRef(!1),Q=H.useCallback(R=>{P(C=>{var S;return(S=C.find(O=>O.id===R.id))!=null&&S.delete||lt.dismiss(R.id),C.filter(({id:O})=>O!==R.id)})},[]);return H.useEffect(()=>lt.subscribe(R=>{if(R.dismiss){requestAnimationFrame(()=>{P(C=>C.map(S=>S.id===R.id?{...S,delete:!0}:S))});return}setTimeout(()=>{Ex.flushSync(()=>{P(C=>{const S=C.findIndex(O=>O.id===R.id);return S!==-1?[...C.slice(0,S),{...C[S],...R},...C.slice(S+1)]:[R,...C]})})})}),[E]),H.useEffect(()=>{if(h!=="system"){X(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?X("dark"):X("light")),typeof window>"u")return;const R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:C})=>{X(C?"dark":"light")})}catch{R.addListener(({matches:S})=>{try{X(S?"dark":"light")}catch(O){console.error(O)}})}},[h]),H.useEffect(()=>{E.length<=1&&$(!1)},[E]),H.useEffect(()=>{const R=C=>{var S;if(i.every(te=>C[te]||C.code===te)){var ee;$(!0),(ee=B.current)==null||ee.focus()}C.code==="Escape"&&(document.activeElement===B.current||(S=B.current)!=null&&S.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[i]),H.useEffect(()=>{if(B.current)return()=>{z.current&&(z.current.focus({preventScroll:!0}),z.current=null,V.current=!1)}},[B.current]),H.createElement("section",{ref:s,"aria-label":`${N} ${me}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((R,C)=>{var S;const[O,ee]=R.split("-");return E.length?H.createElement("ol",{key:R,dir:p==="auto"?Wu():p,tabIndex:-1,ref:B,className:c,"data-sonner-toaster":!0,"data-sonner-theme":Z,"data-y-position":O,"data-x-position":ee,style:{"--front-toast-height":`${((S=A[0])==null?void 0:S.height)||0}px`,"--width":`${kv}px`,"--gap":`${w}px`,...y,...Rv(d,u)},onBlur:te=>{V.current&&!te.currentTarget.contains(te.relatedTarget)&&(V.current=!1,z.current&&(z.current.focus({preventScroll:!0}),z.current=null))},onFocus:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||V.current||(V.current=!0,z.current=te.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{F||$(!1)},onDragEnd:()=>$(!1),onPointerDown:te=>{te.target instanceof HTMLElement&&te.target.dataset.dismissible==="false"||J(!0)},onPointerUp:()=>J(!1)},E.filter(te=>!te.position&&C===0||te.position===R).map((te,Ce)=>{var _,q;return H.createElement(Tv,{key:te.id,icons:j,index:Ce,toast:te,defaultRichColors:m,duration:(_=v==null?void 0:v.duration)!=null?_:f,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:g,closeButton:(q=v==null?void 0:v.closeButton)!=null?q:o,interacting:F,position:R,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,closeButtonAriaLabel:v==null?void 0:v.closeButtonAriaLabel,removeToast:Q,toasts:E.filter(W=>W.position==te.position),heights:A.filter(W=>W.position==te.position),setHeights:M,expandByDefault:l,gap:w,expanded:T,swipeDirections:t.swipeDirections})})):null}))}),Av="modulepreload",Dv=function(e){return"/"+e},Vu={},rn=function(t,s,n){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(s.map(c=>{if(c=Dv(c),c in Vu)return;Vu[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Av,d||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),d)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},Lv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>rn(async()=>{const{default:n}=await Promise.resolve().then(()=>gn);return{default:n}},[]).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class pd extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class $v extends pd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Iv extends pd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ov extends pd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ec;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ec||(ec={}));var Uv=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};class zv{constructor(t,{headers:s={},customFetch:n,region:a=ec.Any}={}){this.url=t,this.headers=s,this.region=a,this.fetch=Lv(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return Uv(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=s;let o={},{region:c}=s;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let d;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=l):typeof l=="string"?(o["Content-Type"]="text/plain",d=l):typeof FormData<"u"&&l instanceof FormData?d=l:(o["Content-Type"]="application/json",d=JSON.stringify(l)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),a),body:d}).catch(y=>{throw new $v(y)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Iv(u);if(!u.ok)throw new Ov(u);let m=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return m==="application/json"?f=yield u.json():m==="application/octet-stream"?f=yield u.blob():m==="text/event-stream"?f=u:m==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(a){return{data:null,error:a}}})}}var ct={},gd={},hl={},ka={},ml={},fl={},Fv=function(){if(typeof self<"u")return self;if(typeof window<"u"||typeof window<"u")return window;throw new Error("unable to locate global object")},nn=Fv();const Bv=nn.fetch,tp=nn.fetch.bind(nn),sp=nn.Headers,qv=nn.Request,Hv=nn.Response,gn=Object.freeze(Object.defineProperty({__proto__:null,Headers:sp,Request:qv,Response:Hv,default:tp,fetch:Bv},Symbol.toStringTag,{value:"Module"})),Wv=sg(gn);var pl={};Object.defineProperty(pl,"__esModule",{value:!0});let Vv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};pl.default=Vv;var rp=Et&&Et.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fl,"__esModule",{value:!0});const Gv=rp(Wv),Jv=rp(pl);let Kv=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Gv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=Object.assign({},this.headers),this.headers[t]=s,this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,o,c;let d=null,u=null,h=null,m=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const g=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");g&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{d=JSON.parse(g),Array.isArray(d)&&i.status===404&&(u=[],d=null,m=200,f="OK")}catch{i.status===404&&g===""?(m=204,f="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,m=200,f="OK"),d&&this.shouldThrowOnError)throw new Jv.default(d)}return{error:d,data:u,count:h,status:m,statusText:f}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,o,c;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,s)}};fl.default=Kv;var Qv=Et&&Et.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ml,"__esModule",{value:!0});const Yv=Qv(fl);let Xv=class extends Yv.default{select(t){let s=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:s=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,s,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:s=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var o;const c=[t?"analyze":null,s?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${d}"; options=${c};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ml.default=Xv;var Zv=Et&&Et.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ka,"__esModule",{value:!0});const ew=Zv(ml);let tw=class extends ew.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const n=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${l}.${s}`),this}match(t){return Object.entries(t).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(t,s,n){return this.url.searchParams.append(t,`not.${s}.${n}`),this}or(t,{foreignTable:s,referencedTable:n=s}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,s,n){return this.url.searchParams.append(t,`${s}.${n}`),this}};ka.default=tw;var sw=Et&&Et.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hl,"__esModule",{value:!0});const Tn=sw(ka);let rw=class{constructor(t,{headers:s={},schema:n,fetch:a}){this.url=t,this.headers=s,this.schema=n,this.fetch=a}select(t,{head:s=!1,count:n}={}){const a=s?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),n&&(this.headers.Prefer=`count=${n}`),new Tn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:s,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const l=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new Tn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:s,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const l="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Tn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:s}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new Tn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const s="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Tn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};hl.default=rw;var gl={},xl={};Object.defineProperty(xl,"__esModule",{value:!0});xl.version=void 0;xl.version="0.0.0-automated";Object.defineProperty(gl,"__esModule",{value:!0});gl.DEFAULT_HEADERS=void 0;const nw=xl;gl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${nw.version}`};var np=Et&&Et.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gd,"__esModule",{value:!0});const aw=np(hl),iw=np(ka),lw=gl;let ow=class ap{constructor(t,{headers:s={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},lw.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=a}from(t){const s=new URL(`${this.url}/${t}`);return new aw.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ap(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:n=!1,get:a=!1,count:i}={}){let l;const o=new URL(`${this.url}/rpc/${t}`);let c;n||a?(l=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{o.searchParams.append(u,h)})):(l="POST",c=s);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new iw.default({method:l,url:o,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};gd.default=ow;var xn=Et&&Et.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ct,"__esModule",{value:!0});ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const ip=xn(gd);ct.PostgrestClient=ip.default;const lp=xn(hl);ct.PostgrestQueryBuilder=lp.default;const op=xn(ka);ct.PostgrestFilterBuilder=op.default;const cp=xn(ml);ct.PostgrestTransformBuilder=cp.default;const dp=xn(fl);ct.PostgrestBuilder=dp.default;const up=xn(pl);ct.PostgrestError=up.default;var cw=ct.default={PostgrestClient:ip.default,PostgrestQueryBuilder:lp.default,PostgrestFilterBuilder:op.default,PostgrestTransformBuilder:cp.default,PostgrestBuilder:dp.default,PostgrestError:up.default};const{PostgrestClient:dw,PostgrestQueryBuilder:J1,PostgrestFilterBuilder:K1,PostgrestTransformBuilder:Q1,PostgrestBuilder:Y1,PostgrestError:X1}=cw,uw="2.11.2",hw={"X-Client-Info":`realtime-js/${uw}`},mw="1.0.0",hp=1e4,fw=1e3;var Jr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Jr||(Jr={}));var pt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pt||(pt={}));var Ot;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ot||(Ot={}));var tc;(function(e){e.websocket="websocket"})(tc||(tc={}));var ar;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ar||(ar={}));class pw{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const a=s.getUint8(1),i=s.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+a));l=l+a;const c=n.decode(t.slice(l,l+i));l=l+i;const d=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}let mp=class{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var xe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(xe||(xe={}));const Gu=(e,t,s={})=>{var n;const a=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,l)=>(i[l]=gw(l,e,t,a),i),{})},gw=(e,t,s,n)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,l=s[e];return i&&!n.includes(i)?fp(i,l):sc(l)},fp=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return ww(t,s)}switch(e){case xe.bool:return xw(t);case xe.float4:case xe.float8:case xe.int2:case xe.int4:case xe.int8:case xe.numeric:case xe.oid:return yw(t);case xe.json:case xe.jsonb:return vw(t);case xe.timestamp:return bw(t);case xe.abstime:case xe.date:case xe.daterange:case xe.int4range:case xe.int8range:case xe.money:case xe.reltime:case xe.text:case xe.time:case xe.timestamptz:case xe.timetz:case xe.tsrange:case xe.tstzrange:return sc(t);default:return sc(t)}},sc=e=>e,xw=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},yw=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},vw=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ww=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,s);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>fp(t,o))}return e},bw=e=>typeof e=="string"?e.replace(" ","T"):e,pp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Kl{constructor(t,s,n={},a=hp){this.channel=t,this.event=s,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ju;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ju||(Ju={}));class Jn{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jn.syncState(this.state,a,i,l),this.pendingDiffs.forEach(c=>{this.state=Jn.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Jn.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,a){const i=this.cloneDeep(t),l=this.transformState(s),o={},c={};return this.map(i,(d,u)=>{l[d]||(c[d]=u)}),this.map(l,(d,u)=>{const h=i[d];if(h){const m=u.map(v=>v.presence_ref),f=h.map(v=>v.presence_ref),y=u.filter(v=>f.indexOf(v.presence_ref)<0),g=h.filter(v=>m.indexOf(v.presence_ref)<0);y.length>0&&(o[d]=y),g.length>0&&(c[d]=g)}else o[d]=u}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(t,s,n,a){const{joins:i,leaves:l}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var d;const u=(d=t[o])!==null&&d!==void 0?d:[];if(t[o]=this.cloneDeep(c),u.length>0){const h=t[o].map(f=>f.presence_ref),m=u.filter(f=>h.indexOf(f.presence_ref)<0);t[o].unshift(...m)}n(o,u,c)}),this.map(l,(o,c)=>{let d=t[o];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[o]=d,a(o,d,c),d.length===0&&delete t[o]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const a=t[n];return"metas"in a?s[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=a,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ku;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ku||(Ku={}));var Qu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Qu||(Qu={}));var cs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(cs||(cs={}));class xd{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Kl(this,Ot.join,this.params,this.timeout),this.rejoinTimer=new mp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ot.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Jn(this),this.broadcastEndpointURL=pp(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:l,private:o}}=this.params;this._onError(u=>t==null?void 0:t(cs.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(cs.CLOSED));const c={},d={broadcast:i,presence:l,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(cs.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,y=[];for(let g=0;g<f;g++){const v=m[g],{filter:{event:p,schema:w,table:j,filter:N}}=v,E=u&&u[g];if(E&&E.event===p&&E.schema===w&&E.table===j&&E.filter===N)y.push(Object.assign(Object.assign({},v),{id:E.id}));else{this.unsubscribe(),t==null||t(cs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(cs.SUBSCRIBED);return}}).receive("error",u=>{t==null||t(cs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(cs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this._on(t,s,n)}async send(t,s={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ot.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const a=new Kl(this,Ot.leave,{},t);a.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(t,s,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),l}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Kl(this,t,s,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var a,i;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:d,join:u}=Ot;if(n&&[o,c,d,u].indexOf(l)>=0&&n!==this._joinRef())return;let m=this._onMessage(l,s,n);if(s&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var y,g,v;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(g=f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===l}).map(f=>f.callback(m,n)):(i=this.bindings[l])===null||i===void 0||i.filter(f=>{var y,g,v,p,w,j;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in f){const N=f.id,E=(y=f.filter)===null||y===void 0?void 0:y.event;return N&&((g=s.ids)===null||g===void 0?void 0:g.includes(N))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((v=s.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const N=(w=(p=f==null?void 0:f.filter)===null||p===void 0?void 0:p.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return N==="*"||N===((j=s==null?void 0:s.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===l}).map(f=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:g,table:v,commit_timestamp:p,type:w,errors:j}=y;m=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:p,eventType:w,new:{},old:{},errors:j}),this._getPayloadRecords(y))}f.callback(m,n)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const a=t.toLocaleLowerCase(),i={type:a,filter:s,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&xd.isEqual(a.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ot.close,{},t)}_onError(t){this._on(Ot.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Gu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Gu(t.columns,t.old_record)),s}}const jw=()=>{},Nw=typeof WebSocket<"u",_w=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kw{constructor(t,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=hw,this.params={},this.timeout=hp,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=jw,this.conn=null,this.sendBuffer=[],this.serializer=new pw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...o)=>rn(async()=>{const{default:c}=await Promise.resolve().then(()=>gn);return{default:c}},void 0).then(({default:c})=>c(...o)):l=fetch,(...o)=>l(...o)},this.endPoint=`${t}/${tc.websocket}`,this.httpEndpoint=pp(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const a=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,l)=>l(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new mp(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Nw){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Sw(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),rn(async()=>{const{default:t}=await import("./browser-CGhOaGSn.js").then(s=>s.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:mw}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Jr.connecting:return ar.Connecting;case Jr.open:return ar.Open;case Jr.closing:return ar.Closing;default:return ar.Closed}}isConnected(){return this.connectionState()===ar.Open}channel(t,s={config:{}}){const n=new xd(`realtime:${t}`,s,this);return this.channels.push(n),n}push(t){const{topic:s,event:n,payload:a,ref:i}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${s} ${n} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(a=>{s&&a.updateJoinPayload({access_token:s}),a.joinedOnce&&a._isJoined()&&a._push(Ot.access_token,{access_token:s})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(fw,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:n,event:a,payload:i,ref:l}=s;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${l&&"("+l+")"||""}`,i),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(a,i,l)),this.stateChangeCallbacks.message.forEach(o=>o(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ot.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${t}${n}${a}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([_w],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class Sw{constructor(t,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Jr.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class yd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ie(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Cw extends yd{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class rc extends yd{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var Ew=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const gp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>rn(async()=>{const{default:n}=await Promise.resolve().then(()=>gn);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},Pw=()=>Ew(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rn(()=>Promise.resolve().then(()=>gn),void 0)).Response:Response}),nc=e=>{if(Array.isArray(e))return e.map(s=>nc(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=nc(n)}),t};var wr=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const Ql=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Tw=(e,t,s)=>wr(void 0,void 0,void 0,function*(){const n=yield Pw();e instanceof n&&!(s!=null&&s.noResolveJson)?e.json().then(a=>{t(new Cw(Ql(a),e.status||500))}).catch(a=>{t(new rc(Ql(a),a))}):t(new rc(Ql(e),e))}),Rw=(e,t,s,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),s))};function Sa(e,t,s,n,a,i){return wr(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(s,Rw(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Tw(c,o,n))})})}function Hi(e,t,s,n){return wr(this,void 0,void 0,function*(){return Sa(e,"GET",t,s,n)})}function Es(e,t,s,n,a){return wr(this,void 0,void 0,function*(){return Sa(e,"POST",t,n,a,s)})}function Mw(e,t,s,n,a){return wr(this,void 0,void 0,function*(){return Sa(e,"PUT",t,n,a,s)})}function Aw(e,t,s,n){return wr(this,void 0,void 0,function*(){return Sa(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function xp(e,t,s,n,a){return wr(this,void 0,void 0,function*(){return Sa(e,"DELETE",t,n,a,s)})}var it=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const Dw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Lw{constructor(t,s={},n,a){this.url=t,this.headers=s,this.bucketId=n,this.fetch=gp(a)}uploadOrUpdate(t,s,n,a){return it(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Yu),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{})),m=yield h.json();return h.ok?{data:{path:d,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(Ie(i))return{data:null,error:i};throw i}})}upload(t,s,n){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,a){return it(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:Yu.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:u}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(Ie(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return it(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=yield Es(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new yd("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}update(t,s,n){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return it(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}copy(t,s,n){return it(this,void 0,void 0,function*(){try{return{data:{path:(yield Es(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}createSignedUrl(t,s,n){return it(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Es(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}createSignedUrls(t,s,n){return it(this,void 0,void 0,function*(){try{const a=yield Es(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}download(t,s){return it(this,void 0,void 0,function*(){const a=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),l=i?`?${i}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Hi(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Ie(o))return{data:null,error:o};throw o}})}info(t){return it(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield Hi(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:nc(n),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}exists(t){return it(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield Aw(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ie(n)&&n instanceof rc){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),a=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const o=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${d}`)}}}remove(t){return it(this,void 0,void 0,function*(){try{return{data:yield xp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}list(t,s,n){return it(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Dw),s),{prefix:t||""});return{data:yield Es(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const $w="2.7.1",Iw={"X-Client-Info":`storage-js/${$w}`};var Sr=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(e,[])).next())})};class Ow{constructor(t,s={},n){this.url=t,this.headers=Object.assign(Object.assign({},Iw),s),this.fetch=gp(n)}listBuckets(){return Sr(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ie(t))return{data:null,error:t};throw t}})}getBucket(t){return Sr(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Sr(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return Sr(this,void 0,void 0,function*(){try{return{data:yield Mw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Sr(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Sr(this,void 0,void 0,function*(){try{return{data:yield xp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}}class Uw extends Ow{constructor(t,s={},n){super(t,s,n)}from(t){return new Lw(this.url,this.headers,t,this.fetch)}}const zw="2.47.14";let In="";typeof Deno<"u"?In="deno":typeof document<"u"?In="web":typeof navigator<"u"&&navigator.product==="ReactNative"?In="react-native":In="node";const Fw={"X-Client-Info":`supabase-js-${In}/${zw}`},Bw={headers:Fw},qw={schema:"public"},Hw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ww={};var Vw=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const Gw=e=>{let t;return e?t=e:typeof fetch>"u"?t=tp:t=fetch,(...s)=>t(...s)},Jw=()=>typeof Headers>"u"?sp:Headers,Kw=(e,t,s)=>{const n=Gw(s),a=Jw();return(i,l)=>Vw(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let d=new a(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},l),{headers:d}))})};var Qw=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(e,[])).next())})};function Yw(e){return e.replace(/\/$/,"")}function Xw(e,t){const{db:s,auth:n,realtime:a,global:i}=e,{db:l,auth:o,realtime:c,global:d}=t,u={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},c),a),global:Object.assign(Object.assign({},d),i),accessToken:()=>Qw(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}const yp="2.67.3",Zw="http://localhost:9999",eb="supabase.auth.token",tb={"X-Client-Info":`gotrue-js/${yp}`},Xu=10,ac="X-Supabase-Api-Version",vp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function sb(e){return Math.round(Date.now()/1e3)+e}function rb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const es=()=>typeof window<"u"&&typeof document<"u",tr={tested:!1,writable:!1},Kn=()=>{if(!es())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tr.tested)return tr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tr.tested=!0,tr.writable=!0}catch{tr.tested=!0,tr.writable=!1}return tr.writable};function nb(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return s.searchParams.forEach((n,a)=>{t[a]=n}),t}const wp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>rn(async()=>{const{default:n}=await Promise.resolve().then(()=>gn);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},ab=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",bp=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Xa=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Za=async(e,t)=>{await e.removeItem(t)};function ib(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",n,a,i,l,o,c,d,u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)l=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),d=t.indexOf(e.charAt(u++)),n=l<<2|o>>4,a=(o&15)<<4|c>>2,i=(c&3)<<6|d,s=s+String.fromCharCode(n),c!=64&&a!=0&&(s=s+String.fromCharCode(a)),d!=64&&i!=0&&(s=s+String.fromCharCode(i));return s}class yl{constructor(){this.promise=new yl.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}yl.promiseConstructor=Promise;function Zu(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=e.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=s[1];return JSON.parse(ib(n))}async function lb(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ob(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){a(l);return}}})()})}function cb(e){return("0"+e.toString(16)).substr(-2)}function db(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,cb).join("")}async function ub(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}function hb(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mb(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await ub(e);return hb(s)}async function Cr(e,t,s=!1){const n=db();let a=n;s&&(a+="/PASSWORD_RECOVERY"),await bp(e,`${t}-code-verifier`,a);const i=await mb(n);return[i,n===i?"plain":"s256"]}const fb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pb(e){const t=e.headers.get(ac);if(!t||!t.match(fb))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class vd extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function le(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class gb extends vd{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function xb(e){return le(e)&&e.name==="AuthApiError"}class jp extends vd{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class br extends vd{constructor(t,s,n,a){super(t,n,a),this.name=s,this.status=n}}class _s extends br{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yb(e){return le(e)&&e.name==="AuthSessionMissingError"}class Yl extends br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ei extends br{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ti extends br{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vb(e){return le(e)&&e.name==="AuthImplicitGrantRedirectError"}class eh extends br{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ic extends br{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Xl(e){return le(e)&&e.name==="AuthRetryableFetchError"}class th extends br{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}var wb=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};const nr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bb=[502,503,504];async function sh(e){var t;if(!ab(e))throw new ic(nr(e),0);if(bb.includes(e.status))throw new ic(nr(e),e.status);let s;try{s=await e.json()}catch(i){throw new jp(nr(i),i)}let n;const a=pb(e);if(a&&a.getTime()>=vp["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new th(nr(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new _s}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new th(nr(s),e.status,s.weak_password.reasons);throw new gb(nr(s),e.status||500,n)}const jb=(e,t,s,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),s))};async function he(e,t,s,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[ac]||(i[ac]=vp["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Nb(e,t,s+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Nb(e,t,s,n,a,i){const l=jb(t,n,a,i);let o;try{o=await e(s,Object.assign({},l))}catch(c){throw console.error(c),new ic(nr(c),0)}if(o.ok||await sh(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await sh(c)}}function ks(e){var t;let s=null;Cb(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=sb(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function rh(e){const t=ks(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function _b(e){return{data:e,error:null}}function kb(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i}=e,l=wb(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Sb(e){return e}function Cb(e){return e.access_token&&e.refresh_token&&e.expires_in}var Eb=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};class Pb{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=wp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Rs})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=Eb(t,["options"]),a=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:kb,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(le(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rs})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,a,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Sb});if(u.error)throw u.error;const h=await u.json(),m=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,f=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);d[`${v}Page`]=g}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(le(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await he(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rs})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Rs})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Rs})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:s,error:n}=await he(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:n}}catch(s){if(le(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}}const Tb={getItem:e=>Kn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Kn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Kn()&&globalThis.localStorage.removeItem(e)}};function nh(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function Rb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Er={debug:!!(globalThis&&Kn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Np extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Mb extends Np{}async function Ab(e,t,s){Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Er.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await s()}finally{Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Er.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Mb(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Er.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Rb();const Db={url:Zw,storageKey:eb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Rn=30*1e3,ah=3;async function ih(e,t,s){return await s()}class fa{constructor(t){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=fa.nextInstanceID,fa.nextInstanceID+=1,this.instanceID>0&&es()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Db),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Pb({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=wp(a.fetch),this.lock=a.lock||ih,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:es()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Ab:this.lock=ih,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Kn()?this.storage=Tb:(this.memoryStorage={},this.storage=nh(this.memoryStorage)):(this.memoryStorage={},this.storage=nh(this.memoryStorage)),es()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=nb(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),es()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),vb(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return le(s)?{error:s}:{error:new jp("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,a;try{const i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ks}),{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(le(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var s,n,a;try{let i;if("email"in t){const{email:u,password:h,options:m}=t;let f=null,y=null;this.flowType==="pkce"&&([f,y]=await Cr(this.storage,this.storageKey)),i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:y},xform:ks})}else if("phone"in t){const{phone:u,password:h,options:m}=t;i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ks})}else throw new ei("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(le(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let s;if("email"in t){const{email:i,password:l,options:o}=t;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:rh})}else if("phone"in t){const{phone:i,password:l,options:o}=t;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:rh})}else throw new ei("You must provide either an email or phone number and a password");const{data:n,error:a}=s;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Yl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const s=await Xa(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(s??"").split("/");try{const{data:i,error:l}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ks});if(await Za(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Yl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(le(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:s,provider:n,token:a,access_token:i,nonce:l}=t,o=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ks}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Yl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,a,i,l;try{if("email"in t){const{email:o,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Cr(this.storage,this.storageKey));const{error:h}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:o,options:c}=t,{data:d,error:u}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new ei("You must provide either an email or phone number.")}catch(o){if(le(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var s,n;try{let a,i;"options"in t&&(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:ks});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(le(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var s,n,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Cr(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:_b})}catch(i){if(le(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new _s;const{error:a}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(le(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:l}=await he(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:l,error:o}=await he(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new ei("You must provide either an email or phone number and a type")}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Xa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rs}):await this._useSession(async s=>{var n,a,i;const{data:l,error:o}=s;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _s}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Rs})})}catch(s){if(le(s))return yb(s)&&(await this._removeSession(),await Za(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new _s;const l=a.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Cr(this.storage,this.storageKey));const{data:d,error:u}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Rs});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return Zu(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new _s;const s=Date.now()/1e3;let n=s,a=!0,i=null;const l=Zu(t.access_token);if(l.exp&&(n=l.exp,a=n<=s),a){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(le(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:l,error:o}=s;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new _s;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!es())throw new ti("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ti(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new eh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ti("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new eh("No code detected.");const{data:w,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=t;if(!i||!o||!l||!d)throw new ti("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let m=u+h;c&&(m=parseInt(c));const f=m-u;f*1e3<=Rn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const y=m-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,u);const{data:g,error:v}=await this._getUser(i);if(v)throw v;const p={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:l,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(n){if(le(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Xa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{error:i};const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(xb(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await Za(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=rb(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,a;try{const{data:{session:i},error:l}=s;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Cr(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(le(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:a}=await this._useSession(async i=>{var l,o,c,d,u;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return es()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(le(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)throw l;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await ob(async a=>(a>0&&await lb(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ks})),(a,i)=>{const l=200*Math.pow(2,a);return i&&Xl(i)&&Date.now()+l-n<Rn})}catch(n){if(this._debug(s,"error",n),le(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),es()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Xa(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const a=Math.round(Date.now()/1e3),i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)<a+Xu;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Xu}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:l}=await this._callRefreshToken(n.refresh_token);l&&(console.error(l),Xl(l)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new _s;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new yl;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new _s;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),le(i)){const l={session:null,error:i};return Xl(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,s,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,s)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await bp(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Za(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&es()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Rn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Rn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Rn}ms, refresh threshold is ${ah} ticks`),a<=ah&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Np)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!es()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const a=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Cr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await he(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await he(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:l,error:o}=await he(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(s){if(le(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await he(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(le(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(t==null?void 0:t.factors)||[],a=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const l=this._decodeJWT(a.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(s=a.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}fa.nextInstanceID=0;const Lb=fa;class $b extends Lb{constructor(t){super(t)}}var Ib=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(u){try{d(n.next(u))}catch(h){l(h)}}function c(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(o,c)}d((n=n.apply(e,[])).next())})};class Ob{constructor(t,s,n){var a,i,l;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const o=Yw(t);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:qw,realtime:Ww,auth:Object.assign(Object.assign({},Hw),{storageKey:c}),global:Bw},u=Xw(n??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch),this.fetch=Kw(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new dw(`${o}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new zv(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Uw(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return Ib(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:a,storageKey:i,flowType:l,lock:o,debug:c},d,u){var h;const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $b({url:this.authUrl,headers:Object.assign(Object.assign({},m),d),storageKey:i,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:a,flowType:l,lock:o,debug:c,fetch:u,hasCustomAuthorizationHeader:(h="Authorization"in this.headers)!==null&&h!==void 0?h:!1})}_initRealtimeClient(t){return new kw(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ub=(e,t,s)=>new Ob(e,t,s),I=Ub("https://seayiqgdeaegyicntrvb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNlYXlpcWdkZWFlZ3lpY250cnZiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0NTUxNDcsImV4cCI6MjA2NTAzMTE0N30.64b-X5RTPOTQWWiDHwj11qjr74NMeZ5SBiRBrHziIsk"),_p=b.createContext({session:null,user:void 0,isLogin:!1,logout:async()=>{}});function zb({children:e}){const[t,s]=b.useState(!1),[n,a]=b.useState(null),[i,l]=b.useState(void 0),o=b.useMemo(()=>!!(n!=null&&n.user),[n]),c=async()=>{try{await I.auth.signOut(),a(null),l(void 0)}catch(d){console.error("Error during logout:",d)}};return b.useEffect(()=>{s(!0),(async()=>{var f;const{data:h,error:m}=await I.auth.getSession();m?console.error("Error fetching session:",m):(a(h.session),l((f=h.session)==null?void 0:f.user)),s(!1)})();const{data:u}=I.auth.onAuthStateChange(async(h,m)=>{a(m),l(m==null?void 0:m.user)});return()=>{u.subscription.unsubscribe()}},[]),r.jsx(_p.Provider,{value:{session:n,isLogin:o,user:i,logout:c},children:e})}const js=()=>b.useContext(_p),lh={players:[],facilities:[],managers:[],seasons:[]};function kp(e){return 6e4+(e-1)*3e4}function Sp(e){return 3e4+e*15e3}function Fb(e,t){switch(t.type){case"ADD_PLAYER":return[...e,t.payload.player];case"REMOVE_PLAYER":return e.filter(s=>s.id!==t.payload.player.id);case"START_TRAINING":return e.map(s=>s.id===t.payload.playerId?{...s,training:{stat:t.payload.stat,startTime:Date.now(),period:Sp(s.statLevels[t.payload.stat])}}:s);case"COMPLETE_TRAINING":return e.map(s=>s.id===t.payload.playerId&&s.training?{...s,stats:{...s.stats,[s.training.stat]:s.stats[s.training.stat]+5},statLevels:{...s.statLevels,[s.training.stat]:s.statLevels[s.training.stat]+1},level:s.level+1,training:void 0}:s);case"UPDATE_STRATEGY":return e.map(s=>s.id===t.payload.playerId?{...s,strategy:t.payload.strategy}:s);case"EQUIP_ITEM":return e.map(s=>s.id===t.payload.playerId?{...s,equipment:{...s.equipment,[t.payload.equipment.type]:t.payload.equipment}}:s);case"UPDATE_PLAYER_NAME":return e.map(s=>s.id===t.payload.playerId?{...s,name:t.payload.name}:s);case"UPDATE_RANK":return e.map(s=>s.id===t.payload.playerId?{...s,rank:t.payload.rank}:s);case"UPDATE_BEST":return e.map(s=>s.id===t.payload.playerId?{...s,best:t.payload.best}:s);case"ADD_INJURY":return e.map(s=>s.id===t.payload.playerId?{...s,injuries:[...s.injuries||[],t.payload.injury]}:s);case"HEAL_INJURY":return e.map(s=>s.id===t.payload.playerId?{...s,injuries:s.injuries.filter(n=>n.id!==t.payload.injuryId)}:s);default:return e}}function Bb(e,t){switch(t.type){case"START_FACILITY_UPGRADE":return e.map(s=>s.id===t.payload.facilityId?{...s,upgrading:{startTime:Date.now(),period:kp(s.level)}}:s);case"COMPLETE_FACILITY_UPGRADE":case"SPEED_UP_FACILITY":return e.map(s=>s.id===t.payload.facilityId?{...s,...t.payload.upgradedFacility}:s);default:return e}}function qb(e,t){switch(t.type){case"HIRE_MANAGER":return e.map(s=>s.id===t.payload.managerId?{...s,active:!0,purchasing:{startTime:Date.now(),period:5*24*60*60*1e3}}:s);case"COMPLETE_MANAGER_DURATION":return e.map(s=>s.id===t.payload.managerId?{...s,active:!1,purchasing:void 0}:s);default:return e}}function Hb(e,t){var s;switch(t.type){case"SET_GAME_STATE":return(s=t.payload)==null?void 0:s.state;default:return{...e,players:Fb(e.players,t),facilities:Bb(e.facilities,t),managers:qb(e.managers,t)}}}class Ca{constructor(t){this.supabase=t}async batchResourceTransactions(t,s){try{if(!t||!(s!=null&&s.length))return{success:!1,error:"Invalid parameters"};const n=s.map(i=>({user_id:t,resource_type:i.resource_type,amount:i.amount,source:i.source,source_id:i.source_id||null,created_at:new Date().toISOString()})),{error:a}=await this.supabase.from("resource_transactions").insert(n);return a?(console.error("Error in batch resource transactions:",a),{success:!1,error:a.message}):{success:!0}}catch(n){return console.error("Error in batchResourceTransactions:",n),{success:!1,error:"Failed to process resource transactions"}}}async getUserResourceBalances(t){try{const{data:s,error:n}=await this.supabase.from("resource_transactions").select("resource_type, amount").eq("user_id",t);if(n)return console.error("Error getting resource balances:",n),{};console.log("[ResourceService] Raw transactions:",s);const a={shuttlecocks:0,meals:0,coins:0,diamonds:0};return s==null||s.forEach(i=>{const{resource_type:l,amount:o}=i;l in a&&(a[l]+=o)}),console.log("[ResourceService] Final balances:",a),a}catch(s){return console.error("Error in getUserResourceBalances:",s),{}}}async getResourceBalance(t,s){try{const{data:n,error:a}=await this.supabase.from("resource_transactions").select("amount").eq("user_id",t).eq("resource_type",s);return a?(console.error("Error getting resource balance:",a),0):(n==null?void 0:n.reduce((i,l)=>i+l.amount,0))||0}catch(n){return console.error("Error in getResourceBalance:",n),0}}async refreshResourceBalances(){try{const{error:t}=await this.supabase.rpc("refresh_materialized_view",{view_name:"user_resource_balances"});t&&console.warn("Could not refresh materialized view:",t)}catch(t){console.warn("Error refreshing resource balances:",t)}}async addResourceTransaction(t,s,n,a,i){return this.batchResourceTransactions(t,[{resource_type:s,amount:n,source:a,source_id:i}])}async hasSufficientResources(t,s){try{const n=await this.getUserResourceBalances(t);return Object.entries(s).every(([a,i])=>(n[a]||0)>=i)}catch(n){return console.error("Error checking sufficient resources:",n),!1}}}class Ks{constructor(t){this.supabase=t,this.resourceService=new Ca(t)}calcTotalTournamentMatchCount(t){return t-1}async getTournaments(){try{const{data:t,error:s}=await this.supabase.from("tournament_list").select("*").order("start_date",{ascending:!1});if(s)throw console.error("Error fetching tournaments:",s),s;const n=["local","regional","national","international","premier"],a=["upcoming","ongoing","completed"];return(t||[]).map(l=>({...l,tier:n[l.tier]||"local",status:a[l.status]||"upcoming"}))}catch(t){throw console.error("Error in fetching tournaments:",t),t}}async getTournamentById(t){try{const{data:s,error:n}=await this.supabase.from("tournament_list").select("*").eq("id",t).single();if(n)throw console.error("Error fetching tournaments:",n),n;const a=["local","regional","national","international","premier"],i=["upcoming","ongoing","completed"];return{...s,tier:a[s.tier]||"local",status:i[s.status]||"upcoming"}}catch(s){throw console.error("[getTournamentById] Error in fetching tournaments:",s),s}}async getTournamentWithMatches(t){try{console.log("[getTournamentWithMatches] tournamentId",t);const{data:s,error:n}=await this.supabase.from("tournament_list").select("*").eq("id",t).single();if(n)throw console.error("[getTournamentWithMatches] Error fetching tournaments:",n),n;console.log("[getTournamentWithMatches]",s);const{data:a,error:i}=await this.supabase.from("match").select("*").eq("tournament_id",s.id);if(i)throw console.error("[getTournamentWithMatches] Error fetching matches:",i),i;const l=s.registered_players.map(f=>f.player_id),{data:o,error:c}=await this.supabase.from("players").select("id, name, level, is_cpu").in("id",l);if(c)throw console.error("[getTournamentWithMatches] Error fetching players:",c),c;const d=Math.max(...a.map(f=>f.round_level));console.log("tournament.registered_players",s.registered_players);const u=[];for(let f=1;f<=d;f++){const y=a.filter(g=>g.round_level===f).map(g=>{var v,p,w,j,N,E;return{...g,player1_name:(v=o.find(P=>P.id===g.player1_id))==null?void 0:v.name,player1_level:(p=o.find(P=>P.id===g.player1_id))==null?void 0:p.level,player1_is_cpu:(w=o.find(P=>P.id===g.player1_id))==null?void 0:w.is_cpu,player2_name:(j=o.find(P=>P.id===g.player2_id))==null?void 0:j.name,player2_level:(N=o.find(P=>P.id===g.player2_id))==null?void 0:N.level,player2_is_cpu:(E=o.find(P=>P.id===g.player2_id))==null?void 0:E.is_cpu}});u.push({round_level:f,round_name:`Round ${f}`,matches:y})}const h=["local","regional","national","international","premier"],m=["upcoming","ongoing","completed"];return{...s,tier:h[s.tier]||"local",status:m[s.status]||"upcoming",rounds:u}}catch(s){throw s}}async getTournamentsWithMatches(){try{const{data:t,error:s}=await this.supabase.from("tournament_list").select("*").order("start_date",{ascending:!1});if(s)return console.error("Error fetching tournaments:",s),[];const n=[],a=["local","regional","national","international","premier"],i=["upcoming","ongoing","completed"];for(const l of t||[]){const{data:o,error:c}=await this.supabase.from("match").select("*").eq("tournament_id",l.id);if(c)throw console.error("Error fetching matches:",c),c;const d=Math.max(...o.map(h=>h.round_level)),u=[];for(let h=1;h<=d;h++){const m=o.filter(f=>f.round_level===h);u.push({round_level:h,round_name:`Round ${h}`,matches:m})}n.push({...l,tier:a[l.tier]||"local",status:i[l.status]||"upcoming",rounds:u})}return n}catch(t){return console.error("Error in getTournamentsWithRoundsMatches:",t),[]}}async getUserTournamentRegistrations(t){try{const{data:s,error:n}=await this.supabase.from("players").select("id").eq("user_id",t);if(n)return console.error("Error fetching user players:",n),[];const a=(s==null?void 0:s.map(c=>c.id))||[];if(a.length===0)return[];const{data:i,error:l}=await this.supabase.from("tournament_list").select("*").order("start_date",{ascending:!1});return l?(console.error("Error fetching tournaments:",l),[]):(i==null?void 0:i.filter(c=>(c.registered_players||[]).some(u=>a.includes(u.player_id||u.playerId))))||[]}catch(s){return console.error("Error in getUserTournamentRegistrations:",s),[]}}async registerPlayerForTournament(t,s){try{const{data:n,error:a}=await this.supabase.from("tournament_list").select("*").eq("id",t).single();if(a)return console.error("Error fetching tournament:",a),{success:!1,error:a.message};if(!n)return{success:!1,error:"any not found"};if(n.status!==0)return{success:!1,error:"any registration is closed"};if(n.max_participants&&n.current_participants>=n.max_participants)return{success:!1,error:"any is full"};const{data:i,error:l}=await this.supabase.from("players").select("*").eq("id",s).single();if(l)return console.error("Error fetching player:",l),{success:!1,error:l.message};if(n.min_player_level&&i.level<n.min_player_level)return{success:!1,error:"Player level too low for this tournament"};const o=n.registered_players||[];if(o.some(m=>m.player_id===s||m.playerId===s))return{success:!1,error:"Player already registered for this tournament"};if(n.entry_fee){const m=i.user_id;if(!await this.resourceService.hasSufficientResources(m,n.entry_fee))return{success:!1,error:"Insufficient resources for entry fee"};const y=Object.entries(n.entry_fee).map(([v,p])=>({resource_type:v,amount:-p,source:"tournament_entry_fee",source_id:t}));if(!(await this.resourceService.batchResourceTransactions(m,y)).success)return{success:!1,error:"Failed to process entry fee"}}const{data:d}=await this.supabase.from("user_profiles").select("team_name").eq("user_id",i.user_id).single(),u=[...o,{player_id:s,player_name:i.name,user_id:i.user_id,team_name:(d==null?void 0:d.team_name)||"No Team",registered_at:new Date().toISOString()}],{error:h}=await this.supabase.from("tournament_list").update({registered_players:u,current_participants:n.current_participants+1,updated_at:new Date().toISOString()}).eq("id",t);return h?(console.error("Error updating tournament:",h),{success:!1,error:h.message}):{success:!0}}catch(n){return console.error("Error in registerPlayerForTournament:",n),{success:!1,error:"Failed to register player for tournament"}}}async startTournament(t){try{const{data:s,error:n}=await this.supabase.from("tournament_list").select("*").eq("id",t).single();if(n)return console.error("Error fetching tournament:",n),{success:!1,error:n.message};if(!s)return{success:!1,error:"any not found"};if(s.status!==0)return{success:!1,error:"any already started or completed"};const a=s.registered_players||[];if(a.length<2)return{success:!1,error:"Not enough players to start tournament"};const{error:i}=await this.supabase.from("tournament_list").update({status:1,updated_at:new Date().toISOString()}).eq("id",t);if(i)return console.error("Error updating tournament status:",i),{success:!1,error:i.message};const l=await this.generateMatches(t,s.round_interval_minutes,1,a);return l.success?{success:!0}:{success:!1,matches:l.matches}}catch(s){return console.error("Error in startTournament:",s),{success:!1,error:"Failed to start tournament"}}}async getTournamentMatches(t){const{data:s,error:n}=await this.supabase.from("match").select("*").eq("tournament_id",t);return n?(console.error("Error fetching matches:",n),[]):s}async generateMatches(t,s,n,a){try{const i=this.shuffleArray([...a]);console.log("[generateMatches] shuffledPlayers",i);const l=[];for(let d=0;d<i.length;d+=2){const u=i[d],h=i[d+1]||null;console.log("[generateMatches] making match between",u,"and",h),l.push({tournament_id:t,player1_id:u.player_id,player2_id:(h==null?void 0:h.player_id)||null,winner_id:h?null:u.player_id,scheduled_start_time:new Date(new Date().getTime()+1e3*60*s||10).toISOString(),created_at:new Date().toISOString(),completed:!h,status:h?"pending":"bye",score:h?null:"21-0, 21-0",round_level:n})}console.log("[generateMatches] matches",l);const{error:o}=await this.supabase.from("match").insert(l);return o?(console.error("Error creating matches:",o),{success:!1,error:o.message}):{success:!0,matches:[{round_level:n,round_name:`Round ${n}`,matches:l}]}}catch(i){return console.error("Error in generateMatches:",i),{success:!1,error:"Failed to populate first round matches"}}}async getUserNextMatch(t){try{const{data:s,error:n}=await this.supabase.from("players").select("id").eq("user_id",t);if(n)return console.error("Error fetching user players:",n),null;const a=(s==null?void 0:s.map(o=>o.id))||[];if(a.length===0)return null;const{data:i,error:l}=await this.supabase.from("match").select("*").or(a.map(o=>`player1_id.eq.${o},player2_id.eq.${o}`).join(",")).eq("completed",!1).order("created_at",{ascending:!0}).limit(1);return l?(console.error("Error fetching user matches:",l),null):(i==null?void 0:i[0])||null}catch(s){return console.error("Error in getUserNextMatch:",s),null}}async getTournamentProgress(t){try{const{data:s,error:n}=await this.supabase.from("tournament_list").select("*").eq("id",t).single();if(n)return console.error("Error fetching tournament:",n),null;const{data:a,error:i}=await this.supabase.from("match").select("*").eq("tournament_id",t);if(i)return console.error("Error fetching matches:",i),null;const l=this.calcTotalTournamentMatchCount(s.registered_players.length),o=a.filter(d=>d.completed===!0).length,c=l>0?o/l*100:0;return{tournament:s,totalMatchCount:l,completedMatchCount:o,progress:c}}catch(s){return console.error("Error in getTournamentProgress:",s),null}}shuffleArray(t){const s=[...t];for(let n=s.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[s[n],s[a]]=[s[a],s[n]]}return s}async getTournamentAutomationStatus(t){try{const{data:s,error:n}=await this.supabase.from("tournament_list").select("automation_enabled, automation_settings").eq("id",t).single();return n?(console.error("Error fetching tournament automation status:",n),null):{automation_enabled:(s==null?void 0:s.automation_enabled)||!1,automation_settings:(s==null?void 0:s.automation_settings)||null}}catch(s){return console.error("Error in getTournamentAutomationStatus:",s),null}}async toggleAutomation(t,s){try{const{error:n}=await this.supabase.from("tournament_list").update({automation_enabled:s}).eq("id",t);return n?(console.error("Error disabling automation:",n),!1):!0}catch(n){return console.error("Error in disableAutomation:",n),!1}}async getCPUPlayers(){const{data:t,error:s}=await this.supabase.from("players").select("*").eq("is_cpu",!0);if(s)throw s;return t}async updateTournament(t,s,n=[]){if(n.length>0){const{data:i,error:l}=await this.supabase.from("players").select("*").in("id",n);if(l)throw l;const o=(i||[]).map(c=>({player_id:c.id}));s.registered_players=o,s.current_participants=o.length}console.log("updating tournament",s);const{error:a}=await this.supabase.from("tournament_list").update(s).eq("id",t);if(a)throw a;return!0}async createTournament(t,s=[]){if(s.length>0){const{data:i,error:l}=await this.supabase.from("players").select("*").in("id",s);if(l)throw l;const o=(i||[]).map(c=>({player_id:c.id}));t.registered_players=o,t.current_participants=o.length}console.log("creating tournament",t);const{data:n,error:a}=await this.supabase.from("tournament_list").insert(t).select().single();if(a)throw a;return n}async deleteTournament(t){try{const{error:s}=await this.supabase.from("match").delete().eq("tournament_id",t);if(s)throw console.error("Error deleting matches:",s),s;const{error:n}=await this.supabase.from("user_tournament_registrations").delete().eq("tournament_id",t);n&&console.error("Error deleting tournament registrations:",n);const{error:a}=await this.supabase.from("tournament_list").delete().eq("id",t);if(a)throw console.error("Error deleting tournament:",a),a;return console.log(`Successfully deleted tournament ${t} and all associated records`),!0}catch(s){throw console.error("Error in deleteTournament:",s),s}}async getRegisteredPlayers(t){const{data:s,error:n}=await this.supabase.from("user_tournament_registrations").select(`
        player_id,
        players!inner(*)
      `).eq("tournament_id",t).eq("status","active");if(n)throw n;return s}}function oh(){return{endurance:Math.floor(Math.random()*20)+40,strength:Math.floor(Math.random()*20)+40,agility:Math.floor(Math.random()*20)+40,speed:Math.floor(Math.random()*20)+40,explosiveness:Math.floor(Math.random()*20)+40,injuryPrevention:Math.floor(Math.random()*20)+40,smash:Math.floor(Math.random()*20)+40,defense:Math.floor(Math.random()*20)+40,serve:Math.floor(Math.random()*20)+40,stick:Math.floor(Math.random()*20)+40,slice:Math.floor(Math.random()*20)+40,drop:Math.floor(Math.random()*20)+40}}function ch(){return{endurance:0,strength:0,agility:0,speed:0,explosiveness:0,injuryPrevention:0,smash:0,defense:0,serve:0,stick:0,slice:0,drop:0}}function dh(){return{physicalCommitment:5,playStyle:5,movementSpeed:5,fatigueManagement:5,rallyConsistency:5,riskTaking:5,attack:5,softAttack:5,serving:5,courtDefense:5,mentalToughness:5,selfConfidence:5}}const Wb=["Alex","Jordan","Morgan","Taylor","Sam","Chris","Pat","Robin","Jamie","Lin","Wei","Chen","Lee","Kim","Park","Sato","Tanaka","Singh","Thomas","Martin","Bernard","Lucas","Hugo","Louis","Nathan","Gabriel","Arthur"],Vb=["Emma","Marie","Sophie","Alice","Julie","Sarah","Laura","Clara","Anna","Mei","Yuki","Sakura","Ji-eun","Min","Priya","Ava","Isabella","Sophia","Charlotte","Amelia","Harper","Evelyn","Abigail","Emily","Elizabeth"],uh=["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Wang","Li","Zhang","Liu","Chen","Kim","Lee","Park","Singh","Patel","Martin","Bernard","Thomas","Petit","Robert","Richard","Durand","Dubois","Anderson","Taylor","Moore","Jackson","Thompson","White","Harris","Clark"];function Zl(e){const t=e==="male"?Wb:Vb,s=t[Math.floor(Math.random()*t.length)],n=uh[Math.floor(Math.random()*uh.length)];return`${s} ${n}`}class jr{constructor(t){this.supabase=t}async updatePlayerRank(t){try{const{data:s,error:n}=await this.supabase.from("player_play_history").select("*").or(`player1_id.eq.${t},player2_id.eq.${t}`).order("created_at",{ascending:!1}).limit(50);if(n)return console.error("Error fetching player matches:",n),{success:!1,error:n.message};let a=10,i=0,l=0;s==null||s.forEach(d=>{(d.player1_id===t?d.result:!d.result)?(i++,a+=5):(l++,a-=5)});const o=i+l;if(o>0){const d=i/o;d>.6?a+=10:d<.4&&(a-=10)}const{error:c}=await this.supabase.from("players").update({rank:a,updated_at:new Date().toISOString()}).eq("id",t);return c?(console.error("Error updating player rank:",c),{success:!1,error:c.message}):{success:!0}}catch(s){return console.error("Error in updatePlayerRank:",s),{success:!1,error:"Failed to update player rank"}}}async getPlayerWithDetails(t){try{const{data:s,error:n}=await this.supabase.from("players").select("*").eq("id",t).eq("is_cpu",!1).single();if(n)return console.error("Error fetching player:",n),null;const{data:a}=await this.supabase.from("player_stats").select("*").eq("player_id",t).single(),{data:i}=await this.supabase.from("player_levels").select("*").eq("player_id",t).single(),{data:l}=await this.supabase.from("player_strategy").select("*").eq("player_id",t).single(),{data:o}=await this.supabase.from("player_equipment").select("*").eq("player_id",t);return{...s,stats:a,levels:i,strategy:l,equipment:o}}catch(s){return console.error("Error in getPlayerWithDetails:",s),null}}async createPlayer(t,s,n="male"){try{const a=s||Zl(n),i=oh(),l=ch(),o=dh(),c=y=>{switch(y){case"beginner":return Math.floor(Math.random()*50);case"intermediate":return Math.floor(Math.random()*100)+50;case"advanced":return Math.floor(Math.random()*100)+150;case"expert":return Math.floor(Math.random()*150)+250;case"master":return Math.floor(Math.random()*150)+400;default:return 0}},{data:d,error:u}=await this.supabase.from("players").insert({user_id:t,name:a,level:1,max_level:Math.floor(Math.random()*50)+150,rank:1,gender:n,is_cpu:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(u)return console.error("Error creating player:",u),{success:!1,error:u.message};const{error:h}=await this.supabase.from("player_stats").insert({player_id:d.id,endurance:i.endurance,strength:i.strength,agility:i.agility,speed:i.speed,explosiveness:i.explosiveness,injury_prevention:i.injuryPrevention,smash:i.smash,defense:i.defense,serve:i.serve,stick:i.stick,slice:i.slice,drop:i.drop,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(h)return console.error("Error creating player stats:",h),{success:!1,error:h.message};const{error:m}=await this.supabase.from("player_levels").insert({player_id:d.id,endurance:l.endurance,strength:l.strength,agility:l.agility,speed:l.speed,explosiveness:l.explosiveness,injury_prevention:l.injuryPrevention,smash:l.smash,defense:l.defense,serve:l.serve,stick:l.stick,slice:l.slice,drop:l.drop,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(m)return console.error("Error creating player levels:",m),{success:!1,error:m.message};const{error:f}=await this.supabase.from("player_strategy").insert({player_id:d.id,physical_commitment:o.physicalCommitment,play_style:o.playStyle,movement_speed:o.movementSpeed,fatigue_management:o.fatigueManagement,rally_consistency:o.rallyConsistency,risk_taking:o.riskTaking,attack:o.attack,soft_attack:o.softAttack,serving:o.serving,court_defense:o.courtDefense,mental_toughness:o.mentalToughness,self_confidence:o.selfConfidence,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return f?(console.error("Error creating player strategy:",f),{success:!1,error:f.message}):{success:!0,player:{...d,stats:i,levels:l,strategy:o,equipment:[]}}}catch(a){return console.error("Error in createPlayer:",a),{success:!1,error:"Failed to create player"}}}async createCpuPlayer(t,s="beginner",n,a,i){try{const l=i||(Math.random()>.5?"male":"female"),o=n&&a?`${n} Player ${a}`:Zl(l),c=p=>{switch(p){case"beginner":return Math.floor(Math.random()*20)+30;case"intermediate":return Math.floor(Math.random()*20)+50;case"advanced":return Math.floor(Math.random()*20)+70;case"expert":return Math.floor(Math.random()*15)+85;case"master":return Math.floor(Math.random()*10)+90;default:return Math.floor(Math.random()*20)+40}},d=p=>{switch(p){case"beginner":return Math.floor(Math.random()*3);case"intermediate":return Math.floor(Math.random()*3)+2;case"advanced":return Math.floor(Math.random()*3)+4;case"expert":return Math.floor(Math.random()*3)+6;case"master":return Math.floor(Math.random()*3)+8;default:return Math.floor(Math.random()*3)}},u=p=>{switch(p){case"beginner":return Math.floor(Math.random()*50);case"intermediate":return Math.floor(Math.random()*100)+50;case"advanced":return Math.floor(Math.random()*100)+150;case"expert":return Math.floor(Math.random()*150)+250;case"master":return Math.floor(Math.random()*150)+400;default:return 0}},{data:h,error:m}=await this.supabase.from("players").insert({user_id:t,name:o,level:Math.floor(Math.random()*20)+1,max_level:Math.floor(Math.random()*50)+150,rank:u(s),gender:l,is_cpu:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(m)return console.error("Error creating CPU player:",m),{success:!1,error:m.message};const{error:f}=await this.supabase.from("player_stats").insert({player_id:h.id,endurance:c(s),strength:c(s),agility:c(s),speed:c(s),explosiveness:c(s),injury_prevention:c(s),smash:c(s),defense:c(s),serve:c(s),stick:c(s),slice:c(s),drop:c(s),created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(f)return console.error("Error creating CPU player stats:",f),{success:!1,error:f.message};const{error:y}=await this.supabase.from("player_levels").insert({player_id:h.id,endurance:d(s),strength:d(s),agility:d(s),speed:d(s),explosiveness:d(s),injury_prevention:d(s),smash:d(s),defense:d(s),serve:d(s),stick:d(s),slice:d(s),drop:d(s),created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(y)return console.error("Error creating CPU player levels:",y),{success:!1,error:y.message};const g=p=>{switch(p){case"beginner":return Math.floor(Math.random()*3)+3;case"intermediate":return Math.floor(Math.random()*3)+4;case"advanced":return Math.floor(Math.random()*3)+5;case"expert":return Math.floor(Math.random()*3)+6;case"master":return Math.floor(Math.random()*3)+7;default:return Math.floor(Math.random()*3)+4}},{error:v}=await this.supabase.from("player_strategy").insert({player_id:h.id,physical_commitment:g(s),play_style:g(s),movement_speed:g(s),fatigue_management:g(s),rally_consistency:g(s),risk_taking:g(s),attack:g(s),soft_attack:g(s),serving:g(s),court_defense:g(s),mental_toughness:g(s),self_confidence:g(s),created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return v?(console.error("Error creating CPU player strategy:",v),{success:!1,error:v.message}):{success:!0,player:h}}catch(l){return console.error("Error in createCpuPlayer:",l),{success:!1,error:"Failed to create CPU player"}}}async generateCpuPlayersForTeam(t,s,n,a,i,l="mixed"){try{const o=[];for(let c=1;c<=i;c++){let d;l==="mixed"?d=Math.random()>.5?"male":"female":d=l;const u=await this.createCpuPlayer(t,a,n,c,d);u.success&&u.player&&(o.push(u.player),await this.supabase.from("team_players").insert({team_id:s,player_id:u.player.id,created_at:new Date().toISOString()}))}return{success:!0,players:o}}catch(o){return console.error("Error in generateCpuPlayersForTeam:",o),{success:!1,error:"Failed to generate CPU players for team"}}}createQuickCpuOpponent(t){const s=oh(),n=ch(),a=dh(),i=Math.random()>.5?"male":"female";return{id:`cpu-${Date.now()}`,name:Zl(i),gender:i,level:t,maxLevel:t+10,stats:s,statLevels:n,rank:Math.floor(Math.random()*450),training:void 0,strategy:a,equipment:{},injuries:[],best:[]}}async updatePlayerStats(t,s){try{const{error:n}=await this.supabase.from("player_stats").update({...s,updated_at:new Date().toISOString()}).eq("player_id",t);return n?(console.error("Error updating player stats:",n),{success:!1,error:n.message}):{success:!0}}catch(n){return console.error("Error in updatePlayerStats:",n),{success:!1,error:"Failed to update player stats"}}}async updatePlayerLevels(t,s){try{const{error:n}=await this.supabase.from("player_levels").update({...s,updated_at:new Date().toISOString()}).eq("player_id",t);return n?(console.error("Error updating player levels:",n),{success:!1,error:n.message}):{success:!0}}catch(n){return console.error("Error in updatePlayerLevels:",n),{success:!1,error:"Failed to update player levels"}}}async getPlayersByUserId(t){try{const{data:s,error:n}=await this.supabase.from("players").select("*").eq("user_id",t).eq("is_cpu",!1).order("created_at",{ascending:!1});return n?(console.error("Error fetching players by user ID:",n),[]):s||[]}catch(s){return console.error("Error in getPlayersByUserId:",s),[]}}async getPlayerWithTeamName(t){var s,n,a;try{const{data:i,error:l}=await this.supabase.from("players").select(`
          *,
          team_players!inner(
            teams!inner(
              name
            )
          )
        `).eq("id",t).eq("is_cpu",!1).single();return l?(console.error("Error fetching player with team name:",l),null):{...i,teamName:((a=(n=(s=i.team_players)==null?void 0:s[0])==null?void 0:n.teams)==null?void 0:a.name)||"No Team"}}catch(i){return console.error("Error in getPlayerWithTeamName:",i),null}}async getPlayersWithTeamNames(t){try{return(await Promise.all(t.map(n=>this.getPlayerWithTeamName(n)))).filter(n=>n!==null)}catch(s){return console.error("Error in getPlayersWithTeamNames:",s),[]}}async updatePlayerName(t,s){try{const{error:n}=await this.supabase.from("players").update({name:s,updated_at:new Date().toISOString()}).eq("id",t);return n?(console.error("Error updating player name:",n),{success:!1,error:n.message}):{success:!0}}catch(n){return console.error("Error in updatePlayerName:",n),{success:!1,error:"Failed to update player name"}}}}class Cp{constructor(t){this.supabase=t,this.playerService=new jr(t),this.resourceService=new Ca(t)}async handleNewUser(t,s,n){try{const{data:a}=await this.supabase.from("players").select("id").eq("user_id",t).limit(1);if(a&&a.length>0)return{success:!0};const i=s?s.split("@")[0]:"Player",{error:l}=await this.supabase.from("user_profiles").insert({user_id:t,team_name:n||`${i} Team`,display_name:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});l&&console.warn("Failed to create user profile:",l);const o=[{resource_type:"coins",amount:1e3,source:"initial_resources"},{resource_type:"shuttlecocks",amount:50,source:"initial_resources"},{resource_type:"meals",amount:20,source:"initial_resources"},{resource_type:"diamonds",amount:9999999,source:"initial_resources"}],c=await this.resourceService.batchResourceTransactions(t,o);c.success||console.warn("Failed to give initial resources:",c.error);const d=[{user_id:t,name:"Shuttlecock Machine",type:"shuttlecock-machine",level:1,production_rate:1,resource_type:"shuttlecocks",max_players:0,upgrade_cost:{coins:100},created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{user_id:t,name:"Canteen",type:"canteen",level:1,production_rate:1,resource_type:"meals",max_players:0,upgrade_cost:{coins:150},created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{user_id:t,name:"Sponsors",type:"sponsors",level:1,production_rate:2,resource_type:"coins",max_players:0,upgrade_cost:{coins:200},created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{user_id:t,name:"Training Center",type:"training-center",level:1,production_rate:0,resource_type:"training",max_players:2,upgrade_cost:{coins:300,shuttlecocks:50,meals:50},created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],{error:u}=await this.supabase.from("facilities").insert(d);u&&console.warn("Failed to create initial facilities:",u);const h=[{user_id:t,name:"José",facility_type:"shuttlecock-machine",production_bonus:.5,active:!1,image_url:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e",cost:50,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{user_id:t,name:"Gordon Ramsay",facility_type:"canteen",production_bonus:.5,active:!1,image_url:"https://images.unsplash.com/photo-1577219491135-ce391730fb2c",cost:50,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{user_id:t,name:"Ronald Dump",facility_type:"sponsors",production_bonus:.5,active:!1,image_url:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d",cost:50,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],{error:m}=await this.supabase.from("managers").insert(h);return m&&console.warn("Failed to create initial managers:",m),{success:!0}}catch(a){return console.error("Error in handleNewUser:",a),{success:!1,error:"Failed to set up new user"}}}async adminChangeUserPassword(t,s,n){try{if(n){const{data:a}=await this.supabase.from("admin_users").select("id").eq("user_id",n).single();if(!a)return{success:!1,error:"Not authorized"}}return console.log(`Admin ${n} requested password change for user ${t} with new password ${s}`),{success:!1,error:"Password change requires server-side implementation"}}catch(a){return console.error("Error in adminChangeUserPassword:",a),{success:!1,error:"Failed to change user password"}}}async getUserProfile(t){try{const{data:s}=await this.supabase.from("user_profiles").select("*").eq("user_id",t).single(),n=await this.playerService.getPlayersByUserId(t),{data:a,error:i}=await this.supabase.from("facilities").select("*").eq("user_id",t);i&&console.error("Error fetching facilities:",i);const{data:l,error:o}=await this.supabase.from("managers").select("*").eq("user_id",t);o&&console.error("Error fetching managers:",o);const c=await this.resourceService.getUserResourceBalances(t),{data:d,error:u}=await this.supabase.from("tournament_list").select("*").order("start_date",{ascending:!1}).limit(10);u&&console.error("Error fetching tournament history:",u);const h=(d==null?void 0:d.filter(m=>(m.registered_players||[]).some(y=>y.user_id===t)))||[];return{userProfile:s||null,players:n||[],facilities:a||[],managers:l||[],resourceBalances:c,tournamentHistory:h}}catch(s){return console.error("Error in getUserProfile:",s),{userProfile:null,players:[],facilities:[],managers:[],resourceBalances:{},tournamentHistory:[]}}}async getUserStatistics(t){try{const{data:s}=await this.supabase.from("players").select("id").eq("user_id",t),n=(s==null?void 0:s.map(m=>m.id))||[];if(n.length===0)return{totalMatches:0,wins:0,losses:0,winRate:0,tournamentsPlayed:0,tournamentsWon:0};const{data:a}=await this.supabase.from("player_play_history").select("*").or(n.map(m=>`player1_id.eq.${m},player2_id.eq.${m}`).join(","));let i=0,l=0;a==null||a.forEach(m=>{(n.includes(m.player1_id)?m.result:!m.result)?i++:l++});const o=i+l,c=o>0?i/o*100:0,{data:d}=await this.supabase.from("tournament_list").select("registered_players, status");let u=0,h=0;return d==null||d.forEach(m=>{(m.registered_players||[]).some(g=>g.user_id===t)&&u++}),{totalMatches:o,wins:i,losses:l,winRate:Math.round(c*100)/100,tournamentsPlayed:u,tournamentsWon:h}}catch(s){return console.error("Error in getUserStatistics:",s),{totalMatches:0,wins:0,losses:0,winRate:0,tournamentsPlayed:0,tournamentsWon:0}}}async updateUserTeamName(t,s){try{const{error:n}=await this.supabase.from("user_profiles").update({team_name:s,updated_at:new Date().toISOString()}).eq("user_id",t);return n?(console.error("Error updating team name:",n),{success:!1,error:n.message}):{success:!0}}catch(n){return console.error("Error in updateUserTeamName:",n),{success:!1,error:"Failed to update team name"}}}async getUserTeamName(t){try{const{data:s,error:n}=await this.supabase.from("user_profiles").select("team_name").eq("user_id",t).single();return n?(console.error("Error fetching team name:",n),null):(s==null?void 0:s.team_name)||null}catch(s){return console.error("Error in getUserTeamName:",s),null}}async updateUserPreferences(t,s){try{const{data:n}=await this.supabase.from("players").select("id").eq("user_id",t).limit(1).single();if(console.log(`Updating user preferences for user ${t} with preferences ${JSON.stringify(s)}`),n){const{error:a}=await this.supabase.from("players").update({updated_at:new Date().toISOString()}).eq("id",n.id);if(a)return{success:!1,error:a.message}}return{success:!0}}catch(n){return console.error("Error in updateUserPreferences:",n),{success:!1,error:"Failed to update user preferences"}}}async deleteUserAccount(t){try{await this.supabase.from("resource_transactions").delete().eq("user_id",t);const{data:s}=await this.supabase.from("players").select("id").eq("user_id",t),n=(s==null?void 0:s.map(a=>a.id))||[];return n.length>0&&await this.supabase.from("player_play_history").delete().or(n.map(a=>`player1_id.eq.${a},player2_id.eq.${a}`).join(",")),await this.supabase.from("players").delete().eq("user_id",t),await this.supabase.from("facilities").delete().eq("user_id",t),await this.supabase.from("managers").delete().eq("user_id",t),await this.supabase.from("interclub_registrations").delete().eq("user_id",t),{success:!0}}catch(s){return console.error("Error in deleteUserAccount:",s),{success:!1,error:"Failed to delete user account"}}}async getUserActivityLogs(t,s=50,n=0){try{const{data:a,error:i}=await this.supabase.from("user_activity_logs").select("*").eq("user_id",t).order("created_at",{ascending:!1}).range(n,n+s-1);return i?(console.error("Error fetching user activity logs:",i),[]):a||[]}catch(a){return console.error("Error in getUserActivityLogs:",a),[]}}async loadGameState(t){const s={players:[],facilities:[],managers:[],seasons:[]};if(!t)return s;try{const{data:n}=await this.supabase.from("players").select("*").eq("user_id",t).eq("is_cpu",!1).order("created_at",{ascending:!0}),a=(n==null?void 0:n.map(y=>y.id))||[],{data:i}=a.length>0?await this.supabase.from("player_stats").select("*").in("player_id",a):{data:[]},{data:l}=a.length>0?await this.supabase.from("player_levels").select("*").in("player_id",a):{data:[]},{data:o}=a.length>0?await this.supabase.from("player_strategy").select("*").in("player_id",a):{data:[]},{data:c}=await this.supabase.from("facilities").select("*").eq("user_id",t).order("created_at",{ascending:!0}),{data:d}=await this.supabase.from("managers").select("*").eq("user_id",t).order("created_at",{ascending:!0}),{data:u}=await this.supabase.from("player_play_history").select("*"),{data:h}=await this.supabase.from("season_list").select("*");s.facilities=(c||[]).map(y=>({id:y.id,name:y.name,type:y.type,level:y.level,productionRate:y.production_rate,resourceType:y.resource_type,maxPlayers:y.max_players,upgradeCost:y.upgrade_cost,upgrading:y.upgrading})),s.managers=(d||[]).map(y=>({id:y.id,name:y.name,facilityType:y.facility_type,productionBonus:y.production_bonus,active:y.active,imageUrl:y.image_url,cost:y.cost,purchasing:y.purchasing})),s.seasons=(h||[]).map(y=>({id:y.id,entryFee:{coins:y.entryFee.coins,shuttlecocks:y.entryFee.shuttlecocks,meals:y.entryFee.meals,diamonds:y.entryFee.diamonds,player:y.entryFee.player},startDate:y.start_date,prizePool:y.prizePool,match_days:y.match_days,type:y.type}));const m=y=>(u==null?void 0:u.filter(v=>v.player1_id===y&&v.result===!0||v.player2_id===y&&v.result===!1).map(v=>({opponent_id:v.player1_id===y?v.player2_id:v.player1_id,opponent_rank:v.player1_id===y?v.player2_rank:v.player1_rank,match_date:v.created_at})).sort((v,p)=>p.opponent_rank-v.opponent_rank).slice(0,6))||[],f=[];return(n||[]).map(y=>{const g=[],v=y.equipment,p={};v&&Object.entries(v).map(([M,T])=>{p[M]=g.find($=>$.id==T)});const w=()=>({endurance:Math.floor(Math.random()*20)+40,strength:Math.floor(Math.random()*20)+40,agility:Math.floor(Math.random()*20)+40,speed:Math.floor(Math.random()*20)+40,explosiveness:Math.floor(Math.random()*20)+40,injuryPrevention:Math.floor(Math.random()*20)+40,smash:Math.floor(Math.random()*20)+40,defense:Math.floor(Math.random()*20)+40,serve:Math.floor(Math.random()*20)+40,stick:Math.floor(Math.random()*20)+40,slice:Math.floor(Math.random()*20)+40,drop:Math.floor(Math.random()*20)+40}),j=()=>({endurance:0,strength:0,agility:0,speed:0,explosiveness:0,injuryPrevention:0,smash:0,defense:0,serve:0,stick:0,slice:0,drop:0}),N=()=>({physicalCommitment:5,playStyle:5,movementSpeed:5,fatigueManagement:5,rallyConsistency:5,riskTaking:5,attack:5,softAttack:5,serving:5,courtDefense:5,mentalToughness:5,selfConfidence:5}),E={id:y.id,gender:y.gender,name:y.name,stats:w(),statLevels:j(),level:y.level,maxLevel:y.max_level,rank:y.rank,best:m(y.id),training:y.training,equipment:p,injuries:y.injuries||[],strategy:N()},P=(i||[]).find(({player_id:M})=>M==y.id);P&&(E.stats={endurance:P.endurance,strength:P.strength,agility:P.agility,speed:P.speed,explosiveness:P.explosiveness,injuryPrevention:P.injury_prevention,smash:P.smash,defense:P.defense,serve:P.serve,stick:P.stick,slice:P.slice,drop:P.drop});const k=(l||[]).find(({player_id:M})=>M==y.id);k&&(E.statLevels={endurance:k.endurance,strength:k.strength,agility:k.agility,speed:k.speed,explosiveness:k.explosiveness,injuryPrevention:k.injury_prevention,smash:k.smash,defense:k.defense,serve:k.serve,stick:k.stick,slice:k.slice,drop:k.drop});const A=(o||[]).find(({player_id:M})=>M==y.id);A&&(E.strategy={physicalCommitment:A.physical_commitment,playStyle:A.play_style,movementSpeed:A.movement_speed,fatigueManagement:A.fatigue_management,rallyConsistency:A.rally_consistency,riskTaking:A.risk_taking,attack:A.attack,softAttack:A.soft_attack,serving:A.serving,courtDefense:A.court_defense,mentalToughness:A.mental_toughness,selfConfidence:A.self_confidence}),f.push(E)}),s.players=f,s}catch(n){return console.error("Error in loadGameState:",n),s}}}class Ep{constructor(t){this.supabase=t,this.playerService=new jr(t),this.tournamentService=new Ks(t)}async executeTournamentMatch(t){try{const{data:s,error:n}=await this.supabase.from("match").select("*").eq("id",t).single();if(n)return console.error("Error fetching match:",n),{success:!1,error:n.message};if(!s)return{success:!1,error:"Match not found"};if(s.status!=="pending")return{success:!1,error:"Match already completed or in progress"};const a=await this.playerService.getPlayerWithDetails(s.player1_id),i=await this.playerService.getPlayerWithDetails(s.player2_id),l=this.calculatePlayerStrength(a),o=this.calculatePlayerStrength(i);console.log("[Match Strengths]",{player1:{name:a.name,strength:l},player2:{name:i.name,strength:o}});const c=this.simulateMatch(a,i,l,o),{error:d}=await this.supabase.from("match").update({status:"completed",completed:!0,winner_id:c.winnerId,score:c.score,actual_start_time:new Date().toISOString(),actual_end_time:new Date().toISOString()}).eq("id",t);if(d)return console.error("Error updating match:",d),{success:!1,error:d.message};await this.recordMatchHistory(s.player1_id,s.player2_id,c),await Promise.all([this.playerService.updatePlayerRank(s.player1_id),this.playerService.updatePlayerRank(s.player2_id)]);const u={winnerId:c.winnerId,winnerName:c.winnerId===s.player1_id?a.name:i.name,score:c.score},{data:h}=await this.supabase.from("match").select("*").eq("tournament_id",s.tournament_id);if(((h==null?void 0:h.filter(f=>f.round_level===f.round_level).length)||0)===1)console.log("All matches of tournament completed, tournament is over"),await this.tournamentService.updateTournament(s.tournament_id,{status:2,champion_id:c.winnerId});else{console.log("All matches of current round completed, moving to next round");const f=await this.tournamentService.getTournamentById(s.tournament_id),y=(h==null?void 0:h.filter(g=>g.round_level===s.round_level).map(g=>g.winner_id))||[];console.log("remainingPlayers",y),await this.tournamentService.generateMatches(s.tournament_id,f.round_interval_minutes,s.round_level+1,y)}return{success:!0,matchData:u}}catch(s){return console.error("Error in executeTournamentMatch:",s),{success:!1,error:"Failed to execute match"}}}calculatePlayerStrength(t){const s=t.stats||{},n=t.levels||{},a=t.strategy||{},i=((s.endurance||50)*(n.endurance||1)+(s.strength||50)*(n.strength||1)+(s.agility||50)*(n.agility||1)+(s.speed||50)*(n.speed||1)+(s.explosiveness||50)*(n.explosiveness||1))/5,l=((s.smash||50)*(n.smash||1)+(s.defense||50)*(n.defense||1)+(s.serve||50)*(n.serve||1)+(s.stick||50)*(n.stick||1)+(s.slice||50)*(n.slice||1)+(s.drop||50)*(n.drop||1))/6,o=((a.mental_toughness||5)*10+(a.self_confidence||5)*10+(s.injury_prevention||50)*(n.injury_prevention||1))/3,c=(t.level||1)*2+Math.max(0,(1e3-(t.rank||1e3))/20),d=((a.rally_consistency||5)*10+(a.attack||5)*10+(a.court_defense||5)*10)/3,u=i*.25+l*.35+o*.2+c*.1+d*.1,h=this.calculateEquipmentBonus(t.equipment),m=this.calculateInjuryPenalty(t.injuries),f=this.calculateFormFactor(t);return Math.max(10,u+h-m+f)}calculateEquipmentBonus(t){if(!Array.isArray(t)||t.length===0)return 0;let s=0;return t.forEach(n=>{n&&n.stats?Object.values(n.stats).forEach(a=>{typeof a=="number"&&(s+=a*.1)}):s+=1}),Math.min(s,15)}calculateInjuryPenalty(t){return!Array.isArray(t)||t.length===0?0:t.filter(n=>n.recoveryEndTime&&n.recoveryEndTime>Date.now()).reduce((n,a)=>{const i=a.severity||1;return n+i*3},0)}calculateFormFactor(t){const s=t.recent_matches||[];return s.length===0?0:(s.filter(i=>i.winner_id===t.id).length/s.length-.5)*10}simulateMatch(t,s,n,a){const i=.85+Math.random()*.3,l=.85+Math.random()*.3,o=n*i,c=a*l,d=o>c?t.id:s.id,u=d===t.id?t:s,h=d===t.id?s:t,m=this.generateMatchScore(o,c),f=this.calculateMatchDuration(Math.abs(o-c));return{winnerId:d,score:m.score,matchData:{player1_strength:n,player2_strength:a,player1_final_strength:o,player2_final_strength:c,performance_variance:{player1:i,player2:l},winner_name:u.name,loser_name:h.name,match_duration:f,strength_difference:Math.abs(o-c)}}}generateMatchScore(t,s){const n=t+s,a=t/n,i=[];let l=0,o=0;for(;l<2&&o<2;){const d=this.simulateSet(a);i.push(d),d.winner===1?l++:o++}return{score:i.map(d=>`${d.player1Score}-${d.player2Score}`).join(", "),winner:l>o?1:2}}calcTotalTournamentMatchCount(t){return t-1}simulateSet(t){let s=0,n=0;for(;Math.random()<t?s++:n++,!((s>=21||n>=21)&&Math.abs(s-n)>=2||s>=30||n>=30););return{player1Score:s,player2Score:n,winner:s>n?1:2}}calculateMatchDuration(t){const n=Math.max(.8,1.2-t/100);return Math.floor(45*n+Math.random()*15)}async recordMatchHistory(t,s,n){try{await this.supabase.from("player_play_history").insert({player1_id:t,player2_id:s,result:n.winnerId===t,player1_rank:n.matchData.player1_final_strength,player2_rank:n.matchData.player2_final_strength,created_at:new Date().toISOString()})}catch(a){console.error("Error recording match history:",a)}}async getMatchWithDetails(t){try{const{data:s,error:n}=await this.supabase.from("match").select(`
          *,
          player1:player1_id(
            id,
            name,
            level,
            rank
          ),
          player2:player2_id(
            id, 
            name,
            level,
            rank
          )
        `).eq("id",t).single();return n?(console.error("Error fetching match details:",n),null):s}catch(s){return console.error("Error in getMatchWithDetails:",s),null}}}const Gb=["departmental","regional","national","top12"],Jb=["mens_singles","womens_singles","mens_doubles","womens_doubles","mixed_doubles"],ur={departmental:{coins:1e3,shuttlecocks:100,meals:50},regional:{coins:2e3,shuttlecocks:200,meals:100},national:{coins:5e3,shuttlecocks:500,meals:250},top12:{coins:1e4,shuttlecocks:1e3,meals:500}};class Pp{constructor(t){this.supabase=t,this.resourceService=new Ca(t),this.playerService=new jr(t),this.matchService=new Ep(t)}async getAvailableSeasons(t){try{const s=await this.getUserUnlockedTiers(t),{data:n,error:a}=await this.supabase.from("interclub_seasons").select("*").in("tier",s).eq("status","registration_open").order("start_date",{ascending:!0});if(a)throw console.error("Error fetching available seasons:",a),a;return{seasons:(n||[]).map(l=>({...l,groups:JSON.parse(l.groups||"[]"),week_schedule:JSON.parse(l.week_schedule||"[]")})),unlockedTiers:s}}catch(s){throw console.error("Error in getAvailableSeasons:",s),s}}async getUserUnlockedTiers(t){var s;try{let n=["departmental"];const{data:a,error:i}=await this.supabase.from("interclub_registrations").select(`
          *,
          season:season_id(tier, status)
        `).eq("user_id",t).eq("status","approved");if(i)return console.error("Error fetching past registrations:",i),n;for(const l of a||[])if(((s=l.season)==null?void 0:s.status)==="completed"&&await this.getUserFinalPosition(t,l.season_id)<=2){const c=l.season.tier,d=this.getNextTier(c);d&&!n.includes(d)&&n.push(d)}return n}catch(n){return console.error("Error in getUserUnlockedTiers:",n),["departmental"]}}getNextTier(t){const s=["departmental","regional","national","top12"],n=s.indexOf(t);return n<s.length-1?s[n+1]:null}async getUserFinalPosition(t,s){try{const{data:n,error:a}=await this.supabase.from("interclub_registrations").select("group_assignment").eq("user_id",t).eq("season_id",s).single();if(a||!n)return 999;const l=(await this.getGroupStandings(s,n.group_assignment)).find(o=>o.team_id===t);return(l==null?void 0:l.position)||999}catch(n){return console.error("Error getting final position:",n),999}}async registerForSeason(t,s){try{console.log("[InterclubService] Registering for season:",s);const n=await this.validateRegistrationEligibility(t,s);if(!n.valid)return{success:!1,error:n.error};const{data:a,error:i}=await this.supabase.from("interclub_seasons").select("*").eq("id",s.season_id).single();if(i||!a)return{success:!1,error:"Season not found"};const l=await Promise.all(s.selected_players.map(h=>this.playerService.getPlayerWithDetails(h))),o={season_id:s.season_id,user_id:t,team_name:s.team_name,players:JSON.stringify(l),status:"pending"},{data:c,error:d}=await this.supabase.from("interclub_registrations").insert(o).select().single();if(d)return console.error("Error creating registration:",d),{success:!1,error:d.message};const u=ur[a.tier];return await this.resourceService.batchResourceTransactions(t,[{resource_type:"coins",amount:-u.coins,source:"interclub_registration",source_id:c.id},{resource_type:"shuttlecocks",amount:-u.shuttlecocks,source:"interclub_registration",source_id:c.id},{resource_type:"meals",amount:-u.meals,source:"interclub_registration",source_id:c.id}]),console.log("[InterclubService] Registration successful:",c.id),{success:!0}}catch(n){return console.error("Error in registerForSeason:",n),{success:!1,error:"Failed to register for season"}}}async validateRegistrationEligibility(t,s){try{const{data:n,error:a}=await this.supabase.from("interclub_seasons").select("*").eq("id",s.season_id).single();if(a||!n)return{valid:!1,error:"Season not found"};if(n.status!=="registration_open")return{valid:!1,error:"Registration is not open for this season"};const i=new Date,l=new Date(n.registration_deadline);if(i>l)return{valid:!1,error:"Registration deadline has passed"};const{data:o}=await this.supabase.from("interclub_registrations").select("id").eq("season_id",s.season_id).eq("user_id",t).single();if(o)return{valid:!1,error:"Already registered for this season"};if(s.selected_players.length<5)return{valid:!1,error:"Minimum 5 players required"};const c=ur[n.tier],d=await this.resourceService.getUserResourceBalances(t);if(d.coins<c.coins||d.shuttlecocks<c.shuttlecocks||d.meals<c.meals)return{valid:!1,error:"Insufficient resources"};const{data:u}=await this.supabase.from("players").select("id").eq("user_id",t).in("id",s.selected_players);return!u||u.length!==s.selected_players.length?{valid:!1,error:"Invalid player selection"}:{valid:!0}}catch(n){return console.error("Error validating registration:",n),{valid:!1,error:"Validation failed"}}}async getUserRegistrations(t){try{const{data:s,error:n}=await this.supabase.from("interclub_registrations").select(`
          *,
          season:season_id(*)
        `).eq("user_id",t).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching user registrations:",n),n;return(s||[]).map(a=>({...a,players:JSON.parse(a.players||"[]")}))}catch(s){throw console.error("Error in getUserRegistrations:",s),s}}async submitLineup(t,s){try{console.log("[InterclubService] Submitting lineup:",s);const n=await this.validateLineupSubmission(t,s);if(!n.valid)return{success:!1,error:n.error};const{data:a,error:i}=await this.supabase.from("interclub_matches").select("*").eq("id",s.encounter_id).single();if(i||!a)return{success:!1,error:"Encounter not found"};const o=a.home_team_id===t?"home_lineup":"away_lineup",c=await this.buildLineupWithPlayerDetails(s.lineup),d={encounter_id:s.encounter_id,team_id:t,submitted_by:t,submitted_at:new Date().toISOString(),lineup:c,is_auto_generated:!1},{error:u}=await this.supabase.from("interclub_matches").update({[o]:JSON.stringify(d),status:this.calculateEncounterStatus(a,o)}).eq("id",s.encounter_id);return u?(console.error("Error updating encounter with lineup:",u),{success:!1,error:u.message}):(console.log("[InterclubService] Lineup submitted successfully"),{success:!0})}catch(n){return console.error("Error in submitLineup:",n),{success:!1,error:"Failed to submit lineup"}}}async validateLineupSubmission(t,s){try{const{data:n,error:a}=await this.supabase.from("interclub_matches").select("*").eq("id",s.encounter_id).single();if(a||!n)return{valid:!1,error:"Encounter not found"};if(n.home_team_id!==t&&n.away_team_id!==t)return{valid:!1,error:"Not authorized to submit lineup for this encounter"};const i=new Date(n.match_date),l=new Date,o=2;if(l>new Date(i.getTime()-o*60*60*1e3))return{valid:!1,error:"Lineup submission deadline has passed"};const c=await this.validateLineupConstraints(t,s.lineup);return c.valid?{valid:!0}:c}catch(n){return console.error("Error validating lineup submission:",n),{valid:!1,error:"Validation failed"}}}async validateLineupConstraints(t,s){try{const n=[s.mens_singles,s.womens_singles,...s.mens_doubles,...s.womens_doubles,...s.mixed_doubles],a={};n.forEach(g=>{a[g]=(a[g]||0)+1});for(const[g,v]of Object.entries(a))if(v>3)return{valid:!1,error:"Player can participate in maximum 3 matches"};const{data:i,error:l}=await this.supabase.from("players").select("id, name, gender").eq("user_id",t).in("id",n);if(l||!i)return{valid:!1,error:"Failed to validate players"};const o=i.reduce((g,v)=>(g[v.id]=v,g),{}),c=o[s.mens_singles],d=o[s.womens_singles],u=s.mens_doubles.map(g=>o[g]),h=s.womens_doubles.map(g=>o[g]),m=s.mixed_doubles.map(g=>o[g]);if((c==null?void 0:c.gender)!=="male")return{valid:!1,error:"Men's singles must be played by a male player"};if((d==null?void 0:d.gender)!=="female")return{valid:!1,error:"Women's singles must be played by a female player"};if(u.some(g=>(g==null?void 0:g.gender)!=="male"))return{valid:!1,error:"Men's doubles must be played by male players"};if(h.some(g=>(g==null?void 0:g.gender)!=="female"))return{valid:!1,error:"Women's doubles must be played by female players"};const f=m.find(g=>(g==null?void 0:g.gender)==="male"),y=m.find(g=>(g==null?void 0:g.gender)==="female");return!f||!y?{valid:!1,error:"Mixed doubles must have one male and one female player"}:{valid:!0}}catch(n){return console.error("Error validating lineup constraints:",n),{valid:!1,error:"Constraint validation failed"}}}async buildLineupWithPlayerDetails(t){const s=[t.mens_singles,t.womens_singles,...t.mens_doubles,...t.womens_doubles,...t.mixed_doubles],a=(await Promise.all(s.map(i=>this.playerService.getPlayerWithDetails(i)))).reduce((i,l)=>(i[l.id]=l,i),{});return{mens_singles:a[t.mens_singles],womens_singles:a[t.womens_singles],mens_doubles:t.mens_doubles.map(i=>a[i]),womens_doubles:t.womens_doubles.map(i=>a[i]),mixed_doubles:t.mixed_doubles.map(i=>a[i])}}calculateEncounterStatus(t,s){const n=t.home_lineup||s==="home_lineup",a=t.away_lineup||s==="away_lineup";return n&&a?"ready":"lineup_pending"}async autoGenerateLineup(t,s){var n,a,i;try{console.log("[InterclubService] Auto-generating lineup for encounter:",s);const{data:l,error:o}=await this.supabase.from("players").select("*").eq("user_id",t).order("rank",{ascending:!0});if(o||!l||l.length<5)return{success:!1,error:"Insufficient players for auto-generation"};const c=l.filter(m=>m.gender==="male"),d=l.filter(m=>m.gender==="female");if(c.length<3||d.length<2)return{success:!1,error:"Insufficient players by gender for auto-generation"};const u={mens_singles:c[0].id,womens_singles:d[0].id,mens_doubles:[c[1].id,c[2].id],womens_doubles:[d[1].id,((n=d[2])==null?void 0:n.id)||d[0].id],mixed_doubles:[((a=c[3])==null?void 0:a.id)||c[0].id,((i=d[1])==null?void 0:i.id)||d[0].id]},h={encounter_id:s,lineup:u};return await this.submitLineup(t,h)}catch(l){return console.error("Error in autoGenerateLineup:",l),{success:!1,error:"Failed to auto-generate lineup"}}}async executeEncounter(t){try{console.log("[InterclubService] Executing encounter:",t);const{data:s,error:n}=await this.supabase.from("interclub_matches").select("*").eq("id",t).single();if(n||!s)return{success:!1,error:"Encounter not found"};if(s.status!=="ready")return{success:!1,error:"Encounter not ready for execution"};const a=JSON.parse(s.home_lineup||"{}"),i=JSON.parse(s.away_lineup||"{}"),l=[];let o=0,c=0;for(const f of Jb){const y=await this.executeIndividualMatch(f,a.lineup,i.lineup);l.push({match_type:f,...y}),y.winner==="home"?o++:c++}const d=o>c?"home":"away",u=d==="home"?s.home_team_id:s.away_team_id,h=`${o}-${c}`,{error:m}=await this.supabase.from("interclub_matches").update({status:"completed",results:JSON.stringify(l),winner_team_id:u,final_score:h,updated_at:new Date().toISOString()}).eq("id",t);return m?(console.error("Error updating encounter results:",m),{success:!1,error:m.message}):(await this.updateGroupStandings(s.season_id,s.group_number),console.log("[InterclubService] Encounter executed successfully:",{finalScore:h,winner:d}),{success:!0,results:{finalScore:h,winner:d,matchResults:l}})}catch(s){return console.error("Error in executeEncounter:",s),{success:!1,error:"Failed to execute encounter"}}}async executeIndividualMatch(t,s,n){try{const a=this.getPlayersForMatchType(t,s),i=this.getPlayersForMatchType(t,n);return t.includes("singles")?this.simulateSinglesMatch(a[0],i[0]):this.simulateDoublesMatch(a,i)}catch(a){console.error("Error executing individual match:",a);const i=this.getPlayersForMatchType(t,s),l=this.getPlayersForMatchType(t,n);return{winner:Math.random()>.5?"home":"away",score:"21-19, 21-17",players:{home:i,away:l}}}}getPlayersForMatchType(t,s){switch(t){case"mens_singles":return[s.mens_singles];case"womens_singles":return[s.womens_singles];case"mens_doubles":return s.mens_doubles;case"womens_doubles":return s.womens_doubles;case"mixed_doubles":return s.mixed_doubles;default:return[]}}simulateSinglesMatch(t,s){const n=(t.rank||500)+Math.random()*100,a=(s.rank||500)+Math.random()*100,i=n>a?"home":"away",o=(i==="home"?n>a:a>n)?["21-15, 21-18","21-12, 21-16","21-18, 19-21, 21-15"]:["19-21, 21-18, 21-19","15-21, 21-19, 21-17"];return{winner:i,score:o[Math.floor(Math.random()*o.length)],players:{home:[t],away:[s]}}}simulateDoublesMatch(t,s){const n=t.reduce((u,h)=>u+(h.rank||500),0)/t.length,a=s.reduce((u,h)=>u+(h.rank||500),0)/s.length,i=n*(.8+Math.random()*.4),l=a*(.8+Math.random()*.4),o=i>l?"home":"away",d=(o==="home"?i>l:l>i)?["21-15, 21-18","21-12, 21-16","21-18, 19-21, 21-15"]:["19-21, 21-18, 21-19","15-21, 21-19, 21-17"];return{winner:o,score:d[Math.floor(Math.random()*d.length)],players:{home:t,away:s}}}async getGroupStandings(t,s){try{const{data:n,error:a}=await this.supabase.from("interclub_matches").select("*").eq("season_id",t).eq("group_number",s).eq("status","completed");if(a)return console.error("Error fetching encounters:",a),[];const{data:i,error:l}=await this.supabase.from("interclub_registrations").select("*").eq("season_id",t).eq("group_assignment",s);if(l)return console.error("Error fetching registrations:",l),[];const o={};i==null||i.forEach(d=>{o[d.user_id]={team_id:d.user_id,team_name:d.team_name,is_cpu:!1,position:0,matches_played:0,encounters_won:0,encounters_lost:0,individual_matches_won:0,individual_matches_lost:0,points:0,form:[]}}),n==null||n.forEach(d=>{const u=d.home_team_id,h=d.away_team_id,m=JSON.parse(d.results||"[]");o[u]&&o[u].matches_played++,o[h]&&o[h].matches_played++;let f=0,y=0;m.forEach(g=>{g.winner==="home"?f++:y++}),o[u]&&(o[u].individual_matches_won+=f,o[u].individual_matches_lost+=y,f>y?(o[u].encounters_won++,o[u].points+=3,o[u].form.push("W")):(o[u].encounters_lost++,o[u].form.push("L"))),o[h]&&(o[h].individual_matches_won+=y,o[h].individual_matches_lost+=f,y>f?(o[h].encounters_won++,o[h].points+=3,o[h].form.push("W")):(o[h].encounters_lost++,o[h].form.push("L")))});const c=Object.values(o).sort((d,u)=>{if(u.points!==d.points)return u.points-d.points;const h=d.individual_matches_won-d.individual_matches_lost;return u.individual_matches_won-u.individual_matches_lost-h});return c.forEach((d,u)=>{d.position=u+1,d.form=d.form.slice(-5)}),c}catch(n){return console.error("Error in getGroupStandings:",n),[]}}async updateGroupStandings(t,s){try{const n=await this.getGroupStandings(t,s),{data:a,error:i}=await this.supabase.from("interclub_seasons").select("groups").eq("id",t).single();if(i||!a){console.error("Error fetching season for standings update");return}const l=JSON.parse(a.groups||"[]"),o=l.findIndex(c=>c.group_number===s);o>=0&&(l[o].standings=n,await this.supabase.from("interclub_seasons").update({groups:JSON.stringify(l),updated_at:new Date().toISOString()}).eq("id",t))}catch(n){console.error("Error updating group standings:",n)}}async getUserNextEncounter(t){try{const{data:s,error:n}=await this.supabase.from("interclub_matches").select("*").or(`home_team_id.eq.${t},away_team_id.eq.${t}`).in("status",["lineup_pending","ready"]).order("match_date",{ascending:!0}).limit(1).single();if(n||!s)return null;const a=s.home_lineup?JSON.parse(s.home_lineup):null,i=s.away_lineup?JSON.parse(s.away_lineup):null;return{...s,home_lineup:a,away_lineup:i,matches:[]}}catch(s){return console.error("Error in getUserNextEncounter:",s),null}}async getUserCurrentSeasonStatus(t){try{const{data:s,error:n}=await this.supabase.from("interclub_registrations").select(`
          *,
          season:season_id(*)
        `).eq("user_id",t).eq("status","approved").order("created_at",{ascending:!1});if(n)return console.error("Error fetching season status:",n),null;const a=s==null?void 0:s.filter(i=>i.season.status==="active"||i.season.status==="registration_closed");if(a&&a.length>0){const i=a[0],l=await this.getGroupStandings(i.season_id,i.group_assignment),o=l.find(c=>c.team_id===t);return{registration:i,standing:o,standings:l}}return null}catch(s){return console.error("Error in getUserCurrentSeasonStatus:",s),null}}}const Kb=new Ca(I);async function Qb(e,t,s,n=!0){if(!s||!t||!e){console.error("[recordResourceUpdate] Invalid parameters:",{userId:e,source:t,changes:s,isAdd:n});return}const a=Object.entries(s).map(([l,o])=>({resource_type:l,amount:n?o:-o,source:t}));console.log("[recordResourceUpdate] Recording transactions:",a);const i=await Kb.batchResourceTransactions(e,a);if(!i.success)throw console.error("[recordResourceUpdate] Failed to record transactions:",i.error),new Error(`Resource update failed: ${i.error}`);console.log("[recordResourceUpdate] Transactions recorded successfully")}async function Yb(e,t,s){e.id&&await I.from("players").update({training:{stat:t,startTime:Date.now(),period:Sp(e.statLevels[t])}}).eq("id",e.id)}async function Xb(e,t,s){e.id&&(await I.from("players").update({training:null,level:e.level+1}).eq("id",e.id),await I.from("player_stats").update({[t]:s}).eq("player_id",e.id),await I.from("player_levels").update([{[t]:e.statLevels[t]+1}]).eq("player_id",e.id))}async function Zb(e,t){e&&await I.from("player_strategy").update([{physical_commitment:t.physicalCommitment,play_style:t.playStyle,movement_speed:t.movementSpeed,fatigue_management:t.fatigueManagement,rally_consistency:t.rallyConsistency,risk_taking:t.riskTaking,attack:t.attack,soft_attack:t.softAttack,serving:t.serving,court_defense:t.courtDefense,mental_toughness:t.mentalToughness,self_confidence:t.selfConfidence}]).eq("player_id",e)}async function ej(e){await I.from("managers").update([{active:!1,purchasing:null}]).eq("id",e)}async function tj(e){await I.from("managers").update([{active:!0,purchasing:{startTime:Date.now(),period:5*24*60*60*1e3}}]).eq("id",e)}async function sj(e,t){await I.from("facilities").update([{upgrading:{startTime:Date.now(),period:kp(e.level)}}]).eq("id",e.id)}async function rj(e,t){await I.from("facilities").update([{level:t.level,production_rate:t.productionRate,max_players:t.maxPlayers,upgrade_cost:t.upgradeCost,upgrading:t.upgrading||null}]).eq("id",e.id)}async function Tp(e,t,s,n){e&&await I.from("players").update([{equipment:{...Object.fromEntries(Object.entries(e.equipment||{}).map(([a,i])=>[a,i.id])),[t.type]:t.id}}]).eq("id",e.id)}async function Rp(e,t){if(!e)return;const s=Date.now(),n=t.filter(a=>a.recoveryEndTime>s);await I.from("players").update([{injuries:n}]).eq("id",e.id)}const Mp=b.createContext(void 0),eo=new Ca(I),nj=new Ks(I),aj=new Cp(I);function ij({children:e}){const[t,s]=b.useReducer(Hb,lh),[n,a]=b.useState([]),{isLogin:i,user:l}=js(),[o,c]=b.useState({shuttlecocks:10,meals:10,coins:200,diamonds:9999999}),d=b.useCallback(async(j,N,E=!0)=>{if(!(l!=null&&l.id)){console.error("No user ID available for resource update");return}console.log(`[updateResources] ${j}:`,{changes:N,isAdd:E});try{await Qb(l.id,j,N,E);const P=await eo.getUserResourceBalances(l.id),k={shuttlecocks:P.shuttlecocks||0,meals:P.meals||0,coins:P.coins||0,diamonds:P.diamonds||0};k?(console.log("[updateResources] Reloaded resources:",k),c(k)):console.error("Failed to reload resources after update")}catch(P){console.error("Error updating resources:",P)}},[l]),u=async()=>{const j=await nj.getTournaments();a(j)},h=async()=>{if(!l||!l.email){s({type:"SET_GAME_STATE",payload:{state:lh}});return}console.log("[GameContext] Loading game state for user:",l.id);const j=await aj.loadGameState(l.id);console.log("[GameContext] Game state loaded:",j),s({type:"SET_GAME_STATE",payload:{state:j}}),await u()},m=b.useCallback(async()=>{l!=null&&l.id&&(console.log("[GameContext] Manual refresh triggered"),await Promise.all([h(),(async()=>{const j=await eo.getUserResourceBalances(l.id),N={shuttlecocks:j.shuttlecocks||0,meals:j.meals||0,coins:j.coins||0,diamonds:j.diamonds||0};N&&c(N)})()]))},[l==null?void 0:l.id]);b.useEffect(()=>{if(!l)return;const j=async()=>{console.log("[GameContext] Loading resources for user:",l.id);const E=await eo.getUserResourceBalances(l.id),P={shuttlecocks:E.shuttlecocks||0,meals:E.meals||0,coins:E.coins||0,diamonds:E.diamonds||0};P?(console.log("[GameContext] Resources loaded:",P),c(P)):console.error("[GameContext] Failed to load resources")};(async()=>{console.log("[GameContext] Loading complete game state and resources"),await Promise.all([h(),j()])})()},[i,l==null?void 0:l.id]);const w={gameState:t,resources:o,tournaments:n,setTournaments:a,updateResources:d,setGameState:j=>{s({type:"SET_GAME_STATE",payload:{state:j(t)}})},dispatchGameState:s,equipItem:async(j,N)=>{const E=t.players.find(P=>P.id===j);if(E)try{await Tp(E,N,"equip"),s({type:"EQUIP_ITEM",payload:{playerId:j,equipment:N}})}catch(P){console.error("Failed to equip item:",P)}},updatePlayerName:(j,N)=>{s({type:"UPDATE_PLAYER_NAME",payload:{playerId:j,name:N}})},healInjury:(j,N,E)=>{console.log("healing injury",j,N,E),s({type:"HEAL_INJURY",payload:{playerId:j,injuryId:N}})},purchaseResources:(j,N,E)=>{o.diamonds<E||d("shop_purchase",{[j]:N,diamonds:-E})},refreshGameState:m};return r.jsx(Mp.Provider,{value:w,children:e})}function Kt(){const e=b.useContext(Mp);if(e===void 0)throw new Error("useGame must be used within a GameProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Y=(e,t)=>{const s=b.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>b.createElement("svg",{ref:u,...lj,width:a,height:a,stroke:n,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${oj(e)}`,o].join(" "),...d},[...t.map(([h,m])=>b.createElement(h,m)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=Y("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=Y("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=Y("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=Y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=Y("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=Y("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=Y("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=Y("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=Y("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=Y("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=Y("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Y("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=Y("ChevronFirst",[["path",{d:"m17 18-6-6 6-6",key:"1yerx2"}],["path",{d:"M7 6v12",key:"1p53r6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=Y("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=Y("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=Y("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=Y("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=Y("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=Y("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=Y("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=Y("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=Y("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=Y("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=Y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=Y("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=Y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Y("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=Y("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=Y("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=Y("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=Y("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=Y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=Y("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=Y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=Y("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=Y("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=Y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=Y("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=Y("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=Y("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=Y("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=Y("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Y("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=Y("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=Y("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=Y("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=Y("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=Y("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=Y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Y("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=Y("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=Y("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=Y("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Rj=new Cp(I);function Mj({onClose:e}){const[t,s]=b.useState(""),[n,a]=b.useState(""),[i,l]=b.useState(""),[o,c]=b.useState(""),[d,u]=b.useState(""),[h,m]=b.useState(""),[f,y]=b.useState(""),[g,v]=b.useState(""),[p,w]=b.useState(""),[j,N]=b.useState(0),{user:E}=js(),{refreshGameState:P}=Kt();b.useEffect(()=>{s(""),m(""),y(""),v(""),w(""),a(""),l(""),c(""),(async()=>{E&&!E.email_confirmed_at&&(N(1),a(E.email))})()},[]);const k=async()=>{if(!h||!f||!g){s("Name Fields required");return}if(!p.trim()){s("Team name is required");return}if(!n){s("Email required");return}if(!i){s("Password required");return}if(i.length<6){s("Password length must be at least 6.");return}if(!o){s("Confirm Password required");return}if(i!==o){s("Passwords do not match");return}try{const{data:M,error:T}=await I.auth.signUp({email:n,password:i,options:{data:{manager_name:h,name:f,surname:g,team_name:p.trim()},emailRedirectTo:void 0}});if(console.log("[handleRegister] data",M),T){console.error("Registration Error:",T.message),s(T.message);return}if(M.user){console.log("[handleRegister] Creating user profile and game data...");const $=await Rj.handleNewUser(M.user.id,n,p.trim());if(!$.success){console.error("User setup error:",$.error),s($.error||"Failed to set up user profile");return}const{data:F,error:J}=await I.auth.signInWithPassword({email:n,password:i});console.log("[handleRegister] signInData",F),J?(console.error("Auto-login Error:",J.message),s("Registration successful, but auto-login failed. Please try logging in manually.")):(console.log("[handleRegister] Registration and setup completed successfully"),console.log("[handleRegister] Triggering game state refresh..."),setTimeout(async()=>{await P(),console.log("[handleRegister] Game state refresh completed")},1e3),e())}}catch(M){console.error("Unexpected error:",M),s("An unexpected error occurred. Please try again.")}},A=async()=>{const{data:M,error:T}=await I.auth.verifyOtp({email:n,token:d,type:"signup"});console.log("[handleCode] data",M),T?console.error("Error verifying OTP:",T):e()};return r.jsx("div",{children:j===0?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Manager Name"}),r.jsx("input",{type:"text",value:h,placeholder:"Manager Name",onChange:M=>{m(M.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name"}),r.jsx("input",{type:"text",value:f,placeholder:"Name",onChange:M=>{y(M.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Surname"}),r.jsx("input",{type:"text",value:g,placeholder:"Surname",onChange:M=>{v(M.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Team Name"}),r.jsx("input",{type:"text",value:p,placeholder:"Enter your team name",onChange:M=>{w(M.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email"}),r.jsx("input",{type:"email",value:n,placeholder:"Email",onChange:M=>{a(M.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password"}),r.jsx("input",{type:"password",value:i,placeholder:"Password",onChange:M=>{l(M.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Confirm Password"}),r.jsx("input",{type:"password",value:o,placeholder:"Confirm Password",onChange:M=>{c(M.target.value)}})]}),t&&r.jsx("div",{className:"error text-red-500 text-sm",children:t}),r.jsx("button",{className:"btn w-full",onClick:async()=>{await k()},children:"Register"})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{className:"w-full",type:"text",value:d,placeholder:"VERIFICATION CODE",onChange:M=>{u(M.target.value)}}),r.jsx("button",{className:"btn w-full",onClick:async()=>{await A()},children:"Confirm Email"})]})})}function Aj({onClose:e}){const[t,s]=b.useState(""),[n,a]=b.useState(""),[i,l]=b.useState(""),[o,c]=b.useState(0),[d,u]=b.useState(""),h=async()=>{if(!t){u("Email is required");return}if(!n){u("Password is required");return}u("");const{data:g,error:v}=await I.auth.signInWithPassword({email:t,password:n});if(v){console.error("Login Error:",v.message),v.message==="Email not confirmed"?c(1):u(v.message);return}g.session&&e()},m=async g=>{g.key==="Enter"&&(g.preventDefault(),h())},f=async()=>{const{data:g,error:v}=await I.auth.verifyOtp({email:t,token:i,type:"signup"});if(console.log("[handleConfirmCode] data",g),v){console.error("Error verifying OTP:",v.message),u(v.message);return}e()},y=async()=>{const{data:g,error:v}=await I.auth.resetPasswordForEmail(t);console.log("[requestNewCode] data",g),v?(console.error("Error requesting new verification code:",v.message),u(v.message)):de.success("A new verification code has been sent to your email.")};return r.jsx("div",{children:o===0?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"text",placeholder:"Email",value:t,onChange:g=>s(g.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:g=>a(g.target.value),onKeyDown:m})]}),d&&r.jsx("div",{className:"error text-red-500 text-sm",children:d}),r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("button",{onClick:async()=>{await h()},className:"btn w-full",children:"Login"}),r.jsx("button",{className:"btn-outline w-full",onClick:async()=>await y(),children:"Forgot Password?"})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{className:"w-full",type:"text",value:i,placeholder:"Enter your confirmation code",onChange:g=>l(g.target.value)}),d&&r.jsx("div",{className:"error text-red-500 text-sm",children:d}),r.jsx("button",{className:"btn w-full",onClick:async()=>{await f()},children:"Confirm Email"})]})})}function Dj({isOpen:e,type:t,onClose:s}){return r.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 ${e?"":"hidden"}`,children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:t=="login"?"Login":"Register"}),r.jsx("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(tt,{className:"w-5 h-5"})})]}),t=="login"?r.jsx(Aj,{onClose:s}):r.jsx(Mj,{onClose:s})]})})}const Lj="/assets/first-BIUqa8K8.jpg",$j="/assets/second-DlJGdHk5.jpg",Ij="/assets/third-BmRlTXSF.jpg";function Up(){const[e,t]=b.useState(null),{isLogin:s,user:n}=js(),a=Na(),i=()=>{s?a("/dashboard"):t("login")},l=async()=>{await I.auth.signOut()};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"h-screen relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:Lj,className:"w-full"}),r.jsx("button",{className:"absolute btn-slide top-[70%] left-[7%]",style:{fontSize:"2vw"},onClick:i,children:"Play now"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:$j,className:"w-full"}),r.jsx("button",{className:"absolute btn-slide top-[34.3%] left-[7.5%]",style:{fontSize:"2vw"},onClick:i,children:"Play now"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:Ij,className:"w-full"}),r.jsx("button",{className:"absolute btn-slide top-[34.3%] left-[7.5%]",style:{fontSize:"2vw"},onClick:i,children:"Play now"})]}),r.jsx("div",{className:"absolute right-5 top-3",children:s?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"font-bold",children:n==null?void 0:n.user_metadata.name}),r.jsx("button",{className:"btn-outline",onClick:()=>l(),children:"Log out"})]}):r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{className:"btn-outline",onClick:()=>t("login"),children:"Login"}),r.jsx("button",{className:"btn-outline",onClick:()=>t("register"),children:"Register"})]})})]}),r.jsx(Dj,{isOpen:!!e,type:e,onClose:()=>{t(null)}})]})}const cc=[{stat:"endurance",icon:wl,label:"Endurance",color:"text-red-500"},{stat:"strength",icon:Ap,label:"Strength",color:"text-orange-500"},{stat:"agility",icon:Tj,label:"Agility",color:"text-green-500"},{stat:"speed",icon:_d,label:"Speed",color:"text-yellow-500"},{stat:"explosiveness",icon:vj,label:"Explosiveness",color:"text-purple-500"},{stat:"injuryPrevention",icon:jd,label:"Injury Prevention",color:"text-blue-500"}],dc=[{stat:"smash",icon:on,label:"Smash",color:"text-red-500"},{stat:"defense",icon:jd,label:"Defense",color:"text-orange-500"},{stat:"serve",icon:Sj,label:"Serve",color:"text-green-500"},{stat:"stick",icon:cn,label:"Stick",color:"text-yellow-500"},{stat:"slice",icon:Cj,label:"Slice",color:"text-purple-500"},{stat:"drop",icon:Bt,label:"Drop Shot",color:"text-blue-500"}];function hh({player:e,onClose:t,onStartTraining:s,calculateTrainingCost:n,canAffordTraining:a,type:i}){const l=i==="physical"?cc:dc,o=`${i==="physical"?"Physical":"Technical"} Training`;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold",children:[o," - ",e.name]}),r.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.map(c=>{const d=n(e,c.stat),u=a(d);return r.jsxs("button",{onClick:()=>s(c.stat),disabled:!u||!!e.training,className:`p-3 rounded-lg text-left transition-colors ${u&&!e.training?"bg-blue-50 hover:bg-blue-100 text-blue-700":"bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(c.icon,{className:`w-4 h-4 ${c.color}`}),r.jsx("span",{className:"font-medium",children:c.label})]}),r.jsxs("div",{className:"text-sm mt-1",children:["Current: ",e.stats[c.stat]]}),r.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Cost:",r.jsx("div",{className:"grid grid-cols-1 gap-1",children:Object.entries(d).map(([h,m])=>m>0&&r.jsxs("div",{children:[h,": ",m]},h))})]})]},c.stat)})})})]})})}const Oj=[{id:"speed-elite",name:"Speed Elite",type:"shoes",rarity:"epic",stats:{speed:5,agility:3},price:{coins:2e3,diamonds:10},imageUrl:"https://images.unsplash.com/photo-1542291026-7eec264c27ff"},{id:"power-max",name:"Power Max",type:"shoes",rarity:"rare",stats:{explosiveness:4,strength:2},price:{coins:1500,diamonds:5},imageUrl:"https://images.unsplash.com/photo-1608231387042-66d1773070a5"},{id:"thunder-pro",name:"Thunder Pro",type:"racket",rarity:"legendary",stats:{smash:6,strength:4},price:{coins:3e3,diamonds:15},imageUrl:"https://images.unsplash.com/photo-1617083934555-ac7d4fee8909"},{id:"control-master",name:"Control Master",type:"racket",rarity:"epic",stats:{defense:5,serve:3},price:{coins:2500,diamonds:12},imageUrl:"https://images.unsplash.com/photo-1617083934555-ac7d4fee8909"},{id:"power-string",name:"Power String",type:"strings",rarity:"rare",stats:{smash:3,strength:2},price:{coins:1e3,diamonds:5},imageUrl:"https://images.unsplash.com/photo-1617083934555-ac7d4fee8909"},{id:"pro-jersey",name:"Pro Jersey",type:"shirt",rarity:"epic",stats:{endurance:4,agility:2},price:{coins:1500,diamonds:8},imageUrl:"https://images.unsplash.com/photo-1576566588028-4147f3842f27"},{id:"flex-shorts",name:"Flex Shorts",type:"shorts",rarity:"rare",stats:{speed:3,agility:2},price:{coins:1200,diamonds:6},imageUrl:"https://images.unsplash.com/photo-1591195853828-11db59a44f6b"}];function Uj({equipment:e,isEquipped:t,onEquip:s,canAfford:n}){const a={common:"text-gray-500",rare:"text-blue-500",epic:"text-purple-500",legendary:"text-yellow-500"};return r.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"aspect-w-1 aspect-h-1 mb-4",children:r.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-48 object-cover rounded-lg"})}),r.jsx("h3",{className:`font-bold ${a[e.rarity]}`,children:e.name}),r.jsx("div",{className:"mt-2 space-y-1 text-sm",children:Object.entries(e.stats).map(([i,l])=>r.jsxs("div",{className:"text-gray-600",children:["+",l," ",i]},i))}),r.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"text-yellow-500",children:[e.price.coins," coins"]}),r.jsxs("div",{className:"text-purple-500",children:[e.price.diamonds," diamonds"]})]}),r.jsx("button",{onClick:()=>s(e),disabled:!n||t,className:`px-4 py-2 rounded-lg text-sm font-medium ${t?"bg-green-500 text-white cursor-default":n?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:t?"Equipped":n?"Equip":"Cannot Afford"})]})]})}const zj=[{type:"shoes",label:"Shoes"},{type:"racket",label:"Racket"},{type:"strings",label:"Strings"},{type:"shirt",label:"Shirt"},{type:"shorts",label:"Shorts"}];function Fj({onClose:e,playerEquipment:t,onEquip:s,resources:n}){const[a,i]=b.useState("shoes"),l=Oj.filter(c=>c.type===a),o=c=>n.coins>=c.price.coins&&n.diamonds>=c.price.diamonds;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Nd,{className:"w-6 h-6 text-blue-500"}),r.jsx("h2",{className:"text-xl font-bold",children:"Equipment Shop"})]}),r.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex space-x-4 mb-6",children:zj.map(({type:c,label:d})=>r.jsx("button",{onClick:()=>i(c),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===c?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:d},c))}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(c=>{var d;return r.jsx(Uj,{equipment:c,isEquipped:((d=t[c.type])==null?void 0:d.id)===c.id,onEquip:s,canAfford:o(c)},c.id)})})]})})}function zp({timeLeft:e,onSpeedUp:t,disabled:s}){const n=Math.ceil(e/1e4);return r.jsxs("button",{onClick:t,disabled:s,className:`flex items-center space-x-2 px-3 py-1 rounded-lg text-sm ${s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-purple-100 text-purple-700 hover:bg-purple-200"}`,children:[r.jsx(xr,{className:"w-4 h-4"}),r.jsxs("span",{children:["Speed up (",n," 💎)"]})]})}function Fp(e,t,s,n=1e3){const[a,i]=b.useState(0),[l,o]=b.useState(0);return b.useEffect(()=>{if(!t||!e){i(0),o(0);return}const c=()=>{const u=Date.now(),h=e+t-u,m=Math.max(0,Math.min(100,(t-h)/t*100)),f=Math.max(0,Math.ceil(h/1e3));i(m),o(f),f==0&&s&&s()};c();const d=setInterval(c,n);return()=>clearInterval(d)},[e,t,n]),{progress:a,timeLeft:l}}const mh=[{type:"Ankle sprain",severity:"minor",recovery:30,affectedStats:["speed","agility"],statPenalty:20},{type:"Muscle strain",severity:"minor",recovery:45,affectedStats:["strength","explosiveness"],statPenalty:25},{type:"Knee pain",severity:"moderate",recovery:60,affectedStats:["speed","agility","explosiveness"],statPenalty:30},{type:"Wrist sprain",severity:"moderate",recovery:90,affectedStats:["smash","defense","serve"],statPenalty:35},{type:"Back injury",severity:"severe",recovery:120,affectedStats:["endurance","strength","agility","speed","explosiveness"],statPenalty:40}];function Bj(e){const s=e.stats.injuryPrevention/200;return Math.max(.3,.8-s)}function fh(e){const t=Bj(e);if(Math.random()<t){const n=mh[Math.floor(Math.random()*mh.length)],a=Date.now();let i;return n.affectedStats&&n.statPenalty&&(i={},n.affectedStats.forEach(l=>{const o=e.stats[l];i[l]=Math.max(0,o-n.statPenalty)})),{id:`injury-${a}-${Math.random().toString(36).substr(2,9)}`,type:n.type,severity:n.severity,recoveryTime:n.recovery*60*1e3,recoveryEndTime:a+n.recovery*60*1e3,affectedStats:i,createdAt:a}}return null}function qj(e){const t=Date.now();return(e.injuries||[]).filter(s=>s.recoveryEndTime>t)}function Bp(e){const t=qj(e);if(t.length===0)return{};const s={};return t.forEach(n=>{n.affectedStats&&Object.entries(n.affectedStats).forEach(([a,i])=>{const l=a;(s[l]===void 0||i<s[l])&&(s[l]=i)})}),s}const to={endurance:1,strength:1.2,agility:1.3,speed:1.2,explosiveness:1.1,injuryPrevention:1,smash:1.4,defense:1.2,serve:1.3,stick:1.1,slice:1.2,drop:1.3};function Hj(e){const t={};return e.equipment&&Object.values(e.equipment).forEach(s=>{s&&s.stats&&Object.entries(s.stats).forEach(([n,a])=>{t[n]=(t[n]||0)+a})}),t}function Wj(e){if(!e||!e.stats||!e.statLevels)return{score:0,details:{baseScore:0,balanceScore:1,specialization:[],weaknesses:[],physicalScore:0,technicalScore:0,equipmentBonuses:{}}};const t=Hj(e),s=Bp(e),n=["endurance","strength","agility","speed","explosiveness","injuryPrevention"],a=["smash","defense","serve","stick","slice","drop"],i={...e.stats};Object.entries(t).forEach(([v,p])=>{v in i&&(i[v]+=p||0)}),Object.entries(s).forEach(([v,p])=>{v in i&&(i[v]=p)});const l=n.reduce((v,p)=>{const w=i[p]||0;return v+w},0),o=a.reduce((v,p)=>{const w=i[p]||0;return v+w},0),c=l+o,d=Object.values(e.statLevels).filter(v=>typeof v=="number"),u=d.length>0?d.reduce((v,p)=>v+p,0)/d.length:0,h=Object.entries(e.statLevels).filter(([v,p])=>typeof p=="number"&&p>u*1.3).map(([v])=>v),m=Object.entries(e.statLevels).filter(([v,p])=>typeof p=="number"&&p<u*.7).map(([v])=>v),y=Math.max(.8,1-m.length*.05);return{score:Math.round(c*y),details:{baseScore:Math.round(c),balanceScore:Number(y.toFixed(2)),specialization:h,weaknesses:m,physicalScore:Math.round(l),technicalScore:Math.round(o),equipmentBonuses:t}}}function ph({baseValue:e,effectiveValue:t,maxValue:s,bonus:n,Icon:a,label:i,color:l,level:o,isAffectedByInjury:c}){const d=t+n;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(a,{className:`w-4 h-4 ${c?"text-red-500":"text-gray-600"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:`text-xs ${c?"text-red-600 font-medium":"text-gray-600"}`,children:i}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Level ",o]})]}),r.jsxs("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden relative",children:[r.jsx("div",{className:`h-full ${l} transition-all duration-300`,style:{width:`${t*100/s}%`}}),n>0&&r.jsx("div",{className:"h-full bg-green-500 absolute top-0 left-0 opacity-50",style:{width:`${d*100/s}%`}}),c&&r.jsx("div",{className:"h-full border-r-2 border-red-400 absolute top-0",style:{left:`${e*100/s}%`}})]})]}),r.jsxs("div",{className:`text-sm font-medium ${c?"text-red-600":""}`,children:[t,n>0&&r.jsxs("span",{className:"text-green-600 ml-1",children:["+",n]}),c&&r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",e,")"]})]})]})}function gh(e){return e?"bg-blue-500":"bg-purple-500"}function Vj({player:e,equipmentBonuses:t,injuryEffects:s}){const[n,a]=b.useState(!1),[i,l]=b.useState(!1),o=b.useMemo(()=>{let d=500;return cc.map(u=>{const h=e.stats[u.stat],m=t[u.stat]||0;d=Math.max(d,h+m)}),dc.map(u=>{const h=e.stats[u.stat],m=t[u.stat]||0;d=Math.max(d,h+m)}),d},[e.stats,t]),c=d=>{const u=e.stats[d],h=s[d];return h!==void 0?h:u};return r.jsxs("div",{className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>a(!n),className:`px-4 py-2 rounded-lg text-sm font-medium ${n?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:n?"Hide Physical Stats":"Show Physical Stats"}),r.jsx("button",{onClick:()=>l(!i),className:`px-4 py-2 rounded-lg text-sm font-medium ${i?"bg-purple-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:i?"Hide Technical Stats":"Show Technical Stats"})]}),n&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium text-gray-700",children:"Physical Stats"}),cc.map(d=>{const u=d.stat in s,h=e.stats[d.stat],m=c(d.stat);return r.jsx(ph,{baseValue:h,effectiveValue:m,maxValue:o,bonus:t[d.stat]||0,Icon:d.icon,label:d.label,color:gh(!0),level:e.statLevels[d.stat]||0,isAffectedByInjury:u})})]}),i&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium text-gray-700",children:"Technical Stats"}),dc.map(d=>{const u=d.stat in s,h=e.stats[d.stat],m=c(d.stat);return r.jsx(ph,{baseValue:h,effectiveValue:m,bonus:t[d.stat]||0,maxValue:o,Icon:d.icon,label:d.label,color:gh(!1),level:e.statLevels[d.stat]||0,isAffectedByInjury:u})})]})]})}const Gj=[{id:"bandage",name:"Bandage",description:"Reduces recovery time by 30%",icon:uj,cost:2,recoveryReduction:.3,color:"bg-green-100 text-green-800",forSeverity:["minor"]},{id:"first-aid-kit",name:"First Aid Kit",description:"Reduces recovery time by 50%",icon:pj,cost:4,recoveryReduction:.5,color:"bg-blue-100 text-blue-800",forSeverity:["minor","moderate"]},{id:"medical-kit",name:"Medical Kit",description:"Reduces recovery time by 70%",icon:wl,cost:8,recoveryReduction:.7,color:"bg-purple-100 text-purple-800",forSeverity:["minor","moderate","severe"]}];function Jj({player:e,onClose:t,onHeal:s,resources:n}){const[a,i]=b.useState(Date.now());b.useEffect(()=>{const c=setInterval(()=>{i(Date.now())},1e3);return()=>clearInterval(c)},[]);const l=b.useCallback(c=>{const d=Math.max(0,c-a),u=Math.floor(d/(1e3*60)),h=Math.floor(d/1e3%60);return u===0?`${h} seconds`:`${u} minutes ${h} seconds`},[a]);if(!e.injuries||e.injuries.length===0)return null;const o=b.useMemo(()=>e.injuries.filter(c=>c.recoveryEndTime>a),[e.injuries,a]);return o.length>0&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(wl,{className:"w-6 h-6 text-red-500"}),r.jsx("h2",{className:"text-xl font-bold",children:"Heal Injuries"})]}),r.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"space-y-4",children:o.map((c,d)=>r.jsxs("div",{className:`p-4 rounded-lg ${c.severity==="minor"?"bg-yellow-50":c.severity==="moderate"?"bg-orange-50":"bg-red-50"}`,children:[r.jsxs("h3",{className:"font-medium mb-2",children:[e.name,"'s Injury"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[c.type," (",c.severity,")"]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Recovery time: ",l(c.recoveryEndTime)]})]},d))}),r.jsx("div",{className:"mt-6 space-y-3",children:Gj.filter(c=>o.some(d=>c.forSeverity.includes(d.severity))).map(c=>r.jsxs("button",{onClick:()=>s(c.id,c.recoveryReduction),disabled:n.diamonds<c.cost,className:`w-full px-4 py-3 rounded-lg flex items-center justify-between ${n.diamonds>=c.cost?`${c.color} hover:bg-opacity-80`:"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(c.icon,{className:"w-5 h-5"}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:c.name}),r.jsx("div",{className:"text-sm",children:c.description})]})]}),r.jsxs("div",{className:"font-medium",children:[c.cost," 💎"]})]},c.id))}),r.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Your diamonds: ",n.diamonds," 💎"]})]})})}function Kj({label:e,description:t,value:s,onChange:n}){return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{className:"text-sm font-medium",children:e}),r.jsxs("div",{className:"group relative",children:[r.jsx(Wi,{className:"w-4 h-4 text-gray-400"}),r.jsx("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded p-2 w-48",children:t})]})]}),r.jsxs("span",{className:"text-sm font-medium",children:[s,"/10"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:s,onChange:a=>n(Number(a.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),r.jsx("div",{className:"absolute top-0 left-0 h-2 bg-blue-500 rounded-l-lg pointer-events-none",style:{width:`${s/10*100}%`}})]})]})}function Qj({player:e,onClose:t,onUpdateStrategy:s}){const[n,a]=H.useState(e.strategy),i=(o,c)=>{const d={...n,[o]:c};a(d)},l=[{key:"physicalCommitment",label:"Implication Physique",description:"Endurance et puissance"},{key:"playStyle",label:"Style de Frappe",description:"Puissance des frappes"},{key:"movementSpeed",label:"Vitesse de Déplacement",description:"Agilité sur le terrain"},{key:"fatigueManagement",label:"Gestion de la Fatigue",description:"Potentiel physique"},{key:"rallyConsistency",label:"Consistance Échanges",description:"Régularité"},{key:"riskTaking",label:"Prise de Risque",description:"Impact/Précision"},{key:"attack",label:"Attaque",description:"Smash (10/10)"},{key:"softAttack",label:"Soft Attaque",description:"Drop shot (10/10)"},{key:"serving",label:"Mise en Jeu",description:"Service (10/10)"},{key:"courtDefense",label:"Protection Terrain",description:"Défense (10/10)"},{key:"mentalToughness",label:"Résilience Mentale",description:"Service"},{key:"selfConfidence",label:"Confiance en Soi",description:"Smash + Défense"}];return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{s(e.id,n),t()},children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold",children:["Stratégie de ",e.name]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Ajustez les curseurs pour définir la stratégie du joueur"})]}),r.jsx("button",{onClick:()=>{s(e.id,n),t()},className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"space-y-6",children:l.map(({key:o,label:c,description:d})=>r.jsx(Kj,{label:c,description:d,value:n[o],onChange:u=>i(o,u)},o))}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Priorités pour le calcul des matchs"}),r.jsxs("ul",{className:"space-y-1 text-sm text-blue-600",children:[r.jsx("li",{children:"Score: 60%"}),r.jsx("li",{children:"Stratégie: 30%"}),r.jsx("li",{children:"Classement: 10%"})]})]})]})})}function Gi(e){if(e<60)return`${e}s`;const t=Math.floor(e/60),s=Math.floor(e%60);return`${t}m ${s}s`}const Yj=({rank:e,players:t,best:s})=>{const[n,a]=b.useState({visible:!1,x:0,y:0,content:""}),i=b.useRef(null),l=Math.floor(e*100/450),o={P12:[0,20],P11:[21,40],P10:[41,70],D9:[71,100],D8:[101,130],D7:[131,160],R6:[161,200],R5:[201,250],R4:[251,300],N3:[301,370],N2:[371,450],N1:[451,451]},c=g=>Object.keys(o).find(v=>{const[p,w]=o[v];return g>=p&&g<=w})||"N/A",d=Object.keys(o),u={};d.forEach(g=>{const[v,p]=o[g];u[g]=v/450*100});const h=d.find(g=>o[g][0]>e),m=h?u[h]:100,f=g=>{if(i.current){const v=i.current.getBoundingClientRect(),p=g.clientX-v.left;let w=0;for(const[j,N]of Object.entries(o))if(console.log("[handleMouseMove] level, range =>",j,N),e>=N[0]&&e<=N[1]){w=N[1];break}a({visible:!0,x:p,y:-30,content:`${parseFloat(e.toString()).toFixed(2)} / ${parseFloat(w.toString()).toFixed(2)}`})}},y=()=>{a(g=>({...g,visible:!1}))};return r.jsxs("div",{className:"relative w-full bg-gray-300 rounded-md",style:{height:"5px"},children:[r.jsx("div",{ref:i,onMouseMove:f,onMouseLeave:y,className:"h-full bg-blue-500 transition-all duration-500 rounded-md",style:{width:`${l>100?100:l}%`}}),r.jsx("div",{className:"absolute top-0 h-full w-[2px] bg-red-500",style:{left:`${m}%`,transform:"translateX(-50%)"}}),r.jsxs("div",{className:"relative group ml-auto",children:[r.jsx("span",{className:"absolute text-xs text-center text-black font-semibold",style:{right:"-5%",top:"-25px",transform:"translateX(-50%)"},children:r.jsx(Wi,{className:"w-5 h-5 text-blue-500"})}),r.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-black text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap",children:s==null?void 0:s.map((g,v)=>{var p;return r.jsxs("div",{className:"mb-2",children:[new Date(g.match_date).toLocaleDateString()," :",g.opponent_id!=null?(p=t.find(w=>w.id===g.opponent_id.toString()))==null?void 0:p.name:"CPU player"," ",`${g.opponent_rank}(${c(g.opponent_rank)})`]},v)})})]}),n.visible&&r.jsx("div",{className:"absolute bg-black text-white text-sm px-2 py-1 rounded pointer-events-none",style:{top:`${n.y}px`,left:`${n.x}px`,transform:"translateX(-50%)"},children:n.content})]})};function Xj({player:e,onClose:t}){const{resources:s,gameState:n,updateResources:a,dispatchGameState:i}=Kt(),l=async c=>{try{await I.from("player_equipment_history").delete().eq("player_id",c),await I.from("player_equipment").delete().eq("player_id",c),await I.from("player_training_history").delete().eq("player_id",c);const{error:d}=await I.from("player_strategy").delete().eq("player_id",c);if(d)return console.error("Error deleting player strategy:",d),!1;const{error:u}=await I.from("player_levels").delete().eq("player_id",c);if(u)return console.error("Error deleting player levels:",u),!1;const{error:h}=await I.from("player_stats").delete().eq("player_id",c);if(h)return console.error("Error deleting player stats:",h),!1;const{error:m}=await I.from("players").delete().eq("id",c);return m?(console.error("Error deleting player:",m),!1):!0}catch(d){return console.error("Error in removePlayer:",d),!1}},o=async()=>{if(s.coins<0){de.warning("Not enough coins! You need 0 coins to remove a player.");return}try{if(!await l(e.id)){de.error("Failed to remove player. Please try again.");return}a("manual_adjustment",{coins:0},!1),i({type:"REMOVE_PLAYER",payload:{player:e}}),console.log(`Successfully removed player ${e.name} for 0 coins`),t()}catch(d){console.error("Error removing player:",d),de.error("Failed to remove player. Please try again.")}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{t()},children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:c=>c.stopPropagation(),children:[r.jsx("span",{className:"text-xl",children:"Remove"})," ",r.jsx("span",{children:e.name}),r.jsx("br",{}),r.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[r.jsx("button",{onClick:o,className:"px-5 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 transition-all duration-200 shadow-md",children:"Ok"}),r.jsx("button",{onClick:()=>{t()},className:"px-5 py-2 rounded-xl border border-gray-300 text-gray-700 hover:bg-gray-100 transition-all duration-200 shadow-sm",children:"Cancel"})]})]})})}function Zj({player:e,players:t,onStartTraining:s,calculateTrainingCost:n,canAffordTraining:a,onNameChange:i,onSpeedUpTraining:l,canAffordSpeedUp:o,resources:c,onEquipItem:d,onHeal:u,onUpdateStrategy:h}){var _,q;const[m,f]=b.useState(!1),[y,g]=b.useState(!1),[v,p]=b.useState(!1),[w,j]=b.useState(!1),[N,E]=b.useState(!1),[P,k]=b.useState(!1),[A,M]=b.useState(e.name),[T,$]=b.useState(!1),[F,J]=b.useState(!1),Z=b.useCallback(()=>{e.training&&l(e.id)},[e]),{progress:X,timeLeft:B}=Fp((_=e.training)==null?void 0:_.startTime,(q=e.training)==null?void 0:q.period,Z),[me,z]=b.useState(Date.now()),V=["P12","P11","P10","D9","D8","D7","R6","R5","R4","N3","N2","N1"],Q=W=>W<=20?12:W<=40?11:W<=70?10:W<100?9:W<130?8:W<160?7:W<200?6:W<250?5:W<300?4:W<370?3:W<450?2:W>450?1:0;b.useEffect(()=>{const W=setInterval(()=>{z(Date.now())},1e3);return()=>clearInterval(W)},[]);const R=b.useMemo(()=>Wj(e),[e]),C=b.useMemo(()=>e.level<e.maxLevel&&!e.training,[e]),S=b.useMemo(()=>{var W;return((W=e.injuries)==null?void 0:W.filter(D=>D.recoveryEndTime>me))||[]},[e.injuries,me]),O=b.useMemo(()=>S.length>0,[S]),ee=b.useMemo(()=>({emoji:e.gender==="male"?"♂️":"♀️",color:e.gender==="male"?"text-blue-500":"text-pink-500"}),[e.gender]),te=W=>{W.preventDefault(),A.trim()&&(i(e.id,A.trim()),k(!1))},Ce=W=>{switch(W){case"minor":return"bg-yellow-50 text-yellow-700";case"moderate":return"bg-orange-50 text-orange-700";case"severe":return"bg-red-50 text-red-700";default:return"bg-gray-50 text-gray-700"}};return console.log("player =>",e),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[P?r.jsx("form",{onSubmit:te,className:"flex items-center space-x-2",children:r.jsx("input",{type:"text",value:A,onChange:W=>M(W.target.value),className:"px-2 py-1 border rounded-md text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,onBlur:te})}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`text-lg ${ee.color}`,children:ee.emoji}),r.jsx("h3",{className:"text-lg font-semibold",children:e.name}),r.jsx("button",{onClick:()=>k(!0),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(kj,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})})]}),r.jsx("span",{className:`badge-rank-${Q(e.rank)}`})]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[r.jsxs("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:["Level ",e.level,"/",e.maxLevel]}),r.jsx("button",{onClick:()=>E(!N),className:"text-sm text-blue-500 hover:text-blue-600",children:N?"Hide Details":"Show Details"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>f(!0),disabled:!C,className:`p-2 rounded-lg ${C?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,title:"Physical Training",children:r.jsx(gj,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>g(!0),disabled:!C,className:`p-2 rounded-lg ${C?"bg-purple-500 text-white hover:bg-purple-600":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,title:"Technical Training",children:r.jsx(mj,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>p(!0),className:"p-2 rounded-lg bg-green-500 text-white hover:bg-green-600",title:"Customize Equipment",children:r.jsx(Ip,{className:"w-4 h-4"})}),O&&r.jsx("button",{onClick:()=>j(!0),className:"p-2 rounded-lg bg-red-500 text-white hover:bg-red-600",title:"Heal Injury",children:r.jsx(wl,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>$(!0),className:"p-2 rounded-lg bg-indigo-500 text-white hover:bg-indigo-600",title:"Stratégie",children:r.jsx(an,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>J(!0),className:"p-2 rounded-lg bg-indigo-500 text-white hover:bg-indigo-600",title:"delete",children:r.jsx(Ej,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"text-lg font-semibold",children:["Score: ",R.score]}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Physical: ",R.details.physicalScore," | Technical:"," ",R.details.technicalScore]})]})}),N&&r.jsx("div",{className:"mb-4 bg-gray-50 rounded-lg p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Score Details"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("p",{children:["Base Score: ",R.details.baseScore]}),r.jsxs("p",{children:["Balance Multiplier: ",R.details.balanceScore,"x"]}),R.details.specialization.length>0&&r.jsxs("p",{children:["Specializations:"," ",R.details.specialization.join(", ")]}),R.details.weaknesses.length>0&&r.jsxs("p",{className:"text-red-500",children:["Weaknesses: ",R.details.weaknesses.join(", ")]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2 mb-5",children:"Rank"}),r.jsx(Yj,{rank:e.rank,players:t,best:e==null?void 0:e.best}),r.jsxs("div",{className:"flex justify-between w-full",children:[r.jsx("span",{children:V[12-Q(e.rank)]}),r.jsx("span",{children:V[13-Q(e.rank)]})]}),Object.keys(R.details.equipmentBonuses).length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Equipment Bonuses"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(R.details.equipmentBonuses).map(([W,D])=>r.jsxs("p",{className:"text-green-600",children:["+",D," ",W]},W))})]})]})]})}),r.jsx(Vj,{player:e,equipmentBonuses:R.details.equipmentBonuses,injuryEffects:Bp(e)}),e.training&&r.jsx("div",{className:"mt-4 pt-4 border-t",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("p",{className:"text-sm text-blue-600",children:["Training ",e.training.stat,"..."]}),r.jsx(zp,{timeLeft:B*1e3,onSpeedUp:Z,disabled:!o(Math.ceil(B/10))})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000",style:{width:`${X}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[Gi(B)," remaining"]})]})}),O&&r.jsxs("div",{className:"mt-4 pt-4 border-t space-y-3",children:[r.jsx("h4",{className:"font-medium text-gray-700",children:"Active Injuries:"}),S.map((W,D)=>r.jsxs("div",{className:`p-4 rounded-lg ${Ce(W.severity)}`,children:[r.jsx("div",{className:"font-medium mb-1",children:W.type}),r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("div",{children:["Recovery time:"," ",Gi(Math.max(0,Math.floor((W.recoveryEndTime-me)/1e3)))]}),W.affectedStats&&r.jsxs("div",{children:["Affected stats:"," ",Object.keys(W.affectedStats).join(", ")]})]})]},D))]})]}),m&&r.jsx(hh,{player:e,onClose:()=>f(!1),onStartTraining:W=>{s(e.id,W),f(!1)},calculateTrainingCost:n,canAffordTraining:a,type:"physical"}),y&&r.jsx(hh,{player:e,onClose:()=>g(!1),onStartTraining:W=>{s(e.id,W),g(!1)},calculateTrainingCost:n,canAffordTraining:a,type:"technical"}),v&&r.jsx(Fj,{onClose:()=>p(!1),playerEquipment:e.equipment,onEquip:W=>{d(e.id,W),p(!1)},resources:c}),w&&O&&r.jsx(Jj,{player:e,onClose:()=>j(!1),onHeal:(W,D)=>{u==null||u(e.id,W,D),j(!1)},resources:c}),T&&r.jsx(Qj,{player:e,onClose:()=>$(!1),onUpdateStrategy:h}),F&&r.jsx(Xj,{player:e,onClose:()=>J(!1)})]})}const xh={physical:{shuttlecocks:5,meals:3,coins:50},technical:{shuttlecocks:8,meals:4,coins:75}},e1=["endurance","strength","agility","speed","explosiveness","injuryPrevention"];function yh(e,t){const s=e.statLevels[t],n=e1.includes(t)?xh.physical:xh.technical;return{shuttlecocks:Math.round(n.shuttlecocks*Math.pow(1.5,s)*to[t]),meals:Math.round(n.meals*Math.pow(1.5,s)*to[t]),coins:Math.round(n.coins*Math.pow(1.5,s)*to[t])}}function qp(e){return Math.max(1,Math.ceil(e/1e4))}const t1=100;function Hp(e){return t1*Math.pow(2,e-1)}function s1({currentPlayers:e,maxPlayers:t,coins:s,onRecruit:n}){const a=Hp(e),i=e<t&&s>=a;return r.jsx(r.Fragment,{children:e<t&&r.jsxs("button",{onClick:n,disabled:!i,className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${i?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:[r.jsx(Vi,{className:"w-4 h-4"}),r.jsxs("span",{children:["Recruit Player (",a," coins)"]})]})})}const vh=new jr(I);function r1(){var f;const{resources:e,gameState:t,updateResources:s,dispatchGameState:n,setGameState:a}=Kt(),{user:i}=js(),l=async(y,g)=>{await vh.updatePlayerName(y,g),n({type:"UPDATE_PLAYER_NAME",payload:{playerId:y,name:g}})},o=async(y,g)=>{const v=t.players.find(j=>j.id===y);if(!v||v.training||v.level>=v.maxLevel)return;const p=yh(v,g);Object.entries(p).every(([j,N])=>e[j]>=N)&&(await Yb(v,g),s("training_cost",p,!1),n({type:"START_TRAINING",payload:{playerId:y,stat:g}}))},c=async(y,g)=>{const v=t.players.find(p=>p.id===y);v&&v.strategy!=g&&(await Zb(y,g),n({type:"UPDATE_STRATEGY",payload:{playerId:y,strategy:g}}))},d=async y=>{const g=t.players.find(j=>j.id===y);if(!(g!=null&&g.training))return;const v=g.training.startTime+g.training.period-Date.now(),p=qp(v);if(e.diamonds<p)return;s("manual_adjustment",{diamonds:-p});const w=g.stats[g.training.stat]+5;await Xb(g,g.training.stat,w),n({type:"COMPLETE_TRAINING",payload:{playerId:y}})},u=async(y,g)=>{const v=t.players.find(p=>p.id===y);v&&(s("equipment_purchase",g.price,!1),await Tp(v,g),n({type:"EQUIP_ITEM",payload:{playerId:y,equipment:g}}))},h=async()=>{var v;const y=Hp(t.players.length),g=((v=t.facilities.find(p=>p.type==="training-center"))==null?void 0:v.maxPlayers)||1;if(!(t.players.length>=g||e.coins<y)&&(s("manual_adjustment",{coins:-y}),i!=null&&i.id)){const p=await vh.createPlayer(i.id);if(console.log("Recruit player result:",p),p.success&&p.player){const w={id:p.player.id,name:p.player.name,gender:p.player.gender,level:p.player.level,maxLevel:p.player.max_level,rank:p.player.rank,stats:p.player.stats,statLevels:p.player.levels,strategy:p.player.strategy,training:void 0,equipment:{},injuries:[],best:[]};n({type:"ADD_PLAYER",payload:{player:w}})}}},m=(y,g,v)=>{const w={bandage:2,"first-aid-kit":4,"medical-kit":8}[g];!w||e.diamonds<w||(s("manual_adjustment",{diamonds:-w}),a(j=>({...j,players:j.players.map(N=>{if(N.id===y&&N.injuries){const E=Date.now(),P=N.injuries.filter(k=>k.recoveryEndTime>E).map(k=>{const M=(k.recoveryEndTime-E)*(1-v);return{...k,recoveryEndTime:E+M}});return Rp(N,P),{...N,injuries:P}}return N})})))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Be,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"My Club"})]}),r.jsx(s1,{currentPlayers:t.players.length,maxPlayers:((f=t.facilities.find(y=>y.type==="training-center"))==null?void 0:f.maxPlayers)||1,coins:e.coins,onRecruit:h})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.players.map(y=>r.jsx(Zj,{player:y,players:t.players,onStartTraining:o,calculateTrainingCost:yh,canAffordTraining:g=>Object.entries(g).every(([v,p])=>e[v]>=p),onNameChange:l,onUpdateStrategy:c,onSpeedUpTraining:d,canAffordSpeedUp:g=>e.diamonds>=g,resources:e,onEquipItem:u,onHeal:m},y.id))})]})}function wh(e){const t=Wp(e,e.level+1),s=e.type==="training-center"?e.maxPlayers+1:e.maxPlayers,n=e.level+1,a=Vp(e.type,n+1);return{level:n,productionRate:t,maxPlayers:s,upgradeCost:a,upgrading:void 0}}function Wp(e,t){if(e.type==="training-center")return 0;const n={"shuttlecock-machine":1,canteen:1,sponsors:2}[e.type]||1;return Math.ceil(n*(1+(t-1)*.5))}function bh(e,t=e.level,s=[]){if(e.type==="training-center")return 0;const n=Wp(e,t),a=s.find(l=>l.facilityType===e.type&&l.active);return a?Math.ceil(n*(1+a.productionBonus)):n}function Vp(e,t){const s=100*Math.pow(2,t-1);return{coins:Math.floor(s),shuttlecocks:e==="training-center"?Math.floor(s/4):0,meals:e==="training-center"?Math.floor(s/4):0,diamonds:0}}function Gp(e){return Vp(e.type,e.level+1)}function n1(){var l;const{gameState:e,refreshGameState:t}=Kt(),[s,n]=b.useState(!1),a=o=>{if(o.type==="training-center")return{current:o.maxPlayers,bonus:0,total:o.maxPlayers};const c=e.managers.filter(m=>m.active),d=bh(o,o.level,[]),u=bh(o,o.level,c),h=u-d;return{current:d,bonus:h,total:u}},i=async()=>{n(!0);try{await t()}finally{n(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Dp,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Tableau de bord"})]}),r.jsxs("button",{onClick:i,disabled:s,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${s?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[r.jsx(Lp,{className:`w-4 h-4 ${s?"animate-spin":""}`}),r.jsx("span",{children:s?"Refreshing...":"Refresh"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Vue d'ensemble du club"}),r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Statistiques"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{children:["Joueurs totaux: ",e.players.length,"/",((l=e.facilities.find(o=>o.id==="training-center"))==null?void 0:l.maxPlayers)||1]}),r.jsxs("p",{children:["Installations totales: ",e.facilities.length]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Production"}),e.facilities.map(o=>{const c=a(o),d=e.managers.find(u=>u.facilityType===o.type&&u.active);return r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h3",{className:"font-semibold text-lg",children:o.name}),r.jsxs("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:["Niveau ",o.level]})]}),o.type==="training-center"?r.jsxs("p",{className:"text-gray-600",children:["Capacité maximale: ",o.maxPlayers," joueurs"]}):r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Production de base:"}),r.jsxs("span",{children:[c.current," ",o.resourceType,"/min"]})]}),d&&r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-green-600",children:["Bonus (",d.name,"):"]}),r.jsxs("span",{className:"text-green-600",children:["+",c.bonus," ",o.resourceType,"/min"]})]}),r.jsxs("div",{className:"flex items-center justify-between font-medium pt-2 border-t",children:[r.jsx("span",{children:"Production totale:"}),r.jsxs("span",{children:[c.total," ",o.resourceType,"/min"]})]}),o.upgrading&&r.jsx("div",{className:"mt-2 py-2 px-3 bg-yellow-50 text-yellow-800 rounded-lg text-sm",children:"Amélioration en cours..."})]})]},o.id)})]})]})]})}function a1({facility:e,onUpgrade:t,onSpeedUp:s,canAfford:n,canAffordSpeedUp:a}){var d,u;const i=b.useCallback(()=>{e.upgrading&&s(e.id)},[e]),{progress:l,timeLeft:o}=Fp((d=e.upgrading)==null?void 0:d.startTime,(u=e.upgrading)==null?void 0:u.period,i),c=e.upgradeCost||Gp(e);return r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(wd,{className:"w-6 h-6 text-blue-500"}),r.jsx("h3",{className:"text-lg font-semibold",children:e.name})]}),r.jsxs("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full",children:["Level ",e.level]})]}),r.jsxs("div",{className:"space-y-3",children:[e.type==="training-center"?r.jsxs("div",{className:"text-sm text-gray-600",children:["Max Players: ",e.maxPlayers]}):r.jsxs("div",{className:"text-sm text-gray-600",children:["Production Rate: ",e.productionRate,"/min"]}),e.upgrading?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"text-sm text-blue-600",children:"Upgrading..."}),r.jsx(zp,{timeLeft:o*1e3,onSpeedUp:i,disabled:!a(Math.ceil(o/10))})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000",style:{width:`${l}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[Gi(o)," remaining"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"border-t pt-3",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Upgrade Cost:"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(c).map(([h,m])=>m>0&&r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsxs("span",{className:"text-gray-600",children:[h,":"]}),r.jsx("span",{className:"font-medium",children:m})]},h))})]}),r.jsxs("button",{onClick:()=>t(e.id),disabled:!n||e.upgrading,className:`w-full py-2 px-4 rounded-lg flex items-center justify-center space-x-2 ${n&&!e.upgrading?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:[r.jsx(cj,{className:"w-4 h-4"}),r.jsx("span",{children:"Upgrade"})]})]})]})]})}function i1({manager:e,onHire:t,canAfford:s}){const{dispatchGameState:n}=Kt(),a={"shuttlecock-machine":"Machine à volants",canteen:"Cantine",sponsors:"Sponsors"},[i,l]=b.useState(0),o=b.useMemo(()=>Math.floor(i/(24*3600)),[i]),c=b.useMemo(()=>Math.floor(i%(24*3600)/3600),[i]),d=b.useMemo(()=>Math.floor(i%3600/60),[i]);return b.useEffect(()=>{const u=()=>{const m=e.purchasing?Math.max(0,Math.floor((e.purchasing.startTime+e.purchasing.period-Date.now())/1e3)):0;l(m),m||(n({type:"COMPLETE_MANAGER_DURATION",payload:{managerId:e.id}}),ej(e.id))},h=setInterval(u,1e4);return u(),()=>clearInterval(h)},[e.purchasing]),r.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-16 h-16 rounded-full object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.name}),r.jsx("p",{className:"text-sm text-gray-600",children:a[e.facilityType]}),r.jsxs("p",{className:"text-sm text-green-600",children:["+",e.productionBonus*100,"% de production"]}),e.active&&i>0&&r.jsxs("p",{className:"text-sm text-blue-600",children:["Temps restant: ",o,"j ",c,"h ",d,"m"]})]}),r.jsx("button",{onClick:()=>t(e.id),disabled:e.active||!s,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${e.active?"bg-green-500 text-white cursor-default":s?"bg-purple-500 text-white hover:bg-purple-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:e.active?r.jsx("span",{children:"Actif"}):r.jsxs(r.Fragment,{children:[r.jsx(Ze,{className:"w-4 h-4"}),r.jsx("span",{children:e.cost})]})})]})})}function l1(){const{resources:e,gameState:t,updateResources:s,dispatchGameState:n}=Kt(),a=async o=>{console.log("handleUpgradeFacility",o);const c=t.facilities.find(m=>m.id===o);if(!c||c.upgrading)return;const d=c.upgradeCost||Gp(c);if(!Object.entries(d).every(([m,f])=>e[m]>=f))return;s("upgrade_cost",d,!1);const h=wh(c);n({type:"START_FACILITY_UPGRADE",payload:{facilityId:o,upgradedFacility:h}}),await sj(c)},i=async o=>{const c=t.facilities.find(m=>m.id===o);if(!(c!=null&&c.upgrading))return;const d=c.upgrading.startTime+c.upgrading.period-Date.now(),u=qp(d);if(e.diamonds<u)return;s("manual_adjustment",{diamonds:-u});const h=wh(c);n({type:"SPEED_UP_FACILITY",payload:{facilityId:o,upgradedFacility:h}}),await rj(c,h)},l=async o=>{const c=t.managers.find(d=>d.id===o);!c||c.active||e.diamonds<c.cost||(s("manual_adjustment",{diamonds:-c.cost}),n({type:"HIRE_MANAGER",payload:{managerId:o}}),await tj(o))};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(wd,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Installations"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.facilities.map(o=>r.jsx(a1,{facility:o,onUpgrade:a,onSpeedUp:i,canAfford:Object.entries(o.upgradeCost).every(([c,d])=>e[c]>=d),canAffordSpeedUp:c=>e.diamonds>=c},o.id))}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Managers"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.managers.map(o=>r.jsx(i1,{manager:o,onHire:l,canAfford:e.diamonds>=o.cost},o.id))})]})]})}const o1=()=>{var J,Z,X,B,me,z,V,Q,R;const{gameState:e,resources:t,refreshGameState:s}=Kt(),{user:n}=js(),[a]=b.useState(()=>new Pp(I)),[i,l]=b.useState("selection"),[o,c]=b.useState(!0),[d,u]=b.useState([]),[h,m]=b.useState(["departmental"]),[f,y]=b.useState(null),[g,v]=b.useState(null),[p,w]=b.useState(null),[j,N]=b.useState([]),[E,P]=b.useState(""),[k,A]=b.useState("");b.useState(null),b.useEffect(()=>{n!=null&&n.id&&M()},[n==null?void 0:n.id]);const M=async()=>{if(n!=null&&n.id)try{c(!0);const{seasons:C,unlockedTiers:S}=await a.getAvailableSeasons(n.id);u(C),m(S);const O=await a.getUserCurrentSeasonStatus(n.id);if(v(O),O){const ee=await a.getUserNextEncounter(n.id);w(ee),l("dashboard")}}catch(C){console.error("Error loading interclub data:",C)}finally{c(!1)}},T=async()=>{if(!(n!=null&&n.id)||!f||j.length<5||!E.trim()){A("Please complete all registration requirements");return}try{c(!0);const C={season_id:f.id,team_name:E.trim(),selected_players:j},S=await a.registerForSeason(n.id,C);S.success?(await s(),await M(),l("selection"),A("")):A(S.error||"Registration failed")}catch(C){console.error("Registration error:",C),A("Registration failed")}finally{c(!1)}},$=C=>{const S=ur[C],O={departmental:"Departmental",regional:"Regional",national:"National",top12:"TOP 12"},ee={departmental:"Beginner level",regional:"Intermediate level",national:"Advanced level",top12:"Elite level"};return{name:O[C],description:ee[C],requirements:S,unlocked:h.includes(C)}},F=C=>{const S=ur[C.tier];return t.coins>=S.coins&&t.shuttlecocks>=S.shuttlecocks&&t.meals>=S.meals&&e.players.length>=5};if(o)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})});if(i==="selection")return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx(re,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Interclubs"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Tier Progression"}),r.jsx("div",{className:"grid md:grid-cols-4 gap-4",children:Gb.map((C,S)=>{const O=$(C),ee=O.unlocked;return r.jsxs("div",{className:`relative p-4 rounded-lg border-2 transition-all ${ee?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50 opacity-60"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[S===0&&r.jsx(re,{className:"w-5 h-5 text-bronze"}),S===1&&r.jsx(re,{className:"w-5 h-5 text-gray-500"}),S===2&&r.jsx(re,{className:"w-5 h-5 text-yellow-500"}),S===3&&r.jsx(Wt,{className:"w-5 h-5 text-purple-500"}),r.jsx("span",{className:"font-bold",children:O.name})]}),ee&&r.jsx(rs,{className:"w-5 h-5 text-green-500"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:O.description}),!ee&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-20 rounded-lg",children:r.jsx(ln,{className:"w-6 h-6 text-gray-400"})})]},C)})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-6",children:"Available Seasons"}),d.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ws,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"No seasons available at the moment"})]}):r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(C=>{const S=$(C.tier),O=F(C),ee=S.unlocked&&O;return r.jsxs("div",{className:`border rounded-lg p-6 transition-all ${ee?"border-blue-200 hover:border-blue-400 hover:shadow-md cursor-pointer":"border-gray-200 opacity-75"}`,onClick:()=>ee&&(y(C),l("registration")),children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-bold text-lg",children:C.name}),r.jsxs("div",{className:"flex items-center space-x-1",children:[C.tier==="departmental"&&r.jsx(re,{className:"w-4 h-4 text-bronze"}),C.tier==="regional"&&r.jsx(re,{className:"w-4 h-4 text-gray-500"}),C.tier==="national"&&r.jsx(re,{className:"w-4 h-4 text-yellow-500"}),C.tier==="top12"&&r.jsx(Wt,{className:"w-4 h-4 text-purple-500"}),r.jsx("span",{className:"text-sm font-medium",children:S.name})]})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:S.description}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{children:"Start:"}),r.jsx("span",{children:new Date(C.start_date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{children:"Registration deadline:"}),r.jsx("span",{children:new Date(C.registration_deadline).toLocaleDateString()})]})]}),r.jsxs("div",{className:"border-t pt-3",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Requirements:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:`flex items-center space-x-1 ${e.players.length>=5?"text-green-600":"text-red-600"}`,children:[r.jsx(Be,{className:"w-3 h-3"}),r.jsx("span",{children:"5 players"})]}),r.jsxs("div",{className:`flex items-center space-x-1 ${t.coins>=S.requirements.coins?"text-green-600":"text-red-600"}`,children:[r.jsx(Pe,{className:"w-3 h-3"}),r.jsx("span",{children:S.requirements.coins})]}),r.jsxs("div",{className:`flex items-center space-x-1 ${t.shuttlecocks>=S.requirements.shuttlecocks?"text-green-600":"text-red-600"}`,children:[r.jsx(Bt,{className:"w-3 h-3"}),r.jsx("span",{children:S.requirements.shuttlecocks})]}),r.jsxs("div",{className:`flex items-center space-x-1 ${t.meals>=S.requirements.meals?"text-green-600":"text-red-600"}`,children:[r.jsx(ms,{className:"w-3 h-3"}),r.jsx("span",{children:S.requirements.meals})]})]})]}),!S.unlocked&&r.jsx("div",{className:"mt-3 text-xs bg-yellow-50 text-yellow-700 p-2 rounded",children:"Finish in top 2 to unlock this tier"}),!O&&S.unlocked&&r.jsx("div",{className:"mt-3 text-xs bg-red-50 text-red-700 p-2 rounded",children:"Insufficient resources"})]},C.id)})})]})]});if(i==="registration"&&f){const C=$(f.tier);return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx("button",{onClick:()=>l("selection"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(gi,{className:"w-6 h-6"})}),r.jsx(re,{className:"w-8 h-8 text-blue-500"}),r.jsxs("h1",{className:"text-2xl font-bold",children:["Registration - ",f.name]})]}),r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Season Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Tier:"}),r.jsx("span",{className:"font-medium",children:C.name})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Start:"}),r.jsx("span",{children:new Date(f.start_date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"End:"}),r.jsx("span",{children:new Date(f.end_date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Registration deadline:"}),r.jsx("span",{children:new Date(f.registration_deadline).toLocaleDateString()})]})]}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Registration cost:"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Pe,{className:"w-4 h-4 text-yellow-500"}),r.jsx("span",{children:"Coins"})]}),r.jsx("span",{className:"font-medium",children:C.requirements.coins})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Bt,{className:"w-4 h-4 text-blue-500"}),r.jsx("span",{children:"Shuttlecocks"})]}),r.jsx("span",{className:"font-medium",children:C.requirements.shuttlecocks})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ms,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{children:"Meals"})]}),r.jsx("span",{className:"font-medium",children:C.requirements.meals})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Registration"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Team Name"}),r.jsx("input",{type:"text",value:E,onChange:S=>P(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your team name"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Select your players (",j.length,"/5 minimum)"]}),r.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:e.players.map(S=>r.jsxs("label",{className:"flex items-center p-3 hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:j.includes(S.id),onChange:O=>{O.target.checked?j.length<10&&N([...j,S.id]):N(j.filter(ee=>ee!==S.id))},className:"mr-3"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:S.name}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Level ",S.level," • ",S.gender==="male"?"Male":"Female"]})]})]},S.id))})]}),k&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:k}),r.jsx("button",{onClick:T,disabled:o||j.length<5||!E.trim(),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Registering...":"Register for Season"})]})]})]})})]})}if(i==="dashboard"&&g)return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx(re,{className:"w-8 h-8 text-blue-500"}),r.jsxs("h1",{className:"text-2xl font-bold",children:["Interclub Season - ",g.registration.season.name]})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:p?r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[r.jsx(cn,{className:"w-6 h-6 mr-2 text-blue-500"}),"Next Match"]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-medium",children:["MD",p.matchday_number]}),r.jsx("span",{className:"text-sm text-gray-600",children:new Date(p.match_date).toLocaleDateString()})]}),r.jsx("div",{className:"text-lg font-bold text-center",children:p.home_team_id===(n==null?void 0:n.id)?"HOME":"AWAY"})]}),r.jsxs("div",{className:"flex justify-center space-x-4",children:[p.status==="lineup_pending"&&r.jsxs("button",{onClick:()=>l("lineup"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[r.jsx(an,{className:"w-4 h-4"}),r.jsx("span",{children:"Create Lineup"})]}),r.jsxs("button",{onClick:()=>l("standings"),className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 flex items-center space-x-2",children:[r.jsx(xi,{className:"w-4 h-4"}),r.jsx("span",{children:"View Standings"})]})]})]}):r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Active Season"}),r.jsx("p",{className:"text-gray-600",children:"All matches are completed or pending scheduling."})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[r.jsx(On,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Your Position"]}),g.standing?r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:["#",g.standing.position]}),r.jsxs("div",{className:"text-gray-600 mb-4",children:[g.standing.points," points"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Matches played:"}),r.jsx("span",{children:g.standing.matches_played})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Wins:"}),r.jsx("span",{className:"text-green-600",children:g.standing.encounters_won})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Losses:"}),r.jsx("span",{className:"text-red-600",children:g.standing.encounters_lost})]})]}),g.standing.form&&g.standing.form.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Recent form:"}),r.jsx("div",{className:"flex justify-center space-x-1 mt-1",children:g.standing.form.slice(-5).map((C,S)=>r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${C==="W"?"bg-green-500":"bg-red-500"}`,children:C},S))})]})]}):r.jsx("p",{className:"text-gray-600 text-center",children:"Position not available"})]})]})]});if(i==="lineup"&&p){const[C,S]=b.useState({mens_singles:"",womens_singles:"",mens_doubles:["",""],womens_doubles:["",""],mixed_doubles:["",""]}),O=e.players.filter(_=>_.gender==="male"),ee=e.players.filter(_=>_.gender==="female"),te=()=>C.mens_singles&&C.womens_singles&&C.mens_doubles[0]&&C.mens_doubles[1]&&C.womens_doubles[0]&&C.womens_doubles[1]&&C.mixed_doubles[0]&&C.mixed_doubles[1],Ce=async()=>{if(!te())return;const _={encounter_id:p.id,lineup:C};try{c(!0),(await a.submitLineup(n.id,_)).success&&(await M(),l("dashboard"))}catch(q){console.error("Lineup submission error:",q)}finally{c(!1)}};return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx("button",{onClick:()=>l("dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(gi,{className:"w-6 h-6"})}),r.jsx(an,{className:"w-8 h-8 text-blue-500"}),r.jsxs("h1",{className:"text-2xl font-bold",children:["Lineup - MD",p.matchday_number]})]}),r.jsx("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-6",children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Match Lineups"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Men's Singles (MS)"}),r.jsxs("select",{value:C.mens_singles,onChange:_=>S({...C,mens_singles:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select a player"}),O.map(_=>r.jsxs("option",{value:_.id,children:[_.name," (Level ",_.level,")"]},_.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Women's Singles (WS)"}),r.jsxs("select",{value:C.womens_singles,onChange:_=>S({...C,womens_singles:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select a player"}),ee.map(_=>r.jsxs("option",{value:_.id,children:[_.name," (Level ",_.level,")"]},_.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Men's Doubles (MD)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("select",{value:C.mens_doubles[0],onChange:_=>S({...C,mens_doubles:[_.target.value,C.mens_doubles[1]]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Player 1"}),O.map(_=>r.jsxs("option",{value:_.id,children:[_.name," (Level ",_.level,")"]},_.id))]}),r.jsxs("select",{value:C.mens_doubles[1],onChange:_=>S({...C,mens_doubles:[C.mens_doubles[0],_.target.value]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Player 2"}),O.map(_=>r.jsxs("option",{value:_.id,children:[_.name," (Level ",_.level,")"]},_.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Women's Doubles (WD)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("select",{value:C.womens_doubles[0],onChange:_=>S({...C,womens_doubles:[_.target.value,C.womens_doubles[1]]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Player 1"}),ee.map(_=>r.jsxs("option",{value:_.id,children:[_.name," (Level ",_.level,")"]},_.id))]}),r.jsxs("select",{value:C.womens_doubles[1],onChange:_=>S({...C,womens_doubles:[C.womens_doubles[0],_.target.value]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Player 2"}),ee.map(_=>r.jsxs("option",{value:_.id,children:[_.name," (Level ",_.level,")"]},_.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mixed Doubles (XD)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("select",{value:C.mixed_doubles[0],onChange:_=>S({...C,mixed_doubles:[_.target.value,C.mixed_doubles[1]]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Male Player"}),O.map(_=>r.jsxs("option",{value:_.id,children:[_.name," (Level ",_.level,")"]},_.id))]}),r.jsxs("select",{value:C.mixed_doubles[1],onChange:_=>S({...C,mixed_doubles:[C.mixed_doubles[0],_.target.value]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Female Player"}),ee.map(_=>r.jsxs("option",{value:_.id,children:[_.name," (Level ",_.level,")"]},_.id))]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-bold mb-4",children:"Lineup Summary"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"bg-white p-3 rounded",children:[r.jsx("span",{className:"font-medium",children:"MS:"})," ",C.mens_singles?(J=e.players.find(_=>_.id===C.mens_singles))==null?void 0:J.name:"Not assigned"]}),r.jsxs("div",{className:"bg-white p-3 rounded",children:[r.jsx("span",{className:"font-medium",children:"WS:"})," ",C.womens_singles?(Z=e.players.find(_=>_.id===C.womens_singles))==null?void 0:Z.name:"Not assigned"]}),r.jsxs("div",{className:"bg-white p-3 rounded",children:[r.jsx("span",{className:"font-medium",children:"MD:"})," ",C.mens_doubles[0]&&C.mens_doubles[1]?`${(X=e.players.find(_=>_.id===C.mens_doubles[0]))==null?void 0:X.name} / ${(B=e.players.find(_=>_.id===C.mens_doubles[1]))==null?void 0:B.name}`:"Not assigned"]}),r.jsxs("div",{className:"bg-white p-3 rounded",children:[r.jsx("span",{className:"font-medium",children:"WD:"})," ",C.womens_doubles[0]&&C.womens_doubles[1]?`${(me=e.players.find(_=>_.id===C.womens_doubles[0]))==null?void 0:me.name} / ${(z=e.players.find(_=>_.id===C.womens_doubles[1]))==null?void 0:z.name}`:"Not assigned"]}),r.jsxs("div",{className:"bg-white p-3 rounded",children:[r.jsx("span",{className:"font-medium",children:"XD:"})," ",C.mixed_doubles[0]&&C.mixed_doubles[1]?`${(V=e.players.find(_=>_.id===C.mixed_doubles[0]))==null?void 0:V.name} / ${(Q=e.players.find(_=>_.id===C.mixed_doubles[1]))==null?void 0:Q.name}`:"Not assigned"]})]}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:Ce,disabled:!te()||o,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Submitting...":"Submit Lineup"})})]})]})})]})}return i==="standings"&&g?r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx("button",{onClick:()=>l("dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(gi,{className:"w-6 h-6"})}),r.jsx(re,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Group Standings"})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"P"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"W"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"L"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"+/-"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Form"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(R=g.standings)==null?void 0:R.map((C,S)=>{var O;return r.jsxs("tr",{className:C.team_id===(n==null?void 0:n.id)?"bg-blue-50":"",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-lg font-bold",children:C.position}),C.position<=2&&r.jsx(Wt,{className:"w-4 h-4 ml-1 text-yellow-500"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium",children:C.team_name}),C.team_id===(n==null?void 0:n.id)&&r.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"YOU"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-lg font-bold text-blue-600",children:C.points}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.matches_played}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-green-600",children:C.encounters_won}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-red-600",children:C.encounters_lost}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[C.individual_matches_won-C.individual_matches_lost>0?"+":"",C.individual_matches_won-C.individual_matches_lost]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex space-x-1",children:(O=C.form)==null?void 0:O.slice(-5).map((ee,te)=>r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${ee==="W"?"bg-green-500":"bg-red-500"}`,children:ee},te))})})]},C.team_id)})})]})})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Interclub"}),r.jsx("p",{className:"text-gray-600",children:"Loading..."})]})})},jh=["Finding opponent...","Preparing match...","Setting up court...","Match starting soon...","Players warming up...","Checking equipment...","Analyzing strategies...","Getting ready..."];function c1(){const[e,t]=b.useState(0),[s,n]=b.useState(10),[a,i]=b.useState(!1);return b.useEffect(()=>{const l=setInterval(()=>{t(c=>(c+1)%jh.length)},1250),o=setInterval(()=>{n(c=>Math.max(0,c-1))},1e3);return setTimeout(()=>i(!0),500),()=>{clearInterval(l),clearInterval(o)}},[]),r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 text-center",children:[r.jsx("div",{className:"relative h-32 mb-6",children:r.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-8",children:[r.jsx("div",{className:`w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center transition-all duration-500 ${a?"translate-x-0 opacity-100":"-translate-x-full opacity-0"}`,children:r.jsx(on,{className:"w-8 h-8 text-white"})}),r.jsx("div",{className:`text-2xl font-bold text-gray-800 transition-opacity duration-500 ${a?"opacity-100":"opacity-0"}`,children:"VS"}),r.jsx("div",{className:`w-16 h-16 bg-red-500 rounded-full flex items-center justify-center transition-all duration-500 ${a?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:r.jsx(on,{className:"w-8 h-8 text-white"})})]})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Match in Progress"}),r.jsx("p",{className:"text-gray-600 animate-pulse min-h-[1.5rem]",children:jh[e]}),r.jsxs("div",{className:"mt-8 space-y-2",children:[r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000",style:{width:`${(10-s)/10*100}%`}})}),r.jsxs("div",{className:"text-sm text-gray-500",children:[Gi(s)," remaining"]})]}),r.jsxs("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:[r.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 bg-blue-500 rounded-full animate-ping"}),r.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-red-500 rounded-full animate-ping"}),r.jsx("div",{className:"absolute bottom-4 left-4 w-2 h-2 bg-yellow-500 rounded-full animate-ping"}),r.jsx("div",{className:"absolute bottom-4 right-4 w-2 h-2 bg-green-500 rounded-full animate-ping"})]})]})})}function d1({matchResult:e,rewards:t,onClose:s}){if(!e||!e.winner||!e.loser)return console.error("Invalid match result:",e),null;const{winner:n,loser:a,score:i,summary:l,newInjury:o}=e,c=u=>{switch(u){case"minor":return"text-yellow-600 bg-yellow-50";case"moderate":return"text-orange-600 bg-orange-50";case"severe":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},d=()=>{try{s(t)}catch(u){console.error("Error closing match result:",u)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Match Results"}),r.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(re,{className:`w-12 h-12 mx-auto mb-3 ${n.id.startsWith("cpu")?"text-gray-400":"text-yellow-500"}`}),r.jsxs("h4",{className:"text-lg font-semibold mb-1",children:[n.name," defeats ",a.name]}),r.jsxs("p",{className:"text-gray-600",children:["Score: ",i]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium mb-3",children:"Match Summary:"}),r.jsx("div",{className:"space-y-2",children:l.map((u,h)=>r.jsx("p",{className:"text-gray-600 text-sm",children:u},h))})]}),o&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h5",{className:"font-medium",children:"Injury Report:"}),r.jsx("div",{className:`rounded-lg p-4 ${c(o.severity)}`,children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(vl,{className:"w-5 h-5 mt-0.5"}),r.jsx("div",{children:r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("p",{children:["Player: ",e.players[0].name]}),r.jsxs("p",{children:["Injury: ",o.type]}),r.jsxs("p",{children:["Severity: ",o.severity]}),r.jsxs("p",{children:["Recovery Time:"," ",Math.max(0,o.recoveryTime/6e4)," minutes"]}),o.affectedStats&&Object.keys(o.affectedStats).length>0&&r.jsxs("p",{children:["Affected Stats:"," ",Object.keys(o.affectedStats).join(", ")]})]})})]})})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium mb-2",children:"Rewards:"}),r.jsx("div",{className:"space-y-1",children:t.coins>0&&r.jsxs("div",{className:"text-yellow-600",children:["+",t.coins," coins"]})})]}),r.jsx("button",{onClick:d,className:"w-full py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Continue"})]})]})})}function Nh(e){console.log(JSON.stringify(e.stats));const t=Object.entries(e.stats).filter(([i])=>["endurance","strength","agility","speed","explosiveness","injuryPrevention"].includes(i)).reduce((i,[l,o])=>i+o,0),s=Object.entries(e.stats).filter(([i])=>["smash","defense","serve","stick","slice","drop"].includes(i)).reduce((i,[l,o])=>i+o,0);let n=0;e.equipment&&Object.values(e.equipment).forEach(i=>{i&&Object.values(i.stats).forEach(l=>{n+=l})});const a=e.level*5;return(t+s+n)*(1+a/100)}function u1(e,t,s,n){const a=[],[i,l,o]=s.split(", "),c=[i,l,o].filter(Boolean);return a.push(`${e.name} faced off against ${t.name} in an intense match.`),c.forEach((d,u)=>{const[h,m]=d.split("-").map(Number),f=u+1;h-m>5?(a.push(`Set ${f}: A dominant performance with a score of ${d}.`),e.stats.smash>70&&a.push(`${e.name}'s powerful smashes were unstoppable.`)):h-m<=2?(a.push(`Set ${f}: A nail-biting set ending ${d}.`),e.stats.endurance>t.stats.endurance&&a.push(`${e.name}'s superior endurance made the difference.`)):(a.push(`Set ${f}: A solid set victory with ${d}.`),e.stats.agility>65&&a.push(`${e.name}'s agility on the court was remarkable.`))}),e.stats.serve>60&&a.push(`${e.name}'s serves were particularly effective.`),e.stats.defense>65&&a.push(`Some impressive defense shots from ${e.name}.`),c.length===2?a.push(`${e.name} secured a straight-sets victory.`):a.push(`${e.name} emerged victorious in a full three-set match.`),a}const h1=new jr(I);function m1(e,t){const s=Nh(e),n=Nh(t);console.log(e.id.includes("cpu")?e.id:e.name," ",e.level,e.rank," ",s," ",t.id.includes("cpu")?t.id:t.name," ",t.level,t.rank,n);const a=s+n,i=s/a,l=[0,0],o=[];for(let f=0;f<3;f++){let y=0,g=0;for(;y<21&&g<21||Math.abs(y-g)<2;)Math.random()<i?y++:g++;if(o.push(`${y}-${g}`),y>g?l[0]++:l[1]++,l[0]===2||l[1]===2)break}const c=l[0]>l[1]?e:t,d=l[0]>l[1]?t:e,u=o.join(", "),h=fh(e),m=fh(t);return{players:[e,t],winner:c,loser:d,score:u,summary:u1(c,d,u),newInjury:h,newInjury1:m}}function f1(e){const t=h1.createQuickCpuOpponent(e.level);return m1(e,t)}const Mn={coins:50,shuttlecocks:5};function p1(){const{gameState:e,resources:t,updateResources:s,dispatchGameState:n}=Kt(),[a,i]=b.useState(null),[l,o]=b.useState(!1),[c,d]=b.useState(null),u=b.useMemo(()=>t.coins>=Mn.coins&&t.shuttlecocks>=Mn.shuttlecocks,[t]),h=f=>{o(!0),d(null),s("upgrade_cost",Mn,!1),setTimeout(()=>{const y=e.players.find(g=>g.id===f);if(y)try{const g=f1(y);g.newInjury&&(n({type:"ADD_INJURY",payload:{playerId:y.id,injury:g.newInjury}}),Rp(y,[...y.injuries||[],g.newInjury])),d(g)}catch(g){console.error("Error simulating match:",g)}o(!1)},1e4)},m=async f=>{d(null),i(null),o(!1),s("tournament_reward",f)};return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx(on,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Quick Match"})]}),r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[r.jsx("h2",{className:"text-lg font-semibold mr-2",children:"Start a Quick Match"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Bt,{className:"w-5 h-5 text-blue-500"}),r.jsx("span",{children:Mn.shuttlecocks})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Pe,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{children:Mn.coins})]})]}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Challenge an opponent to a quick match and earn rewards instantly! Select your player and get ready for an exciting match."}),r.jsx("div",{className:"space-y-3 mb-6",children:e.players.map(f=>r.jsxs("label",{className:`flex items-center space-x-3 p-3 rounded-lg border cursor-pointer hover:bg-gray-50 ${a===f.id?"border-blue-500 bg-blue-50":""}`,children:[r.jsx("input",{type:"radio",checked:a===f.id,onChange:()=>i(f.id),className:"w-4 h-4 text-blue-500"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:f.name}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Level ",f.level]})]})]},f.id))}),r.jsx("button",{onClick:()=>a&&h(a),disabled:!a||l||!u,className:`w-full py-3 rounded-lg flex items-center justify-center space-x-2 ${a&&!l&&u?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:r.jsx("div",{className:"flex items-center justify-center gap-3",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(on,{className:"w-5 h-5"}),r.jsx("span",{children:"Start Quick Match"})]})})})]})}),l&&r.jsx(c1,{}),c&&!l&&r.jsx(d1,{matchResult:c,rewards:{coins:c.winner.id===a?200:50},onClose:m})]})}const g1=({isOpen:e,onClose:t,tournament:s,eligiblePlayers:n,onSelectPlayer:a})=>{const[i,l]=b.useState(null);if(!e)return null;const o=()=>{i&&(a(i),t())},c=u=>{const h=(u.stats.smash+u.stats.defense+u.stats.serve+u.stats.stick+u.stats.slice+u.stats.drop)/6,m=(u.stats.endurance+u.stats.strength+u.stats.agility+u.stats.speed+u.stats.explosiveness+u.stats.injuryPrevention)/6;return{technical:Math.round(h),physical:Math.round(m)}},d=r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] min-h-screen",onClick:u=>{u.target===u.currentTarget&&t()},children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto mx-4",onClick:u=>u.stopPropagation(),children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Select Player for ",s.name]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"px-6 py-6",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Tournament Requirements"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsxs("p",{children:["Minimum Level: ",s.minPlayerLevel]}),r.jsxs("p",{children:["Tier: ",s.tier.charAt(0).toUpperCase()+s.tier.slice(1)]})]})]}),r.jsxs("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:[r.jsxs("h3",{className:"font-semibold text-gray-900",children:["Eligible Players (",n.length,")"]}),n.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Ws,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{children:"No eligible players found"}),r.jsxs("p",{className:"text-sm",children:["Players must be level ",s.minPlayerLevel," or higher and not injured"]})]}):n.map(u=>{const h=c(u),m=(i==null?void 0:i.id)===u.id;return r.jsxs("div",{onClick:()=>l(u),className:`border rounded-lg p-4 cursor-pointer transition-all ${m?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${m?"bg-blue-200":"bg-gray-200"}`,children:r.jsx(Ws,{className:`w-6 h-6 ${m?"text-blue-600":"text-gray-600"}`})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:u.name}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(dj,{className:"w-4 h-4 mr-1"}),"Level ",u.level]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(jd,{className:"w-4 h-4 mr-1"}),"Physical ",h.physical]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(_d,{className:"w-4 h-4 mr-1"}),"Technical ",h.technical]})]})]})]}),m&&r.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),m&&r.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h5",{className:"text-xs font-medium text-blue-800 mb-2",children:"Technical Skills"}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Smash:"}),r.jsx("span",{children:u.stats.smash})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Defense:"}),r.jsx("span",{children:u.stats.defense})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Serve:"}),r.jsx("span",{children:u.stats.serve})]})]})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"text-xs font-medium text-blue-800 mb-2",children:"Physical Stats"}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Endurance:"}),r.jsx("span",{children:u.stats.endurance})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Strength:"}),r.jsx("span",{children:u.stats.strength})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Agility:"}),r.jsx("span",{children:u.stats.agility})]})]})]})]})})]},u.id)})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),r.jsx("button",{onClick:o,disabled:!i,className:`px-6 py-2 rounded-lg transition-colors ${i?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:"Register Player"})]})]})]})});return ad.createPortal(d,document.body)},x1=({tournament:e,onClose:t,userPosition:s,userRewards:n})=>{const a=()=>{var d;return((d=e.registeredPlayers)==null?void 0:d.slice(0,8).map((u,h)=>({position:h+1,playerName:u.playerName,clubName:u.clubName,isUser:!1})))||[]},i=c=>{switch(c){case 1:return r.jsx(re,{className:"w-6 h-6 text-yellow-500"});case 2:return r.jsx(On,{className:"w-6 h-6 text-gray-400"});case 3:return r.jsx(On,{className:"w-6 h-6 text-amber-600"});default:return r.jsx(ln,{className:"w-6 h-6 text-gray-300"})}},l=c=>{switch(c){case 1:return e.prizePool.first;case 2:return e.prizePool.second;case 3:return e.prizePool.third;default:return{}}},o=a();return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[r.jsx(re,{className:"w-6 h-6 mr-2 text-yellow-500"}),e.name," - Results"]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"px-6 py-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6 mb-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Tournament Complete!"}),r.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(re,{className:"w-4 h-4 mr-1 text-yellow-500"}),e.tier.charAt(0).toUpperCase()+e.tier.slice(1)," Tournament"]}),r.jsxs("div",{children:["Participants: ",e.currentParticipants]}),r.jsxs("div",{children:["Date: ",new Date(e.startDate).toLocaleDateString()]})]})]})}),s&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-green-900",children:"Your Performance"}),r.jsxs("p",{className:"text-green-800",children:["You finished in position ",s," out of ",e.currentParticipants," players!"]})]}),r.jsx("div",{className:"text-right",children:n&&r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-medium text-green-900 mb-1",children:"Rewards Earned:"}),r.jsxs("div",{className:"space-y-1",children:[n.coins&&r.jsxs("div",{className:"flex items-center justify-end",children:[r.jsx(Pe,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:n.coins})]}),n.diamonds&&r.jsxs("div",{className:"flex items-center justify-end",children:[r.jsx(Ze,{className:"w-4 h-4 text-purple-500 mr-1"}),r.jsx("span",{children:n.diamonds})]})]})]})})]})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Final Rankings"}),r.jsxs("div",{className:"space-y-3",children:[o.map(c=>{const d=l(c.position);return r.jsx("div",{className:`border rounded-lg p-4 ${c.isUser?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"flex items-center justify-center w-10 h-10",children:i(c.position)}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:c.playerName}),r.jsx("p",{className:"text-sm text-gray-600",children:c.clubName})]}),r.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["#",c.position]})]}),(d.coins||d.diamonds)&&r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Rewards"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[d.coins&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Pe,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{className:"text-sm font-medium",children:d.coins})]}),d.diamonds&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ze,{className:"w-4 h-4 text-purple-500 mr-1"}),r.jsx("span",{className:"text-sm font-medium",children:d.diamonds})]})]})]})]})},`${c.position}-${c.playerName}`)}),o.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(re,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{children:"No ranking data available"})]})]})]}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Prize Pool"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[r.jsx(re,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-semibold text-yellow-900",children:"1st Place"}),r.jsxs("div",{className:"text-sm space-y-1 mt-2",children:[e.prizePool.first.coins&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Pe,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:e.prizePool.first.coins})]}),e.prizePool.first.diamonds&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Ze,{className:"w-4 h-4 text-purple-500 mr-1"}),r.jsx("span",{children:e.prizePool.first.diamonds})]})]})]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center",children:[r.jsx(On,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),r.jsx("h4",{className:"font-semibold text-gray-700",children:"2nd Place"}),r.jsxs("div",{className:"text-sm space-y-1 mt-2",children:[e.prizePool.second.coins&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Pe,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:e.prizePool.second.coins})]}),e.prizePool.second.diamonds&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Ze,{className:"w-4 h-4 text-purple-500 mr-1"}),r.jsx("span",{children:e.prizePool.second.diamonds})]})]})]}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 text-center",children:[r.jsx(On,{className:"w-8 h-8 text-amber-600 mx-auto mb-2"}),r.jsx("h4",{className:"font-semibold text-amber-800",children:"3rd Place"}),r.jsxs("div",{className:"text-sm space-y-1 mt-2",children:[e.prizePool.third.coins&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Pe,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:e.prizePool.third.coins})]}),e.prizePool.third.diamonds&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Ze,{className:"w-4 h-4 text-purple-500 mr-1"}),r.jsx("span",{children:e.prizePool.third.diamonds})]})]})]})]})]}),r.jsx("div",{className:"flex justify-center mt-8",children:r.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close Results"})})]})]})})},y1=({registeredPlayers:e,tournamentName:t,rounds:s,currentPlayerId:n,onBack:a})=>{const i=h=>h?(h.is_cpu,h.name):"TBD",l=()=>{if(!s||s.length===0)return null;const h=s[s.length-1];if(h.matches.every(f=>f.completed)&&h.matches.length>0){const f=h.matches[h.matches.length-1];console.log("Final match winner:",f.winner);for(let y=0;y<e.length;y++)if(e[y].id===f.winner)return e[y];return null}return null},o=()=>!s||s.length===0?!1:s.every(h=>h.matches.every(m=>m.completed)),c=l(),d=o();console.log("Tournament winner:",c),console.log("Tournament completed:",d);const u=()=>c?c.name?c.name:typeof c=="string"?c:i(c):"Unknown";return r.jsxs("div",{className:"w-full bg-white rounded-xl shadow-lg p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(re,{className:"w-8 h-8 text-yellow-500"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t}),d&&r.jsxs("div",{className:"flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full",children:[r.jsx(Wt,{className:"w-4 h-4 mr-1"}),r.jsx("span",{className:"text-sm font-medium",children:"Completed"})]})]}),r.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition-colors",children:"Back"})]}),d&&c&&r.jsx("div",{className:"mb-6 bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-xl p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center mb-4",children:[r.jsx(Wt,{className:"w-12 h-12 text-yellow-500 mr-3"}),r.jsx(re,{className:"w-16 h-16 text-yellow-500"}),r.jsx(Wt,{className:"w-12 h-12 text-yellow-500 ml-3"})]}),r.jsx("h3",{className:"text-3xl font-bold text-yellow-800 mb-2",children:"🎉 Tournament Champion! 🎉"}),r.jsxs("div",{className:"bg-white bg-opacity-70 rounded-lg p-4 inline-block",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(ln,{className:"w-6 h-6 text-yellow-500"}),r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:u()}),r.jsx(ln,{className:"w-6 h-6 text-yellow-500"})]}),c.id===n&&r.jsx("div",{className:"mt-2 text-green-700 font-semibold",children:"Congratulations! You won the tournament! 🏆"})]})]})}),r.jsx("div",{className:"space-y-6",children:s.map((h,m)=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:h.name}),r.jsxs("span",{className:"text-sm text-gray-600",children:[h.matches.filter(f=>f.completed).length,"/",h.matches.length," matches"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:h.matches.map(f=>{var g,v,p,w;console.log("Match data:",{matchId:f.id,completed:f.completed,winner:f.winner,players:f.players,player0:f.players[0],player1:f.players[1]});const y=(j,N)=>!j||!N||!f.completed?!1:N.id===j.id||N===j.id||typeof N=="string"&&N===j.id||N===j;return r.jsxs("div",{className:`border rounded p-3 ${f.completed?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Match ",f.id]}),f.completed?r.jsx(rs,{className:"w-4 h-4 text-green-500"}):r.jsx(xr,{className:"w-4 h-4 text-yellow-500"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:`p-2 rounded-md ${y(f.players[0],f.winner)?"bg-green-100 border border-green-300 ":""}`,children:[((g=f.players[0])==null?void 0:g.name)||"TBD",y(f.players[0],f.winner)&&r.jsx(re,{className:"w-3 h-3 text-yellow-500 inline ml-1 float-right"}),((v=f.players[0])==null?void 0:v.id)===n&&r.jsx("span",{className:"text-xs text-blue-600 font-medium ml-1",children:"(You)"})]}),r.jsx("div",{className:"text-center text-xs text-gray-500",children:"vs"}),r.jsxs("div",{className:`p-2 rounded-md ${y(f.players[1],f.winner)?"bg-green-100 border border-green-300":""}`,children:[((p=f.players[1])==null?void 0:p.name)||"TBD",y(f.players[1],f.winner)&&r.jsx(re,{className:"w-3 h-3 text-yellow-500 inline ml-1 float-right"}),((w=f.players[1])==null?void 0:w.id)===n&&r.jsx("span",{className:"text-xs text-blue-600 font-medium ml-1",children:"(You)"})]})]}),f.score&&r.jsxs("div",{className:"text-xs text-gray-600 mt-4 text-center bg-white p-2",children:["Score: ",f.score]})]},f.id)})})]},m))}),(!s||s.length===0)&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(re,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Tournament Bracket Available"}),r.jsx("p",{className:"text-gray-500",children:"The tournament bracket will appear once the tournament starts."})]})]})},_h=new Ks(I),v1=b.memo(({tournament:e,className:t})=>{const[s,n]=b.useState(0);b.useEffect(()=>{const o=()=>{const d=Date.now(),u=e.status==="ongoing"&&e.next_round_start_time?e.next_round_start_time:e.start_date,h=Math.max(0,u-d);n(h)};o();const c=setInterval(o,1e3);return()=>clearInterval(c)},[e.start_date,e.next_round_start_time,e.status]);const a=o=>{if(o<=0)return"Tournament Started!";const c=Math.floor(o/1e3)%60,d=Math.floor(o/(1e3*60))%60,u=Math.floor(o/(1e3*60*60))%24,h=Math.floor(o/(1e3*60*60*24)),m=[];return h>0&&m.push(`${h}d`),u>0&&m.push(`${u}h`),d>0&&m.push(`${d}m`),c>0&&h===0&&m.push(`${c}s`),m.join(" ")||"Starting..."},i=s<=0,l=s>0&&s<=3e5;return r.jsxs("div",{className:`flex items-center space-x-2 px-6 py-3 rounded-full ${i?"bg-red-100":l?"bg-yellow-100":"bg-blue-100"} ${t||""}`,children:[r.jsx(Op,{className:`w-6 h-6 ${i?"text-red-600":l?"text-yellow-600":"text-blue-600"} animate-pulse`}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`text-lg font-mono font-bold ${i?"text-red-700":l?"text-yellow-700":"text-blue-700"}`,children:a(s)}),r.jsx("div",{className:`text-xs ${i?"text-red-600":l?"text-yellow-600":"text-blue-600"}`,children:i?e.status==="ongoing"&&e.next_round_start_time?"Round Ready!":"Tournament Started!":e.status==="ongoing"&&e.next_round_start_time?"Until Next Round":"Until Tournament Starts"})]})]})});function w1(){var Z,X,B,me,z,V,Q;const{gameState:e,resources:t}=Kt(),[s,n]=b.useState([]),[a,i]=b.useState(!0),[l,o]=b.useState([]),[c,d]=b.useState(null),[u,h]=b.useState(!1),[m,f]=b.useState(null),[y,g]=b.useState([]),[v,p]=b.useState(!1),[w,j]=b.useState(null),[N,E]=b.useState(null);b.useEffect(()=>{P()},[e.players]);const P=b.useCallback(async()=>{try{i(!0);const R=await _h.getTournaments();n(R),console.log("loadedTournaments",R),console.log("gameState.players",e.players);const C=R.filter(S=>S.registered_players.some(ee=>e.players.some(te=>te.id===ee.player_id))).map(S=>S.id);if(console.log("registeredTournamentIds",C),o(C),N){const S=R.find(O=>O.id===N.id);S&&E(S)}}catch(R){console.error("Error loading tournaments:",R)}finally{i(!1)}},[e.players,N]),k=b.useCallback(R=>{if(R.status!=="upcoming"||R.start_date<=Date.now()||R.current_participants>=R.max_participants||e.players.filter(O=>{var ee;return O.level>=R.min_player_level&&!((ee=O.injuries)!=null&&ee.length)}).length===0)return!1;const S=R.entry_fee||{};return(S.coins||0)<=(t.coins||0)&&(S.shuttlecocks||0)<=(t.shuttlecocks||0)&&(S.meals||0)<=(t.meals||0)&&(S.diamonds||0)<=(t.diamonds||0)},[e.players,t]),A=b.useCallback(R=>{if(R.status!=="upcoming")return R.status==="ongoing"?"Tournament In Progress":"Tournament Ended";if(R.start_date<=Date.now())return"Registration Closed";if(R.current_participants>=R.max_participants)return"Tournament Full";if(e.players.filter(ee=>{var te;return ee.level>=R.min_player_level&&!((te=ee.injuries)!=null&&te.length)}).length===0)return"No Eligible Players";const S=R.entry_fee||{};return(S.coins||0)<=(t.coins||0)&&(S.shuttlecocks||0)<=(t.shuttlecocks||0)&&(S.meals||0)<=(t.meals||0)&&(S.diamonds||0)<=(t.diamonds||0)?"Register for Tournament":"Insufficient Resources"},[e.players,t]),M=b.useCallback(R=>{console.log("handleRegisterClick called with tournament:",R),console.log("Current showPlayerSelection state:",u),console.log("gameState.players:",e.players);const C=e.players.filter(S=>{var O;return S.level>=R.min_player_level&&!((O=S.injuries)!=null&&O.length)});if(console.log("eligiblePlayers found:",C),C.length===0){console.log("No eligible players, showing notification"),d({type:"error",message:"No eligible players for this tournament"});return}console.log("Setting tournament and players, opening modal"),f(R),g(C),h(!0),console.log("Modal should now be open, showPlayerSelection set to true")},[e.players,u]),T=async R=>{if(m)try{if(m.status!=="upcoming")throw new Error("Tournament is no longer accepting registrations");if(m.start_date<=Date.now())throw new Error("Tournament registration period has ended");if(m.current_participants>=m.max_participants)throw new Error("Tournament is full");const C=await _h.registerPlayerForTournament(m.id,R.id);if(C.error)throw new Error(C.error);o(S=>[...S,m.id]),P(),d({type:"success",message:`Successfully registered ${R.name} for ${m.name}!`}),h(!1),setTimeout(()=>d(null),3e3)}catch(C){console.error("Error registering for tournament:",C);let S="Failed to register for tournament";if(C instanceof Error){const O=C.message.toLowerCase();O.includes("already started")?S="Tournament has already started":O.includes("registration is closed")||O.includes("registration period has ended")?S="Registration period has ended":O.includes("full")||O.includes("no more spots")?S="Tournament is full":O.includes("already registered")?S="Player is already registered for this tournament":O.includes("level")&&O.includes("too low")?S=`Player level is too low (minimum: ${m.min_player_level})`:O.includes("not found")?S="Player not found or invalid":S=C.message}d({type:"error",message:S}),setTimeout(()=>d(null),5e3)}},$=b.useCallback(R=>{const C=Date.now(),S=new Date(R).getTime()-C;if(S<=0)return"Started";const O=Math.floor(S/(1e3*60*60*24)),ee=Math.floor(S%(1e3*60*60*24)/(1e3*60*60)),te=Math.floor(S%(1e3*60*60)/(1e3*60));return O>0?`${O}d ${ee}h`:ee>0?`${ee}h ${te}m`:`${te}m`},[]),F=b.useCallback(R=>{E(R)},[]),J=b.useCallback(()=>{E(null)},[]);if(a)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})});if(N){const R=l.includes(N.id),C=k(N);return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("button",{onClick:J,className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[r.jsx(gi,{className:"w-5 h-5 mr-2"}),"Back to Tournaments"]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[r.jsx(re,{className:"w-8 h-8 mr-3 text-yellow-500"}),N.name]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:N.tier.charAt(0).toUpperCase()+N.tier.slice(1)}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${N.status==="upcoming"?"bg-blue-100 text-blue-800":N.status==="ongoing"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:N.status.charAt(0).toUpperCase()+N.status.slice(1)})]})]}),(N.status==="upcoming"||N.status==="ongoing"&&N.next_round_start_time)&&r.jsx(v1,{tournament:N})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(Be,{className:"w-5 h-5 mr-3"}),r.jsxs("span",{children:[N.current_participants,"/",N.max_participants," participants"]})]}),r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(ws,{className:"w-5 h-5 mr-3"}),r.jsxs("span",{children:[new Date(N.start_date).toLocaleDateString()," at ",new Date(N.start_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(re,{className:"w-5 h-5 mr-3"}),r.jsxs("span",{children:["Min Level: ",N.min_player_level]})]})]}),N.entry_fee&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Entry Fee"}),r.jsx("div",{className:"space-y-1",children:N.entry_fee.coins&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Pe,{className:"w-4 h-4 text-yellow-500 mr-2"}),r.jsxs("span",{children:[N.entry_fee.coins," coins"]})]})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Prize Pool"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),r.jsxs("span",{children:["1st: ",((X=(Z=N.prize_pool)==null?void 0:Z.first)==null?void 0:X.coins)||0," coins"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full mr-2"}),r.jsxs("span",{children:["2nd: ",((me=(B=N.prize_pool)==null?void 0:B.second)==null?void 0:me.coins)||0," coins"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),r.jsxs("span",{children:["3rd: ",((V=(z=N.prize_pool)==null?void 0:z.third)==null?void 0:V.coins)||0," coins"]})]})]})]})]}),!R&&r.jsx("button",{onClick:()=>M(N),disabled:!C,className:`w-full md:w-auto px-6 py-3 rounded-lg transition-colors ${C?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:A(N)}),R&&r.jsxs("div",{className:"flex items-center text-green-700 bg-green-100 px-4 py-2 rounded-lg w-full md:w-auto",children:[r.jsx(rs,{className:"w-5 h-5 mr-2"}),"You are registered for this tournament"]})]}),N.rounds&&N.rounds.length>0&&R&&(N.status==="ongoing"||N.status==="completed"||N.start_date<=Date.now())&&r.jsx(y1,{registeredPlayers:e.players,tournamentName:N.name,rounds:N.rounds,currentPlayerId:((Q=e.players[0])==null?void 0:Q.id)||"",onBack:J}),(!R||N.start_date>Date.now()&&N.status==="upcoming")&&r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:[r.jsx(re,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),R?r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-medium text-gray-600 mb-2",children:"Tournament Bracket Will Appear When Started"}),r.jsx("p",{className:"text-gray-500",children:"The tournament bracket will be visible once the tournament begins."})]}):r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-medium text-gray-600 mb-2",children:"Register to View Tournament Bracket"}),r.jsx("p",{className:"text-gray-500",children:"You must be registered for this tournament to view the bracket and match details."})]})]}),c&&r.jsxs("div",{className:`fixed top-4 right-4 p-4 rounded-lg flex items-center z-50 ${c.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[c.type==="success"?r.jsx(rs,{className:"w-5 h-5 mr-2"}):r.jsx(pa,{className:"w-5 h-5 mr-2"}),c.message]}),m&&r.jsx(g1,{isOpen:u,onClose:()=>h(!1),tournament:m,eligiblePlayers:y,onSelectPlayer:T})]})}return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[r.jsx(re,{className:"w-8 h-8 mr-3 text-yellow-500"}),"Tournaments"]}),r.jsx("p",{className:"text-gray-600",children:"Compete in tournaments to win prizes and climb the rankings"})]})}),c&&r.jsxs("div",{className:`p-4 rounded-lg flex items-center ${c.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[c.type==="success"?r.jsx(rs,{className:"w-5 h-5 mr-2"}):r.jsx(pa,{className:"w-5 h-5 mr-2"}),c.message]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length===0?r.jsxs("div",{className:"col-span-full text-center py-12",children:[r.jsx(re,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No tournaments available"}),r.jsx("p",{className:"text-gray-400",children:"Check back later for new tournaments"})]}):s.map(R=>r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>F(R),children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:R.name}),r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:R.tier.charAt(0).toUpperCase()+R.tier.slice(1)}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R.status==="upcoming"?"bg-blue-100 text-blue-800":R.status==="ongoing"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:R.status.charAt(0).toUpperCase()+R.status.slice(1)})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Be,{className:"w-4 h-4 mr-2"}),R.current_participants,"/",R.max_participants," participants"]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(ws,{className:"w-4 h-4 mr-2"}),new Date(R.start_date).toLocaleDateString()," at ",new Date(R.start_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),R.status==="upcoming"&&r.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[r.jsx(xr,{className:"w-4 h-4 mr-2"}),"Starts in ",$(R.start_date)]})]}),R.entry_fee&&r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Entry Fee"}),r.jsx("div",{className:"flex items-center space-x-3 text-sm",children:R.entry_fee.coins&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Pe,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:R.entry_fee.coins})]})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Click to view details"}),l.includes(R.id)&&r.jsxs("div",{className:"flex items-center text-green-600",children:[r.jsx(rs,{className:"w-4 h-4 mr-1"}),r.jsx("span",{className:"text-xs",children:"Registered"})]})]})]},R.id))}),v&&w&&r.jsx(x1,{tournament:w,onClose:()=>p(!1)})]})}const b1=async e=>{try{const{data:t,error:s}=await I.from("admin_users").select("*").eq("user_id",e).single();return s||!t?null:t}catch(t){return console.error("Error checking admin permissions:",t),null}},j1=async(e,t,s,n,a)=>{try{console.log("Logging admin activity:",{adminUserId:e,actionType:t,targetType:s,targetId:n,details:a})}catch(i){console.error("Error logging admin activity:",i)}},Jp=b.createContext(void 0),N1=({children:e})=>{const[t,s]=b.useState(null),[n,a]=b.useState(!0),{user:i}=js(),l=b.useCallback(async()=>{if(!(i!=null&&i.id)){s(null);return}a(!0);try{const h=await b1(i.id);s(h)}catch(h){console.error("Error checking admin status:",h),s(null)}finally{a(!1)}},[i==null?void 0:i.id]),o=b.useCallback(async()=>{a(!0),await l()},[l]),c=b.useCallback(h=>t&&t.permissions[h]||!1,[t]),d=b.useCallback(async(h,m,f,y)=>{t&&await j1(t.id,h,m,f,y)},[t]);b.useEffect(()=>{l()},[l]);const u={adminUser:t,isAdmin:!!t,loading:n,hasPermission:c,logActivity:d,refreshAdminStatus:o};return r.jsx(Jp.Provider,{value:u,children:e})},Qs=()=>{const e=b.useContext(Jp);if(e===void 0)throw new Error("useAdmin must be used within an AdminProvider");return e},_1=({tournament:e,isOpen:t,onClose:s,onSuccess:n})=>{const[a,i]=b.useState([]),[l,o]=b.useState(!1),[c,d]=b.useState(null),[u,h]=b.useState(""),[m,f]=b.useState("real");b.useEffect(()=>{t&&y()},[t,m]);const y=async()=>{try{o(!0);const{data:w,error:j}=await I.from("players").select("*").eq("is_cpu",m==="cpu").order("name");if(j){console.error("Error loading players:",j);return}i(w||[])}catch(w){console.error("Error loading players:",w)}finally{o(!1)}},g=async w=>{try{d(w.id);const{data:j,error:N}=await I.rpc("admin_register_player_for_tournament",{p_tournament_id:e.id,p_player_id:w.id,p_force_registration:!1});if(N)throw new Error(N.message);console.log("Player registered successfully:",j),n(),s()}catch(j){console.error("Error registering player:",j),de.error(`Failed to register player: ${j.message}`)}finally{d(null)}},v=a.filter(w=>w.name.toLowerCase().includes(u.toLowerCase())),p=w=>{var j;return((j=e.registered_players)==null?void 0:j.some(N=>N.playerId===w))||!1};return t?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Register Players"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Add players to ",r.jsx("span",{className:"font-medium",children:e.name})]})]}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(re,{className:"w-5 h-5 text-blue-600 mr-2"}),r.jsx("span",{className:"font-medium text-blue-900",children:e.name})]}),r.jsxs("div",{className:"flex items-center text-sm text-blue-700",children:[r.jsx(Be,{className:"w-4 h-4 mr-1"}),e.current_participants,"/",e.max_participants," participants"]})]})}),r.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[r.jsx("button",{onClick:()=>f("real"),className:`px-4 py-2 font-medium text-sm transition-colors ${m==="real"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Real Players"}),r.jsx("button",{onClick:()=>f("cpu"),className:`px-4 py-2 font-medium text-sm transition-colors ${m==="cpu"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"CPU Players"})]}),r.jsxs("div",{className:"relative mb-4",children:[r.jsx(Ea,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:`Search ${m==="real"?"real":"CPU"} players...`,value:u,onChange:w=>h(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:l?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):v.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Be,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsxs("p",{children:["No ",m==="real"?"real":"CPU"," players found"]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:v.map(w=>r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:w.name}),r.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[r.jsxs("span",{children:["Level ",w.level]}),m==="real"&&r.jsx("span",{children:"Real Player"})]})]}),r.jsx("div",{children:p(w.id)?r.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Registered"}):r.jsx("button",{onClick:()=>g(w),disabled:c===w.id,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:c===w.id?"Registering...":"Register"})})]},w.id))})}),r.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:r.jsx("div",{className:"flex justify-end space-x-3",children:r.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})})})]})}):null},so=new Ks(I),Kp=({tournament:e,onSave:t,onCancel:s})=>{var j,N,E,P,k,A,M,T,$,F,J,Z,X,B,me,z,V,Q,R,C,S,O,ee,te,Ce,_,q,W;const{logActivity:n}=Qs(),[a,i]=b.useState(!1),[l,o]=b.useState([]),[c,d]=b.useState({name:(e==null?void 0:e.name)||"",tier:(e==null?void 0:e.tier)||"local",status:(e==null?void 0:e.status)||"upcoming",startDate:e?new Date(e.start_date).toISOString().slice(0,16):"",endDate:e?new Date(e.end_date).toISOString().slice(0,16):"",minPlayerLevel:(e==null?void 0:e.min_player_level)||1,maxParticipants:(e==null?void 0:e.max_participants)||8,roundIntervalMinutes:(e==null?void 0:e.round_interval_minutes)||10,entryFee:{coins:((j=e==null?void 0:e.entry_fee)==null?void 0:j.coins)||0,shuttlecocks:((N=e==null?void 0:e.entry_fee)==null?void 0:N.shuttlecocks)||0,meals:((E=e==null?void 0:e.entry_fee)==null?void 0:E.meals)||0,diamonds:((P=e==null?void 0:e.entry_fee)==null?void 0:P.diamonds)||0},prizePool:{first:{coins:((A=(k=e==null?void 0:e.prize_pool)==null?void 0:k.first)==null?void 0:A.coins)||0,shuttlecocks:((T=(M=e==null?void 0:e.prize_pool)==null?void 0:M.first)==null?void 0:T.shuttlecocks)||0,meals:((F=($=e==null?void 0:e.prize_pool)==null?void 0:$.first)==null?void 0:F.meals)||0,diamonds:((Z=(J=e==null?void 0:e.prize_pool)==null?void 0:J.first)==null?void 0:Z.diamonds)||0},second:{coins:((B=(X=e==null?void 0:e.prize_pool)==null?void 0:X.second)==null?void 0:B.coins)||0,shuttlecocks:((z=(me=e==null?void 0:e.prize_pool)==null?void 0:me.second)==null?void 0:z.shuttlecocks)||0,meals:((Q=(V=e==null?void 0:e.prize_pool)==null?void 0:V.second)==null?void 0:Q.meals)||0,diamonds:((C=(R=e==null?void 0:e.prize_pool)==null?void 0:R.second)==null?void 0:C.diamonds)||0},third:{coins:((O=(S=e==null?void 0:e.prize_pool)==null?void 0:S.third)==null?void 0:O.coins)||0,shuttlecocks:((te=(ee=e==null?void 0:e.prize_pool)==null?void 0:ee.third)==null?void 0:te.shuttlecocks)||0,meals:((_=(Ce=e==null?void 0:e.prize_pool)==null?void 0:Ce.third)==null?void 0:_.meals)||0,diamonds:((W=(q=e==null?void 0:e.prize_pool)==null?void 0:q.third)==null?void 0:W.diamonds)||0}},registeredPlayers:(e==null?void 0:e.registered_players)||[]}),[u,h]=b.useState([]),[m,f]=b.useState(!1);b.useEffect(()=>{var ce,pe,ue,Ae,Qt,We,Yt,ne,Nr,Ys,Te,nt,Rt,at,x,L,G,se,ae,ve,Ye,Xs,jt,yn,vn,Pa,_r,Mt,Ta;e&&(d({name:e.name,tier:e.tier,status:e.status,startDate:new Date(e.start_date).toISOString().slice(0,16),endDate:new Date(e.end_date).toISOString().slice(0,16),minPlayerLevel:e.min_player_level,maxParticipants:e.max_participants,roundIntervalMinutes:e.round_interval_minutes||10,entryFee:{coins:((ce=e.entry_fee)==null?void 0:ce.coins)||0,shuttlecocks:((pe=e.entry_fee)==null?void 0:pe.shuttlecocks)||0,meals:((ue=e.entry_fee)==null?void 0:ue.meals)||0,diamonds:((Ae=e.entry_fee)==null?void 0:Ae.diamonds)||0},prizePool:{first:{coins:((We=(Qt=e.prize_pool)==null?void 0:Qt.first)==null?void 0:We.coins)||0,shuttlecocks:((ne=(Yt=e.prize_pool)==null?void 0:Yt.first)==null?void 0:ne.shuttlecocks)||0,meals:((Ys=(Nr=e.prize_pool)==null?void 0:Nr.first)==null?void 0:Ys.meals)||0,diamonds:((nt=(Te=e.prize_pool)==null?void 0:Te.first)==null?void 0:nt.diamonds)||0},second:{coins:((at=(Rt=e.prize_pool)==null?void 0:Rt.second)==null?void 0:at.coins)||0,shuttlecocks:((L=(x=e.prize_pool)==null?void 0:x.second)==null?void 0:L.shuttlecocks)||0,meals:((se=(G=e.prize_pool)==null?void 0:G.second)==null?void 0:se.meals)||0,diamonds:((ve=(ae=e.prize_pool)==null?void 0:ae.second)==null?void 0:ve.diamonds)||0},third:{coins:((Xs=(Ye=e.prize_pool)==null?void 0:Ye.third)==null?void 0:Xs.coins)||0,shuttlecocks:((yn=(jt=e.prize_pool)==null?void 0:jt.third)==null?void 0:yn.shuttlecocks)||0,meals:((Pa=(vn=e.prize_pool)==null?void 0:vn.third)==null?void 0:Pa.meals)||0,diamonds:((Mt=(_r=e.prize_pool)==null?void 0:_r.third)==null?void 0:Mt.diamonds)||0}},registeredPlayers:e.registered_players||[]}),h(((Ta=e.registered_players)==null?void 0:Ta.map(Zs=>Zs.player_id))||[])),(async()=>{try{const Zs=await so.getCPUPlayers();o(Zs||[])}catch(Zs){console.error("Error loading CPU players:",Zs)}})()},[e]);const y=async D=>{if(D.preventDefault(),i(!0),new Date(c.endDate).getTime()<new Date(c.startDate).getTime()){de.error("End date cannot be before start date"),i(!1);return}try{const ce={name:c.name,tier:["local","regional","national","international","premier"].indexOf(c.tier),status:["upcoming","ongoing","completed"].indexOf(c.status),start_date:new Date(c.startDate).toISOString(),end_date:new Date(c.endDate).toISOString(),min_player_level:c.minPlayerLevel,max_participants:c.maxParticipants,current_participants:(e==null?void 0:e.current_participants)||0,round_interval_minutes:c.roundIntervalMinutes||10,entry_fee:c.entryFee,prize_pool:c.prizePool,registered_players:(e==null?void 0:e.registered_players)||[]};if(e)await so.updateTournament(e.id,ce,u),await n("tournament_updated","tournament",e.id);else{const pe=await so.createTournament(ce,u);await n("tournament_created","tournament",pe.id)}t({id:(e==null?void 0:e.id)||"new",name:c.name,tier:c.tier,status:c.status,start_date:new Date(c.startDate).getTime(),end_date:new Date(c.endDate).getTime(),min_player_level:c.minPlayerLevel,max_participants:c.maxParticipants,current_participants:(e==null?void 0:e.current_participants)||0,entry_fee:c.entryFee,prize_pool:c.prizePool,registered_players:(e==null?void 0:e.registered_players)||[],round_interval_minutes:c.roundIntervalMinutes,current_round_level:(e==null?void 0:e.current_round_level)||0})}catch(ce){console.error("Error saving tournament:",ce),de.error("Failed to save tournament. Please try again.")}finally{i(!1)}},g=(D,ce)=>{d(pe=>({...pe,[D]:ce}))},v=(D,ce,pe,ue)=>{d(Ae=>({...Ae,[D]:ce?{...Ae[D],[ce]:{...Ae[D][ce],[pe]:ue}}:{...Ae[D],[pe]:ue}}))},p=[{value:"local",label:"Local Tournament",color:"text-gray-600"},{value:"regional",label:"Regional Tournament",color:"text-blue-600"},{value:"national",label:"National Tournament",color:"text-green-600"},{value:"international",label:"International Tournament",color:"text-yellow-600"},{value:"premier",label:"Premier Tournament",color:"text-purple-600"}],w=[{value:"upcoming",label:"Upcoming",color:"text-blue-600"},{value:"ongoing",label:"Ongoing",color:"text-green-600"},{value:"completed",label:"Completed",color:"text-gray-600"}];return r.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[r.jsx("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:y,children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Edit Tournament":"Create New Tournament"}),r.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"px-6 py-6 space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tournament Name"}),r.jsx("input",{type:"text",value:c.name,onChange:D=>g("name",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter tournament name",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tournament Tier"}),r.jsx("select",{value:c.tier,onChange:D=>g("tier",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:p.map(D=>r.jsx("option",{value:D.value,children:D.label},D.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsx("select",{value:c.status,onChange:D=>g("status",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:w.map(D=>r.jsx("option",{value:D.value,children:D.label},D.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Participants"}),r.jsx("select",{value:c.maxParticipants,onChange:D=>g("maxParticipants",parseInt(D.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[8,16,24,32,48,64].map(D=>r.jsx("option",{value:D,children:D},D))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Player Level"}),r.jsx("input",{type:"number",value:c.minPlayerLevel,onChange:D=>g("minPlayerLevel",parseInt(D.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"15"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(ws,{className:"w-4 h-4 inline mr-1"}),"Start Date & Time"]}),r.jsx("input",{type:"datetime-local",value:c.startDate,onChange:D=>g("startDate",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(ws,{className:"w-4 h-4 inline mr-1"}),"End Date & Time"]}),r.jsx("input",{type:"datetime-local",value:c.endDate,onChange:D=>g("endDate",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Round Interval (minutes)"}),r.jsx("input",{type:"number",min:"1",max:"60",value:c.roundIntervalMinutes,onChange:D=>g("roundIntervalMinutes",parseInt(D.target.value)||10),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"10"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Time between rounds (default: 10 minutes)"})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Pe,{className:"w-5 h-5 mr-2"}),"Entry Fee"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Pe,{className:"w-4 h-4 inline mr-1 text-yellow-500"}),"Coins"]}),r.jsx("input",{type:"number",value:c.entryFee.coins,onChange:D=>v("entryFee",null,"coins",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Bt,{className:"w-4 h-4 inline mr-1 text-blue-500"}),"Shuttlecocks"]}),r.jsx("input",{type:"number",value:c.entryFee.shuttlecocks,onChange:D=>v("entryFee",null,"shuttlecocks",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(ms,{className:"w-4 h-4 inline mr-1 text-green-500"}),"Meals"]}),r.jsx("input",{type:"number",value:c.entryFee.meals,onChange:D=>v("entryFee",null,"meals",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ze,{className:"w-4 h-4 inline mr-1 text-purple-500"}),"Diamonds"]}),r.jsx("input",{type:"number",value:c.entryFee.diamonds,onChange:D=>v("entryFee",null,"diamonds",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(re,{className:"w-5 h-5 mr-2"}),"Prize Pool"]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"🥇 First Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.first.coins,onChange:D=>v("prizePool","first","coins",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.first.shuttlecocks,onChange:D=>v("prizePool","first","shuttlecocks",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.first.meals,onChange:D=>v("prizePool","first","meals",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.first.diamonds,onChange:D=>v("prizePool","first","diamonds",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"🥈 Second Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.second.coins,onChange:D=>v("prizePool","second","coins",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.second.shuttlecocks,onChange:D=>v("prizePool","second","shuttlecocks",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.second.meals,onChange:D=>v("prizePool","second","meals",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.second.diamonds,onChange:D=>v("prizePool","second","diamonds",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"🥉 Third Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.third.coins,onChange:D=>v("prizePool","third","coins",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.third.shuttlecocks,onChange:D=>v("prizePool","third","shuttlecocks",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.third.meals,onChange:D=>v("prizePool","third","meals",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:c.prizePool.third.diamonds,onChange:D=>v("prizePool","third","diamonds",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(lc,{className:"w-5 h-5 mr-2"}),"CPU Players Assignment"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-4",children:l.map(D=>r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.includes(D.id),onChange:ce=>{ce.target.checked?h(pe=>[...pe,D.id]):h(pe=>pe.filter(ue=>ue!==D.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:D.name}),r.jsxs("span",{className:"text-xs text-gray-500",children:["Lv.",D.level]})]},D.id))}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Selected: ",u.length," CPU players"]})]}),e&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Vi,{className:"w-5 h-5 mr-2"}),"Player Registration"]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Register real players or additional CPU players to this tournament without resource deduction."}),r.jsx("button",{type:"button",onClick:()=>f(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Register Players"})]})]})]}),r.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:a,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:a,children:a?"Saving...":e?"Update Tournament":"Create Tournament"})]})]})}),e&&r.jsx(_1,{tournament:e,isOpen:m,onClose:()=>f(!1),onSuccess:()=>{console.log("Player registered successfully")}})]})},k1=new jr(I),Qp=()=>{const{adminUser:e,logActivity:t}=Qs(),[s,n]=b.useState(!1),[a,i]=b.useState(!1),[l,o]=b.useState(!1),[c,d]=b.useState(!1),[u,h]=b.useState(null),[m,f]=b.useState({totalUsers:0,activeTournaments:0,activeSeasons:0,cpuTeams:0,recentActivities:[]}),[y,g]=b.useState(!0);b.useEffect(()=>{A(),t("dashboard_viewed")},[]);const[v,p]=b.useState({name:"",description:"",skillLevel:"intermediate",playerCount:6,genderBalance:"mixed",isActive:!0}),w=async F=>{F.preventDefault(),g(!0);try{const{data:J,error:Z}=await I.from("cpu_teams").insert({name:v.name,description:v.description,skill_level:v.skillLevel,player_count:v.playerCount,gender_balance:v.genderBalance,is_active:v.isActive}).select().single();if(Z){console.error("Error creating CPU team:",Z);return}await t("cpu_team_created","cpu_team",J.id),o(!1)}catch(J){console.error("Error saving CPU team:",J)}finally{g(!1)}},j=()=>{p({name:"",description:"",skillLevel:"intermediate",playerCount:6,genderBalance:"mixed",isActive:!0}),o(!0)},N=async()=>{var F,J;if(u)try{g(!0),console.log("[AdminCpuTeams] Generating CPU players using PlayerService...");const{data:{user:Z}}=await I.auth.getUser();if(!Z)throw new Error("No authenticated user found");const X=Z.id;console.log("[AdminCpuTeams] Using current admin user ID for CPU players:",X);const B=await k1.generateCpuPlayersForTeam(X,u.teamId,u.teamName,u.skillLevel,u.playerCount,u.genderBalance);if(!B.success)throw new Error(B.error||"Failed to generate CPU players");console.log(`[AdminCpuTeams] Successfully generated ${(F=B.players)==null?void 0:F.length} CPU players`),await t("cpu_players_generated","cpu_team",u.teamId,{playerCount:u.playerCount}),d(!1),h(null),de.success(`Successfully generated ${(J=B.players)==null?void 0:J.length} CPU players!`)}catch(Z){console.error("[AdminCpuTeams] Error generating CPU players:",Z),de.error("Failed to create CPU players. Please try again.")}finally{g(!1)}},E=()=>{d(!1),h(null)},[P,k]=b.useState({name:"",tier:"departmental",start_date:"",end_date:"",registration_deadline:"",max_teams_per_group:8,status:"draft"}),A=async()=>{try{g(!0);const[F,J]=await Promise.all([I.rpc("get_admin_dashboard_stats"),I.from("admin_activity_logs").select("id, action_type, target_type, target_id, details, created_at, admin_user_id").order("created_at",{ascending:!1}).limit(10)]);if(F.error||J.error){console.error("Error loading dashboard data:",F.error||J.error);return}const Z=F.data;f({totalUsers:(Z==null?void 0:Z.total_users)||0,activeTournaments:(Z==null?void 0:Z.active_tournaments)||0,activeSeasons:(Z==null?void 0:Z.active_seasons)||0,cpuTeams:(Z==null?void 0:Z.total_cpu_teams)||0,recentActivities:J.data||[]})}catch(F){console.error("Error loading dashboard stats:",F)}finally{g(!1)}},M=()=>{n(!0)},T=()=>{k({name:"",tier:"departmental",start_date:"",end_date:"",registration_deadline:"",max_teams_per_group:8,status:"draft"}),i(!0)},$=async F=>{F.preventDefault();try{g(!0);const J={name:P.name,tier:P.tier,start_date:new Date(P.start_date).toISOString(),end_date:new Date(P.end_date).toISOString(),registration_deadline:new Date(P.registration_deadline).toISOString(),max_teams_per_group:P.max_teams_per_group,status:P.status,groups:JSON.stringify([]),week_schedule:JSON.stringify([])},{error:Z}=await I.from("interclub_seasons").insert(J);if(Z)throw Z;t("interclub_season_created_enhanced"),i(!1)}catch(J){console.error("Error creating season:",J)}finally{g(!1)}};return y?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome to Admin Dashboard"}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Last login: ",new Date().toLocaleDateString()]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx("span",{className:"text-2xl",children:"👥"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.totalUsers})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx("span",{className:"text-2xl",children:"🏆"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Tournaments"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.activeTournaments})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx("span",{className:"text-2xl",children:"🏟️"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Seasons"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.activeSeasons})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx("span",{className:"text-2xl",children:"🤖"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"CPU Teams & Players"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.cpuTeams})]})]})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx("button",{onClick:M,className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-xl mr-3",children:"🏆"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Create Tournament"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Set up a new tournament"})]})]})}),r.jsx("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",onClick:T,children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-xl mr-3",children:"🏟️"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Launch Season"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Start interclub season"})]})]})}),r.jsx("button",{onClick:j,className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-xl mr-3",children:"🤖"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Add CPU Team"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Create AI opponents"})]})]})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Admin Activity"}),m.recentActivities.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"}):r.jsx("div",{className:"space-y-3",children:m.recentActivities.slice(0,5).map((F,J)=>r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.action_type.replace(/_/g," ").replace(/\b\w/g,Z=>Z.toUpperCase())}),F.target_type&&r.jsxs("p",{className:"text-xs text-gray-500",children:["Target: ",F.target_type]})]})]}),r.jsx("span",{className:"text-xs text-gray-400",children:new Date(F.created_at).toLocaleDateString()})]},J))})]}),s&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Tournament"}),r.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"px-6 py-6",children:r.jsx(Kp,{tournament:null,onSave:F=>{console.log("Tournament saved from dashboard:",F),n(!1),de.success("Tournament created successfully!")},onCancel:()=>n(!1)})})]})}),a&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 h-[500px]",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"New Interclub Season"}),r.jsxs("form",{onSubmit:$,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Season name"}),r.jsx("input",{type:"text",value:P.name,onChange:F=>k({...P,name:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tier"}),r.jsxs("select",{value:P.tier,onChange:F=>k({...P,tier:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"departmental",children:"Departmental"}),r.jsx("option",{value:"regional",children:"Regional"}),r.jsx("option",{value:"national",children:"National"}),r.jsx("option",{value:"top12",children:"TOP 12"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start date"}),r.jsx("input",{type:"datetime-local",value:P.start_date,onChange:F=>k({...P,start_date:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"End date"}),r.jsx("input",{type:"datetime-local",value:P.end_date,onChange:F=>k({...P,end_date:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Registration deadline"}),r.jsx("input",{type:"datetime-local",value:P.registration_deadline,onChange:F=>k({...P,registration_deadline:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max teams per group"}),r.jsx("input",{type:"number",min:"5",max:"8",value:P.max_teams_per_group,onChange:F=>k({...P,max_teams_per_group:parseInt(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Initial status"}),r.jsxs("select",{value:P.status,onChange:F=>k({...P,status:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"registration_open",children:"Registration Open"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:y,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:y?"Creating...":"Create Season"})]})]})]})}),l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:w,children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create New CPU Team"}),r.jsx("button",{type:"button",onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),r.jsxs("div",{className:"px-6 py-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),r.jsx("input",{type:"text",value:v.name,onChange:F=>p(J=>({...J,name:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter team name",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:v.description,onChange:F=>p(J=>({...J,description:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter team description",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Level"}),r.jsxs("select",{value:v.skillLevel,onChange:F=>p(J=>({...J,skillLevel:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"beginner",children:"Beginner"}),r.jsx("option",{value:"intermediate",children:"Intermediate"}),r.jsx("option",{value:"advanced",children:"Advanced"}),r.jsx("option",{value:"expert",children:"Expert"}),r.jsx("option",{value:"master",children:"Master"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player Count"}),r.jsx("input",{type:"number",value:v.playerCount,onChange:F=>p(J=>({...J,playerCount:parseInt(F.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"20"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender Balance"}),r.jsxs("select",{value:v.genderBalance,onChange:F=>p(J=>({...J,genderBalance:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"mixed",children:"Mixed"}),r.jsx("option",{value:"male",children:"Male Only"}),r.jsx("option",{value:"female",children:"Female Only"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:v.isActive,onChange:F=>p(J=>({...J,isActive:F.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Active team"})]})]})]}),r.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:y,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:y,children:"Create Team"})]})]})})}),c&&u&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg w-full max-w-md mx-4",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-full mr-4",children:r.jsx(vl,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Generate CPU Players"}),r.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Team:"}),r.jsx("span",{className:"font-medium text-gray-900",children:u.teamName})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Skill Level:"}),r.jsx("span",{className:"font-medium text-gray-900 capitalize",children:u.skillLevel})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players to Generate:"}),r.jsx("span",{className:"font-medium text-gray-900",children:u.playerCount})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Gender Balance:"}),r.jsx("span",{className:"font-medium text-gray-900 capitalize",children:u.genderBalance})]})]}),r.jsxs("p",{className:"mt-4 text-sm text-gray-600",children:["Are you sure you want to generate ",r.jsxs("strong",{children:[u.playerCount," CPU players"]})," for the ",r.jsx("strong",{children:u.teamName})," team?"]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",disabled:y,children:"Cancel"}),r.jsx("button",{onClick:N,className:"flex-1 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:y,children:y?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Generating..."]}):"Generate Players"})]})]})})})]})},S1=new Ep(I),C1=new Ks(I),E1=({tournamentId:e,onMatchComplete:t})=>{const[s,n]=b.useState([]),[a,i]=b.useState(!1),[l,o]=b.useState(null),[c,d]=b.useState(null);b.useEffect(()=>{u()},[e]);const u=async()=>{try{i(!0),console.log("[MatchExecutor] Loading matches with JavaScript logic",e);const f=await C1.getTournamentWithMatches(e);console.log("tournamentWithMatches",f),n(f.rounds),console.log("[MatchExecutor] Loaded. tournamentWithMatches =>",f)}catch(f){console.error("[MatchExecutor] Error loading matches:",f),d("Failed to load matches")}finally{i(!1)}},h=async f=>{o(f),d(null);try{console.log("[MatchExecutor] Executing match with JavaScript logic:",f);const y=await S1.executeTournamentMatch(f);y.success?(await u(),t(),de.success(`Match completed! Winner: ${y.matchData.winnerName}
Score: ${y.matchData.score}`,{duration:6e3})):de.error(y.error||"Failed to execute match")}catch(y){console.error("[MatchExecutor] Error executing match:",y),d(y.message||"Failed to execute match")}finally{o(null)}},m=async f=>{i(!0),d(null);try{const y=s[f-1].matches.filter(p=>!p.completed);if(console.log("roundLevel",f),console.log("total matches",s),console.log("round matches",y),y.length===0){de.info("No incomplete matches in this round");return}console.log(`Starting execution of ${y.length} matches in round ${f}`);let g=0,v=[];for(const p of y)try{console.log(`[MatchExecutor] Executing match ${p.id}:`,{player1:p.player1_id,player2:p.player2_id}),await h(p.id),console.log(`[MatchExecutor] Match ${p.id} completed successfully`),g++,await new Promise(w=>setTimeout(w,300))}catch(w){console.error(`[MatchExecutor] Failed to execute match ${p.id}:`,w),v.push({match:p,error:w.message||"Unknown error"})}if(await u(),t(),v.length>0){console.error("Failed matches:",v);const p=v.map(w=>`Match ${w.match.id}: ${w.error}`).join(`
`);de.warning(`Round partially completed!
${g}/${y.length} matches executed successfully.

Failed matches:
${p}`,{duration:6e3}),d(`Failed to execute ${v.length} matches. Check console for details.`)}else de.success(`Round completed! ${g}/${y.length} matches executed successfully.`)}catch(y){console.error("Error executing round matches:",y),d(y.message||"Failed to execute round matches")}finally{i(!1)}};return a&&s.length===0?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mr-2"}),r.jsx("span",{children:"Loading matches..."})]}):(console.log("[matches]",s),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Match Execution"}),r.jsxs("button",{onClick:u,disabled:a,className:"flex items-center px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:[r.jsx(Lp,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]})]}),c&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(pa,{className:"w-4 h-4 text-red-600 mr-2"}),r.jsx("span",{className:"text-red-800 text-sm",children:c})]})}),s.map(f=>{const y=f.matches.filter(v=>v.completed===!1),g=f.matches.filter(v=>v.completed===!0);return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg mb-6",children:[r.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:[f.round_name," (Level ",f.round_level,")"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[g.length,"/",f.matches.length," matches completed"]})]}),y.length>0&&r.jsxs("button",{onClick:()=>m(f.round_level),disabled:a,className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm",children:[r.jsx(_d,{className:"w-4 h-4 mr-2"}),"Execute All (",y.length,")"]})]})}),r.jsx("div",{className:"p-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.matches.map(v=>{const p=l===v.match_id;return r.jsxs("div",{className:`border rounded-lg p-4 ${v.completed?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Match"}),v.winner_id?r.jsx(rs,{className:"w-4 h-4 text-green-500"}):r.jsx(xr,{className:"w-4 h-4 text-yellow-500"})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${v.winner_id===v.player1_id?"bg-green-100 border border-green-300":"bg-white"}`,children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ws,{className:`w-4 h-4 mr-2 ${v.player1_is_cpu?"text-blue-500":"text-green-500"}`}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:v.player1_name}),r.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(Lv.",v.player1_level,") ",v.player1_is_cpu?"CPU":"Player"]})]})]}),v.winner_id===v.player1_id&&r.jsx(re,{className:"w-4 h-4 text-yellow-500"})]}),r.jsx("div",{className:"text-center text-xs text-gray-500 py-1",children:"vs"}),r.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${v.winner_id===v.player2_id?"bg-green-100 border border-green-300":"bg-white"}`,children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ws,{className:`w-4 h-4 mr-2 ${v.player2_is_cpu?"text-blue-500":"text-green-500"}`}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:v.player2_name}),r.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(Lv.",v.player2_level,") ",v.player2_is_cpu?"CPU":"Player"]})]})]}),v.winner_id===v.player2_id&&r.jsx(re,{className:"w-4 h-4 text-yellow-500"})]})]}),v.score&&r.jsxs("div",{className:"text-xs text-gray-600 mb-3 p-2 bg-gray-100 rounded",children:[r.jsx("strong",{children:"Score:"})," ",v.score]}),!v.completed&&r.jsx("button",{onClick:()=>h(v.id),disabled:p||a,className:"w-full flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Executing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Execute Match"]})}),!v.completed&&(!v.player1_id||!v.player2_id)&&r.jsx("div",{className:"text-center text-xs text-gray-500 py-2 bg-gray-100 rounded",children:"Waiting for players..."})]},v.match_id)})})})]},`${f.round_level}-${f.round_name}`)}),s.length===0&&!a&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(xr,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{children:"No matches found for this tournament"})]})]}))},P1=new Ks(I),T1=({tournament:e})=>{const[t,s]=b.useState(0),[n,a]=b.useState(!1),[i,l]=b.useState(!1),[o,c]=b.useState(null),[d]=b.useState(e.start_date);b.useEffect(()=>{if(e.status!=="upcoming")return;if(o||n||i){console.log("[TournamentAutoStarter] Stopping countdown due to:",{error:o,isStarting:n,hasStarted:i});return}const y=()=>{const v=Date.now(),p=Math.max(0,new Date(d).getTime()-v);console.log("[TournamentAutoStarter] Time left:",p/1e3,"seconds"),s(p),p===0&&!n&&!i&&!o&&u()};y();const g=setInterval(y,1e3);return()=>clearInterval(g)},[o,n,i,e.status]);const u=async()=>{try{a(!0),c(null),(await P1.startTournament(e.id)).success?(console.log("[TournamentAutoStarter] Tournament auto-started successfully"),l(!0),c(null)):c("Failed to start tournament")}catch(y){console.error("[TournamentAutoStarter] Error auto-starting tournament:",y),c(y.message||"Failed to start tournament")}finally{a(!1)}},h=y=>{if(y<=0)return"Starting Tournament...";const g=Math.floor(y/1e3)%60,v=Math.floor(y/(1e3*60))%60,p=Math.floor(y/(1e3*60*60))%24,w=Math.floor(y/(1e3*60*60*24)),j=[];return w>0&&j.push(`${w}d`),p>0&&j.push(`${p}h`),v>0&&j.push(`${v}m`),g>0&&w===0&&j.push(`${g}s`),j.join(" ")||"Starting..."};if(e.status!=="upcoming")return null;const m=t>0&&t<=3e5,f=t<=0;return r.jsxs("div",{className:`rounded-lg p-4 mb-4 ${o?"bg-red-50 border border-red-200":i?"bg-green-50 border border-green-200":f?"bg-red-50 border border-red-200":m?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[o?r.jsx(pa,{className:"w-5 h-5 text-red-600 mr-2"}):i?r.jsx(rs,{className:"w-5 h-5 text-green-600 mr-2"}):n?r.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}):r.jsx(Op,{className:`w-5 h-5 mr-2 ${f?"text-red-600 animate-pulse":m?"text-yellow-600":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("h4",{className:`font-medium ${o?"text-red-800":i?"text-green-800":f?"text-red-800":m?"text-yellow-800":"text-blue-800"}`,children:o?"Auto-Start Failed!":i?"Tournament Started!":n?"Starting Tournament...":f?"Auto-Starting Tournament":"Tournament Auto-Start"}),r.jsx("p",{className:`text-sm ${o?"text-red-600":i?"text-green-600":f?"text-red-600":m?"text-yellow-600":"text-blue-600"}`,children:o?`Error: ${o}`:i?"Tournament has been automatically started and is now ongoing":n?"Please wait while the tournament is being started...":f?"Tournament start time reached - starting automatically":"Tournament will start automatically when the countdown reaches zero"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:`text-2xl font-mono font-bold ${o?"text-red-700":i?"text-green-700":f?"text-red-700":m?"text-yellow-700":"text-blue-700"}`,children:i?"STARTED":h(t)}),!i&&r.jsx("div",{className:`text-xs ${o||f?"text-red-600":m?"text-yellow-600":"text-blue-600"}`,children:f?"Starting now...":"until tournament starts"})]})]}),o&&r.jsx("div",{className:"mt-3 pt-3 border-t border-red-200",children:r.jsxs("button",{onClick:()=>c(null),className:"flex items-center px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:[r.jsx($p,{className:"w-4 h-4 mr-1"}),"Reset Error"]})}),!o&&!i&&!n&&t<=6e4&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:r.jsxs("button",{onClick:u,disabled:n,className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 text-sm",children:[r.jsx(Ft,{className:"w-4 h-4 mr-1"}),"Start Now (Manual)"]})}),t<=0&&!i&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:r.jsxs("button",{onClick:u,disabled:n,className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 text-sm",children:[r.jsx(Ft,{className:"w-4 h-4 mr-1"}),"Start Now (Manual)"]})})]})},kh=new Ks(I),R1=({tournament:e,onTournamentUpdate:t})=>{const[s,n]=b.useState(!1),[a,i]=b.useState(null),[l,o]=b.useState("matches"),[c,d]=b.useState([]),[u,h]=b.useState(""),m=async()=>{try{return(await kh.getRegisteredPlayers(e.id)||[]).map(E=>({id:E.players.id,name:E.players.name,level:E.players.level,is_cpu:E.players.is_cpu||!1}))}catch(N){return console.error("Error loading registered players:",N),[]}},f=async()=>{n(!0),i(null);try{await kh.startTournament(e.id),console.log("[TournamentManagement] Tournament started successfully",e.id),t(),de.success("Tournament started successfully!")}catch(N){console.error("[TournamentManagement] Error starting tournament:",N),i(N.message||"Failed to start tournament")}finally{n(!1)}},y=()=>e.status==="upcoming"&&new Date(e.start_date)<=new Date,g=()=>{if(!e.rounds)return{totalMatches:0,completedMatches:0,currentRound:null};let N=0,E=0,P=null;return e.rounds.forEach(k=>{N+=k.matches.length;const A=k.matches.filter(M=>M.completed).length;E+=A,!P&&A<k.matches.length&&(P=k)}),{totalMatches:N,completedMatches:E,currentRound:P}},v=async()=>{if(!e.rounds||e.rounds.length===0){h("");return}const N=e.rounds[e.rounds.length-1];if(N.matches.every(P=>P.completed)&&N.matches.length>0){const P=N.matches[N.matches.length-1];if(console.log("Admin - Final match winner:",P.winner),c.length===0){const k=await m();d(k);for(let A=0;A<k.length;A++)if(k[A].id===P.winner){h(k[A].name);return}}else for(let k=0;k<c.length;k++)if(c[k].id===P.winner){h(c[k].name);return}}h("")};b.useEffect(()=>{p()&&v()},[e.rounds,c]);const p=()=>!e.rounds||e.rounds.length===0?!1:e.rounds.every(N=>N.matches.every(E=>E.completed)),w=g(),j=p();return r.jsxs("div",{children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[r.jsx(re,{className:"w-6 h-6 text-yellow-500 mr-2"}),e.name,j&&r.jsxs("div",{className:"flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full ml-3",children:[r.jsx(Wt,{className:"w-4 h-4 mr-1"}),r.jsx("span",{className:"text-sm font-medium",children:"Completed"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${e.status==="upcoming"?"bg-blue-100 text-blue-800":e.status==="ongoing"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),r.jsxs("span",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Be,{className:"w-4 h-4 mr-1"}),e.current_participants,"/",e.max_participants," participants"]}),r.jsxs("span",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(ws,{className:"w-4 h-4 mr-1"}),new Date(e.start_date).toLocaleDateString()]}),e.status==="ongoing"&&r.jsxs("span",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(cn,{className:"w-4 h-4 mr-1"}),w.completedMatches,"/",w.totalMatches," matches completed"]})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:y()&&r.jsxs("button",{onClick:f,disabled:s,className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[r.jsx(Ft,{className:"w-4 h-4 mr-2"}),s?"Starting...":"Start Now (Manual)"]})})]})}),j&&r.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-xl p-6 mb-6",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center mb-4",children:[r.jsx(Wt,{className:"w-10 h-10 text-yellow-500 mr-3"}),r.jsx(re,{className:"w-12 h-12 text-yellow-500"}),r.jsx(Wt,{className:"w-10 h-10 text-yellow-500 ml-3"})]}),r.jsx("h3",{className:"text-xl font-bold text-yellow-800 mb-2",children:"🏆 Tournament Champion 🏆"}),r.jsx("div",{className:"bg-white bg-opacity-70 rounded-lg p-4 inline-block",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(ln,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{className:"text-xl font-bold text-gray-900",children:u||"Loading..."}),r.jsx(ln,{className:"w-5 h-5 text-yellow-500"})]})})]})}),r.jsx("div",{className:"mb-6",children:r.jsx(T1,{tournament:e})}),a&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(pa,{className:"w-5 h-5 text-red-600 mr-2"}),r.jsx("span",{className:"text-red-800",children:a})]})}),e.status==="ongoing"&&w.currentRound&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-blue-900",children:["Current Round: ",w.currentRound.name]}),r.jsxs("p",{className:"text-blue-700 text-sm",children:[w.currentRound.matches.filter(N=>N.completed).length," of ",w.currentRound.matches.length," matches completed"]})]}),r.jsxs("div",{className:"flex items-center text-blue-700",children:[r.jsx(xr,{className:"w-5 h-5 mr-2"}),r.jsx("span",{className:"text-sm",children:"In Progress"})]})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"flex space-x-8 px-6",children:[r.jsxs("button",{onClick:()=>o("matches"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="matches"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Ft,{className:"w-4 h-4 inline mr-2"}),"Manual Execution"]}),r.jsxs("button",{onClick:()=>o("info"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="info"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Wi,{className:"w-4 h-4 inline mr-2"}),"Information"]})]})}),r.jsxs("div",{className:"p-6",children:[l==="matches"&&r.jsx(E1,{tournamentId:e.id,onMatchComplete:t}),l==="info"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[r.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Tournament Details"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"ID:"}),r.jsx("span",{className:"font-mono text-xs",children:e.id})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tier:"}),r.jsx("span",{className:"capitalize",children:e.tier})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Min Level:"}),r.jsx("span",{children:e.min_player_level})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Max Participants:"}),r.jsx("span",{children:e.max_participants})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Round Interval:"}),r.jsxs("span",{children:[e.round_interval_minutes," minutes"]})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[r.jsx(Ap,{className:"w-4 h-4 mr-2"}),"Tournament Stats"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Total Matches:"}),r.jsx("span",{className:"font-medium",children:w.totalMatches})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Completed Matches:"}),r.jsx("span",{className:"font-medium text-green-600",children:w.completedMatches})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Remaining Matches:"}),r.jsx("span",{className:"font-medium text-yellow-600",children:w.totalMatches-w.completedMatches})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Progress:"}),r.jsxs("span",{className:"font-medium",children:[w.totalMatches>0?Math.round(w.completedMatches/w.totalMatches*100):0,"%"]})]})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[r.jsx(re,{className:"w-4 h-4 mr-2"}),"Prize Pool Configuration"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[r.jsx("h5",{className:"font-medium text-yellow-800 mb-2",children:"1st Place"}),r.jsxs("div",{className:"text-sm text-yellow-700",children:[e.prize_pool.first.coins&&r.jsxs("div",{children:["Coins: ",e.prize_pool.first.coins]}),e.prize_pool.first.diamonds&&r.jsxs("div",{children:["Diamonds: ",e.prize_pool.first.diamonds]}),e.prize_pool.first.shuttlecocks&&r.jsxs("div",{children:["Shuttlecocks: ",e.prize_pool.first.shuttlecocks]}),e.prize_pool.first.meals&&r.jsxs("div",{children:["Meals: ",e.prize_pool.first.meals]})]})]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"2nd Place"}),r.jsxs("div",{className:"text-sm text-gray-700",children:[e.prize_pool.second.coins&&r.jsxs("div",{children:["Coins: ",e.prize_pool.second.coins]}),e.prize_pool.second.diamonds&&r.jsxs("div",{children:["Diamonds: ",e.prize_pool.second.diamonds]}),e.prize_pool.second.shuttlecocks&&r.jsxs("div",{children:["Shuttlecocks: ",e.prize_pool.second.shuttlecocks]}),e.prize_pool.second.meals&&r.jsxs("div",{children:["Meals: ",e.prize_pool.second.meals]})]})]}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[r.jsx("h5",{className:"font-medium text-amber-800 mb-2",children:"3rd Place"}),r.jsxs("div",{className:"text-sm text-amber-700",children:[e.prize_pool.third.coins&&r.jsxs("div",{children:["Coins: ",e.prize_pool.third.coins]}),e.prize_pool.third.diamonds&&r.jsxs("div",{children:["Diamonds: ",e.prize_pool.third.diamonds]}),e.prize_pool.third.shuttlecocks&&r.jsxs("div",{children:["Shuttlecocks: ",e.prize_pool.third.shuttlecocks]}),e.prize_pool.third.meals&&r.jsxs("div",{children:["Meals: ",e.prize_pool.third.meals]})]})]})]})]})]})]})]})]})},ro=new Ks(I),Yp=()=>{const{logActivity:e}=Qs(),[t,s]=b.useState([]),[n,a]=b.useState(!0),[i,l]=b.useState(""),[o,c]=b.useState("all"),[d,u]=b.useState("all"),[h,m]=b.useState(!1),[f,y]=b.useState(null),[g,v]=b.useState(null);b.useEffect(()=>{p(),e("tournaments_viewed")},[]);const p=async()=>{try{a(!0);const T=await ro.getTournaments();console.log("[AdminTournaments] Tournament list loaded successfully:",T),s(T)}catch(T){console.error("[AdminTournaments] Error loading tournaments:",T)}finally{a(!1)}},w=async T=>{try{a(!0);const $=await ro.getTournamentWithMatches(T);return v($),console.log("[AdminTournaments] Tournament details loaded successfully:",$),$||null}catch($){return console.error("[AdminTournaments] Error loading tournament details:",$),null}finally{a(!1)}},j=()=>{y(null),m(!0)},N=async T=>{y(T),m(!0)},E=async T=>{let $=T;if(!T.rounds||T.rounds.length===0){const F=await w(T.id);F&&($=F)}v($)},P=async T=>{if(confirm("Are you sure you want to delete this tournament?"))try{await ro.deleteTournament(T),s(t.filter($=>$.id!==T)),await e("tournament_deleted","tournament",T)}catch($){console.error("Error deleting tournament:",$),de.error("Failed to delete tournament. Please try again.")}},k=t.filter(T=>{const $=T.name.toLowerCase().includes(i.toLowerCase()),F=o==="all"||T.tier===o,J=d==="all"||T.status===d;return $&&F&&J});console.log("[filteredTournaments]",k);const A=T=>{switch(T){case"local":return"bg-gray-100 text-gray-800";case"regional":return"bg-blue-100 text-blue-800";case"national":return"bg-green-100 text-green-800";case"international":return"bg-yellow-100 text-yellow-800";case"premier":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},M=T=>{switch(T){case"upcoming":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tournament Management"}),r.jsx("p",{className:"text-gray-600",children:"Create, manage, and monitor tournaments"})]}),r.jsxs("button",{onClick:j,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(bd,{className:"w-4 h-4 mr-2"}),"Create Tournament"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(re,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tournaments"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Ft,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(T=>T.status==="ongoing").length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(ws,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(T=>T.status==="upcoming").length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:r.jsx(re,{className:"w-6 h-6 text-gray-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(T=>T.status==="completed").length})]})]})})]}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Ea,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Search tournaments...",value:i,onChange:T=>l(T.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]})}),r.jsx("div",{className:"w-full sm:w-48",children:r.jsxs("select",{value:o,onChange:T=>c(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Tiers"}),r.jsx("option",{value:"local",children:"Local"}),r.jsx("option",{value:"regional",children:"Regional"}),r.jsx("option",{value:"national",children:"National"}),r.jsx("option",{value:"international",children:"International"}),r.jsx("option",{value:"premier",children:"Premier"})]})}),r.jsx("div",{className:"w-full sm:w-48",children:r.jsxs("select",{value:d,onChange:T=>u(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"upcoming",children:"Upcoming"}),r.jsx("option",{value:"ongoing",children:"Ongoing"}),r.jsx("option",{value:"completed",children:"Completed"})]})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tournament"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participants"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entry Fee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prize Pool"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(re,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-lg font-medium",children:"No tournaments found"}),r.jsx("p",{className:"mt-1",children:"Create your first tournament to get started"})]})}):k.map(T=>{var $,F,J;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.name}),r.jsx("div",{className:"flex items-center mt-1",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${A(T.tier)}`,children:T.tier.charAt(0).toUpperCase()+T.tier.slice(1)})})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M(T.status)}`,children:T.status.charAt(0).toUpperCase()+T.status.slice(1)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Be,{className:"w-4 h-4 text-gray-400 mr-1"}),T.current_participants||0,"/",T.max_participants]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsx("div",{className:"flex items-center space-x-2",children:(($=T.entry_fee)==null?void 0:$.coins)&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Pe,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:T.entry_fee.coins})]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsx("div",{className:"flex items-center space-x-2",children:((J=(F=T.prize_pool)==null?void 0:F.first)==null?void 0:J.coins)&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Pe,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:T.prize_pool.first.coins})]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{children:[r.jsx("div",{children:new Date(T.start_date).toLocaleDateString()}),r.jsxs("div",{className:"text-gray-500 text-xs",children:["to ",new Date(T.end_date).toLocaleDateString()]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>E(T),className:"text-green-600 hover:text-green-900 p-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Manage Tournament",children:r.jsx(an,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>N(T),className:"text-blue-600 hover:text-blue-900 p-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Edit Tournament",children:r.jsx(Kr,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>P(T.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Tournament",children:r.jsx(ga,{className:"w-4 h-4"})})]})})]},T.id)})})]})})}),h&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:f?"Edit Tournament":"Create New Tournament"}),r.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"px-6 py-6",children:r.jsx(Kp,{tournament:f,onSave:T=>{console.log("Tournament saved:",T),m(!1),p()},onCancel:()=>m(!1)})})]})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 h-full",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Manage Tournament: ",g.name]}),r.jsx("button",{onClick:()=>v(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"px-6 py-6",children:r.jsx(R1,{tournament:g,onTournamentUpdate:()=>{p();const T=t.find($=>$.id===g.id);T&&v(T)}})})]})})]})},M1=new jr(I),Xp=()=>{const{logActivity:e}=Qs(),[t,s]=b.useState([]),[n,a]=b.useState([]),[i,l]=b.useState(!0),[o,c]=b.useState(""),[d,u]=b.useState("all"),[h,m]=b.useState(!1),[f,y]=b.useState(null),[g,v]=b.useState(null),[p,w]=b.useState(!1),[j,N]=b.useState(null),[E,P]=b.useState("teams"),[k,A]=b.useState({name:"",description:"",skillLevel:"intermediate",playerCount:6,genderBalance:"mixed",isActive:!0}),[M,T]=b.useState({name:"",gender:"male",level:1,rank:1,maxLevel:156,is_cpu:!0,stats:{endurance:0,strength:0,agility:0,speed:0,explosiveness:0,injuryPrevention:0,smash:0,defense:0,serve:0,stick:0,slice:0,drop:0},equipment:{racket:void 0,shoes:void 0,strings:void 0,shirt:void 0,shorts:void 0},injuries:[],strategy:{physicalCommitment:0,playStyle:0,movementSpeed:0,fatigueManagement:0,rallyConsistency:0,riskTaking:0,attack:0,softAttack:0,serving:0,courtDefense:0,mentalToughness:0,selfConfidence:0},best:[]});b.useEffect(()=>{$(),F(),e("cpu_teams_viewed")},[]);const $=async()=>{try{l(!0);const{data:_,error:q}=await I.from("cpu_teams").select("*").order("created_at",{ascending:!1});if(q){console.error("Error loading CPU teams:",q);return}const{data:W,error:D}=await I.from("player_team_assignments").select(`
          team_id,
          player:players(*)
        `);if(D){console.error("Error loading player assignments:",D);return}const ce=W.reduce((ue,Ae)=>(ue[Ae.team_id]||(ue[Ae.team_id]=[]),Ae.player&&ue[Ae.team_id].push(Ae.player),ue),{}),pe=(_||[]).map(ue=>({id:ue.id,name:ue.name,description:ue.description,skillLevel:ue.skill_level,playerCount:ue.player_count,genderBalance:ue.gender_balance,players:ce[ue.id]||[],isActive:ue.is_active,createdAt:ue.created_at}));s(pe)}catch(_){console.error("Error loading CPU teams:",_)}finally{l(!1)}},F=async()=>{try{l(!0);const{data:_,error:q}=await I.from("players").select("*").eq("is_cpu",!0).order("name");if(q){console.error("Error loading CPU players:",q);return}if(!_){a([]);return}const W=await Promise.all(_.map(async D=>{const ce=["diamond","coins","shuttlecocks","meals"],pe={diamonds:0,coins:0,shuttlecocks:0,meals:0},{data:ue}=await I.from("resource_transactions").select("amount, resource_type").eq("user_id",D.user_id).in("resource_type",ce);if(ue)for(const{amount:We,resource_type:Yt}of ue)switch(Yt){case"diamond":pe.diamonds+=We;break;case"coins":pe.coins+=We;break;case"shuttlecocks":pe.shuttlecocks+=We;break;case"meals":pe.meals+=We;break}const{data:Ae,error:Qt}=await I.from("player_levels").select("*").eq("player_id",D.id).single();return Qt&&console.warn(`No level data for player ${D.id}:`,Qt.message),{...D,...pe,maxLevel:D.maxLevel||156,stats:Ae||{}}}));a(W)}catch(_){console.error("Error loading CPU players:",_)}finally{l(!1)}},J=()=>{y(null),A({name:"",description:"",skillLevel:"intermediate",playerCount:6,genderBalance:"mixed",isActive:!0}),m(!0)},Z=()=>{v(null),T({name:"",gender:"male",level:1,rank:1,maxLevel:156,is_cpu:!0,stats:{endurance:0,strength:0,agility:0,speed:0,explosiveness:0,injuryPrevention:0,smash:0,defense:0,serve:0,stick:0,slice:0,drop:0},equipment:{racket:void 0,shoes:void 0,strings:void 0,shirt:void 0,shorts:void 0},injuries:[],strategy:{physicalCommitment:0,playStyle:0,movementSpeed:0,fatigueManagement:0,rallyConsistency:0,riskTaking:0,attack:0,softAttack:0,serving:0,courtDefense:0,mentalToughness:0,selfConfidence:0},best:[]}),m(!0)},X=_=>{y(_),A({name:_.name,description:_.description,skillLevel:_.skillLevel,playerCount:_.playerCount,genderBalance:_.genderBalance,isActive:_.isActive}),m(!0)},B=_=>{v(_),T({name:_.name,gender:_.gender,level:_.level,rank:_.rank,maxLevel:_.maxLevel,is_cpu:!0,stats:_.stats,statLevels:_.statLevels,equipment:_.equipment,injuries:_.injuries,strategy:_.strategy,best:_.best}),m(!0)},me=async _=>{if(confirm("Are you sure you want to delete this CPU team? This will also remove all associated CPU players."))try{const{data:q,error:W}=await I.from("player_team_assignments").select("player_id").eq("team_id",_);if(W){console.error("Error getting team assignments:",W),de.error("Failed to delete CPU team. Please try again.");return}if(q&&q.length>0){const ce=q.map(ue=>ue.player_id),{error:pe}=await I.from("players").delete().in("id",ce);if(pe){console.error("Error deleting CPU players:",pe),de.error("Failed to delete CPU players. Please try again.");return}}const{error:D}=await I.from("cpu_teams").delete().eq("id",_);if(D){console.error("Error deleting CPU team:",D),de.error("Failed to delete CPU team. Please try again.");return}await e("cpu_team_deleted","cpu_team",_),$(),F()}catch(q){console.error("Error deleting CPU team:",q),de.error("Failed to delete CPU team. Please try again.")}},z=async _=>{if(confirm("Are you sure you want to delete this CPU player?"))try{const{error:q}=await I.from("player_team_assignments").delete().eq("player_id",_);if(q){console.error("Error deleting player assignments:",q),de.error("Failed to delete CPU player assignments. Please try again.");return}const{error:W}=await I.from("players").delete().eq("id",_);if(W){console.error("Error deleting CPU player:",W),de.error("Failed to delete CPU player. Please try again.");return}await e("cpu_player_deleted","player",_),F(),$(),de.success("CPU player deleted successfully")}catch(q){console.error("Error deleting CPU player:",q),de.error("Failed to delete CPU player. Please try again.")}},V=async _=>{_.preventDefault(),l(!0);try{if(f){const{error:q}=await I.from("cpu_teams").update({name:k.name,description:k.description,skill_level:k.skillLevel,player_count:k.playerCount,gender_balance:k.genderBalance,is_active:k.isActive,updated_at:new Date().toISOString()}).eq("id",f.id);if(q){console.error("Error updating CPU team:",q);return}await e("cpu_team_updated","cpu_team",f.id)}else{const{data:q,error:W}=await I.from("cpu_teams").insert({name:k.name,description:k.description,skill_level:k.skillLevel,player_count:k.playerCount,gender_balance:k.genderBalance,is_active:k.isActive}).select().single();if(W){console.error("Error creating CPU team:",W);return}await e("cpu_team_created","cpu_team",q.id)}m(!1),$()}catch(q){console.error("Error saving CPU team:",q)}finally{l(!1)}},Q=async _=>{_.preventDefault(),l(!0);try{if(g){const{error:q}=await I.from("players").update({name:M.name,gender:M.gender,level:M.level,rank:M.rank,max_level:M.maxLevel,stats:M.stats,stat_levels:M.statLevels,equipment:M.equipment,injuries:M.injuries,strategy:M.strategy,best:M.best,updated_at:new Date().toISOString()}).eq("id",g.id);if(q){console.error("Error updating CPU player:",q);return}await e("cpu_player_updated","player",g.id),de.success("CPU player updated successfully")}else{const{data:{user:q}}=await I.auth.getUser();if(!q)throw new Error("No authenticated user found");const{data:W,error:D}=await I.from("players").insert({name:M.name,gender:M.gender,level:M.level,rank:M.rank,max_level:M.maxLevel,stats:M.stats,stat_levels:M.statLevels,equipment:M.equipment,injuries:M.injuries,strategy:M.strategy,best:M.best,is_cpu:!0,user_id:q.id}).select().single();if(D){console.error("Error creating CPU player:",D);return}await e("cpu_player_created","player",W.id),de.success("CPU player created successfully")}m(!1),F()}catch(q){console.error("Error saving CPU player:",q),de.error("Failed to save CPU player. Please try again.")}finally{l(!1)}},R=(_,q,W,D,ce)=>{N({teamId:_,teamName:q,skillLevel:W,playerCount:D,genderBalance:ce}),w(!0)},C=async()=>{var _,q;if(j)try{l(!0),console.log("[AdminCpuTeams] Generating CPU players using PlayerService...");const{data:{user:W}}=await I.auth.getUser();if(!W)throw new Error("No authenticated user found");const D=W.id;console.log("[AdminCpuTeams] Using current admin user ID for CPU players:",D);const ce=await M1.generateCpuPlayersForTeam(D,j.teamId,j.teamName,j.skillLevel,j.playerCount,j.genderBalance);if(!ce.success)throw new Error(ce.error||"Failed to generate CPU players");console.log(`[AdminCpuTeams] Successfully generated ${(_=ce.players)==null?void 0:_.length} CPU players`),await e("cpu_players_generated","cpu_team",j.teamId,{playerCount:j.playerCount}),$(),F(),w(!1),N(null),de.success(`Successfully generated ${(q=ce.players)==null?void 0:q.length} CPU players!`)}catch(W){console.error("[AdminCpuTeams] Error generating CPU players:",W),de.error("Failed to create CPU players. Please try again.")}finally{l(!1)}},S=()=>{w(!1),N(null)},O=t.filter(_=>{const q=_.name.toLowerCase().includes(o.toLowerCase()),W=d==="all"||_.skillLevel===d;return q&&W}),ee=n.filter(_=>_.name.toLowerCase().includes(o.toLowerCase())),te=_=>{switch(_){case"beginner":return"bg-gray-100 text-gray-800";case"intermediate":return"bg-blue-100 text-blue-800";case"advanced":return"bg-green-100 text-green-800";case"expert":return"bg-yellow-100 text-yellow-800";case"master":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},Ce=_=>{switch(_){case"mixed":return"⚤";case"male":return"♂";case"female":return"♀";default:return"⚤"}};return i&&t.length===0&&n.length===0?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CPU Teams and Players Management"}),r.jsx("p",{className:"text-gray-600",children:"Create and manage CPU teams and players"})]}),r.jsxs("button",{onClick:E==="teams"?J:Z,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(bd,{className:"w-4 h-4 mr-2"}),E==="teams"?"Create CPU Team":"Create CPU Player"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(lc,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Teams"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(oc,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Teams"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(_=>_.isActive).length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(Be,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total CPU Players"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(cn,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Team Size"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length>0?Math.round(t.reduce((_,q)=>_+q.players.length,0)/t.length):0})]})]})})]}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6",children:r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsx("button",{onClick:()=>P("teams"),className:`px-4 py-2 font-medium text-sm ${E==="teams"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Teams"}),r.jsx("button",{onClick:()=>P("players"),className:`px-4 py-2 font-medium text-sm ${E==="players"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Players"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Ea,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:E==="teams"?"Search CPU teams...":"Search CPU players...",value:o,onChange:_=>c(_.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]})}),E==="teams"&&r.jsx("div",{className:"w-full sm:w-48",children:r.jsxs("select",{value:d,onChange:_=>u(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Skill Levels"}),r.jsx("option",{value:"beginner",children:"Beginner"}),r.jsx("option",{value:"intermediate",children:"Intermediate"}),r.jsx("option",{value:"advanced",children:"Advanced"}),r.jsx("option",{value:"expert",children:"Expert"}),r.jsx("option",{value:"master",children:"Master"})]})})]})}),E==="teams"&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Skill Level"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Players"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gender Balance"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(lc,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-lg font-medium",children:"No CPU teams found"}),r.jsx("p",{className:"mt-1",children:"Create your first CPU team to get started"})]})}):O.map(_=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.name}),r.jsx("div",{className:"text-sm text-gray-500",children:_.description})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${te(_.skillLevel)}`,children:_.skillLevel.charAt(0).toUpperCase()+_.skillLevel.slice(1)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Be,{className:"w-4 h-4 text-gray-400 mr-1"}),_.players.length,"/",_.playerCount,_.players.length<_.playerCount&&r.jsx("button",{onClick:()=>R(_.id,_.name,_.skillLevel,_.playerCount-_.players.length,_.genderBalance),className:"ml-2 text-xs text-blue-600 hover:text-blue-800",children:"Generate"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"mr-1",children:Ce(_.genderBalance)}),_.genderBalance.charAt(0).toUpperCase()+_.genderBalance.slice(1)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.isActive?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>X(_),className:"text-blue-600 hover:text-blue-900 p-1",title:"Edit Team",children:r.jsx(Kr,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>me(_.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Team",children:r.jsx(ga,{className:"w-4 h-4"})})]})})]},_.id))})]})})}),E==="players"&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto max-w-[81vw]",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gender"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Endurance"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Strength"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agility"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Speed"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Explosiveness"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Smash"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Defense"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Serve"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stick"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slice"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Drop"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Ws,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-lg font-medium",children:"No CPU players found"}),r.jsx("p",{className:"mt-1",children:"Create your first CPU player to get started"})]})}):ee.map(_=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.name})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[_.level,"/",_.maxLevel]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.rank}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"mr-1",children:Ce(_.gender??"male")}),(_.gender??"male").charAt(0).toUpperCase()+(_.gender??"male").slice(1)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-yellow-500 mr-1",children:"⛁"}),_.meals]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-blue-500 mr-1",children:"🔋"}),_.stats.endurance]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-blue-500 mr-1",children:"💪"}),_.stats.strength]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-green-500 mr-1",children:"🏃"}),_.stats.agility]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-purple-500 mr-1",children:"⚡"}),_.stats.speed]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-red-500 mr-1",children:"💥"}),_.stats.explosiveness]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-indigo-500 mr-1",children:"🏸"}),_.stats.smash]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-gray-500 mr-1",children:"🛡️"}),_.stats.defense]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-cyan-500 mr-1",children:"🎯"}),_.stats.serve]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-orange-500 mr-1",children:"📏"}),_.stats.stick]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-pink-500 mr-1",children:"🌀"}),_.stats.slice]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-lime-500 mr-1",children:"🫳"}),_.stats.drop]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>B(_),className:"text-blue-600 hover:text-blue-900 p-1",title:"Edit Player",children:r.jsx(Kr,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>z(_.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Player",children:r.jsx(ga,{className:"w-4 h-4"})})]})})]},_.id))})]})})}),h&&E==="teams"&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:V,children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:f?"Edit CPU Team":"Create New CPU Team"}),r.jsx("button",{type:"button",onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),r.jsxs("div",{className:"px-6 py-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),r.jsx("input",{type:"text",value:k.name,onChange:_=>A(q=>({...q,name:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter team name",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:k.description,onChange:_=>A(q=>({...q,description:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter team description",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Level"}),r.jsxs("select",{value:k.skillLevel,onChange:_=>A(q=>({...q,skillLevel:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"beginner",children:"Beginner"}),r.jsx("option",{value:"intermediate",children:"Intermediate"}),r.jsx("option",{value:"advanced",children:"Advanced"}),r.jsx("option",{value:"expert",children:"Expert"}),r.jsx("option",{value:"master",children:"Master"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player Count"}),r.jsx("input",{type:"number",value:k.playerCount,onChange:_=>A(q=>({...q,playerCount:parseInt(_.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"20"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender Balance"}),r.jsxs("select",{value:k.genderBalance,onChange:_=>A(q=>({...q,genderBalance:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"mixed",children:"Mixed"}),r.jsx("option",{value:"male",children:"Male Only"}),r.jsx("option",{value:"female",children:"Female Only"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:k.isActive,onChange:_=>A(q=>({...q,isActive:_.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Active team"})]})]})]}),r.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:i,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:i,children:i?"Saving...":f?"Update Team":"Create Team"})]})]})})}),h&&E==="players"&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:Q,children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:g?"Edit CPU Player":"Create New CPU Player"}),r.jsx("button",{type:"button",onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),r.jsxs("div",{className:"px-6 py-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player Name"}),r.jsx("input",{type:"text",value:M.name||"",onChange:_=>T(q=>({...q,name:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter player name",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),r.jsxs("select",{value:M.gender||"male",onChange:_=>T(q=>({...q,gender:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level"}),r.jsx("input",{type:"number",value:M.level||1,onChange:_=>T(q=>({...q,level:parseInt(_.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:M.maxLevel||156})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rank"}),r.jsx("input",{type:"number",value:M.rank||1,onChange:_=>T(q=>({...q,rank:parseInt(_.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Level"}),r.jsx("input",{type:"number",value:M.maxLevel||156,onChange:_=>T(q=>({...q,maxLevel:parseInt(_.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),r.jsxs("div",{className:"mb-6 border-t border-gray-200 pt-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Resources"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["diamonds","shuttlecocks","coins","meals"].map(_=>r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 capitalize",children:_}),r.jsx("input",{type:"number",value:M[_]||0,onChange:q=>T(W=>({...W,[_]:parseInt(q.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]},_))})]}),r.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Stats"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["endurance","strength","agility","speed","explosiveness","smash","defense","serve","stick","slice","drop"].map(_=>{var q;return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 capitalize",children:_}),r.jsx("input",{type:"number",value:((q=M.stats)==null?void 0:q[_])??0,onChange:W=>T(D=>({...D,stats:{...D.stats,[_]:parseInt(W.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]},_)})})]})]}),r.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:i,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:i,children:i?"Saving...":g?"Update Player":"Create Player"})]})]})})}),p&&j&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg w-full max-w-md mx-4",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-full mr-4",children:r.jsx(vl,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Generate CPU Players"}),r.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Team:"}),r.jsx("span",{className:"font-medium text-gray-900",children:j.teamName})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Skill Level:"}),r.jsx("span",{className:"font-medium text-gray-900 capitalize",children:j.skillLevel})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players to Generate:"}),r.jsx("span",{className:"font-medium text-gray-900",children:j.playerCount})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Gender Balance:"}),r.jsx("span",{className:"font-medium text-gray-900 capitalize",children:j.genderBalance})]})]}),r.jsxs("p",{className:"mt-4 text-sm text-gray-600",children:["Are you sure you want to generate ",r.jsxs("strong",{children:[j.playerCount," CPU players"]})," for the ",r.jsx("strong",{children:j.teamName})," team?"]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",disabled:i,children:"Cancel"}),r.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:i,children:i?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Generating..."]}):"Generate Players"})]})]})})})]})},Zp=()=>{const{logActivity:e}=Qs();b.useState(()=>new Pp(I));const[t,s]=b.useState(null),[n,a]=b.useState([]),[i,l]=b.useState({name:"",teams:[]}),[o,c]=b.useState([]),[d,u]=b.useState([]),[h,m]=b.useState([]),[f,y]=b.useState([]),[g,v]=b.useState(!0),[p,w]=b.useState("seasons"),[j,N]=b.useState(""),[E,P]=b.useState("all"),[k,A]=b.useState(!1),[M,T]=b.useState(null),[$,F]=b.useState(null),[J,Z]=b.useState(!1),[X,B]=b.useState({name:"",seasonId:"",availableTeams:[],selectedTeams:[]}),[me,z]=b.useState([]),[V,Q]=b.useState(null),[R,C]=b.useState({diamonds:0,meals:0,shuttlecocks:0,coins:0}),[S,O]=b.useState({name:"",tier:"departmental",start_date:"",end_date:"",registration_deadline:"",max_teams_per_group:8,status:"draft",entry_fee:{coins:0,shuttlecocks:0,meals:0,diamonds:0},prize_pool:{first:{coins:0,shuttlecocks:0,meals:0,diamonds:0},second:{coins:0,shuttlecocks:0,meals:0,diamonds:0},third:{coins:0,shuttlecocks:0,meals:0,diamonds:0}}}),ee=async()=>{try{v(!0);const{data:x}=await I.from("players").select("id, name");if(!x)return;const L=await Promise.all(x.map(async G=>{const{data:se}=await I.from("resource_transactions").select("resource_type, amount").eq("player_id",G.id),ae={diamonds:0,meals:0,shuttlecocks:0,coins:0};return se==null||se.forEach(ve=>{ve.resource_type==="diamonds"&&(ae.diamonds=ve.amount),ve.resource_type==="meals"&&(ae.meals=ve.amount),ve.resource_type==="shuttlecocks"&&(ae.shuttlecocks=ve.amount),ve.resource_type==="coins"&&(ae.coins=ve.amount)}),{manager_id:G.id,manager_name:G.name,resources:ae}}));z(L)}catch(x){console.error("Error loading clubs:",x)}finally{v(!1)}};b.useEffect(()=>{D(),ce(),pe(),ue(),ee(),e("admin_interclub_enhanced_viewed")},[]),b.useEffect(()=>{t&&(l({name:t.name,teams:[...t.teams]}),te(t.id))},[t]),b.useEffect(()=>{D(),ce(),pe(),ue(),e("admin_interclub_enhanced_viewed")},[]);const te=async x=>{const{data:L}=await I.from("cpu_teams").select("id, name, group_id").or(`group_id.eq.${x},group_id.is.null`),{data:G}=await I.from("interclub_teams").select("id, team_name, group_id").or(`group_id.eq.${x},group_id.is.null`);a([...(L==null?void 0:L.map(se=>({id:se.id,type:"cpu",team_name:se.name})))||[],...(G==null?void 0:G.map(se=>({id:se.id,type:"player",team_name:se.team_name})))||[]])},Ce=async()=>{if(V)try{v(!0);const x=Object.entries(R).map(async([L,G])=>{const{data:se}=await I.from("resource_transactions").select("id").eq("player_id",V.manager_id).eq("resource_type",L).single();return se?I.from("resource_transactions").update({amount:G}).eq("id",se.id):I.from("resource_transactions").insert({player_id:V.manager_id,resource_type:L,amount:G})});await Promise.all(x),e("club_resources_updated","player",V.manager_id),Q(null),await ee()}catch(x){console.error("Error updating club resources:",x)}finally{v(!1)}},_=async x=>{try{v(!0);const{data:L}=await I.from("cpu_teams").select("id, name").is("group_id",null),{data:G}=await I.from("interclub_teams").select("id, name").is("group_id",null);B(se=>({...se,availableTeams:[...L?L.map(ae=>({id:ae.id,name:ae.name,type:"cpu"})):[],...G?G.map(ae=>({id:ae.id,name:ae.name,type:"player"})):[]]}))}catch(L){console.error("Error loading teams:",L)}finally{v(!1)}},q=x=>{l(L=>{const G=L.teams.some(se=>se.id===x.id&&se.type===x.type);return{...L,teams:G?L.teams.filter(se=>!(se.id===x.id&&se.type===x.type)):[...L.teams,x]}})},W=async()=>{try{await I.from("interclub_groups").update({name:i.name}).eq("id",t==null?void 0:t.id);const x=i.teams.map(L=>(console.log(L),I.from(L.type==="cpu"?"cpu_teams":"interclub_registrations").update({group_id:t==null?void 0:t.id}).eq("id",L.id)));await Promise.all(x),await D(),s(null)}catch(x){console.error("Error saving group:",x)}},D=async()=>{try{v(!0);const{data:x,error:L}=await I.from("interclub_seasons").select(`
        *,
        groups:interclub_groups!season_id(
          *,
          cpu_teams:cpu_teams!group_id(
            id,
            name
          ),
          player_teams:interclub_teams!group_id(
            id,
            name
          )
        )
      `).order("created_at",{ascending:!1});if(console.log(x),L)throw L;if(!x)return c([]);const G=x.map(se=>{var ae;return{...se,groups:((ae=se.groups)==null?void 0:ae.map(ve=>{var Ye,Xs;return{id:ve.id,name:ve.name,created_at:ve.created_at,teams:[...((Ye=ve.cpu_teams)==null?void 0:Ye.map(jt=>({id:jt.id,type:"cpu",team_name:jt.name||`CPU Team ${jt.id}`})))||[],...((Xs=ve.player_teams)==null?void 0:Xs.map(jt=>({id:jt.id,type:"player",team_name:jt.name||`Team ${jt.id}`})))||[]]}}))||[],week_schedule:JSON.parse(se.week_schedule||"[]")}});c(G)}catch(x){console.error("Error loading seasons:",x)}finally{v(!1)}},ce=async()=>{try{const{data:x,error:L}=await I.from("interclub_registrations").select(`
          *,
          season:season_id(name, tier, status)
        `).order("created_at",{ascending:!1});if(L){console.error("Error loading registrations:",L);return}const G=(x||[]).map(se=>({...se,players:JSON.parse(se.players||"[]")}));u(G)}catch(x){console.error("Error loading registrations:",x)}},pe=async()=>{},ue=async()=>{try{const{data:x,error:L}=await I.from("interclub_matches").select("*").order("match_date",{ascending:!0});if(L){console.error("Error loading matches:",L);return}y(x||[])}catch(x){console.error("Error loading matches:",x)}},Ae=()=>{O({name:"",tier:"departmental",start_date:"",end_date:"",registration_deadline:"",max_teams_per_group:8,status:"draft",entry_fee:{coins:0,shuttlecocks:0,meals:0,diamonds:0},prize_pool:{first:{coins:0,shuttlecocks:0,meals:0,diamonds:0},second:{coins:0,shuttlecocks:0,meals:0,diamonds:0},third:{coins:0,shuttlecocks:0,meals:0,diamonds:0}}}),A(!0)},Qt=async x=>{x.preventDefault();try{v(!0);const L={name:S.name,tier:S.tier,start_date:new Date(S.start_date).toISOString(),end_date:new Date(S.end_date).toISOString(),registration_deadline:new Date(S.registration_deadline).toISOString(),max_teams_per_group:S.max_teams_per_group,status:S.status,groups:JSON.stringify([]),week_schedule:JSON.stringify([]),entry_fee:S.entry_fee,prize_pool:S.prize_pool},{error:G}=await I.from("interclub_seasons").insert(L);if(G)throw G;e("interclub_season_created_enhanced"),A(!1),await D()}catch(L){console.error("Error creating season:",L)}finally{v(!1)}},We=async(x,L)=>{try{v(!0);const{error:G}=await I.from("interclub_registrations").update({status:L,reviewed_at:new Date().toISOString()}).eq("id",x);if(G)throw G;e(`interclub_registration_${L}`,"registration",x),await ce()}catch(G){console.error(`Error ${L} registration:`,G)}finally{v(!1)}},Yt=async x=>{try{v(!0);const{data:L,count:G,error:se}=await I.from("interclub_registrations").select("*",{count:"exact"}).eq("season_id",x).eq("status","approved");if(se||!G||G<4){alert("Minimum 4 approved teams required to generate schedule");return}const{error:ae}=await I.from("interclub_seasons").update({status:"active",updated_at:new Date().toISOString()}).eq("id",x);if(ae){console.error("Failed to update season status:",ae);return}e("interclub_schedule_generated","season",x),await D()}catch(L){console.error("Error generating schedule:",L)}finally{v(!1)}},ne=(x,L,G,se)=>{O(ae=>({...ae,[x]:L?{...ae[x],[L]:{...ae[x][L],[G]:se}}:{...ae[x],[G]:se}}))},Nr=async x=>{if(confirm("Are you sure you want to delete this season? This action is irreversible."))try{v(!0);const{error:L}=await I.from("interclub_seasons").delete().eq("id",x);if(L){console.error("Error deleting season:",L);return}e("interclub_season_deleted","season",x),await D()}catch(L){console.error("Error deleting season:",L)}finally{v(!1)}},Ys=async(x,L)=>{try{v(!0);const{error:G}=await I.from("interclub_seasons").update({status:L,updated_at:new Date().toISOString()}).eq("id",x);if(G){console.error("Error updating season status:",G);return}e("interclub_season_status_updated","season",x,{newStatus:L}),await D()}catch(G){console.error("Error updating season status:",G)}finally{v(!1)}},Te=x=>({departmental:"Departmental",regional:"Regional",national:"National",top12:"TOP 12"})[x]||x,nt=x=>x==="departmental"?r.jsx(re,{className:"w-4 h-4 text-yellow-600"}):x==="regional"?r.jsx(re,{className:"w-4 h-4 text-gray-500"}):x==="national"?r.jsx(re,{className:"w-4 h-4 text-yellow-500"}):x==="top12"?r.jsx(Wt,{className:"w-4 h-4 text-purple-500"}):r.jsx(re,{className:"w-4 h-4"}),Rt=x=>({draft:"bg-gray-100 text-gray-800",registration_open:"bg-green-100 text-green-800",registration_closed:"bg-yellow-100 text-yellow-800",active:"bg-blue-100 text-blue-800",completed:"bg-purple-100 text-purple-800",pending:"bg-orange-100 text-orange-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[x]||"bg-gray-100 text-gray-800",at=x=>new Date(x).toLocaleDateString("en-US");return g&&o.length===0?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(re,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Interclub Administration"})]}),r.jsxs("button",{onClick:Ae,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[r.jsx(bd,{className:"w-4 h-4"}),r.jsx("span",{children:"New Season"})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"seasons",label:"Seasons",icon:ws},{id:"registrations",label:"Registrations",icon:Be},{id:"groups",label:"Groups",icon:cn},{id:"matches",label:"Matches",icon:Ft},{id:"stats",label:"Statistics",icon:hj},{id:"clubs",label:"Clubs",icon:Be}].map(({id:x,label:L,icon:G})=>r.jsxs("button",{onClick:()=>w(x),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${p===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(G,{className:"w-4 h-4"}),r.jsx("span",{children:L})]},x))})})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ea,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search...",value:j,onChange:x=>N(x.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(xj,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsxs("select",{value:E,onChange:x=>P(x.target.value),className:"pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All statuses"}),p==="seasons"?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"registration_open",children:"Registration Open"}),r.jsx("option",{value:"registration_closed",children:"Registration Closed"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"completed",children:"Completed"})]}):r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})]}),r.jsxs("button",{onClick:()=>{D(),ce(),pe(),ue()},disabled:g,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center space-x-2",children:[r.jsx($p,{className:"w-4 h-4"}),r.jsx("span",{children:"Refresh"})]})]})}),p==="seasons"&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Season"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tier"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teams"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.filter(x=>{const L=x.name.toLowerCase().includes(j.toLowerCase()),G=E==="all"||x.status===E;return L&&G}).map(x=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"font-medium text-gray-900",children:x.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[nt(x.tier),r.jsx("span",{className:"text-sm",children:Te(x.tier)})]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[r.jsxs("div",{children:[at(x.start_date)," - ",at(x.end_date)]}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Deadline: ",at(x.registration_deadline)]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Rt(x.status)}`,children:x.status})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[d.filter(L=>L.season_id===x.id&&L.status==="approved").length," / ",x.max_teams_per_group*4]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>{T(x),O({name:x.name,tier:x.tier,start_date:x.start_date,end_date:x.end_date,registration_deadline:x.registration_deadline,max_teams_per_group:x.max_teams_per_group,status:x.status,entry_fee:x.entry_fee||{coins:0,shuttlecocks:0,meals:0,diamonds:0},prize_pool:x.prize_pool||{first:{coins:0,shuttlecocks:0,meals:0,diamonds:0},second:{coins:0,shuttlecocks:0,meals:0,diamonds:0},third:{coins:0,shuttlecocks:0,meals:0,diamonds:0}}})},className:"text-blue-600 hover:text-blue-900",title:"Edit",children:r.jsx(Kr,{className:"w-4 h-4"})}),x.status==="registration_closed"&&r.jsx("button",{onClick:()=>Yt(x.id),className:"text-green-600 hover:text-green-900",title:"Generate schedule",children:r.jsx(Ft,{className:"w-4 h-4"})}),x.status==="draft"&&r.jsx("button",{onClick:()=>Ys(x.id,"registration_open"),className:"text-purple-600 hover:text-purple-900",title:"Open registrations",children:r.jsx(Vi,{className:"w-4 h-4"})}),x.status==="registration_open"&&r.jsx("button",{onClick:()=>Ys(x.id,"registration_closed"),className:"text-orange-600 hover:text-orange-900",title:"Close registrations",children:r.jsx(_j,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>F(x),className:"text-gray-600 hover:text-gray-900",title:"View details",children:r.jsx(xi,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Nr(x.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:r.jsx(ga,{className:"w-4 h-4"})})]})})]},x.id))})]})})}),p==="registrations"&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Season"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Players"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.filter(x=>{var se,ae;const L=x.team_name.toLowerCase().includes(j.toLowerCase())||((ae=(se=x.season)==null?void 0:se.name)==null?void 0:ae.toLowerCase().includes(j.toLowerCase())),G=E==="all"||x.status===E;return L&&G}).map(x=>{var L;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"font-medium text-gray-900",children:x.team_name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((L=x.season)==null?void 0:L.name)||"N/A"}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[x.players.length," players"]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Rt(x.status)}`,children:x.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:at(x.created_at)}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[x.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>We(x.id,"approved"),className:"text-green-600 hover:text-green-900",children:r.jsx(rs,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>We(x.id,"rejected"),className:"text-red-600 hover:text-red-900",children:r.jsx(Pr,{className:"w-4 h-4"})})]}),r.jsx("button",{onClick:()=>alert(`Team: ${x.team_name}
Players: ${x.players.map(G=>G.name).join(", ")}
Status: ${x.status}
Registered: ${at(x.created_at)}`),className:"text-gray-600 hover:text-gray-900",title:"View Details",children:r.jsx(xi,{className:"w-4 h-4"})})]})]},x.id)})})]})})}),k&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-5",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-[50vw] max-h-[90vh] overflow-y-auto",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"New Interclub Season"}),r.jsxs("form",{onSubmit:Qt,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Season name"}),r.jsx("input",{type:"text",value:S.name,onChange:x=>O({...S,name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tier"}),r.jsxs("select",{value:S.tier,onChange:x=>O({...S,tier:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"departmental",children:"Departmental"}),r.jsx("option",{value:"regional",children:"Regional"}),r.jsx("option",{value:"national",children:"National"}),r.jsx("option",{value:"top12",children:"TOP 12"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start date"}),r.jsx("input",{type:"datetime-local",value:S.start_date,onChange:x=>O({...S,start_date:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"End date"}),r.jsx("input",{type:"datetime-local",value:S.end_date,onChange:x=>O({...S,end_date:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Registration deadline"}),r.jsx("input",{type:"datetime-local",value:S.registration_deadline,onChange:x=>O({...S,registration_deadline:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max teams per group"}),r.jsx("input",{type:"number",min:"5",max:"8",value:S.max_teams_per_group,onChange:x=>O({...S,max_teams_per_group:parseInt(x.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Initial status"}),r.jsxs("select",{value:S.status,onChange:x=>O({...S,status:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"registration_open",children:"Registration Open"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Pe,{className:"w-5 h-5 mr-2"}),"Entry Fee"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Pe,{className:"w-4 h-4 inline mr-1 text-yellow-500"}),"Coins"]}),r.jsx("input",{type:"number",value:S.entry_fee.coins,onChange:x=>ne("entry_fee",null,"coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Bt,{className:"w-4 h-4 inline mr-1 text-blue-500"}),"Shuttlecocks"]}),r.jsx("input",{type:"number",value:S.entry_fee.shuttlecocks,onChange:x=>ne("entry_fee",null,"shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(ms,{className:"w-4 h-4 inline mr-1 text-green-500"}),"Meals"]}),r.jsx("input",{type:"number",value:S.entry_fee.meals,onChange:x=>ne("entry_fee",null,"meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ze,{className:"w-4 h-4 inline mr-1 text-purple-500"}),"Diamonds"]}),r.jsx("input",{type:"number",value:S.entry_fee.diamonds,onChange:x=>ne("entry_fee",null,"diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(re,{className:"w-5 h-5 mr-2"}),"Prize Pool"]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"🥇 First Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.coins,onChange:x=>ne("prize_pool","first","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.shuttlecocks,onChange:x=>ne("prize_pool","first","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.meals,onChange:x=>ne("prize_pool","first","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.diamonds,onChange:x=>ne("prize_pool","first","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"🥈 Second Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.coins,onChange:x=>ne("prize_pool","second","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.shuttlecocks,onChange:x=>ne("prize_pool","second","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.meals,onChange:x=>ne("prize_pool","second","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.diamonds,onChange:x=>ne("prize_pool","second","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"🥉 Third Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.coins,onChange:x=>ne("prize_pool","third","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.shuttlecocks,onChange:x=>ne("prize_pool","third","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.meals,onChange:x=>ne("prize_pool","third","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.diamonds,onChange:x=>ne("prize_pool","third","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:g,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g?"Creating...":"Create Season"})]})]})]})}),p==="groups"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Group Management"}),r.jsxs("button",{onClick:()=>Z(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[r.jsx(Vi,{className:"w-4 h-4"}),r.jsx("span",{children:"Create Groups"})]})]}),o.map(x=>r.jsxs("div",{className:"border rounded-lg p-4 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[nt(x.tier),r.jsx("h4",{className:"font-medium",children:x.name}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Rt(x.status)}`,children:x.status})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[d.filter(L=>L.season_id===x.id&&L.status==="approved").length," approved teams"]})]}),x.groups&&x.groups.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.groups.map((L,G)=>{var se;return r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 relative",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("h5",{className:"font-medium",children:["Groupe ",G+1]}),r.jsx("button",{onClick:()=>s(L),className:"text-blue-600 hover:text-blue-800 p-1",title:"Manage group",children:r.jsx(Kr,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"space-y-1",children:(se=L.teams)==null?void 0:se.map((ae,ve)=>r.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[r.jsx(Be,{className:"w-3 h-3 mr-1"}),ae.team_name||`Team ${ve+1}`]},`${ae.id}-${ve}`))})]},G)})}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(cn,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No groups created for this season"}),x.status==="registration_closed"&&r.jsx("button",{onClick:()=>Yt(x.id),className:"mt-3 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Generate Groups"})]})]},x.id))]})}),p==="matches"&&r.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Match Management"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track interclub encounters"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Season"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Group"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Encounter"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Ft,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No matches scheduled"}),r.jsx("p",{className:"text-sm",children:"Matches will appear after group generation"})]})}):f.map(x=>{var L;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:((L=o.find(G=>G.id===x.season_id))==null?void 0:L.name)||"N/A"}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["Groupe ",x.group_id]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["J",x.matchday_number]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:at(x.match_date)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Rt(x.status)}`,children:x.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.home_score!==void 0&&x.away_score!==void 0?`${x.home_score}-${x.away_score}`:"-"}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[r.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:r.jsx(xi,{className:"w-4 h-4"})}),x.status==="scheduled"&&r.jsx("button",{className:"text-green-600 hover:text-green-900",children:r.jsx(Ft,{className:"w-4 h-4"})})]})]},x.id)})})]})})]}),p==="stats"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active seasons"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.filter(x=>x.status==="active").length})]}),r.jsx("div",{className:"bg-blue-50 rounded-full p-3",children:r.jsx(ws,{className:"w-6 h-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending registrations"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(x=>x.status==="pending").length})]}),r.jsx("div",{className:"bg-yellow-50 rounded-full p-3",children:r.jsx(xr,{className:"w-6 h-6 text-yellow-600"})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Registered teams"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(x=>x.status==="approved").length})]}),r.jsx("div",{className:"bg-green-50 rounded-full p-3",children:r.jsx(Be,{className:"w-6 h-6 text-green-600"})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Matches played"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(x=>x.status==="completed").length})]}),r.jsx("div",{className:"bg-purple-50 rounded-full p-3",children:r.jsx(re,{className:"w-6 h-6 text-purple-600"})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Distribution by tier"}),r.jsx("div",{className:"space-y-3",children:Object.entries(o.reduce((x,L)=>(x[L.tier]=(x[L.tier]||0)+1,x),{})).map(([x,L])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[nt(x),r.jsx("span",{className:"text-sm font-medium",children:Te(x)})]}),r.jsxs("span",{className:"text-sm text-gray-600",children:[L," seasons"]})]},x))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent activity"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-green-100 rounded-full p-2",children:r.jsx(rs,{className:"w-4 h-4 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Approved registrations"}),r.jsxs("p",{className:"text-xs text-gray-500",children:[d.filter(x=>x.status==="approved").length," teams"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:r.jsx(Ft,{className:"w-4 h-4 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Matches in progress"}),r.jsxs("p",{className:"text-xs text-gray-500",children:[f.filter(x=>x.status==="in_progress").length," encounters"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-purple-100 rounded-full p-2",children:r.jsx(re,{className:"w-4 h-4 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Completed matches"}),r.jsxs("p",{className:"text-xs text-gray-500",children:[f.filter(x=>x.status==="completed").length," encounters"]})]})]})]})]})]})]}),p==="clubs"&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Manager"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Manager ID"}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.jsx(Ze,{className:"w-4 h-4 inline mr-1 text-purple-500"}),"Diamonds"]}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.jsx(ms,{className:"w-4 h-4 inline mr-1 text-green-500"}),"Meals"]}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.jsx(Bt,{className:"w-4 h-4 inline mr-1 text-blue-500"}),"Shuttlecocks"]}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.jsx(Pe,{className:"w-4 h-4 inline mr-1 text-yellow-500"}),"Coins"]}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:me.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Ws,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No clubs found"})]})}):me.map(x=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"font-medium text-gray-900",children:x.manager_name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.manager_id}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.resources.diamonds}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.resources.meals}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.resources.shuttlecocks}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.resources.coins}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsx("button",{onClick:()=>{Q(x),C(x.resources)},className:"text-blue-600 hover:text-blue-900",children:r.jsx(Kr,{className:"w-4 h-4"})})})]},x.manager_id))})]})})}),V&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Edit Club Resources"}),r.jsx("button",{onClick:()=>Q(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Pr,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:V.manager_name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Manager ID: ",V.manager_id]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center",children:[r.jsx(Ze,{className:"w-4 h-4 mr-2 text-purple-500"}),"Diamonds"]}),r.jsx("input",{type:"number",value:R.diamonds,onChange:x=>C({...R,diamonds:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center",children:[r.jsx(ms,{className:"w-4 h-4 mr-2 text-green-500"}),"Meals"]}),r.jsx("input",{type:"number",value:R.meals,onChange:x=>C({...R,meals:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center",children:[r.jsx(Bt,{className:"w-4 h-4 mr-2 text-blue-500"}),"Shuttlecocks"]}),r.jsx("input",{type:"number",value:R.shuttlecocks,onChange:x=>C({...R,shuttlecocks:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center",children:[r.jsx(Pe,{className:"w-4 h-4 mr-2 text-yellow-500"}),"Coins"]}),r.jsx("input",{type:"number",value:R.coins,onChange:x=>C({...R,coins:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancel"}),r.jsx("button",{onClick:Ce,disabled:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g?"Saving...":"Save Changes"})]})]})}),M&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-[50vw] max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Edit Season"}),r.jsx("button",{onClick:()=>T(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Pr,{className:"w-6 h-6"})})]}),r.jsxs("form",{onSubmit:async x=>{x.preventDefault();try{v(!0);const{error:L}=await I.from("interclub_seasons").update({name:S.name,tier:S.tier,start_date:S.start_date,end_date:S.end_date,registration_deadline:S.registration_deadline,status:S.status,max_teams_per_group:S.max_teams_per_group,entry_fee:S.entry_fee,prize_pool:S.prize_pool,updated_at:new Date().toISOString()}).eq("id",M.id);if(L)throw L;e("interclub_season_updated","season",M.id),await D(),T(null),O({name:"",tier:"departmental",start_date:"",end_date:"",registration_deadline:"",max_teams_per_group:8,status:"draft",entry_fee:{coins:0,shuttlecocks:0,meals:0,diamonds:0},prize_pool:{first:{coins:0,shuttlecocks:0,meals:0,diamonds:0},second:{coins:0,shuttlecocks:0,meals:0,diamonds:0},third:{coins:0,shuttlecocks:0,meals:0,diamonds:0}}})}catch(L){console.error("Error updating season:",L)}finally{v(!1)}},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Season name"}),r.jsx("input",{type:"text",value:S.name,onChange:x=>O({...S,name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tier"}),r.jsxs("select",{value:S.tier,onChange:x=>O({...S,tier:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"departmental",children:"Departmental"}),r.jsx("option",{value:"regional",children:"Regional"}),r.jsx("option",{value:"national",children:"National"}),r.jsx("option",{value:"top12",children:"TOP 12"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start date"}),r.jsx("input",{type:"datetime-local",value:new Date(S.start_date).toISOString().slice(0,16),onChange:x=>O({...S,start_date:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"End date"}),r.jsx("input",{type:"datetime-local",value:new Date(S.end_date).toISOString().slice(0,16),onChange:x=>O({...S,end_date:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Registration deadline"}),r.jsx("input",{type:"datetime-local",value:new Date(S.registration_deadline).toISOString().slice(0,16),onChange:x=>O({...S,registration_deadline:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max teams per group"}),r.jsx("input",{type:"number",min:"4",max:"12",value:S.max_teams_per_group,onChange:x=>O({...S,max_teams_per_group:parseInt(x.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),r.jsxs("select",{value:S.status,onChange:x=>O({...S,status:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"registration_open",children:"Registration Open"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Pe,{className:"w-5 h-5 mr-2"}),"Entry Fee"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Pe,{className:"w-4 h-4 inline mr-1 text-yellow-500"}),"Coins"]}),r.jsx("input",{type:"number",value:S.entry_fee.coins,onChange:x=>ne("entry_fee",null,"coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Bt,{className:"w-4 h-4 inline mr-1 text-blue-500"}),"Shuttlecocks"]}),r.jsx("input",{type:"number",value:S.entry_fee.shuttlecocks,onChange:x=>ne("entry_fee",null,"shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(ms,{className:"w-4 h-4 inline mr-1 text-green-500"}),"Meals"]}),r.jsx("input",{type:"number",value:S.entry_fee.meals,onChange:x=>ne("entry_fee",null,"meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ze,{className:"w-4 h-4 inline mr-1 text-purple-500"}),"Diamonds"]}),r.jsx("input",{type:"number",value:S.entry_fee.diamonds,onChange:x=>ne("entry_fee",null,"diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(re,{className:"w-5 h-5 mr-2"}),"Prize Pool"]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"🥇 First Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.coins,onChange:x=>ne("prize_pool","first","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.shuttlecocks,onChange:x=>ne("prize_pool","first","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.meals,onChange:x=>ne("prize_pool","first","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.diamonds,onChange:x=>ne("prize_pool","first","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"🥈 Second Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.coins,onChange:x=>ne("prize_pool","second","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.shuttlecocks,onChange:x=>ne("prize_pool","second","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.meals,onChange:x=>ne("prize_pool","second","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.diamonds,onChange:x=>ne("prize_pool","second","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"🥉 Third Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.coins,onChange:x=>ne("prize_pool","third","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.shuttlecocks,onChange:x=>ne("prize_pool","third","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.meals,onChange:x=>ne("prize_pool","third","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.diamonds,onChange:x=>ne("prize_pool","third","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"submit",disabled:g,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g?"Updating...":"Update Season"}),r.jsx("button",{type:"button",onClick:()=>T(null),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),$&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[nt($.tier),r.jsx("h2",{className:"text-2xl font-bold",children:$.name}),r.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${Rt($.status)}`,children:$.status})]}),r.jsx("button",{onClick:()=>F(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Pr,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Season Information"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tier:"}),r.jsx("span",{className:"font-medium",children:Te($.tier)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Start Date:"}),r.jsx("span",{children:at($.start_date)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"End Date:"}),r.jsx("span",{children:at($.end_date)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Registration Deadline:"}),r.jsx("span",{children:at($.registration_deadline)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Max Teams per Group:"}),r.jsx("span",{children:$.max_teams_per_group})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Tier Requirements"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Coins:"}),r.jsx("span",{children:ur[$.tier].coins})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Shuttlecocks:"}),r.jsx("span",{children:ur[$.tier].shuttlecocks})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Meals:"}),r.jsx("span",{children:ur[$.tier].meals})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Registration Statistics"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Total Registrations:"}),r.jsx("span",{children:d.filter(x=>x.season_id===$.id).length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Approved:"}),r.jsx("span",{className:"text-green-600 font-medium",children:d.filter(x=>x.season_id===$.id&&x.status==="approved").length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Pending:"}),r.jsx("span",{className:"text-yellow-600 font-medium",children:d.filter(x=>x.season_id===$.id&&x.status==="pending").length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Rejected:"}),r.jsx("span",{className:"text-red-600 font-medium",children:d.filter(x=>x.season_id===$.id&&x.status==="rejected").length})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Groups"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Groups Created:"}),r.jsx("span",{children:h.filter(x=>x.season_id===$.id).length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Matches Scheduled:"}),r.jsx("span",{children:f.filter(x=>x.season_id===$.id).length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Matches Completed:"}),r.jsx("span",{children:f.filter(x=>x.season_id===$.id&&x.status==="completed").length})]})]})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Registered Teams"}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:d.filter(x=>x.season_id===$.id).length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No teams registered yet"}):r.jsx("div",{className:"space-y-2",children:d.filter(x=>x.season_id===$.id).map(x=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:x.team_name}),r.jsxs("div",{className:"text-sm text-gray-600",children:[x.players.length," players"]})]}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Rt(x.status)}`,children:x.status})]},x.id))})})]}),r.jsx("div",{className:"flex justify-end mt-6",children:r.jsx("button",{onClick:()=>F(null),className:"bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Close"})})]})}),J&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Create New Group"}),r.jsx("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Pr,{className:"w-6 h-6"})})]}),r.jsxs("form",{onSubmit:async x=>{x.preventDefault();try{v(!0);const{data:L,error:G}=await I.from("interclub_groups").insert({name:X.name,season_id:X.seasonId}).select().single();if(G)throw G;const se=X.selectedTeams.map(async ae=>{const ve=ae.type==="cpu"?"cpu_teams":"interclub_teams",{error:Ye}=await I.from(ve).update({group_id:L.id}).eq("id",ae.id);if(Ye)throw Ye});await Promise.all(se),e("interclub_group_created_with_teams","group",L.id),Z(!1),await pe()}catch(L){console.error("Error creating group:",L)}finally{v(!1)}},className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Group Name"}),r.jsx("input",{type:"text",value:X.name,onChange:x=>B({...X,name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,placeholder:"Group A, Group B, etc."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Season"}),r.jsxs("select",{value:X.seasonId,onChange:x=>{B({...X,seasonId:x.target.value}),_(x.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Select a season"}),o.map(x=>r.jsxs("option",{value:x.id,children:[x.name," (",Te(x.tier),")"]},x.id))]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-medium",children:"Available Teams"}),r.jsx("div",{className:"border rounded-lg p-3 max-h-60 overflow-y-auto mt-[2px]",children:X.availableTeams.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:X.seasonId?"No teams available":"Select a season first"}):r.jsx("div",{className:"space-y-2",children:X.availableTeams.map(x=>r.jsx("div",{className:`p-2 rounded cursor-pointer ${X.selectedTeams.some(L=>L.id===x.id&&L.type===x.type)?"bg-blue-100":"hover:bg-gray-100"}`,onClick:()=>{const L=X.selectedTeams.some(G=>G.id===x.id&&G.type===x.type);B(G=>({...G,selectedTeams:L?G.selectedTeams.filter(se=>!(se.id===x.id&&se.type===x.type)):[...G.selectedTeams,x]}))},children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:X.selectedTeams.some(L=>L.id===x.id&&L.type===x.type),className:"mr-2",readOnly:!0}),r.jsx("span",{children:x.name}),r.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",x.type==="cpu"?"CPU Team":"Player Team",")"]})]})},`${x.type}-${x.id}`))})})]})]}),r.jsxs("div",{className:"pt-4",children:[r.jsxs("h3",{className:"text-sm font-medium mb-2",children:["Selected Teams (",X.selectedTeams.length,")"]}),X.selectedTeams.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:X.selectedTeams.map(x=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[x.name,r.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),B(G=>({...G,selectedTeams:G.selectedTeams.filter(se=>!(se.id===x.id&&se.type===x.type))}))},className:"ml-2 text-blue-600 hover:text-blue-900",children:r.jsx(Pr,{className:"w-4 h-4"})})]},`selected-${x.type}-${x.id}`))}):r.jsx("p",{className:"text-gray-500 text-sm",children:"No teams selected yet"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>Z(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:g||!X.seasonId||X.selectedTeams.length===0,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g?"Creating...":"Create Group"})]})]})]})}),t&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-bold",children:"Manage Group"}),r.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-gray-700",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Group Name"}),r.jsx("input",{type:"text",value:i.name,onChange:x=>l({...i,name:x.target.value}),className:"w-full px-3 py-2 border rounded"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Teams"}),r.jsx("div",{className:"max-h-60 overflow-y-auto border rounded p-2",children:n.map(x=>r.jsx("div",{className:"flex items-center justify-between py-2",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:i.teams.some(L=>L.id===x.id&&L.type===x.type),onChange:()=>q(x),className:"mr-2"}),r.jsx("span",{children:x.team_name}),r.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",x.type,")"]})]})},x.id))})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>s(null),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),r.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save Changes"})]})]})})]})},eg=()=>{const{logActivity:e}=Qs(),[t,s]=b.useState([]),[n,a]=b.useState(!0),[i,l]=b.useState(""),[o,c]=b.useState("all"),[d,u]=b.useState(!1),[h,m]=b.useState(null),[f,y]=b.useState("");b.useEffect(()=>{g(),e("users_viewed")},[]);const g=async()=>{try{a(!0),console.log("[AdminUsers] Loading users with JavaScript logic...");const{data:k,error:A}=await I.from("admin_users").select("user_id, permissions, created_at");A&&console.error("[AdminUsers] Error loading admin users:",A);const M=new Set((k||[]).map(X=>X.user_id)),{data:T,error:$}=await I.from("resource_transactions").select("user_id").not("user_id","is",null);$&&console.error("[AdminUsers] Error loading user transactions:",$);const J=[...new Set((T||[]).map(X=>X.user_id))].map(async X=>{const{data:B}=await I.from("profiles").select("*").eq("id",X).single();return{id:X,email:(B==null?void 0:B.email)||`user-${X.slice(0,8)}@unknown.com`,team_name:(B==null?void 0:B.team_name)||void 0,full_name:(B==null?void 0:B.full_name)||(B==null?void 0:B.display_name)||void 0,avatar_url:(B==null?void 0:B.avatar_url)||void 0,is_admin:M.has(X),is_banned:!1,email_verified:!0,last_login:null,created_at:(B==null?void 0:B.created_at)||new Date().toISOString(),updated_at:(B==null?void 0:B.updated_at)||new Date().toISOString(),login_count:0,profile:B||null}}),Z=await Promise.all(J);for(const X of k||[])Z.find(B=>B.id===X.user_id)||Z.push({id:X.user_id,email:`admin-${X.user_id.slice(0,8)}@unknown.com`,team_name:void 0,full_name:void 0,avatar_url:void 0,is_admin:!0,is_banned:!1,email_verified:!0,last_login:null,created_at:X.created_at,updated_at:X.created_at,login_count:0,profile:null});console.log("[AdminUsers] Users loaded successfully:",Z.length,"users"),s(Z)}catch(k){console.error("[AdminUsers] Unexpected error loading users:",k)}finally{a(!1)}},v=async(k,A)=>{const M=A?"ban":"unban";if(confirm(`Are you sure you want to ${M} this user?`))try{console.log(`${A?"Banning":"Unbanning"} user:`,k);const T=null;await e(`user_${M}ned`,"user",k),g()}catch(T){console.error(`Error ${M}ning user:`,T)}},p=async(k,A)=>{const M=A?"promote to admin":"demote from admin";if(confirm(`Are you sure you want to ${M} this user?`))try{console.log(`[AdminUsers] ${A?"Promoting":"Demoting"} user:`,k);let T=null;if(A){const{error:$}=await I.from("admin_users").insert({user_id:k,permissions:{tournaments:!0,interclub:!0,users:!0,cpu_teams:!0}});T=$}else{const{error:$}=await I.from("admin_users").delete().eq("user_id",k);T=$}if(T){console.error("[AdminUsers] Error changing admin status:",T),de.error(`Failed to ${M}. Please try again.`);return}console.log(`[AdminUsers] Successfully ${A?"promoted":"demoted"} user`),await e(A?"user_promoted_admin":"user_demoted_admin","user",k),g()}catch(T){console.error("[AdminUsers] Error changing admin status:",T),de.error(`Failed to ${M}. Please try again.`)}},w=async()=>{if(!(!h||!f))try{console.log("[AdminUsers] Password change requested for user:",h.id),de.warning("Password change functionality requires server-side implementation. Please contact system administrator."),await e("user_password_change_requested","user",h.id),u(!1),m(null),y("")}catch(k){console.error("[AdminUsers] Error requesting password change:",k),de.error("Failed to request password change. Please try again.")}},j=async k=>{if(confirm("Are you sure you want to permanently delete this user? This action cannot be undone."))try{console.log("[AdminUsers] User deletion requested:",k),de.warning("User deletion functionality requires server-side implementation. Please contact system administrator."),await e("user_deletion_requested","user",k)}catch(A){console.error("[AdminUsers] Error requesting user deletion:",A),de.error("Failed to request user deletion. Please try again.")}},N=t.filter(k=>{var T,$;const A=k.email.toLowerCase().includes(i.toLowerCase())||((T=k.team_name)==null?void 0:T.toLowerCase().includes(i.toLowerCase()))||(($=k.full_name)==null?void 0:$.toLowerCase().includes(i.toLowerCase())),M=o==="all"||o==="active"&&!k.is_banned||o==="banned"&&k.is_banned||o==="admin"&&k.is_admin||o==="unverified"&&!k.email_verified;return A&&M}),E=k=>k.is_banned?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Banned"}):k.is_admin?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Admin"}):k.email_verified?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"}):r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Unverified"}),P=k=>k?new Date(k).toLocaleDateString():"Never";return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),r.jsx("p",{className:"text-gray-600",children:"Manage user accounts, permissions, and access"})]}),r.jsx("div",{className:"flex space-x-3",children:r.jsxs("button",{onClick:g,className:"flex items-center px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(an,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Be,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(oc,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(k=>!k.is_banned).length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(Ws,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(k=>k.is_admin).length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:r.jsx(vl,{className:"w-6 h-6 text-red-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Banned"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(k=>k.is_banned).length})]})]})})]}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Ea,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Search users by email, username, or name...",value:i,onChange:k=>l(k.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]})}),r.jsx("div",{className:"w-full sm:w-48",children:r.jsxs("select",{value:o,onChange:k=>c(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Users"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"banned",children:"Banned"}),r.jsx("option",{value:"admin",children:"Admins"}),r.jsx("option",{value:"unverified",children:"Unverified"})]})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Login Count"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Be,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-lg font-medium",children:"No users found"}),r.jsx("p",{className:"mt-1",children:"Try adjusting your search or filters"})]})}):N.map(k=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:k.avatar_url?r.jsx("img",{className:"h-10 w-10 rounded-full",src:k.avatar_url,alt:""}):r.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:r.jsx(Ws,{className:"w-5 h-5 text-gray-600"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.full_name||k.team_name||"Unnamed User"}),r.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[r.jsx(Nj,{className:"w-3 h-3 mr-1"}),k.email]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E(k)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P(k.last_login)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P(k.created_at)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.login_count||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>{m(k),u(!0)},className:"text-blue-600 hover:text-blue-900 p-1",title:"Change Password",children:r.jsx(wj,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>p(k.id,!k.is_admin),className:`p-1 ${k.is_admin?"text-orange-600 hover:text-orange-900":"text-purple-600 hover:text-purple-900"}`,title:k.is_admin?"Remove Admin":"Make Admin",children:r.jsx(oc,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>v(k.id,!k.is_banned),className:`p-1 ${k.is_banned?"text-green-600 hover:text-green-900":"text-yellow-600 hover:text-yellow-900"}`,title:k.is_banned?"Unban User":"Ban User",children:k.is_banned?r.jsx(Pj,{className:"w-4 h-4"}):r.jsx(bj,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>j(k.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete User",children:r.jsx(ga,{className:"w-4 h-4"})})]})})]},k.id))})]})})}),d&&h&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Change Password for ",h.email]})}),r.jsxs("div",{className:"px-6 py-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),r.jsx("input",{type:"password",value:f,onChange:k=>y(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new password",minLength:8}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Password must be at least 8 characters long"})]}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>{u(!1),m(null),y("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),r.jsx("button",{onClick:w,disabled:f.length<8,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Change Password"})]})]})})]})},tg=()=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Activity Logs"}),r.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Export Logs"})]}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsx("p",{className:"text-gray-600",children:"Activity logs features coming soon..."})})]}),Sh=[{key:"home",layout:"",path:"",component:r.jsx(Up,{})},{key:"dashboard",layout:"",path:"dashboard",component:r.jsx(n1,{})},{key:"club",layout:"",path:"club",component:r.jsx(r1,{})},{key:"tournaments",layout:"",path:"tournaments",component:r.jsx(w1,{})},{key:"quick-match",layout:"",path:"quick-match",component:r.jsx(p1,{})},{key:"interclub",layout:"",path:"interclub",component:r.jsx(o1,{})},{key:"facilities",layout:"",path:"facilities",component:r.jsx(l1,{})},{key:"admin_dashboard",layout:"",path:"admin/dashboard",component:r.jsx(Qp,{})},{key:"admin_tournaments",layout:"",path:"admin/tournaments",component:r.jsx(Yp,{})},{key:"admin_interclub",layout:"",path:"admin/interclub",component:r.jsx(Zp,{})},{key:"admin_cputeams",layout:"",path:"admin/cpuTeams",component:r.jsx(Xp,{})},{key:"admin_users",layout:"",path:"admin/users",component:r.jsx(eg,{})},{key:"admin_logs",layout:"",path:"admin/logs",component:r.jsx(tg,{})}];function A1({selectedSection:e,onSectionChange:t,onOpenShop:s}){const n=[{id:"dashboard",icon:Dp,label:"Dashboard"},{id:"club",icon:Be,label:"My Club"},{id:"tournaments",icon:re,label:"Tournaments"},{id:"quick-match",icon:on,label:"Quick Match"},{id:"interclub",icon:yj,label:"Interclubs"},{id:"facilities",icon:wd,label:"Facilities"}];return r.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg p-4",children:r.jsxs("div",{className:"flex justify-around max-w-2xl mx-auto",children:[n.map(({id:a,icon:i,label:l})=>r.jsxs("button",{onClick:()=>t(a),className:`flex flex-col items-center p-2 rounded-lg transition-colors ${e===a?"text-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50"}`,children:[r.jsx(i,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm mt-1",children:l})]},a)),r.jsxs("button",{onClick:s,className:"flex flex-col items-center p-2 rounded-lg transition-colors text-purple-600 hover:bg-purple-50",children:[r.jsx(Nd,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm mt-1",children:"Shop"})]})]})})}const D1=[{id:"specialist-pack",name:"Pack Diamants + Spécialiste",description:"Obtenez 1000 diamants et débloquez un spécialiste exclusif",price:"89€",originalPrice:"99€",icon:Ze,color:"bg-purple-500",textColor:"text-purple-500",borderColor:"border-purple-200",hoverColor:"hover:bg-purple-600"},{id:"tshirt-pack",name:"T-Shirt Officiel",description:"T-shirt exclusif du jeu + 500 diamants offerts",price:"79€",icon:Ip,color:"bg-blue-500",textColor:"text-blue-500",borderColor:"border-blue-200",hoverColor:"hover:bg-blue-600"},{id:"master-pack",name:"Master Gem Pack",description:"Pack ultime avec 5000 diamants et bonus exclusifs",price:"299€",originalPrice:"399€",icon:Wt,color:"bg-yellow-500",textColor:"text-yellow-500",borderColor:"border-yellow-200",hoverColor:"hover:bg-yellow-600"}],L1=[{id:"diamonds-1",amount:100,price:"9€",color:"bg-purple-500"},{id:"diamonds-2",amount:250,price:"19€",color:"bg-purple-500"},{id:"diamonds-3",amount:650,price:"49€",color:"bg-purple-500"},{id:"diamonds-4",amount:1400,price:"79€",color:"bg-purple-500"},{id:"diamonds-5",amount:3e3,price:"149€",color:"bg-purple-500"},{id:"diamonds-6",amount:7e3,price:"299€",color:"bg-purple-500"}],$1={shuttlecocks:{icon:Bt,color:"text-blue-500",packs:[{amount:50,cost:1},{amount:150,cost:2},{amount:500,cost:5},{amount:1e3,cost:8}]},meals:{icon:ms,color:"text-green-500",packs:[{amount:30,cost:1},{amount:100,cost:2},{amount:300,cost:5},{amount:600,cost:8}]},coins:{icon:Pe,color:"text-yellow-500",packs:[{amount:1e3,cost:1},{amount:3e3,cost:2},{amount:1e4,cost:5},{amount:25e3,cost:10}]}};function I1({onClose:e}){const{resources:t,purchaseResources:s}=Kt(),[n,a]=b.useState("main"),i=()=>r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:D1.map(o=>r.jsxs("div",{className:`relative border ${o.borderColor} rounded-xl p-6 hover:shadow-lg transition-shadow`,children:[o.originalPrice&&r.jsx("div",{className:"absolute top-4 right-4 bg-red-100 text-red-600 px-3 py-1 rounded-full text-sm font-medium",children:"-25%"}),r.jsx("div",{className:`w-12 h-12 ${o.color} rounded-lg flex items-center justify-center mb-4`,children:r.jsx(o.icon,{className:"w-6 h-6 text-white"})}),r.jsx("h3",{className:"text-lg font-bold mb-2",children:o.name}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:o.description}),r.jsxs("div",{className:"flex items-baseline space-x-2",children:[r.jsx("span",{className:"text-xl font-bold",children:o.price}),o.originalPrice&&r.jsx("span",{className:"text-sm text-gray-400 line-through",children:o.originalPrice})]}),r.jsx("button",{className:`mt-4 w-full py-2 ${o.color} text-white rounded-lg ${o.hoverColor} transition-colors`,children:"Acheter"})]},o.id))}),r.jsx("h3",{className:"text-xl font-bold mb-6",children:"Packs de Diamants"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:L1.map(o=>r.jsxs("div",{className:"border border-purple-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"flex items-center justify-center mb-3",children:r.jsx(Ze,{className:"w-8 h-8 text-purple-500"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-bold text-lg mb-1",children:o.amount}),r.jsx("div",{className:"text-gray-600 text-sm mb-3",children:"Diamants"}),r.jsx("button",{className:"w-full py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:o.price})]})]},o.id))})]}),l=()=>r.jsxs("div",{className:"space-y-8",children:[Object.entries($1).map(([o,{icon:c,color:d,packs:u}])=>r.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(c,{className:`w-6 h-6 ${d}`}),r.jsx("h3",{className:"text-lg font-bold capitalize",children:o})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:u.map(({amount:h,cost:m},f)=>r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"text-center mb-3",children:[r.jsx("div",{className:"font-bold text-xl mb-1",children:h}),r.jsx("div",{className:"text-sm text-gray-600 capitalize",children:o})]}),r.jsxs("button",{onClick:()=>s(o,h,m),disabled:t.diamonds<m,className:`w-full py-2 rounded-lg flex items-center justify-center space-x-2 ${t.diamonds>=m?"bg-purple-500 text-white hover:bg-purple-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:[r.jsx("span",{children:m}),r.jsx(Ze,{className:"w-4 h-4"})]})]},f))})]},o)),r.jsxs("div",{className:"text-center text-sm text-gray-600 bg-purple-50 p-4 rounded-lg",children:["Vos diamants disponibles: ",r.jsx("span",{className:"font-bold",children:t.diamonds})," 💎"]})]});return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-7xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Nd,{className:"w-8 h-8 text-purple-500"}),r.jsx("h2",{className:"text-2xl font-bold",children:"Boutique"})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"flex space-x-4 mb-8",children:[r.jsx("button",{onClick:()=>a("main"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="main"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Boutique"}),r.jsx("button",{onClick:()=>a("resources"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="resources"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Ressources"})]}),n==="main"?i():l()]})})}function O1(){const{resources:e}=Kt(),{user:t}=js(),{isAdmin:s}=Qs(),n=Na(),[a,i]=b.useState(!1),l=async()=>{await I.auth.signOut(),n("/")},o=()=>{var c,d;return(c=t==null?void 0:t.user_metadata)!=null&&c.name?t.user_metadata.name:(d=t==null?void 0:t.user_metadata)!=null&&d.manager_name?t.user_metadata.manager_name:t!=null&&t.email?t.email.split("@")[0]:"User"};return r.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white shadow-md p-4 z-50",children:r.jsxs("div",{className:"flex items-center justify-between mx-auto",children:[r.jsx("div",{className:"w-48 hidden lg:block"}),r.jsxs("div",{className:"flex items-center space-x-8",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Bt,{className:"w-5 h-5 text-blue-500"}),r.jsx("span",{className:"font-medium",children:e.shuttlecocks})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ms,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"font-medium",children:e.meals})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Pe,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{className:"font-medium",children:e.coins})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ze,{className:"w-5 h-5 text-purple-500"}),r.jsx("span",{className:"font-medium",children:e.diamonds})]})]}),r.jsxs("div",{className:"relative w-48 flex justify-end",children:[r.jsxs("button",{onClick:()=>i(!a),className:"flex items-center space-x-2 px-3 py-2 rounded-full hover:bg-gray-100 transition-all duration-200",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:o().charAt(0).toUpperCase()}),r.jsx(fj,{className:`w-4 h-4 text-gray-500 transition-transform duration-200 ${a?"rotate-180":""}`})]}),a&&r.jsx("div",{className:"absolute top-10 right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",onMouseLeave:()=>i(!1),children:r.jsxs("div",{className:"py-2",children:[r.jsx("div",{className:"px-4 py-2 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:o().charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:o()}),r.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email})]})]})}),r.jsxs("div",{className:"py-1",children:[s&&r.jsxs("button",{onClick:()=>{n("/admin"),i(!1)},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors",children:[r.jsx(an,{className:"w-4 h-4 mr-3"}),"Admin Panel"]}),r.jsxs("button",{onClick:()=>{l(),i(!1)},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-red-600 transition-colors",children:[r.jsx(jj,{className:"w-4 h-4 mr-3"}),"Logout"]})]})]})})]})]})})}function U1(){const e=ls(),[t,s]=H.useState("Main Dashboard"),[n,a]=b.useState(!1),i=Na();H.useEffect(()=>{l(Sh)},[e.pathname]);const l=c=>{let d="forum";for(let u=0;u<c.length;u++)window.location.href.indexOf(c[u].layout+"/"+c[u].path)!==-1&&s(c[u].key);return d},o=c=>c.map((d,u)=>d.layout===""?r.jsx(zt,{path:`/${d.path}`,element:d.component},u):null);return r.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[r.jsx(O1,{}),r.jsx("main",{className:"container mt-6 mx-auto px-4 py-20",children:r.jsx(hd,{children:o(Sh)})}),r.jsx(A1,{selectedSection:t,onOpenShop:()=>a(!0),onSectionChange:c=>i("/"+c)}),n&&r.jsx(I1,{onClose:()=>a(!1)})]})}const z1=()=>{var m;const{adminUser:e,hasPermission:t,isAdmin:s,loading:n}=Qs(),{user:a,logout:i,isLogin:l}=js(),o=ls(),[c,d]=b.useState(!1);if(n||!l)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:l?"Verifying admin access...":"Checking authentication..."})]})});if(l&&!n&&!s)return r.jsx(En,{to:"/dashboard",replace:!0});const u=[{path:"/admin",name:"Dashboard",icon:"📊",exact:!0},{path:"/admin/tournaments",name:"Tournaments",icon:"🏆",permission:"tournaments"},{path:"/admin/interclub",name:"Interclub",icon:"🏟️",permission:"interclub"},{path:"/admin/cpu-teams",name:"CPU Teams & Players",icon:"🤖",permission:"cpu_teams"},{path:"/admin/users",name:"Users",icon:"👥",permission:"users"},{path:"/admin/logs",name:"Activity Logs",icon:"📝"}],h=(f,y=!1)=>y?o.pathname===f:o.pathname.startsWith(f);return r.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[c&&r.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>d(!1)}),r.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 ${c?"translate-x-0":"-translate-x-full"}`,children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-6 bg-blue-600 text-white",children:[r.jsx("h1",{className:"text-xl font-bold",children:"Admin Panel"}),r.jsx("button",{onClick:()=>d(!1),className:"lg:hidden",children:"✕"})]}),r.jsx("nav",{className:"mt-8",children:u.map(f=>f.permission&&!t(f.permission)?null:r.jsxs(qi,{to:f.path,className:`flex items-center px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors ${h(f.path,f.exact)?"bg-blue-50 text-blue-600 border-r-4 border-blue-600":""}`,onClick:()=>d(!1),children:[r.jsx("span",{className:"mr-3 text-lg",children:f.icon}),f.name]},f.path))}),r.jsx("div",{className:"absolute bottom-0 w-full p-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:(m=a==null?void 0:a.email)==null?void 0:m.charAt(0).toUpperCase()}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Admin"}),r.jsx("p",{className:"text-xs text-gray-500",children:a==null?void 0:a.email})]})]}),r.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",title:"Logout",children:"🚪"})]})})]}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[r.jsx("button",{onClick:()=>d(!0),className:"lg:hidden",children:r.jsx("span",{className:"text-2xl",children:"☰"})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Leadminton Admin"}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsx(qi,{to:"/dashboard",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"← Back to Game"})})]})}),r.jsx("main",{className:"flex-1 p-6 bg-gray-100",children:r.jsxs(hd,{children:[r.jsx(zt,{path:"/",element:r.jsx(Qp,{})}),r.jsx(zt,{path:"/tournaments",element:t("tournaments")?r.jsx(Yp,{}):r.jsx(En,{to:"/admin",replace:!0})}),r.jsx(zt,{path:"/interclub",element:t("interclub")?r.jsx(Zp,{}):r.jsx(En,{to:"/admin",replace:!0})}),r.jsx(zt,{path:"/cpu-teams",element:t("cpu_teams")?r.jsx(Xp,{}):r.jsx(En,{to:"/admin",replace:!0})}),r.jsx(zt,{path:"/users",element:t("users")?r.jsx(eg,{}):r.jsx(En,{to:"/admin",replace:!0})}),r.jsx(zt,{path:"/logs",element:r.jsx(tg,{})})]})})]})]})};function F1(){js();const[e,t]=b.useState(!1),[s,n]=b.useState(null);return e?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading game..."})]})}):s?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full",children:[r.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Error"}),r.jsx("p",{className:"text-gray-600 mb-6",children:s}),r.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]})}):r.jsx(N1,{children:r.jsxs(hd,{children:[r.jsx(zt,{path:"/",element:r.jsx(Up,{})}),r.jsx(zt,{path:"/admin/*",element:r.jsx(z1,{})}),r.jsx(zt,{path:"/*",element:r.jsx(U1,{})})]})})}typeof window>"u"&&(window.global=window);Ff(document.getElementById("root")).render(r.jsx(Qy,{children:r.jsx(b.StrictMode,{children:r.jsx(zb,{children:r.jsxs(ij,{children:[r.jsx(F1,{}),r.jsx(Mv,{position:"top-right",richColors:!0,closeButton:!0,duration:4e3})]})})})}));export{Ch as g};
