(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var Pt=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function Sh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),s}var Ch={exports:{}},Ki={},Eh={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ya=Symbol.for("react.element"),sg=Symbol.for("react.portal"),rg=Symbol.for("react.fragment"),ng=Symbol.for("react.strict_mode"),ag=Symbol.for("react.profiler"),ig=Symbol.for("react.provider"),lg=Symbol.for("react.context"),og=Symbol.for("react.forward_ref"),cg=Symbol.for("react.suspense"),dg=Symbol.for("react.memo"),ug=Symbol.for("react.lazy"),Td=Symbol.iterator;function hg(e){return e===null||typeof e!="object"?null:(e=Td&&e[Td]||e["@@iterator"],typeof e=="function"?e:null)}var Ph={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Th=Object.assign,Rh={};function un(e,t,s){this.props=e,this.context=t,this.refs=Rh,this.updater=s||Ph}un.prototype.isReactComponent={};un.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};un.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mh(){}Mh.prototype=un.prototype;function mc(e,t,s){this.props=e,this.context=t,this.refs=Rh,this.updater=s||Ph}var fc=mc.prototype=new Mh;fc.constructor=mc;Th(fc,un.prototype);fc.isPureReactComponent=!0;var Rd=Array.isArray,Dh=Object.prototype.hasOwnProperty,pc={current:null},Ah={key:!0,ref:!0,__self:!0,__source:!0};function Lh(e,t,s){var n,a={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Dh.call(t,n)&&!Ah.hasOwnProperty(n)&&(a[n]=t[n]);var c=arguments.length-2;if(c===1)a.children=s;else if(1<c){for(var o=Array(c),d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)a[n]===void 0&&(a[n]=c[n]);return{$$typeof:ya,type:e,key:i,ref:l,props:a,_owner:pc.current}}function mg(e,t){return{$$typeof:ya,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ya}function fg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Md=/\/+/g;function jl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fg(""+e.key):t.toString(36)}function ri(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ya:case sg:l=!0}}if(l)return l=e,a=a(l),e=n===""?"."+jl(l,0):n,Rd(a)?(s="",e!=null&&(s=e.replace(Md,"$&/")+"/"),ri(a,t,s,"",function(d){return d})):a!=null&&(gc(a)&&(a=mg(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Md,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=n===""?".":n+":",Rd(e))for(var c=0;c<e.length;c++){i=e[c];var o=n+jl(i,c);l+=ri(i,t,s,o,a)}else if(o=hg(e),typeof o=="function")for(e=o.call(e),c=0;!(i=e.next()).done;)i=i.value,o=n+jl(i,c++),l+=ri(i,t,s,o,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Aa(e,t,s){if(e==null)return e;var n=[],a=0;return ri(e,n,"","",function(i){return t.call(s,i,a++)}),n}function pg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var st={current:null},ni={transition:null},gg={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:ni,ReactCurrentOwner:pc};function Ih(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Aa,forEach:function(e,t,s){Aa(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Aa(e,function(){t++}),t},toArray:function(e){return Aa(e,function(t){return t})||[]},only:function(e){if(!gc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=un;he.Fragment=rg;he.Profiler=ag;he.PureComponent=mc;he.StrictMode=ng;he.Suspense=cg;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gg;he.act=Ih;he.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Th({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=pc.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(o in t)Dh.call(t,o)&&!Ah.hasOwnProperty(o)&&(n[o]=t[o]===void 0&&c!==void 0?c[o]:t[o])}var o=arguments.length-2;if(o===1)n.children=s;else if(1<o){c=Array(o);for(var d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}return{$$typeof:ya,type:e.type,key:a,ref:i,props:n,_owner:l}};he.createContext=function(e){return e={$$typeof:lg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ig,_context:e},e.Consumer=e};he.createElement=Lh;he.createFactory=function(e){var t=Lh.bind(null,e);return t.type=e,t};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:og,render:e}};he.isValidElement=gc;he.lazy=function(e){return{$$typeof:ug,_payload:{_status:-1,_result:e},_init:pg}};he.memo=function(e,t){return{$$typeof:dg,type:e,compare:t===void 0?null:t}};he.startTransition=function(e){var t=ni.transition;ni.transition={};try{e()}finally{ni.transition=t}};he.unstable_act=Ih;he.useCallback=function(e,t){return st.current.useCallback(e,t)};he.useContext=function(e){return st.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return st.current.useDeferredValue(e)};he.useEffect=function(e,t){return st.current.useEffect(e,t)};he.useId=function(){return st.current.useId()};he.useImperativeHandle=function(e,t,s){return st.current.useImperativeHandle(e,t,s)};he.useInsertionEffect=function(e,t){return st.current.useInsertionEffect(e,t)};he.useLayoutEffect=function(e,t){return st.current.useLayoutEffect(e,t)};he.useMemo=function(e,t){return st.current.useMemo(e,t)};he.useReducer=function(e,t,s){return st.current.useReducer(e,t,s)};he.useRef=function(e){return st.current.useRef(e)};he.useState=function(e){return st.current.useState(e)};he.useSyncExternalStore=function(e,t,s){return st.current.useSyncExternalStore(e,t,s)};he.useTransition=function(){return st.current.useTransition()};he.version="18.3.1";Eh.exports=he;var j=Eh.exports;const V=Sh(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg=j,yg=Symbol.for("react.element"),vg=Symbol.for("react.fragment"),wg=Object.prototype.hasOwnProperty,bg=xg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jg={key:!0,ref:!0,__self:!0,__source:!0};function $h(e,t,s){var n,a={},i=null,l=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)wg.call(t,n)&&!jg.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:yg,type:e,key:i,ref:l,props:a,_owner:bg.current}}Ki.Fragment=vg;Ki.jsx=$h;Ki.jsxs=$h;Ch.exports=Ki;var r=Ch.exports,Oh={exports:{}},wt={},Uh={exports:{}},zh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,G){var Q=B.length;B.push(G);e:for(;0<Q;){var M=Q-1>>>1,E=B[M];if(0<a(E,G))B[M]=G,B[Q]=E,Q=M;else break e}}function s(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var G=B[0],Q=B.pop();if(Q!==G){B[0]=Q;e:for(var M=0,E=B.length,S=E>>>1;M<S;){var z=2*(M+1)-1,Z=B[z],ee=z+1,Pe=B[ee];if(0>a(Z,Q))ee<E&&0>a(Pe,Z)?(B[M]=Pe,B[ee]=Q,M=ee):(B[M]=Z,B[z]=Q,M=z);else if(ee<E&&0>a(Pe,Q))B[M]=Pe,B[ee]=Q,M=ee;else break e}}return G}function a(B,G){var Q=B.sortIndex-G.sortIndex;return Q!==0?Q:B.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var o=[],d=[],u=1,h=null,m=3,f=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var G=s(d);G!==null;){if(G.callback===null)n(d);else if(G.startTime<=B)n(d),G.sortIndex=G.expirationTime,t(o,G);else break;G=s(d)}}function _(B){if(g=!1,b(B),!y)if(s(o)!==null)y=!0,H(P);else{var G=s(d);G!==null&&ie(_,G.startTime-B)}}function P(B,G){y=!1,g&&(g=!1,p(R),R=-1),f=!0;var Q=m;try{for(b(G),h=s(o);h!==null&&(!(h.expirationTime>G)||B&&!O());){var M=h.callback;if(typeof M=="function"){h.callback=null,m=h.priorityLevel;var E=M(h.expirationTime<=G);G=e.unstable_now(),typeof E=="function"?h.callback=E:h===s(o)&&n(o),b(G)}else n(o);h=s(o)}if(h!==null)var S=!0;else{var z=s(d);z!==null&&ie(_,z.startTime-G),S=!1}return S}finally{h=null,m=Q,f=!1}}var C=!1,k=null,R=-1,L=5,T=-1;function O(){return!(e.unstable_now()-T<L)}function ae(){if(k!==null){var B=e.unstable_now();T=B;var G=!0;try{G=k(!0,B)}finally{G?A():(C=!1,k=null)}}else C=!1}var A;if(typeof w=="function")A=function(){w(ae)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,q=X.port2;X.port1.onmessage=ae,A=function(){q.postMessage(null)}}else A=function(){v(ae,0)};function H(B){k=B,C||(C=!0,A())}function ie(B,G){R=v(function(){B(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){y||f||(y=!0,H(P))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return s(o)},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var Q=m;m=G;try{return B()}finally{m=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Q=m;m=B;try{return G()}finally{m=Q}},e.unstable_scheduleCallback=function(B,G,Q){var M=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?M+Q:M):Q=M,B){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=Q+E,B={id:u++,callback:G,priorityLevel:B,startTime:Q,expirationTime:E,sortIndex:-1},Q>M?(B.sortIndex=Q,t(d,B),s(o)===null&&B===s(d)&&(g?(p(R),R=-1):g=!0,ie(_,Q-M))):(B.sortIndex=E,t(o,B),y||f||(y=!0,H(P))),B},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(B){var G=m;return function(){var Q=m;m=G;try{return B.apply(this,arguments)}finally{m=Q}}}})(zh);Uh.exports=zh;var _g=Uh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng=j,vt=_g;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fh=new Set,Yn={};function wr(e,t){Yr(e,t),Yr(e+"Capture",t)}function Yr(e,t){for(Yn[e]=t,e=0;e<t.length;e++)Fh.add(t[e])}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),io=Object.prototype.hasOwnProperty,kg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dd={},Ad={};function Sg(e){return io.call(Ad,e)?!0:io.call(Dd,e)?!1:kg.test(e)?Ad[e]=!0:(Dd[e]=!0,!1)}function Cg(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Eg(e,t,s,n){if(t===null||typeof t>"u"||Cg(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rt(e,t,s,n,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new rt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];He[t]=new rt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new rt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new rt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new rt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new rt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new rt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new rt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new rt(e,5,!1,e.toLowerCase(),null,!1,!1)});var xc=/[\-:]([a-z])/g;function yc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xc,yc);He[t]=new rt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xc,yc);He[t]=new rt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xc,yc);He[t]=new rt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new rt(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new rt(e,1,!1,e.toLowerCase(),null,!0,!0)});function vc(e,t,s,n){var a=He.hasOwnProperty(t)?He[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Eg(t,s,a,n)&&(s=null),n||a===null?Sg(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var js=Ng.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,La=Symbol.for("react.element"),Rr=Symbol.for("react.portal"),Mr=Symbol.for("react.fragment"),wc=Symbol.for("react.strict_mode"),lo=Symbol.for("react.profiler"),Bh=Symbol.for("react.provider"),qh=Symbol.for("react.context"),bc=Symbol.for("react.forward_ref"),oo=Symbol.for("react.suspense"),co=Symbol.for("react.suspense_list"),jc=Symbol.for("react.memo"),Cs=Symbol.for("react.lazy"),Hh=Symbol.for("react.offscreen"),Ld=Symbol.iterator;function bn(e){return e===null||typeof e!="object"?null:(e=Ld&&e[Ld]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Object.assign,_l;function An(e){if(_l===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);_l=t&&t[1]||""}return`
`+_l+e}var Nl=!1;function kl(e,t){if(!e||Nl)return"";Nl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,c=i.length-1;1<=l&&0<=c&&a[l]!==i[c];)c--;for(;1<=l&&0<=c;l--,c--)if(a[l]!==i[c]){if(l!==1||c!==1)do if(l--,c--,0>c||a[l]!==i[c]){var o=`
`+a[l].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=l&&0<=c);break}}}finally{Nl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?An(e):""}function Pg(e){switch(e.tag){case 5:return An(e.type);case 16:return An("Lazy");case 13:return An("Suspense");case 19:return An("SuspenseList");case 0:case 2:case 15:return e=kl(e.type,!1),e;case 11:return e=kl(e.type.render,!1),e;case 1:return e=kl(e.type,!0),e;default:return""}}function uo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mr:return"Fragment";case Rr:return"Portal";case lo:return"Profiler";case wc:return"StrictMode";case oo:return"Suspense";case co:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qh:return(e.displayName||"Context")+".Consumer";case Bh:return(e._context.displayName||"Context")+".Provider";case bc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jc:return t=e.displayName||null,t!==null?t:uo(e.type)||"Memo";case Cs:t=e._payload,e=e._init;try{return uo(e(t))}catch{}}return null}function Tg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uo(t);case 8:return t===wc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rg(e){var t=Wh(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ia(e){e._valueTracker||(e._valueTracker=Rg(e))}function Vh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=Wh(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function vi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ho(e,t){var s=t.checked;return Ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Id(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=qs(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Gh(e,t){t=t.checked,t!=null&&vc(e,"checked",t,!1)}function mo(e,t){Gh(e,t);var s=qs(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fo(e,t.type,s):t.hasOwnProperty("defaultValue")&&fo(e,t.type,qs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $d(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function fo(e,t,s){(t!=="number"||vi(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ln=Array.isArray;function qr(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+qs(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function po(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Od(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(F(92));if(Ln(s)){if(1<s.length)throw Error(F(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:qs(s)}}function Jh(e,t){var s=qs(t.value),n=qs(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function Ud(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Kh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function go(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Kh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $a,Qh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$a.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var zn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mg=["Webkit","ms","Moz","O"];Object.keys(zn).forEach(function(e){Mg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zn[t]=zn[e]})});function Yh(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||zn.hasOwnProperty(e)&&zn[e]?(""+t).trim():t+"px"}function Xh(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=Yh(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var Dg=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xo(e,t){if(t){if(Dg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function yo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vo=null;function _c(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wo=null,Hr=null,Wr=null;function zd(e){if(e=ba(e)){if(typeof wo!="function")throw Error(F(280));var t=e.stateNode;t&&(t=el(t),wo(e.stateNode,e.type,t))}}function Zh(e){Hr?Wr?Wr.push(e):Wr=[e]:Hr=e}function em(){if(Hr){var e=Hr,t=Wr;if(Wr=Hr=null,zd(e),t)for(e=0;e<t.length;e++)zd(t[e])}}function tm(e,t){return e(t)}function sm(){}var Sl=!1;function rm(e,t,s){if(Sl)return e(t,s);Sl=!0;try{return tm(e,t,s)}finally{Sl=!1,(Hr!==null||Wr!==null)&&(sm(),em())}}function Zn(e,t){var s=e.stateNode;if(s===null)return null;var n=el(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(F(231,t,typeof s));return s}var bo=!1;if(xs)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){bo=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{bo=!1}function Ag(e,t,s,n,a,i,l,c,o){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var Fn=!1,wi=null,bi=!1,jo=null,Lg={onError:function(e){Fn=!0,wi=e}};function Ig(e,t,s,n,a,i,l,c,o){Fn=!1,wi=null,Ag.apply(Lg,arguments)}function $g(e,t,s,n,a,i,l,c,o){if(Ig.apply(this,arguments),Fn){if(Fn){var d=wi;Fn=!1,wi=null}else throw Error(F(198));bi||(bi=!0,jo=d)}}function br(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function nm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fd(e){if(br(e)!==e)throw Error(F(188))}function Og(e){var t=e.alternate;if(!t){if(t=br(e),t===null)throw Error(F(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return Fd(a),e;if(i===n)return Fd(a),t;i=i.sibling}throw Error(F(188))}if(s.return!==n.return)s=a,n=i;else{for(var l=!1,c=a.child;c;){if(c===s){l=!0,s=a,n=i;break}if(c===n){l=!0,n=a,s=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===s){l=!0,s=i,n=a;break}if(c===n){l=!0,n=i,s=a;break}c=c.sibling}if(!l)throw Error(F(189))}}if(s.alternate!==n)throw Error(F(190))}if(s.tag!==3)throw Error(F(188));return s.stateNode.current===s?e:t}function am(e){return e=Og(e),e!==null?im(e):null}function im(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=im(e);if(t!==null)return t;e=e.sibling}return null}var lm=vt.unstable_scheduleCallback,Bd=vt.unstable_cancelCallback,Ug=vt.unstable_shouldYield,zg=vt.unstable_requestPaint,Me=vt.unstable_now,Fg=vt.unstable_getCurrentPriorityLevel,Nc=vt.unstable_ImmediatePriority,om=vt.unstable_UserBlockingPriority,ji=vt.unstable_NormalPriority,Bg=vt.unstable_LowPriority,cm=vt.unstable_IdlePriority,Qi=null,is=null;function qg(e){if(is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(Qi,e,void 0,(e.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:Vg,Hg=Math.log,Wg=Math.LN2;function Vg(e){return e>>>=0,e===0?32:31-(Hg(e)/Wg|0)|0}var Oa=64,Ua=4194304;function In(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _i(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,l=s&268435455;if(l!==0){var c=l&~a;c!==0?n=In(c):(i&=l,i!==0&&(n=In(i)))}else l=s&~a,l!==0?n=In(l):i!==0&&(n=In(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-qt(t),a=1<<s,n|=e[s],t&=~a;return n}function Gg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jg(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-qt(i),c=1<<l,o=a[l];o===-1?(!(c&s)||c&n)&&(a[l]=Gg(c,t)):o<=t&&(e.expiredLanes|=c),i&=~c}}function _o(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dm(){var e=Oa;return Oa<<=1,!(Oa&4194240)&&(Oa=64),e}function Cl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function va(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qt(t),e[t]=s}function Kg(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-qt(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}function kc(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-qt(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var xe=0;function um(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hm,Sc,mm,fm,pm,No=!1,za=[],Ls=null,Is=null,$s=null,ea=new Map,ta=new Map,Ts=[],Qg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qd(e,t){switch(e){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":ea.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(t.pointerId)}}function _n(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=ba(t),t!==null&&Sc(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Yg(e,t,s,n,a){switch(t){case"focusin":return Ls=_n(Ls,e,t,s,n,a),!0;case"dragenter":return Is=_n(Is,e,t,s,n,a),!0;case"mouseover":return $s=_n($s,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return ea.set(i,_n(ea.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ta.set(i,_n(ta.get(i)||null,e,t,s,n,a)),!0}return!1}function gm(e){var t=or(e.target);if(t!==null){var s=br(t);if(s!==null){if(t=s.tag,t===13){if(t=nm(s),t!==null){e.blockedOn=t,pm(e.priority,function(){mm(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ai(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=ko(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);vo=n,s.target.dispatchEvent(n),vo=null}else return t=ba(s),t!==null&&Sc(t),e.blockedOn=s,!1;t.shift()}return!0}function Hd(e,t,s){ai(e)&&s.delete(t)}function Xg(){No=!1,Ls!==null&&ai(Ls)&&(Ls=null),Is!==null&&ai(Is)&&(Is=null),$s!==null&&ai($s)&&($s=null),ea.forEach(Hd),ta.forEach(Hd)}function Nn(e,t){e.blockedOn===t&&(e.blockedOn=null,No||(No=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,Xg)))}function sa(e){function t(a){return Nn(a,e)}if(0<za.length){Nn(za[0],e);for(var s=1;s<za.length;s++){var n=za[s];n.blockedOn===e&&(n.blockedOn=null)}}for(Ls!==null&&Nn(Ls,e),Is!==null&&Nn(Is,e),$s!==null&&Nn($s,e),ea.forEach(t),ta.forEach(t),s=0;s<Ts.length;s++)n=Ts[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ts.length&&(s=Ts[0],s.blockedOn===null);)gm(s),s.blockedOn===null&&Ts.shift()}var Vr=js.ReactCurrentBatchConfig,Ni=!0;function Zg(e,t,s,n){var a=xe,i=Vr.transition;Vr.transition=null;try{xe=1,Cc(e,t,s,n)}finally{xe=a,Vr.transition=i}}function e0(e,t,s,n){var a=xe,i=Vr.transition;Vr.transition=null;try{xe=4,Cc(e,t,s,n)}finally{xe=a,Vr.transition=i}}function Cc(e,t,s,n){if(Ni){var a=ko(e,t,s,n);if(a===null)$l(e,t,n,ki,s),qd(e,n);else if(Yg(a,e,t,s,n))n.stopPropagation();else if(qd(e,n),t&4&&-1<Qg.indexOf(e)){for(;a!==null;){var i=ba(a);if(i!==null&&hm(i),i=ko(e,t,s,n),i===null&&$l(e,t,n,ki,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else $l(e,t,n,null,s)}}var ki=null;function ko(e,t,s,n){if(ki=null,e=_c(n),e=or(e),e!==null)if(t=br(e),t===null)e=null;else if(s=t.tag,s===13){if(e=nm(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ki=e,null}function xm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fg()){case Nc:return 1;case om:return 4;case ji:case Bg:return 16;case cm:return 536870912;default:return 16}default:return 16}}var Ds=null,Ec=null,ii=null;function ym(){if(ii)return ii;var e,t=Ec,s=t.length,n,a="value"in Ds?Ds.value:Ds.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var l=s-e;for(n=1;n<=l&&t[s-n]===a[i-n];n++);return ii=a.slice(e,1<n?1-n:void 0)}function li(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fa(){return!0}function Wd(){return!1}function bt(e){function t(s,n,a,i,l){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(s=e[c],this[c]=s?s(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fa:Wd,this.isPropagationStopped=Wd,this}return Ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),t}var hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pc=bt(hn),wa=Ee({},hn,{view:0,detail:0}),t0=bt(wa),El,Pl,kn,Yi=Ee({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kn&&(kn&&e.type==="mousemove"?(El=e.screenX-kn.screenX,Pl=e.screenY-kn.screenY):Pl=El=0,kn=e),El)},movementY:function(e){return"movementY"in e?e.movementY:Pl}}),Vd=bt(Yi),s0=Ee({},Yi,{dataTransfer:0}),r0=bt(s0),n0=Ee({},wa,{relatedTarget:0}),Tl=bt(n0),a0=Ee({},hn,{animationName:0,elapsedTime:0,pseudoElement:0}),i0=bt(a0),l0=Ee({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),o0=bt(l0),c0=Ee({},hn,{data:0}),Gd=bt(c0),d0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=h0[e])?!!t[e]:!1}function Tc(){return m0}var f0=Ee({},wa,{key:function(e){if(e.key){var t=d0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?u0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tc,charCode:function(e){return e.type==="keypress"?li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),p0=bt(f0),g0=Ee({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jd=bt(g0),x0=Ee({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tc}),y0=bt(x0),v0=Ee({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),w0=bt(v0),b0=Ee({},Yi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),j0=bt(b0),_0=[9,13,27,32],Rc=xs&&"CompositionEvent"in window,Bn=null;xs&&"documentMode"in document&&(Bn=document.documentMode);var N0=xs&&"TextEvent"in window&&!Bn,vm=xs&&(!Rc||Bn&&8<Bn&&11>=Bn),Kd=" ",Qd=!1;function wm(e,t){switch(e){case"keyup":return _0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dr=!1;function k0(e,t){switch(e){case"compositionend":return bm(t);case"keypress":return t.which!==32?null:(Qd=!0,Kd);case"textInput":return e=t.data,e===Kd&&Qd?null:e;default:return null}}function S0(e,t){if(Dr)return e==="compositionend"||!Rc&&wm(e,t)?(e=ym(),ii=Ec=Ds=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vm&&t.locale!=="ko"?null:t.data;default:return null}}var C0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!C0[e.type]:t==="textarea"}function jm(e,t,s,n){Zh(n),t=Si(t,"onChange"),0<t.length&&(s=new Pc("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var qn=null,ra=null;function E0(e){Dm(e,0)}function Xi(e){var t=Ir(e);if(Vh(t))return e}function P0(e,t){if(e==="change")return t}var _m=!1;if(xs){var Rl;if(xs){var Ml="oninput"in document;if(!Ml){var Xd=document.createElement("div");Xd.setAttribute("oninput","return;"),Ml=typeof Xd.oninput=="function"}Rl=Ml}else Rl=!1;_m=Rl&&(!document.documentMode||9<document.documentMode)}function Zd(){qn&&(qn.detachEvent("onpropertychange",Nm),ra=qn=null)}function Nm(e){if(e.propertyName==="value"&&Xi(ra)){var t=[];jm(t,ra,e,_c(e)),rm(E0,t)}}function T0(e,t,s){e==="focusin"?(Zd(),qn=t,ra=s,qn.attachEvent("onpropertychange",Nm)):e==="focusout"&&Zd()}function R0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xi(ra)}function M0(e,t){if(e==="click")return Xi(t)}function D0(e,t){if(e==="input"||e==="change")return Xi(t)}function A0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:A0;function na(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!io.call(t,a)||!Vt(e[a],t[a]))return!1}return!0}function eu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tu(e,t){var s=eu(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=eu(s)}}function km(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?km(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sm(){for(var e=window,t=vi();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=vi(e.document)}return t}function Mc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function L0(e){var t=Sm(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&km(s.ownerDocument.documentElement,s)){if(n!==null&&Mc(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=tu(s,i);var l=tu(s,n);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var I0=xs&&"documentMode"in document&&11>=document.documentMode,Ar=null,So=null,Hn=null,Co=!1;function su(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Co||Ar==null||Ar!==vi(n)||(n=Ar,"selectionStart"in n&&Mc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Hn&&na(Hn,n)||(Hn=n,n=Si(So,"onSelect"),0<n.length&&(t=new Pc("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=Ar)))}function Ba(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Lr={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionend:Ba("Transition","TransitionEnd")},Dl={},Cm={};xs&&(Cm=document.createElement("div").style,"AnimationEvent"in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),"TransitionEvent"in window||delete Lr.transitionend.transition);function Zi(e){if(Dl[e])return Dl[e];if(!Lr[e])return e;var t=Lr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Cm)return Dl[e]=t[s];return e}var Em=Zi("animationend"),Pm=Zi("animationiteration"),Tm=Zi("animationstart"),Rm=Zi("transitionend"),Mm=new Map,ru="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gs(e,t){Mm.set(e,t),wr(t,[e])}for(var Al=0;Al<ru.length;Al++){var Ll=ru[Al],$0=Ll.toLowerCase(),O0=Ll[0].toUpperCase()+Ll.slice(1);Gs($0,"on"+O0)}Gs(Em,"onAnimationEnd");Gs(Pm,"onAnimationIteration");Gs(Tm,"onAnimationStart");Gs("dblclick","onDoubleClick");Gs("focusin","onFocus");Gs("focusout","onBlur");Gs(Rm,"onTransitionEnd");Yr("onMouseEnter",["mouseout","mouseover"]);Yr("onMouseLeave",["mouseout","mouseover"]);Yr("onPointerEnter",["pointerout","pointerover"]);Yr("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U0=new Set("cancel close invalid load scroll toggle".split(" ").concat($n));function nu(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,$g(n,t,void 0,e),e.currentTarget=null}function Dm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var c=n[l],o=c.instance,d=c.currentTarget;if(c=c.listener,o!==i&&a.isPropagationStopped())break e;nu(a,c,d),i=o}else for(l=0;l<n.length;l++){if(c=n[l],o=c.instance,d=c.currentTarget,c=c.listener,o!==i&&a.isPropagationStopped())break e;nu(a,c,d),i=o}}}if(bi)throw e=jo,bi=!1,jo=null,e}function be(e,t){var s=t[Mo];s===void 0&&(s=t[Mo]=new Set);var n=e+"__bubble";s.has(n)||(Am(t,e,2,!1),s.add(n))}function Il(e,t,s){var n=0;t&&(n|=4),Am(s,e,n,t)}var qa="_reactListening"+Math.random().toString(36).slice(2);function aa(e){if(!e[qa]){e[qa]=!0,Fh.forEach(function(s){s!=="selectionchange"&&(U0.has(s)||Il(s,!1,e),Il(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qa]||(t[qa]=!0,Il("selectionchange",!1,t))}}function Am(e,t,s,n){switch(xm(t)){case 1:var a=Zg;break;case 4:a=e0;break;default:a=Cc}s=a.bind(null,t,s,e),a=void 0,!bo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function $l(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var c=n.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var o=l.tag;if((o===3||o===4)&&(o=l.stateNode.containerInfo,o===a||o.nodeType===8&&o.parentNode===a))return;l=l.return}for(;c!==null;){if(l=or(c),l===null)return;if(o=l.tag,o===5||o===6){n=i=l;continue e}c=c.parentNode}}n=n.return}rm(function(){var d=i,u=_c(s),h=[];e:{var m=Mm.get(e);if(m!==void 0){var f=Pc,y=e;switch(e){case"keypress":if(li(s)===0)break e;case"keydown":case"keyup":f=p0;break;case"focusin":y="focus",f=Tl;break;case"focusout":y="blur",f=Tl;break;case"beforeblur":case"afterblur":f=Tl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=r0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=y0;break;case Em:case Pm:case Tm:f=i0;break;case Rm:f=w0;break;case"scroll":f=t0;break;case"wheel":f=j0;break;case"copy":case"cut":case"paste":f=o0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Jd}var g=(t&4)!==0,v=!g&&e==="scroll",p=g?m!==null?m+"Capture":null:m;g=[];for(var w=d,b;w!==null;){b=w;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,p!==null&&(_=Zn(w,p),_!=null&&g.push(ia(w,_,b)))),v)break;w=w.return}0<g.length&&(m=new f(m,y,null,s,u),h.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&s!==vo&&(y=s.relatedTarget||s.fromElement)&&(or(y)||y[ys]))break e;if((f||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,f?(y=s.relatedTarget||s.toElement,f=d,y=y?or(y):null,y!==null&&(v=br(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=d),f!==y)){if(g=Vd,_="onMouseLeave",p="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(g=Jd,_="onPointerLeave",p="onPointerEnter",w="pointer"),v=f==null?m:Ir(f),b=y==null?m:Ir(y),m=new g(_,w+"leave",f,s,u),m.target=v,m.relatedTarget=b,_=null,or(u)===d&&(g=new g(p,w+"enter",y,s,u),g.target=b,g.relatedTarget=v,_=g),v=_,f&&y)t:{for(g=f,p=y,w=0,b=g;b;b=Sr(b))w++;for(b=0,_=p;_;_=Sr(_))b++;for(;0<w-b;)g=Sr(g),w--;for(;0<b-w;)p=Sr(p),b--;for(;w--;){if(g===p||p!==null&&g===p.alternate)break t;g=Sr(g),p=Sr(p)}g=null}else g=null;f!==null&&au(h,m,f,g,!1),y!==null&&v!==null&&au(h,v,y,g,!0)}}e:{if(m=d?Ir(d):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var P=P0;else if(Yd(m))if(_m)P=D0;else{P=R0;var C=T0}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(P=M0);if(P&&(P=P(e,d))){jm(h,P,s,u);break e}C&&C(e,m,d),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&fo(m,"number",m.value)}switch(C=d?Ir(d):window,e){case"focusin":(Yd(C)||C.contentEditable==="true")&&(Ar=C,So=d,Hn=null);break;case"focusout":Hn=So=Ar=null;break;case"mousedown":Co=!0;break;case"contextmenu":case"mouseup":case"dragend":Co=!1,su(h,s,u);break;case"selectionchange":if(I0)break;case"keydown":case"keyup":su(h,s,u)}var k;if(Rc)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Dr?wm(e,s)&&(R="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(R="onCompositionStart");R&&(vm&&s.locale!=="ko"&&(Dr||R!=="onCompositionStart"?R==="onCompositionEnd"&&Dr&&(k=ym()):(Ds=u,Ec="value"in Ds?Ds.value:Ds.textContent,Dr=!0)),C=Si(d,R),0<C.length&&(R=new Gd(R,e,null,s,u),h.push({event:R,listeners:C}),k?R.data=k:(k=bm(s),k!==null&&(R.data=k)))),(k=N0?k0(e,s):S0(e,s))&&(d=Si(d,"onBeforeInput"),0<d.length&&(u=new Gd("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=k))}Dm(h,t)})}function ia(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Si(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Zn(e,s),i!=null&&n.unshift(ia(e,i,a)),i=Zn(e,t),i!=null&&n.push(ia(e,i,a))),e=e.return}return n}function Sr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function au(e,t,s,n,a){for(var i=t._reactName,l=[];s!==null&&s!==n;){var c=s,o=c.alternate,d=c.stateNode;if(o!==null&&o===n)break;c.tag===5&&d!==null&&(c=d,a?(o=Zn(s,i),o!=null&&l.unshift(ia(s,o,c))):a||(o=Zn(s,i),o!=null&&l.push(ia(s,o,c)))),s=s.return}l.length!==0&&e.push({event:t,listeners:l})}var z0=/\r\n?/g,F0=/\u0000|\uFFFD/g;function iu(e){return(typeof e=="string"?e:""+e).replace(z0,`
`).replace(F0,"")}function Ha(e,t,s){if(t=iu(t),iu(e)!==t&&s)throw Error(F(425))}function Ci(){}var Eo=null,Po=null;function To(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ro=typeof setTimeout=="function"?setTimeout:void 0,B0=typeof clearTimeout=="function"?clearTimeout:void 0,lu=typeof Promise=="function"?Promise:void 0,q0=typeof queueMicrotask=="function"?queueMicrotask:typeof lu<"u"?function(e){return lu.resolve(null).then(e).catch(H0)}:Ro;function H0(e){setTimeout(function(){throw e})}function Ol(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),sa(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);sa(t)}function Os(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ou(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var mn=Math.random().toString(36).slice(2),rs="__reactFiber$"+mn,la="__reactProps$"+mn,ys="__reactContainer$"+mn,Mo="__reactEvents$"+mn,W0="__reactListeners$"+mn,V0="__reactHandles$"+mn;function or(e){var t=e[rs];if(t)return t;for(var s=e.parentNode;s;){if(t=s[ys]||s[rs]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=ou(e);e!==null;){if(s=e[rs])return s;e=ou(e)}return t}e=s,s=e.parentNode}return null}function ba(e){return e=e[rs]||e[ys],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function el(e){return e[la]||null}var Do=[],$r=-1;function Js(e){return{current:e}}function je(e){0>$r||(e.current=Do[$r],Do[$r]=null,$r--)}function ve(e,t){$r++,Do[$r]=e.current,e.current=t}var Hs={},Ye=Js(Hs),ut=Js(!1),fr=Hs;function Xr(e,t){var s=e.type.contextTypes;if(!s)return Hs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ht(e){return e=e.childContextTypes,e!=null}function Ei(){je(ut),je(Ye)}function cu(e,t,s){if(Ye.current!==Hs)throw Error(F(168));ve(Ye,t),ve(ut,s)}function Lm(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(F(108,Tg(e)||"Unknown",a));return Ee({},s,n)}function Pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hs,fr=Ye.current,ve(Ye,e),ve(ut,ut.current),!0}function du(e,t,s){var n=e.stateNode;if(!n)throw Error(F(169));s?(e=Lm(e,t,fr),n.__reactInternalMemoizedMergedChildContext=e,je(ut),je(Ye),ve(Ye,e)):je(ut),ve(ut,s)}var hs=null,tl=!1,Ul=!1;function Im(e){hs===null?hs=[e]:hs.push(e)}function G0(e){tl=!0,Im(e)}function Ks(){if(!Ul&&hs!==null){Ul=!0;var e=0,t=xe;try{var s=hs;for(xe=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}hs=null,tl=!1}catch(a){throw hs!==null&&(hs=hs.slice(e+1)),lm(Nc,Ks),a}finally{xe=t,Ul=!1}}return null}var Or=[],Ur=0,Ti=null,Ri=0,Nt=[],kt=0,pr=null,ms=1,fs="";function nr(e,t){Or[Ur++]=Ri,Or[Ur++]=Ti,Ti=e,Ri=t}function $m(e,t,s){Nt[kt++]=ms,Nt[kt++]=fs,Nt[kt++]=pr,pr=e;var n=ms;e=fs;var a=32-qt(n)-1;n&=~(1<<a),s+=1;var i=32-qt(t)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,ms=1<<32-qt(t)+a|s<<a|n,fs=i+e}else ms=1<<i|s<<a|n,fs=e}function Dc(e){e.return!==null&&(nr(e,1),$m(e,1,0))}function Ac(e){for(;e===Ti;)Ti=Or[--Ur],Or[Ur]=null,Ri=Or[--Ur],Or[Ur]=null;for(;e===pr;)pr=Nt[--kt],Nt[kt]=null,fs=Nt[--kt],Nt[kt]=null,ms=Nt[--kt],Nt[kt]=null}var yt=null,xt=null,_e=!1,zt=null;function Om(e,t){var s=St(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function uu(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yt=e,xt=Os(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yt=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=pr!==null?{id:ms,overflow:fs}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=St(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,yt=e,xt=null,!0):!1;default:return!1}}function Ao(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Lo(e){if(_e){var t=xt;if(t){var s=t;if(!uu(e,t)){if(Ao(e))throw Error(F(418));t=Os(s.nextSibling);var n=yt;t&&uu(e,t)?Om(n,s):(e.flags=e.flags&-4097|2,_e=!1,yt=e)}}else{if(Ao(e))throw Error(F(418));e.flags=e.flags&-4097|2,_e=!1,yt=e}}}function hu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yt=e}function Wa(e){if(e!==yt)return!1;if(!_e)return hu(e),_e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!To(e.type,e.memoizedProps)),t&&(t=xt)){if(Ao(e))throw Um(),Error(F(418));for(;t;)Om(e,t),t=Os(t.nextSibling)}if(hu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){xt=Os(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=yt?Os(e.stateNode.nextSibling):null;return!0}function Um(){for(var e=xt;e;)e=Os(e.nextSibling)}function Zr(){xt=yt=null,_e=!1}function Lc(e){zt===null?zt=[e]:zt.push(e)}var J0=js.ReactCurrentBatchConfig;function Sn(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(F(309));var n=s.stateNode}if(!n)throw Error(F(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var c=a.refs;l===null?delete c[i]:c[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(F(284));if(!s._owner)throw Error(F(290,e))}return e}function Va(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mu(e){var t=e._init;return t(e._payload)}function zm(e){function t(p,w){if(e){var b=p.deletions;b===null?(p.deletions=[w],p.flags|=16):b.push(w)}}function s(p,w){if(!e)return null;for(;w!==null;)t(p,w),w=w.sibling;return null}function n(p,w){for(p=new Map;w!==null;)w.key!==null?p.set(w.key,w):p.set(w.index,w),w=w.sibling;return p}function a(p,w){return p=Bs(p,w),p.index=0,p.sibling=null,p}function i(p,w,b){return p.index=b,e?(b=p.alternate,b!==null?(b=b.index,b<w?(p.flags|=2,w):b):(p.flags|=2,w)):(p.flags|=1048576,w)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function c(p,w,b,_){return w===null||w.tag!==6?(w=Vl(b,p.mode,_),w.return=p,w):(w=a(w,b),w.return=p,w)}function o(p,w,b,_){var P=b.type;return P===Mr?u(p,w,b.props.children,_,b.key):w!==null&&(w.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Cs&&mu(P)===w.type)?(_=a(w,b.props),_.ref=Sn(p,w,b),_.return=p,_):(_=fi(b.type,b.key,b.props,null,p.mode,_),_.ref=Sn(p,w,b),_.return=p,_)}function d(p,w,b,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=Gl(b,p.mode,_),w.return=p,w):(w=a(w,b.children||[]),w.return=p,w)}function u(p,w,b,_,P){return w===null||w.tag!==7?(w=hr(b,p.mode,_,P),w.return=p,w):(w=a(w,b),w.return=p,w)}function h(p,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Vl(""+w,p.mode,b),w.return=p,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case La:return b=fi(w.type,w.key,w.props,null,p.mode,b),b.ref=Sn(p,null,w),b.return=p,b;case Rr:return w=Gl(w,p.mode,b),w.return=p,w;case Cs:var _=w._init;return h(p,_(w._payload),b)}if(Ln(w)||bn(w))return w=hr(w,p.mode,b,null),w.return=p,w;Va(p,w)}return null}function m(p,w,b,_){var P=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return P!==null?null:c(p,w,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case La:return b.key===P?o(p,w,b,_):null;case Rr:return b.key===P?d(p,w,b,_):null;case Cs:return P=b._init,m(p,w,P(b._payload),_)}if(Ln(b)||bn(b))return P!==null?null:u(p,w,b,_,null);Va(p,b)}return null}function f(p,w,b,_,P){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(b)||null,c(w,p,""+_,P);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case La:return p=p.get(_.key===null?b:_.key)||null,o(w,p,_,P);case Rr:return p=p.get(_.key===null?b:_.key)||null,d(w,p,_,P);case Cs:var C=_._init;return f(p,w,b,C(_._payload),P)}if(Ln(_)||bn(_))return p=p.get(b)||null,u(w,p,_,P,null);Va(w,_)}return null}function y(p,w,b,_){for(var P=null,C=null,k=w,R=w=0,L=null;k!==null&&R<b.length;R++){k.index>R?(L=k,k=null):L=k.sibling;var T=m(p,k,b[R],_);if(T===null){k===null&&(k=L);break}e&&k&&T.alternate===null&&t(p,k),w=i(T,w,R),C===null?P=T:C.sibling=T,C=T,k=L}if(R===b.length)return s(p,k),_e&&nr(p,R),P;if(k===null){for(;R<b.length;R++)k=h(p,b[R],_),k!==null&&(w=i(k,w,R),C===null?P=k:C.sibling=k,C=k);return _e&&nr(p,R),P}for(k=n(p,k);R<b.length;R++)L=f(k,p,R,b[R],_),L!==null&&(e&&L.alternate!==null&&k.delete(L.key===null?R:L.key),w=i(L,w,R),C===null?P=L:C.sibling=L,C=L);return e&&k.forEach(function(O){return t(p,O)}),_e&&nr(p,R),P}function g(p,w,b,_){var P=bn(b);if(typeof P!="function")throw Error(F(150));if(b=P.call(b),b==null)throw Error(F(151));for(var C=P=null,k=w,R=w=0,L=null,T=b.next();k!==null&&!T.done;R++,T=b.next()){k.index>R?(L=k,k=null):L=k.sibling;var O=m(p,k,T.value,_);if(O===null){k===null&&(k=L);break}e&&k&&O.alternate===null&&t(p,k),w=i(O,w,R),C===null?P=O:C.sibling=O,C=O,k=L}if(T.done)return s(p,k),_e&&nr(p,R),P;if(k===null){for(;!T.done;R++,T=b.next())T=h(p,T.value,_),T!==null&&(w=i(T,w,R),C===null?P=T:C.sibling=T,C=T);return _e&&nr(p,R),P}for(k=n(p,k);!T.done;R++,T=b.next())T=f(k,p,R,T.value,_),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?R:T.key),w=i(T,w,R),C===null?P=T:C.sibling=T,C=T);return e&&k.forEach(function(ae){return t(p,ae)}),_e&&nr(p,R),P}function v(p,w,b,_){if(typeof b=="object"&&b!==null&&b.type===Mr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case La:e:{for(var P=b.key,C=w;C!==null;){if(C.key===P){if(P=b.type,P===Mr){if(C.tag===7){s(p,C.sibling),w=a(C,b.props.children),w.return=p,p=w;break e}}else if(C.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Cs&&mu(P)===C.type){s(p,C.sibling),w=a(C,b.props),w.ref=Sn(p,C,b),w.return=p,p=w;break e}s(p,C);break}else t(p,C);C=C.sibling}b.type===Mr?(w=hr(b.props.children,p.mode,_,b.key),w.return=p,p=w):(_=fi(b.type,b.key,b.props,null,p.mode,_),_.ref=Sn(p,w,b),_.return=p,p=_)}return l(p);case Rr:e:{for(C=b.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){s(p,w.sibling),w=a(w,b.children||[]),w.return=p,p=w;break e}else{s(p,w);break}else t(p,w);w=w.sibling}w=Gl(b,p.mode,_),w.return=p,p=w}return l(p);case Cs:return C=b._init,v(p,w,C(b._payload),_)}if(Ln(b))return y(p,w,b,_);if(bn(b))return g(p,w,b,_);Va(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(s(p,w.sibling),w=a(w,b),w.return=p,p=w):(s(p,w),w=Vl(b,p.mode,_),w.return=p,p=w),l(p)):s(p,w)}return v}var en=zm(!0),Fm=zm(!1),Mi=Js(null),Di=null,zr=null,Ic=null;function $c(){Ic=zr=Di=null}function Oc(e){var t=Mi.current;je(Mi),e._currentValue=t}function Io(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function Gr(e,t){Di=e,Ic=zr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dt=!0),e.firstContext=null)}function Tt(e){var t=e._currentValue;if(Ic!==e)if(e={context:e,memoizedValue:t,next:null},zr===null){if(Di===null)throw Error(F(308));zr=e,Di.dependencies={lanes:0,firstContext:e}}else zr=zr.next=e;return t}var cr=null;function Uc(e){cr===null?cr=[e]:cr.push(e)}function Bm(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,Uc(t)):(s.next=a.next,a.next=s),t.interleaved=s,vs(e,n)}function vs(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Es=!1;function zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ps(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ge&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,vs(e,s)}return a=n.interleaved,a===null?(t.next=t,Uc(n)):(t.next=a.next,a.next=t),n.interleaved=t,vs(e,s)}function oi(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,kc(e,s)}}function fu(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=l:i=i.next=l,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Ai(e,t,s,n){var a=e.updateQueue;Es=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var o=c,d=o.next;o.next=null,l===null?i=d:l.next=d,l=o;var u=e.alternate;u!==null&&(u=u.updateQueue,c=u.lastBaseUpdate,c!==l&&(c===null?u.firstBaseUpdate=d:c.next=d,u.lastBaseUpdate=o))}if(i!==null){var h=a.baseState;l=0,u=d=o=null,c=i;do{var m=c.lane,f=c.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:f,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var y=e,g=c;switch(m=t,f=s,g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(f,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,m=typeof y=="function"?y.call(f,h,m):y,m==null)break e;h=Ee({},h,m);break e;case 2:Es=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[c]:m.push(c))}else f={eventTime:f,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},u===null?(d=u=f,o=h):u=u.next=f,l|=m;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;m=c,c=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(o=h),a.baseState=o,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);xr|=l,e.lanes=l,e.memoizedState=h}}function pu(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(F(191,a));a.call(n)}}}var ja={},ls=Js(ja),oa=Js(ja),ca=Js(ja);function dr(e){if(e===ja)throw Error(F(174));return e}function Fc(e,t){switch(ve(ca,t),ve(oa,e),ve(ls,ja),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:go(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=go(t,e)}je(ls),ve(ls,t)}function tn(){je(ls),je(oa),je(ca)}function Hm(e){dr(ca.current);var t=dr(ls.current),s=go(t,e.type);t!==s&&(ve(oa,e),ve(ls,s))}function Bc(e){oa.current===e&&(je(ls),je(oa))}var Se=Js(0);function Li(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zl=[];function qc(){for(var e=0;e<zl.length;e++)zl[e]._workInProgressVersionPrimary=null;zl.length=0}var ci=js.ReactCurrentDispatcher,Fl=js.ReactCurrentBatchConfig,gr=0,Ce=null,Ae=null,Oe=null,Ii=!1,Wn=!1,da=0,K0=0;function Ge(){throw Error(F(321))}function Hc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Vt(e[s],t[s]))return!1;return!0}function Wc(e,t,s,n,a,i){if(gr=i,Ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ci.current=e===null||e.memoizedState===null?Z0:ex,e=s(n,a),Wn){i=0;do{if(Wn=!1,da=0,25<=i)throw Error(F(301));i+=1,Oe=Ae=null,t.updateQueue=null,ci.current=tx,e=s(n,a)}while(Wn)}if(ci.current=$i,t=Ae!==null&&Ae.next!==null,gr=0,Oe=Ae=Ce=null,Ii=!1,t)throw Error(F(300));return e}function Vc(){var e=da!==0;return da=0,e}function ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?Ce.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function Rt(){if(Ae===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=Ae.next;var t=Oe===null?Ce.memoizedState:Oe.next;if(t!==null)Oe=t,Ae=e;else{if(e===null)throw Error(F(310));Ae=e,e={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Oe===null?Ce.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function ua(e,t){return typeof t=="function"?t(e):t}function Bl(e){var t=Rt(),s=t.queue;if(s===null)throw Error(F(311));s.lastRenderedReducer=e;var n=Ae,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var c=l=null,o=null,d=i;do{var u=d.lane;if((gr&u)===u)o!==null&&(o=o.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};o===null?(c=o=h,l=n):o=o.next=h,Ce.lanes|=u,xr|=u}d=d.next}while(d!==null&&d!==i);o===null?l=n:o.next=c,Vt(n,t.memoizedState)||(dt=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=o,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do i=a.lane,Ce.lanes|=i,xr|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function ql(e){var t=Rt(),s=t.queue;if(s===null)throw Error(F(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);Vt(i,t.memoizedState)||(dt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function Wm(){}function Vm(e,t){var s=Ce,n=Rt(),a=t(),i=!Vt(n.memoizedState,a);if(i&&(n.memoizedState=a,dt=!0),n=n.queue,Gc(Km.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||Oe!==null&&Oe.memoizedState.tag&1){if(s.flags|=2048,ha(9,Jm.bind(null,s,n,a,t),void 0,null),Ue===null)throw Error(F(349));gr&30||Gm(s,t,a)}return a}function Gm(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Jm(e,t,s,n){t.value=s,t.getSnapshot=n,Qm(t)&&Ym(e)}function Km(e,t,s){return s(function(){Qm(t)&&Ym(e)})}function Qm(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Vt(e,s)}catch{return!0}}function Ym(e){var t=vs(e,1);t!==null&&Ht(t,e,1,-1)}function gu(e){var t=ss();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:e},t.queue=e,e=e.dispatch=X0.bind(null,Ce,e),[t.memoizedState,e]}function ha(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=Ce.updateQueue,t===null?(t={lastEffect:null,stores:null},Ce.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function Xm(){return Rt().memoizedState}function di(e,t,s,n){var a=ss();Ce.flags|=e,a.memoizedState=ha(1|t,s,void 0,n===void 0?null:n)}function sl(e,t,s,n){var a=Rt();n=n===void 0?null:n;var i=void 0;if(Ae!==null){var l=Ae.memoizedState;if(i=l.destroy,n!==null&&Hc(n,l.deps)){a.memoizedState=ha(t,s,i,n);return}}Ce.flags|=e,a.memoizedState=ha(1|t,s,i,n)}function xu(e,t){return di(8390656,8,e,t)}function Gc(e,t){return sl(2048,8,e,t)}function Zm(e,t){return sl(4,2,e,t)}function ef(e,t){return sl(4,4,e,t)}function tf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sf(e,t,s){return s=s!=null?s.concat([e]):null,sl(4,4,tf.bind(null,t,e),s)}function Jc(){}function rf(e,t){var s=Rt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Hc(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function nf(e,t){var s=Rt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Hc(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function af(e,t,s){return gr&21?(Vt(s,t)||(s=dm(),Ce.lanes|=s,xr|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=s)}function Q0(e,t){var s=xe;xe=s!==0&&4>s?s:4,e(!0);var n=Fl.transition;Fl.transition={};try{e(!1),t()}finally{xe=s,Fl.transition=n}}function lf(){return Rt().memoizedState}function Y0(e,t,s){var n=Fs(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},of(e))cf(t,s);else if(s=Bm(e,t,s,n),s!==null){var a=et();Ht(s,e,n,a),df(s,t,n)}}function X0(e,t,s){var n=Fs(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(of(e))cf(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,c=i(l,s);if(a.hasEagerState=!0,a.eagerState=c,Vt(c,l)){var o=t.interleaved;o===null?(a.next=a,Uc(t)):(a.next=o.next,o.next=a),t.interleaved=a;return}}catch{}finally{}s=Bm(e,t,a,n),s!==null&&(a=et(),Ht(s,e,n,a),df(s,t,n))}}function of(e){var t=e.alternate;return e===Ce||t!==null&&t===Ce}function cf(e,t){Wn=Ii=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function df(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,kc(e,s)}}var $i={readContext:Tt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},Z0={readContext:Tt,useCallback:function(e,t){return ss().memoizedState=[e,t===void 0?null:t],e},useContext:Tt,useEffect:xu,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,di(4194308,4,tf.bind(null,t,e),s)},useLayoutEffect:function(e,t){return di(4194308,4,e,t)},useInsertionEffect:function(e,t){return di(4,2,e,t)},useMemo:function(e,t){var s=ss();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=ss();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Y0.bind(null,Ce,e),[n.memoizedState,e]},useRef:function(e){var t=ss();return e={current:e},t.memoizedState=e},useState:gu,useDebugValue:Jc,useDeferredValue:function(e){return ss().memoizedState=e},useTransition:function(){var e=gu(!1),t=e[0];return e=Q0.bind(null,e[1]),ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Ce,a=ss();if(_e){if(s===void 0)throw Error(F(407));s=s()}else{if(s=t(),Ue===null)throw Error(F(349));gr&30||Gm(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,xu(Km.bind(null,n,i,e),[e]),n.flags|=2048,ha(9,Jm.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=ss(),t=Ue.identifierPrefix;if(_e){var s=fs,n=ms;s=(n&~(1<<32-qt(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=da++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=K0++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ex={readContext:Tt,useCallback:rf,useContext:Tt,useEffect:Gc,useImperativeHandle:sf,useInsertionEffect:Zm,useLayoutEffect:ef,useMemo:nf,useReducer:Bl,useRef:Xm,useState:function(){return Bl(ua)},useDebugValue:Jc,useDeferredValue:function(e){var t=Rt();return af(t,Ae.memoizedState,e)},useTransition:function(){var e=Bl(ua)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:Wm,useSyncExternalStore:Vm,useId:lf,unstable_isNewReconciler:!1},tx={readContext:Tt,useCallback:rf,useContext:Tt,useEffect:Gc,useImperativeHandle:sf,useInsertionEffect:Zm,useLayoutEffect:ef,useMemo:nf,useReducer:ql,useRef:Xm,useState:function(){return ql(ua)},useDebugValue:Jc,useDeferredValue:function(e){var t=Rt();return Ae===null?t.memoizedState=e:af(t,Ae.memoizedState,e)},useTransition:function(){var e=ql(ua)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:Wm,useSyncExternalStore:Vm,useId:lf,unstable_isNewReconciler:!1};function $t(e,t){if(e&&e.defaultProps){t=Ee({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function $o(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:Ee({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var rl={isMounted:function(e){return(e=e._reactInternals)?br(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=et(),a=Fs(e),i=ps(n,a);i.payload=t,s!=null&&(i.callback=s),t=Us(e,i,a),t!==null&&(Ht(t,e,a,n),oi(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=et(),a=Fs(e),i=ps(n,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=Us(e,i,a),t!==null&&(Ht(t,e,a,n),oi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=et(),n=Fs(e),a=ps(s,n);a.tag=2,t!=null&&(a.callback=t),t=Us(e,a,n),t!==null&&(Ht(t,e,n,s),oi(t,e,n))}};function yu(e,t,s,n,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!na(s,n)||!na(a,i):!0}function uf(e,t,s){var n=!1,a=Hs,i=t.contextType;return typeof i=="object"&&i!==null?i=Tt(i):(a=ht(t)?fr:Ye.current,n=t.contextTypes,i=(n=n!=null)?Xr(e,a):Hs),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=rl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function vu(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&rl.enqueueReplaceState(t,t.state,null)}function Oo(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},zc(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Tt(i):(i=ht(t)?fr:Ye.current,a.context=Xr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&($o(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&rl.enqueueReplaceState(a,a.state,null),Ai(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function sn(e,t){try{var s="",n=t;do s+=Pg(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Hl(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Uo(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var sx=typeof WeakMap=="function"?WeakMap:Map;function hf(e,t,s){s=ps(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Ui||(Ui=!0,Ko=n),Uo(e,t)},s}function mf(e,t,s){s=ps(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){Uo(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Uo(e,t),typeof n!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),s}function wu(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new sx;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=gx.bind(null,e,t,s),t.then(e,e))}function bu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ju(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=ps(-1,1),t.tag=2,Us(s,t,1))),s.lanes|=1),e)}var rx=js.ReactCurrentOwner,dt=!1;function Ze(e,t,s,n){t.child=e===null?Fm(t,null,s,n):en(t,e.child,s,n)}function _u(e,t,s,n,a){s=s.render;var i=t.ref;return Gr(t,a),n=Wc(e,t,s,n,i,a),s=Vc(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ws(e,t,a)):(_e&&s&&Dc(t),t.flags|=1,Ze(e,t,n,a),t.child)}function Nu(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!sd(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,ff(e,t,i,n,a)):(e=fi(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(s=s.compare,s=s!==null?s:na,s(l,n)&&e.ref===t.ref)return ws(e,t,a)}return t.flags|=1,e=Bs(i,n),e.ref=t.ref,e.return=t,t.child=e}function ff(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(na(i,n)&&e.ref===t.ref)if(dt=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(dt=!0);else return t.lanes=e.lanes,ws(e,t,a)}return zo(e,t,s,n,a)}function pf(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Br,gt),gt|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(Br,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,ve(Br,gt),gt|=n}else i!==null?(n=i.baseLanes|s,t.memoizedState=null):n=s,ve(Br,gt),gt|=n;return Ze(e,t,a,s),t.child}function gf(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function zo(e,t,s,n,a){var i=ht(s)?fr:Ye.current;return i=Xr(t,i),Gr(t,a),s=Wc(e,t,s,n,i,a),n=Vc(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ws(e,t,a)):(_e&&n&&Dc(t),t.flags|=1,Ze(e,t,s,a),t.child)}function ku(e,t,s,n,a){if(ht(s)){var i=!0;Pi(t)}else i=!1;if(Gr(t,a),t.stateNode===null)ui(e,t),uf(t,s,n),Oo(t,s,n,a),n=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var o=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=Tt(d):(d=ht(s)?fr:Ye.current,d=Xr(t,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==n||o!==d)&&vu(t,l,n,d),Es=!1;var m=t.memoizedState;l.state=m,Ai(t,n,l,a),o=t.memoizedState,c!==n||m!==o||ut.current||Es?(typeof u=="function"&&($o(t,s,u,n),o=t.memoizedState),(c=Es||yu(t,s,c,n,m,o,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),l.props=n,l.state=o,l.context=d,n=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,qm(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:$t(t.type,c),l.props=d,h=t.pendingProps,m=l.context,o=s.contextType,typeof o=="object"&&o!==null?o=Tt(o):(o=ht(s)?fr:Ye.current,o=Xr(t,o));var f=s.getDerivedStateFromProps;(u=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==h||m!==o)&&vu(t,l,n,o),Es=!1,m=t.memoizedState,l.state=m,Ai(t,n,l,a);var y=t.memoizedState;c!==h||m!==y||ut.current||Es?(typeof f=="function"&&($o(t,s,f,n),y=t.memoizedState),(d=Es||yu(t,s,d,n,m,y,o)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,y,o),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,y,o)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),l.props=n,l.state=y,l.context=o,n=d):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Fo(e,t,s,n,i,a)}function Fo(e,t,s,n,a,i){gf(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return a&&du(t,s,!1),ws(e,t,i);n=t.stateNode,rx.current=t;var c=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=en(t,e.child,null,i),t.child=en(t,null,c,i)):Ze(e,t,c,i),t.memoizedState=n.state,a&&du(t,s,!0),t.child}function xf(e){var t=e.stateNode;t.pendingContext?cu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cu(e,t.context,!1),Fc(e,t.containerInfo)}function Su(e,t,s,n,a){return Zr(),Lc(a),t.flags|=256,Ze(e,t,s,n),t.child}var Bo={dehydrated:null,treeContext:null,retryLane:0};function qo(e){return{baseLanes:e,cachePool:null,transitions:null}}function yf(e,t,s){var n=t.pendingProps,a=Se.current,i=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ve(Se,a&1),e===null)return Lo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=il(l,n,0,null),e=hr(e,n,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=qo(s),t.memoizedState=Bo,e):Kc(t,l));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return nx(e,t,l,n,c,a,s);if(i){i=n.fallback,l=t.mode,a=e.child,c=a.sibling;var o={mode:"hidden",children:n.children};return!(l&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=o,t.deletions=null):(n=Bs(a,o),n.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=Bs(c,i):(i=hr(i,l,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?qo(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~s,t.memoizedState=Bo,n}return i=e.child,e=i.sibling,n=Bs(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Kc(e,t){return t=il({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ga(e,t,s,n){return n!==null&&Lc(n),en(t,e.child,null,s),e=Kc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nx(e,t,s,n,a,i,l){if(s)return t.flags&256?(t.flags&=-257,n=Hl(Error(F(422))),Ga(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=il({mode:"visible",children:n.children},a,0,null),i=hr(i,a,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&en(t,e.child,null,l),t.child.memoizedState=qo(l),t.memoizedState=Bo,i);if(!(t.mode&1))return Ga(e,t,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var c=n.dgst;return n=c,i=Error(F(419)),n=Hl(i,n,void 0),Ga(e,t,l,n)}if(c=(l&e.childLanes)!==0,dt||c){if(n=Ue,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,vs(e,a),Ht(n,e,a,-1))}return td(),n=Hl(Error(F(421))),Ga(e,t,l,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=xx.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,xt=Os(a.nextSibling),yt=t,_e=!0,zt=null,e!==null&&(Nt[kt++]=ms,Nt[kt++]=fs,Nt[kt++]=pr,ms=e.id,fs=e.overflow,pr=t),t=Kc(t,n.children),t.flags|=4096,t)}function Cu(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Io(e.return,t,s)}function Wl(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function vf(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Ze(e,t,n.children,s),n=Se.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cu(e,s,t);else if(e.tag===19)Cu(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ve(Se,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&Li(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Wl(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Li(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Wl(t,!0,s,null,i);break;case"together":Wl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ui(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ws(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),xr|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,s=Bs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Bs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function ax(e,t,s){switch(t.tag){case 3:xf(t),Zr();break;case 5:Hm(t);break;case 1:ht(t.type)&&Pi(t);break;case 4:Fc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ve(Mi,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ve(Se,Se.current&1),t.flags|=128,null):s&t.child.childLanes?yf(e,t,s):(ve(Se,Se.current&1),e=ws(e,t,s),e!==null?e.sibling:null);ve(Se,Se.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return vf(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ve(Se,Se.current),n)break;return null;case 22:case 23:return t.lanes=0,pf(e,t,s)}return ws(e,t,s)}var wf,Ho,bf,jf;wf=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Ho=function(){};bf=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,dr(ls.current);var i=null;switch(s){case"input":a=ho(e,a),n=ho(e,n),i=[];break;case"select":a=Ee({},a,{value:void 0}),n=Ee({},n,{value:void 0}),i=[];break;case"textarea":a=po(e,a),n=po(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ci)}xo(s,n);var l;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var c=a[d];for(l in c)c.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Yn.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var o=n[d];if(c=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&o!==c&&(o!=null||c!=null))if(d==="style")if(c){for(l in c)!c.hasOwnProperty(l)||o&&o.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in o)o.hasOwnProperty(l)&&c[l]!==o[l]&&(s||(s={}),s[l]=o[l])}else s||(i||(i=[]),i.push(d,s)),s=o;else d==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(i=i||[]).push(d,o)):d==="children"?typeof o!="string"&&typeof o!="number"||(i=i||[]).push(d,""+o):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Yn.hasOwnProperty(d)?(o!=null&&d==="onScroll"&&be("scroll",e),i||c===o||(i=[])):(i=i||[]).push(d,o))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};jf=function(e,t,s,n){s!==n&&(t.flags|=4)};function Cn(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function ix(e,t,s){var n=t.pendingProps;switch(Ac(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return ht(t.type)&&Ei(),Je(t),null;case 3:return n=t.stateNode,tn(),je(ut),je(Ye),qc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zt!==null&&(Xo(zt),zt=null))),Ho(e,t),Je(t),null;case 5:Bc(t);var a=dr(ca.current);if(s=t.type,e!==null&&t.stateNode!=null)bf(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(F(166));return Je(t),null}if(e=dr(ls.current),Wa(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[rs]=t,n[la]=i,e=(t.mode&1)!==0,s){case"dialog":be("cancel",n),be("close",n);break;case"iframe":case"object":case"embed":be("load",n);break;case"video":case"audio":for(a=0;a<$n.length;a++)be($n[a],n);break;case"source":be("error",n);break;case"img":case"image":case"link":be("error",n),be("load",n);break;case"details":be("toggle",n);break;case"input":Id(n,i),be("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},be("invalid",n);break;case"textarea":Od(n,i),be("invalid",n)}xo(s,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="children"?typeof c=="string"?n.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ha(n.textContent,c,e),a=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ha(n.textContent,c,e),a=["children",""+c]):Yn.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&be("scroll",n)}switch(s){case"input":Ia(n),$d(n,i,!0);break;case"textarea":Ia(n),Ud(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ci)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Kh(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(s,{is:n.is}):(e=l.createElement(s),s==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,s),e[rs]=t,e[la]=n,wf(e,t,!1,!1),t.stateNode=e;e:{switch(l=yo(s,n),s){case"dialog":be("cancel",e),be("close",e),a=n;break;case"iframe":case"object":case"embed":be("load",e),a=n;break;case"video":case"audio":for(a=0;a<$n.length;a++)be($n[a],e);a=n;break;case"source":be("error",e),a=n;break;case"img":case"image":case"link":be("error",e),be("load",e),a=n;break;case"details":be("toggle",e),a=n;break;case"input":Id(e,n),a=ho(e,n),be("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ee({},n,{value:void 0}),be("invalid",e);break;case"textarea":Od(e,n),a=po(e,n),be("invalid",e);break;default:a=n}xo(s,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var o=c[i];i==="style"?Xh(e,o):i==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&Qh(e,o)):i==="children"?typeof o=="string"?(s!=="textarea"||o!=="")&&Xn(e,o):typeof o=="number"&&Xn(e,""+o):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yn.hasOwnProperty(i)?o!=null&&i==="onScroll"&&be("scroll",e):o!=null&&vc(e,i,o,l))}switch(s){case"input":Ia(e),$d(e,n,!1);break;case"textarea":Ia(e),Ud(e);break;case"option":n.value!=null&&e.setAttribute("value",""+qs(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?qr(e,!!n.multiple,i,!1):n.defaultValue!=null&&qr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ci)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Je(t),null;case 6:if(e&&t.stateNode!=null)jf(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(F(166));if(s=dr(ca.current),dr(ls.current),Wa(t)){if(n=t.stateNode,s=t.memoizedProps,n[rs]=t,(i=n.nodeValue!==s)&&(e=yt,e!==null))switch(e.tag){case 3:Ha(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ha(n.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[rs]=t,t.stateNode=n}return Je(t),null;case 13:if(je(Se),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_e&&xt!==null&&t.mode&1&&!(t.flags&128))Um(),Zr(),t.flags|=98560,i=!1;else if(i=Wa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(F(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[rs]=t}else Zr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Je(t),i=!1}else zt!==null&&(Xo(zt),zt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Se.current&1?Le===0&&(Le=3):td())),t.updateQueue!==null&&(t.flags|=4),Je(t),null);case 4:return tn(),Ho(e,t),e===null&&aa(t.stateNode.containerInfo),Je(t),null;case 10:return Oc(t.type._context),Je(t),null;case 17:return ht(t.type)&&Ei(),Je(t),null;case 19:if(je(Se),i=t.memoizedState,i===null)return Je(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)Cn(i,!1);else{if(Le!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Li(e),l!==null){for(t.flags|=128,Cn(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)i=s,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ve(Se,Se.current&1|2),t.child}e=e.sibling}i.tail!==null&&Me()>rn&&(t.flags|=128,n=!0,Cn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Li(l),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Cn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!_e)return Je(t),null}else 2*Me()-i.renderingStartTime>rn&&s!==1073741824&&(t.flags|=128,n=!0,Cn(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(s=i.last,s!==null?s.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Me(),t.sibling=null,s=Se.current,ve(Se,n?s&1|2:s&1),t):(Je(t),null);case 22:case 23:return ed(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?gt&1073741824&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function lx(e,t){switch(Ac(t),t.tag){case 1:return ht(t.type)&&Ei(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return tn(),je(ut),je(Ye),qc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Bc(t),null;case 13:if(je(Se),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));Zr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return je(Se),null;case 4:return tn(),null;case 10:return Oc(t.type._context),null;case 22:case 23:return ed(),null;case 24:return null;default:return null}}var Ja=!1,Ke=!1,ox=typeof WeakSet=="function"?WeakSet:Set,K=null;function Fr(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Te(e,t,n)}else s.current=null}function Wo(e,t,s){try{s()}catch(n){Te(e,t,n)}}var Eu=!1;function cx(e,t){if(Eo=Ni,e=Sm(),Mc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var l=0,c=-1,o=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var f;h!==s||a!==0&&h.nodeType!==3||(c=l+a),h!==i||n!==0&&h.nodeType!==3||(o=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(f=h.firstChild)!==null;)m=h,h=f;for(;;){if(h===e)break t;if(m===s&&++d===a&&(c=l),m===i&&++u===n&&(o=l),(f=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=f}s=c===-1||o===-1?null:{start:c,end:o}}else s=null}s=s||{start:0,end:0}}else s=null;for(Po={focusedElem:e,selectionRange:s},Ni=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,v=y.memoizedState,p=t.stateNode,w=p.getSnapshotBeforeUpdate(t.elementType===t.type?g:$t(t.type,g),v);p.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(_){Te(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return y=Eu,Eu=!1,y}function Vn(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Wo(t,s,i)}a=a.next}while(a!==n)}}function nl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function Vo(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function _f(e){var t=e.alternate;t!==null&&(e.alternate=null,_f(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rs],delete t[la],delete t[Mo],delete t[W0],delete t[V0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Nf(e){return e.tag===5||e.tag===3||e.tag===4}function Pu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Go(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Ci));else if(n!==4&&(e=e.child,e!==null))for(Go(e,t,s),e=e.sibling;e!==null;)Go(e,t,s),e=e.sibling}function Jo(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Jo(e,t,s),e=e.sibling;e!==null;)Jo(e,t,s),e=e.sibling}var Fe=null,Ot=!1;function Ns(e,t,s){for(s=s.child;s!==null;)kf(e,t,s),s=s.sibling}function kf(e,t,s){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(Qi,s)}catch{}switch(s.tag){case 5:Ke||Fr(s,t);case 6:var n=Fe,a=Ot;Fe=null,Ns(e,t,s),Fe=n,Ot=a,Fe!==null&&(Ot?(e=Fe,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Fe.removeChild(s.stateNode));break;case 18:Fe!==null&&(Ot?(e=Fe,s=s.stateNode,e.nodeType===8?Ol(e.parentNode,s):e.nodeType===1&&Ol(e,s),sa(e)):Ol(Fe,s.stateNode));break;case 4:n=Fe,a=Ot,Fe=s.stateNode.containerInfo,Ot=!0,Ns(e,t,s),Fe=n,Ot=a;break;case 0:case 11:case 14:case 15:if(!Ke&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Wo(s,t,l),a=a.next}while(a!==n)}Ns(e,t,s);break;case 1:if(!Ke&&(Fr(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(c){Te(s,t,c)}Ns(e,t,s);break;case 21:Ns(e,t,s);break;case 22:s.mode&1?(Ke=(n=Ke)||s.memoizedState!==null,Ns(e,t,s),Ke=n):Ns(e,t,s);break;default:Ns(e,t,s)}}function Tu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new ox),t.forEach(function(n){var a=yx.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function It(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:Fe=c.stateNode,Ot=!1;break e;case 3:Fe=c.stateNode.containerInfo,Ot=!0;break e;case 4:Fe=c.stateNode.containerInfo,Ot=!0;break e}c=c.return}if(Fe===null)throw Error(F(160));kf(i,l,a),Fe=null,Ot=!1;var o=a.alternate;o!==null&&(o.return=null),a.return=null}catch(d){Te(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Sf(t,e),t=t.sibling}function Sf(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),Xt(e),n&4){try{Vn(3,e,e.return),nl(3,e)}catch(g){Te(e,e.return,g)}try{Vn(5,e,e.return)}catch(g){Te(e,e.return,g)}}break;case 1:It(t,e),Xt(e),n&512&&s!==null&&Fr(s,s.return);break;case 5:if(It(t,e),Xt(e),n&512&&s!==null&&Fr(s,s.return),e.flags&32){var a=e.stateNode;try{Xn(a,"")}catch(g){Te(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=s!==null?s.memoizedProps:i,c=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Gh(a,i),yo(c,l);var d=yo(c,i);for(l=0;l<o.length;l+=2){var u=o[l],h=o[l+1];u==="style"?Xh(a,h):u==="dangerouslySetInnerHTML"?Qh(a,h):u==="children"?Xn(a,h):vc(a,u,h,d)}switch(c){case"input":mo(a,i);break;case"textarea":Jh(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?qr(a,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?qr(a,!!i.multiple,i.defaultValue,!0):qr(a,!!i.multiple,i.multiple?[]:"",!1))}a[la]=i}catch(g){Te(e,e.return,g)}}break;case 6:if(It(t,e),Xt(e),n&4){if(e.stateNode===null)throw Error(F(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Te(e,e.return,g)}}break;case 3:if(It(t,e),Xt(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{sa(t.containerInfo)}catch(g){Te(e,e.return,g)}break;case 4:It(t,e),Xt(e);break;case 13:It(t,e),Xt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Xc=Me())),n&4&&Tu(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(Ke=(d=Ke)||u,It(t,e),Ke=d):It(t,e),Xt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(K=e,u=e.child;u!==null;){for(h=K=u;K!==null;){switch(m=K,f=m.child,m.tag){case 0:case 11:case 14:case 15:Vn(4,m,m.return);break;case 1:Fr(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){n=m,s=m.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){Te(n,s,g)}}break;case 5:Fr(m,m.return);break;case 22:if(m.memoizedState!==null){Mu(h);continue}}f!==null?(f.return=m,K=f):Mu(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=h.stateNode,o=h.memoizedProps.style,l=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=Yh("display",l))}catch(g){Te(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Te(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:It(t,e),Xt(e),n&4&&Tu(e);break;case 21:break;default:It(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Nf(s)){var n=s;break e}s=s.return}throw Error(F(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Xn(a,""),n.flags&=-33);var i=Pu(e);Jo(e,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Pu(e);Go(e,c,l);break;default:throw Error(F(161))}}catch(o){Te(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dx(e,t,s){K=e,Cf(e)}function Cf(e,t,s){for(var n=(e.mode&1)!==0;K!==null;){var a=K,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||Ja;if(!l){var c=a.alternate,o=c!==null&&c.memoizedState!==null||Ke;c=Ja;var d=Ke;if(Ja=l,(Ke=o)&&!d)for(K=a;K!==null;)l=K,o=l.child,l.tag===22&&l.memoizedState!==null?Du(a):o!==null?(o.return=l,K=o):Du(a);for(;i!==null;)K=i,Cf(i),i=i.sibling;K=a,Ja=c,Ke=d}Ru(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,K=i):Ru(e)}}function Ru(e){for(;K!==null;){var t=K;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ke||nl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ke)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:$t(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&pu(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}pu(t,l,s)}break;case 5:var c=t.stateNode;if(s===null&&t.flags&4){s=c;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&s.focus();break;case"img":o.src&&(s.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&sa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Ke||t.flags&512&&Vo(t)}catch(m){Te(t,t.return,m)}}if(t===e){K=null;break}if(s=t.sibling,s!==null){s.return=t.return,K=s;break}K=t.return}}function Mu(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var s=t.sibling;if(s!==null){s.return=t.return,K=s;break}K=t.return}}function Du(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{nl(4,t)}catch(o){Te(t,s,o)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(o){Te(t,a,o)}}var i=t.return;try{Vo(t)}catch(o){Te(t,i,o)}break;case 5:var l=t.return;try{Vo(t)}catch(o){Te(t,l,o)}}}catch(o){Te(t,t.return,o)}if(t===e){K=null;break}var c=t.sibling;if(c!==null){c.return=t.return,K=c;break}K=t.return}}var ux=Math.ceil,Oi=js.ReactCurrentDispatcher,Qc=js.ReactCurrentOwner,Et=js.ReactCurrentBatchConfig,ge=0,Ue=null,De=null,qe=0,gt=0,Br=Js(0),Le=0,ma=null,xr=0,al=0,Yc=0,Gn=null,ot=null,Xc=0,rn=1/0,ds=null,Ui=!1,Ko=null,zs=null,Ka=!1,As=null,zi=0,Jn=0,Qo=null,hi=-1,mi=0;function et(){return ge&6?Me():hi!==-1?hi:hi=Me()}function Fs(e){return e.mode&1?ge&2&&qe!==0?qe&-qe:J0.transition!==null?(mi===0&&(mi=dm()),mi):(e=xe,e!==0||(e=window.event,e=e===void 0?16:xm(e.type)),e):1}function Ht(e,t,s,n){if(50<Jn)throw Jn=0,Qo=null,Error(F(185));va(e,s,n),(!(ge&2)||e!==Ue)&&(e===Ue&&(!(ge&2)&&(al|=s),Le===4&&Rs(e,qe)),mt(e,n),s===1&&ge===0&&!(t.mode&1)&&(rn=Me()+500,tl&&Ks()))}function mt(e,t){var s=e.callbackNode;Jg(e,t);var n=_i(e,e===Ue?qe:0);if(n===0)s!==null&&Bd(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&Bd(s),t===1)e.tag===0?G0(Au.bind(null,e)):Im(Au.bind(null,e)),q0(function(){!(ge&6)&&Ks()}),s=null;else{switch(um(n)){case 1:s=Nc;break;case 4:s=om;break;case 16:s=ji;break;case 536870912:s=cm;break;default:s=ji}s=Lf(s,Ef.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Ef(e,t){if(hi=-1,mi=0,ge&6)throw Error(F(327));var s=e.callbackNode;if(Jr()&&e.callbackNode!==s)return null;var n=_i(e,e===Ue?qe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Fi(e,n);else{t=n;var a=ge;ge|=2;var i=Tf();(Ue!==e||qe!==t)&&(ds=null,rn=Me()+500,ur(e,t));do try{fx();break}catch(c){Pf(e,c)}while(!0);$c(),Oi.current=i,ge=a,De!==null?t=0:(Ue=null,qe=0,t=Le)}if(t!==0){if(t===2&&(a=_o(e),a!==0&&(n=a,t=Yo(e,a))),t===1)throw s=ma,ur(e,0),Rs(e,n),mt(e,Me()),s;if(t===6)Rs(e,n);else{if(a=e.current.alternate,!(n&30)&&!hx(a)&&(t=Fi(e,n),t===2&&(i=_o(e),i!==0&&(n=i,t=Yo(e,i))),t===1))throw s=ma,ur(e,0),Rs(e,n),mt(e,Me()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(F(345));case 2:ar(e,ot,ds);break;case 3:if(Rs(e,n),(n&130023424)===n&&(t=Xc+500-Me(),10<t)){if(_i(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){et(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ro(ar.bind(null,e,ot,ds),t);break}ar(e,ot,ds);break;case 4:if(Rs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-qt(n);i=1<<l,l=t[l],l>a&&(a=l),n&=~i}if(n=a,n=Me()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ux(n/1960))-n,10<n){e.timeoutHandle=Ro(ar.bind(null,e,ot,ds),n);break}ar(e,ot,ds);break;case 5:ar(e,ot,ds);break;default:throw Error(F(329))}}}return mt(e,Me()),e.callbackNode===s?Ef.bind(null,e):null}function Yo(e,t){var s=Gn;return e.current.memoizedState.isDehydrated&&(ur(e,t).flags|=256),e=Fi(e,t),e!==2&&(t=ot,ot=s,t!==null&&Xo(t)),e}function Xo(e){ot===null?ot=e:ot.push.apply(ot,e)}function hx(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!Vt(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rs(e,t){for(t&=~Yc,t&=~al,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-qt(t),n=1<<s;e[s]=-1,t&=~n}}function Au(e){if(ge&6)throw Error(F(327));Jr();var t=_i(e,0);if(!(t&1))return mt(e,Me()),null;var s=Fi(e,t);if(e.tag!==0&&s===2){var n=_o(e);n!==0&&(t=n,s=Yo(e,n))}if(s===1)throw s=ma,ur(e,0),Rs(e,t),mt(e,Me()),s;if(s===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ar(e,ot,ds),mt(e,Me()),null}function Zc(e,t){var s=ge;ge|=1;try{return e(t)}finally{ge=s,ge===0&&(rn=Me()+500,tl&&Ks())}}function yr(e){As!==null&&As.tag===0&&!(ge&6)&&Jr();var t=ge;ge|=1;var s=Et.transition,n=xe;try{if(Et.transition=null,xe=1,e)return e()}finally{xe=n,Et.transition=s,ge=t,!(ge&6)&&Ks()}}function ed(){gt=Br.current,je(Br)}function ur(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,B0(s)),De!==null)for(s=De.return;s!==null;){var n=s;switch(Ac(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ei();break;case 3:tn(),je(ut),je(Ye),qc();break;case 5:Bc(n);break;case 4:tn();break;case 13:je(Se);break;case 19:je(Se);break;case 10:Oc(n.type._context);break;case 22:case 23:ed()}s=s.return}if(Ue=e,De=e=Bs(e.current,null),qe=gt=t,Le=0,ma=null,Yc=al=xr=0,ot=Gn=null,cr!==null){for(t=0;t<cr.length;t++)if(s=cr[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}s.pending=n}cr=null}return e}function Pf(e,t){do{var s=De;try{if($c(),ci.current=$i,Ii){for(var n=Ce.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ii=!1}if(gr=0,Oe=Ae=Ce=null,Wn=!1,da=0,Qc.current=null,s===null||s.return===null){Le=1,ma=t,De=null;break}e:{var i=e,l=s.return,c=s,o=t;if(t=qe,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=o,u=c,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=bu(l);if(f!==null){f.flags&=-257,ju(f,l,c,i,t),f.mode&1&&wu(i,d,t),t=f,o=d;var y=t.updateQueue;if(y===null){var g=new Set;g.add(o),t.updateQueue=g}else y.add(o);break e}else{if(!(t&1)){wu(i,d,t),td();break e}o=Error(F(426))}}else if(_e&&c.mode&1){var v=bu(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),ju(v,l,c,i,t),Lc(sn(o,c));break e}}i=o=sn(o,c),Le!==4&&(Le=2),Gn===null?Gn=[i]:Gn.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=hf(i,o,t);fu(i,p);break e;case 1:c=o;var w=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zs===null||!zs.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=mf(i,c,t);fu(i,_);break e}}i=i.return}while(i!==null)}Mf(s)}catch(P){t=P,De===s&&s!==null&&(De=s=s.return);continue}break}while(!0)}function Tf(){var e=Oi.current;return Oi.current=$i,e===null?$i:e}function td(){(Le===0||Le===3||Le===2)&&(Le=4),Ue===null||!(xr&268435455)&&!(al&268435455)||Rs(Ue,qe)}function Fi(e,t){var s=ge;ge|=2;var n=Tf();(Ue!==e||qe!==t)&&(ds=null,ur(e,t));do try{mx();break}catch(a){Pf(e,a)}while(!0);if($c(),ge=s,Oi.current=n,De!==null)throw Error(F(261));return Ue=null,qe=0,Le}function mx(){for(;De!==null;)Rf(De)}function fx(){for(;De!==null&&!Ug();)Rf(De)}function Rf(e){var t=Af(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?Mf(e):De=t,Qc.current=null}function Mf(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=lx(s,t),s!==null){s.flags&=32767,De=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Le=6,De=null;return}}else if(s=ix(s,t,gt),s!==null){De=s;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);Le===0&&(Le=5)}function ar(e,t,s){var n=xe,a=Et.transition;try{Et.transition=null,xe=1,px(e,t,s,n)}finally{Et.transition=a,xe=n}return null}function px(e,t,s,n){do Jr();while(As!==null);if(ge&6)throw Error(F(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(Kg(e,i),e===Ue&&(De=Ue=null,qe=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ka||(Ka=!0,Lf(ji,function(){return Jr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Et.transition,Et.transition=null;var l=xe;xe=1;var c=ge;ge|=4,Qc.current=null,cx(e,s),Sf(s,e),L0(Po),Ni=!!Eo,Po=Eo=null,e.current=s,dx(s),zg(),ge=c,xe=l,Et.transition=i}else e.current=s;if(Ka&&(Ka=!1,As=e,zi=a),i=e.pendingLanes,i===0&&(zs=null),qg(s.stateNode),mt(e,Me()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ui)throw Ui=!1,e=Ko,Ko=null,e;return zi&1&&e.tag!==0&&Jr(),i=e.pendingLanes,i&1?e===Qo?Jn++:(Jn=0,Qo=e):Jn=0,Ks(),null}function Jr(){if(As!==null){var e=um(zi),t=Et.transition,s=xe;try{if(Et.transition=null,xe=16>e?16:e,As===null)var n=!1;else{if(e=As,As=null,zi=0,ge&6)throw Error(F(331));var a=ge;for(ge|=4,K=e.current;K!==null;){var i=K,l=i.child;if(K.flags&16){var c=i.deletions;if(c!==null){for(var o=0;o<c.length;o++){var d=c[o];for(K=d;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:Vn(8,u,i)}var h=u.child;if(h!==null)h.return=u,K=h;else for(;K!==null;){u=K;var m=u.sibling,f=u.return;if(_f(u),u===d){K=null;break}if(m!==null){m.return=f,K=m;break}K=f}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}K=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,K=l;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Vn(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,K=p;break e}K=i.return}}var w=e.current;for(K=w;K!==null;){l=K;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,K=b;else e:for(l=w;K!==null;){if(c=K,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:nl(9,c)}}catch(P){Te(c,c.return,P)}if(c===l){K=null;break e}var _=c.sibling;if(_!==null){_.return=c.return,K=_;break e}K=c.return}}if(ge=a,Ks(),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(Qi,e)}catch{}n=!0}return n}finally{xe=s,Et.transition=t}}return!1}function Lu(e,t,s){t=sn(s,t),t=hf(e,t,1),e=Us(e,t,1),t=et(),e!==null&&(va(e,1,t),mt(e,t))}function Te(e,t,s){if(e.tag===3)Lu(e,e,s);else for(;t!==null;){if(t.tag===3){Lu(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(zs===null||!zs.has(n))){e=sn(s,e),e=mf(t,e,1),t=Us(t,e,1),e=et(),t!==null&&(va(t,1,e),mt(t,e));break}}t=t.return}}function gx(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&s,Ue===e&&(qe&s)===s&&(Le===4||Le===3&&(qe&130023424)===qe&&500>Me()-Xc?ur(e,0):Yc|=s),mt(e,t)}function Df(e,t){t===0&&(e.mode&1?(t=Ua,Ua<<=1,!(Ua&130023424)&&(Ua=4194304)):t=1);var s=et();e=vs(e,t),e!==null&&(va(e,t,s),mt(e,s))}function xx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Df(e,s)}function yx(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(F(314))}n!==null&&n.delete(t),Df(e,s)}var Af;Af=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||ut.current)dt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return dt=!1,ax(e,t,s);dt=!!(e.flags&131072)}else dt=!1,_e&&t.flags&1048576&&$m(t,Ri,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ui(e,t),e=t.pendingProps;var a=Xr(t,Ye.current);Gr(t,s),a=Wc(null,t,n,e,a,s);var i=Vc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ht(n)?(i=!0,Pi(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,zc(t),a.updater=rl,t.stateNode=a,a._reactInternals=t,Oo(t,n,e,s),t=Fo(null,t,n,!0,i,s)):(t.tag=0,_e&&i&&Dc(t),Ze(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(ui(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=wx(n),e=$t(n,e),a){case 0:t=zo(null,t,n,e,s);break e;case 1:t=ku(null,t,n,e,s);break e;case 11:t=_u(null,t,n,e,s);break e;case 14:t=Nu(null,t,n,$t(n.type,e),s);break e}throw Error(F(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$t(n,a),zo(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$t(n,a),ku(e,t,n,a,s);case 3:e:{if(xf(t),e===null)throw Error(F(387));n=t.pendingProps,i=t.memoizedState,a=i.element,qm(e,t),Ai(t,n,null,s);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=sn(Error(F(423)),t),t=Su(e,t,n,s,a);break e}else if(n!==a){a=sn(Error(F(424)),t),t=Su(e,t,n,s,a);break e}else for(xt=Os(t.stateNode.containerInfo.firstChild),yt=t,_e=!0,zt=null,s=Fm(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Zr(),n===a){t=ws(e,t,s);break e}Ze(e,t,n,s)}t=t.child}return t;case 5:return Hm(t),e===null&&Lo(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,To(n,a)?l=null:i!==null&&To(n,i)&&(t.flags|=32),gf(e,t),Ze(e,t,l,s),t.child;case 6:return e===null&&Lo(t),null;case 13:return yf(e,t,s);case 4:return Fc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=en(t,null,n,s):Ze(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$t(n,a),_u(e,t,n,a,s);case 7:return Ze(e,t,t.pendingProps,s),t.child;case 8:return Ze(e,t,t.pendingProps.children,s),t.child;case 12:return Ze(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,ve(Mi,n._currentValue),n._currentValue=l,i!==null)if(Vt(i.value,l)){if(i.children===a.children&&!ut.current){t=ws(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){l=i.child;for(var o=c.firstContext;o!==null;){if(o.context===n){if(i.tag===1){o=ps(-1,s&-s),o.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?o.next=o:(o.next=u.next,u.next=o),d.pending=o}}i.lanes|=s,o=i.alternate,o!==null&&(o.lanes|=s),Io(i.return,s,t),c.lanes|=s;break}o=o.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(F(341));l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),Io(l,s,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Ze(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Gr(t,s),a=Tt(a),n=n(a),t.flags|=1,Ze(e,t,n,s),t.child;case 14:return n=t.type,a=$t(n,t.pendingProps),a=$t(n.type,a),Nu(e,t,n,a,s);case 15:return ff(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:$t(n,a),ui(e,t),t.tag=1,ht(n)?(e=!0,Pi(t)):e=!1,Gr(t,s),uf(t,n,a),Oo(t,n,a,s),Fo(null,t,n,!0,e,s);case 19:return vf(e,t,s);case 22:return pf(e,t,s)}throw Error(F(156,t.tag))};function Lf(e,t){return lm(e,t)}function vx(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,s,n){return new vx(e,t,s,n)}function sd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wx(e){if(typeof e=="function")return sd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bc)return 11;if(e===jc)return 14}return 2}function Bs(e,t){var s=e.alternate;return s===null?(s=St(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function fi(e,t,s,n,a,i){var l=2;if(n=e,typeof e=="function")sd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Mr:return hr(s.children,a,i,t);case wc:l=8,a|=8;break;case lo:return e=St(12,s,t,a|2),e.elementType=lo,e.lanes=i,e;case oo:return e=St(13,s,t,a),e.elementType=oo,e.lanes=i,e;case co:return e=St(19,s,t,a),e.elementType=co,e.lanes=i,e;case Hh:return il(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Bh:l=10;break e;case qh:l=9;break e;case bc:l=11;break e;case jc:l=14;break e;case Cs:l=16,n=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=St(l,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function hr(e,t,s,n){return e=St(7,e,n,t),e.lanes=s,e}function il(e,t,s,n){return e=St(22,e,n,t),e.elementType=Hh,e.lanes=s,e.stateNode={isHidden:!1},e}function Vl(e,t,s){return e=St(6,e,null,t),e.lanes=s,e}function Gl(e,t,s){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bx(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cl(0),this.expirationTimes=Cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function rd(e,t,s,n,a,i,l,c,o){return e=new bx(e,t,s,c,o),t===1?(t=1,i===!0&&(t|=8)):t=0,i=St(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},zc(i),e}function jx(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function If(e){if(!e)return Hs;e=e._reactInternals;e:{if(br(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var s=e.type;if(ht(s))return Lm(e,s,t)}return t}function $f(e,t,s,n,a,i,l,c,o){return e=rd(s,n,!0,e,a,i,l,c,o),e.context=If(null),s=e.current,n=et(),a=Fs(s),i=ps(n,a),i.callback=t??null,Us(s,i,a),e.current.lanes=a,va(e,a,n),mt(e,n),e}function ll(e,t,s,n){var a=t.current,i=et(),l=Fs(a);return s=If(s),t.context===null?t.context=s:t.pendingContext=s,t=ps(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Us(a,t,l),e!==null&&(Ht(e,a,l,i),oi(e,a,l)),l}function Bi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Iu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function nd(e,t){Iu(e,t),(e=e.alternate)&&Iu(e,t)}function _x(){return null}var Of=typeof reportError=="function"?reportError:function(e){console.error(e)};function ad(e){this._internalRoot=e}ol.prototype.render=ad.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));ll(e,t,null,null)};ol.prototype.unmount=ad.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yr(function(){ll(null,e,null,null)}),t[ys]=null}};function ol(e){this._internalRoot=e}ol.prototype.unstable_scheduleHydration=function(e){if(e){var t=fm();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Ts.length&&t!==0&&t<Ts[s].priority;s++);Ts.splice(s,0,e),s===0&&gm(e)}};function id(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $u(){}function Nx(e,t,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Bi(l);i.call(d)}}var l=$f(t,n,e,0,null,!1,!1,"",$u);return e._reactRootContainer=l,e[ys]=l.current,aa(e.nodeType===8?e.parentNode:e),yr(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var c=n;n=function(){var d=Bi(o);c.call(d)}}var o=rd(e,0,!1,null,null,!1,!1,"",$u);return e._reactRootContainer=o,e[ys]=o.current,aa(e.nodeType===8?e.parentNode:e),yr(function(){ll(t,o,s,n)}),o}function dl(e,t,s,n,a){var i=s._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var c=a;a=function(){var o=Bi(l);c.call(o)}}ll(t,l,e,a)}else l=Nx(s,t,e,a,n);return Bi(l)}hm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=In(t.pendingLanes);s!==0&&(kc(t,s|1),mt(t,Me()),!(ge&6)&&(rn=Me()+500,Ks()))}break;case 13:yr(function(){var n=vs(e,1);if(n!==null){var a=et();Ht(n,e,1,a)}}),nd(e,1)}};Sc=function(e){if(e.tag===13){var t=vs(e,134217728);if(t!==null){var s=et();Ht(t,e,134217728,s)}nd(e,134217728)}};mm=function(e){if(e.tag===13){var t=Fs(e),s=vs(e,t);if(s!==null){var n=et();Ht(s,e,t,n)}nd(e,t)}};fm=function(){return xe};pm=function(e,t){var s=xe;try{return xe=e,t()}finally{xe=s}};wo=function(e,t,s){switch(t){case"input":if(mo(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=el(n);if(!a)throw Error(F(90));Vh(n),mo(n,a)}}}break;case"textarea":Jh(e,s);break;case"select":t=s.value,t!=null&&qr(e,!!s.multiple,t,!1)}};tm=Zc;sm=yr;var kx={usingClientEntryPoint:!1,Events:[ba,Ir,el,Zh,em,Zc]},En={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sx={bundleType:En.bundleType,version:En.version,rendererPackageName:En.rendererPackageName,rendererConfig:En.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:js.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=am(e),e===null?null:e.stateNode},findFiberByHostInstance:En.findFiberByHostInstance||_x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{Qi=Qa.inject(Sx),is=Qa}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kx;wt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!id(t))throw Error(F(200));return jx(e,t,null,s)};wt.createRoot=function(e,t){if(!id(e))throw Error(F(299));var s=!1,n="",a=Of;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=rd(e,1,!1,null,null,s,!1,n,a),e[ys]=t.current,aa(e.nodeType===8?e.parentNode:e),new ad(t)};wt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=am(t),e=e===null?null:e.stateNode,e};wt.flushSync=function(e){return yr(e)};wt.hydrate=function(e,t,s){if(!cl(t))throw Error(F(200));return dl(null,e,t,!0,s)};wt.hydrateRoot=function(e,t,s){if(!id(e))throw Error(F(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",l=Of;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),t=$f(t,null,e,1,s??null,a,!1,i,l),e[ys]=t.current,aa(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new ol(t)};wt.render=function(e,t,s){if(!cl(t))throw Error(F(200));return dl(null,e,t,!1,s)};wt.unmountComponentAtNode=function(e){if(!cl(e))throw Error(F(40));return e._reactRootContainer?(yr(function(){dl(null,null,e,!1,function(){e._reactRootContainer=null,e[ys]=null})}),!0):!1};wt.unstable_batchedUpdates=Zc;wt.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!cl(s))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return dl(e,t,s,!1,n)};wt.version="18.3.1-next-f1338f8080-20240426";function Uf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uf)}catch(e){console.error(e)}}Uf(),Oh.exports=wt;var ld=Oh.exports;const Cx=Sh(ld);var zf,Ou=ld;zf=Ou.createRoot,Ou.hydrateRoot;var od={};Object.defineProperty(od,"__esModule",{value:!0});od.parse=Ax;od.serialize=Lx;const Ex=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Px=/^[\u0021-\u003A\u003C-\u007E]*$/,Tx=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Rx=/^[\u0020-\u003A\u003D-\u007E]*$/,Mx=Object.prototype.toString,Dx=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function Ax(e,t){const s=new Dx,n=e.length;if(n<2)return s;const a=(t==null?void 0:t.decode)||Ix;let i=0;do{const l=e.indexOf("=",i);if(l===-1)break;const c=e.indexOf(";",i),o=c===-1?n:c;if(l>o){i=e.lastIndexOf(";",l-1)+1;continue}const d=Uu(e,i,l),u=zu(e,l,d),h=e.slice(d,u);if(s[h]===void 0){let m=Uu(e,l+1,o),f=zu(e,o,m);const y=a(e.slice(m,f));s[h]=y}i=o+1}while(i<n);return s}function Uu(e,t,s){do{const n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<s);return s}function zu(e,t,s){for(;t>s;){const n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return s}function Lx(e,t,s){const n=(s==null?void 0:s.encode)||encodeURIComponent;if(!Ex.test(e))throw new TypeError(`argument name is invalid: ${e}`);const a=n(t);if(!Px.test(a))throw new TypeError(`argument val is invalid: ${t}`);let i=e+"="+a;if(!s)return i;if(s.maxAge!==void 0){if(!Number.isInteger(s.maxAge))throw new TypeError(`option maxAge is invalid: ${s.maxAge}`);i+="; Max-Age="+s.maxAge}if(s.domain){if(!Tx.test(s.domain))throw new TypeError(`option domain is invalid: ${s.domain}`);i+="; Domain="+s.domain}if(s.path){if(!Rx.test(s.path))throw new TypeError(`option path is invalid: ${s.path}`);i+="; Path="+s.path}if(s.expires){if(!$x(s.expires)||!Number.isFinite(s.expires.valueOf()))throw new TypeError(`option expires is invalid: ${s.expires}`);i+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.partitioned&&(i+="; Partitioned"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${s.sameSite}`)}return i}function Ix(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function $x(e){return Mx.call(e)==="[object Date]"}/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Fu="popstate";function Ox(e={}){function t(n,a){let{pathname:i,search:l,hash:c}=n.location;return Zo("",{pathname:i,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:fa(a)}return zx(t,s,null,e)}function ke(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ux(){return Math.random().toString(36).substring(2,10)}function Bu(e,t){return{usr:e.state,key:e.key,idx:t}}function Zo(e,t,s=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?fn(t):t,state:s,key:t&&t.key||n||Ux()}}function fa({pathname:e="/",search:t="",hash:s=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function fn(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function zx(e,t,s,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,c="POP",o=null,d=u();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function u(){return(l.state||{idx:null}).idx}function h(){c="POP";let v=u(),p=v==null?null:v-d;d=v,o&&o({action:c,location:g.location,delta:p})}function m(v,p){c="PUSH";let w=Zo(g.location,v,p);d=u()+1;let b=Bu(w,d),_=g.createHref(w);try{l.pushState(b,"",_)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(_)}i&&o&&o({action:c,location:g.location,delta:1})}function f(v,p){c="REPLACE";let w=Zo(g.location,v,p);d=u();let b=Bu(w,d),_=g.createHref(w);l.replaceState(b,"",_),i&&o&&o({action:c,location:g.location,delta:0})}function y(v){let p=a.location.origin!=="null"?a.location.origin:a.location.href,w=typeof v=="string"?v:fa(v);return w=w.replace(/ $/,"%20"),ke(p,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,p)}let g={get action(){return c},get location(){return e(a,l)},listen(v){if(o)throw new Error("A history only accepts one active listener");return a.addEventListener(Fu,h),o=v,()=>{a.removeEventListener(Fu,h),o=null}},createHref(v){return t(a,v)},createURL:y,encodeLocation(v){let p=y(v);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:m,replace:f,go(v){return l.go(v)}};return g}function Ff(e,t,s="/"){return Fx(e,t,s,!1)}function Fx(e,t,s,n){let a=typeof t=="string"?fn(t):t,i=Ws(a.pathname||"/",s);if(i==null)return null;let l=Bf(e);Bx(l);let c=null;for(let o=0;c==null&&o<l.length;++o){let d=Zx(i);c=Yx(l[o],d,n)}return c}function Bf(e,t=[],s=[],n=""){let a=(i,l,c)=>{let o={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};o.relativePath.startsWith("/")&&(ke(o.relativePath.startsWith(n),`Absolute route path "${o.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(n.length));let d=gs([n,o.relativePath]),u=s.concat(o);i.children&&i.children.length>0&&(ke(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Bf(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:Kx(d,i.index),routesMeta:u})};return e.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))a(i,l);else for(let o of qf(i.path))a(i,l,o)}),t}function qf(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=qf(n.join("/")),c=[];return c.push(...l.map(o=>o===""?i:[i,o].join("/"))),a&&c.push(...l),c.map(o=>e.startsWith("/")&&o===""?"/":o)}function Bx(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Qx(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var qx=/^:[\w-]+$/,Hx=3,Wx=2,Vx=1,Gx=10,Jx=-2,qu=e=>e==="*";function Kx(e,t){let s=e.split("/"),n=s.length;return s.some(qu)&&(n+=Jx),t&&(n+=Wx),s.filter(a=>!qu(a)).reduce((a,i)=>a+(qx.test(i)?Hx:i===""?Vx:Gx),n)}function Qx(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Yx(e,t,s=!1){let{routesMeta:n}=e,a={},i="/",l=[];for(let c=0;c<n.length;++c){let o=n[c],d=c===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=qi({path:o.relativePath,caseSensitive:o.caseSensitive,end:d},u),m=o.route;if(!h&&d&&s&&!n[n.length-1].route.index&&(h=qi({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},u)),!h)return null;Object.assign(a,h.params),l.push({params:a,pathname:gs([i,h.pathname]),pathnameBase:ry(gs([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=gs([i,h.pathnameBase]))}return l}function qi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=Xx(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:h},m)=>{if(u==="*"){let y=c[m]||"";l=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const f=c[m];return h&&!f?d[u]=void 0:d[u]=(f||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function Xx(e,t=!1,s=!0){Gt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,o)=>(n.push({paramName:c,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Zx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ws(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function ey(e,t="/"){let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?fn(e):e;return{pathname:s?s.startsWith("/")?s:ty(s,t):t,search:ny(n),hash:ay(a)}}function ty(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Jl(e,t,s,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sy(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function cd(e){let t=sy(e);return t.map((s,n)=>n===t.length-1?s.pathname:s.pathnameBase)}function dd(e,t,s,n=!1){let a;typeof e=="string"?a=fn(e):(a={...e},ke(!a.pathname||!a.pathname.includes("?"),Jl("?","pathname","search",a)),ke(!a.pathname||!a.pathname.includes("#"),Jl("#","pathname","hash",a)),ke(!a.search||!a.search.includes("#"),Jl("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,c;if(l==null)c=s;else{let h=t.length-1;if(!n&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}c=h>=0?t[h]:"/"}let o=ey(a,c),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&s.endsWith("/");return!o.pathname.endsWith("/")&&(d||u)&&(o.pathname+="/"),o}var gs=e=>e.join("/").replace(/\/\/+/g,"/"),ry=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ny=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ay=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function iy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Hf=["POST","PUT","PATCH","DELETE"];new Set(Hf);var ly=["GET",...Hf];new Set(ly);var pn=j.createContext(null);pn.displayName="DataRouter";var ul=j.createContext(null);ul.displayName="DataRouterState";var Wf=j.createContext({isTransitioning:!1});Wf.displayName="ViewTransition";var oy=j.createContext(new Map);oy.displayName="Fetchers";var cy=j.createContext(null);cy.displayName="Await";var Jt=j.createContext(null);Jt.displayName="Navigation";var _a=j.createContext(null);_a.displayName="Location";var os=j.createContext({outlet:null,matches:[],isDataRoute:!1});os.displayName="Route";var ud=j.createContext(null);ud.displayName="RouteError";function dy(e,{relative:t}={}){ke(gn(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=j.useContext(Jt),{hash:a,pathname:i,search:l}=ka(e,{relative:t}),c=i;return s!=="/"&&(c=i==="/"?s:gs([s,i])),n.createHref({pathname:c,search:l,hash:a})}function gn(){return j.useContext(_a)!=null}function cs(){return ke(gn(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(_a).location}var Vf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gf(e){j.useContext(Jt).static||j.useLayoutEffect(e)}function Na(){let{isDataRoute:e}=j.useContext(os);return e?_y():uy()}function uy(){ke(gn(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext(pn),{basename:t,navigator:s}=j.useContext(Jt),{matches:n}=j.useContext(os),{pathname:a}=cs(),i=JSON.stringify(cd(n)),l=j.useRef(!1);return Gf(()=>{l.current=!0}),j.useCallback((o,d={})=>{if(Gt(l.current,Vf),!l.current)return;if(typeof o=="number"){s.go(o);return}let u=dd(o,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:gs([t,u.pathname])),(d.replace?s.replace:s.push)(u,d.state,d)},[t,s,i,a,e])}j.createContext(null);function ka(e,{relative:t}={}){let{matches:s}=j.useContext(os),{pathname:n}=cs(),a=JSON.stringify(cd(s));return j.useMemo(()=>dd(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function hy(e,t){return Jf(e,t)}function Jf(e,t,s,n){var w;ke(gn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:i}=j.useContext(Jt),{matches:l}=j.useContext(os),c=l[l.length-1],o=c?c.params:{},d=c?c.pathname:"/",u=c?c.pathnameBase:"/",h=c&&c.route;{let b=h&&h.path||"";Kf(d,!h||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let m=cs(),f;if(t){let b=typeof t=="string"?fn(t):t;ke(u==="/"||((w=b.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${b.pathname}" was given in the \`location\` prop.`),f=b}else f=m;let y=f.pathname||"/",g=y;if(u!=="/"){let b=u.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=!i&&s&&s.matches&&s.matches.length>0?s.matches:Ff(e,{pathname:g});Gt(h||v!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Gt(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let p=xy(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:gs([u,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:gs([u,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),l,s,n);return t&&p?j.createElement(_a.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},p):p}function my(){let e=jy(),t=iy(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:i},"ErrorBoundary")," or"," ",j.createElement("code",{style:i},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),s?j.createElement("pre",{style:a},s):null,l)}var fy=j.createElement(my,null),py=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(os.Provider,{value:this.props.routeContext},j.createElement(ud.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gy({routeContext:e,match:t,children:s}){let n=j.useContext(pn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(os.Provider,{value:e},s)}function xy(e,t=[],s=null,n=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let a=e,i=s==null?void 0:s.errors;if(i!=null){let o=a.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);ke(o>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,o+1))}let l=!1,c=-1;if(s)for(let o=0;o<a.length;o++){let d=a[o];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=o),d.route.id){let{loaderData:u,errors:h}=s,m=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((o,d,u)=>{let h,m=!1,f=null,y=null;s&&(h=i&&d.route.id?i[d.route.id]:void 0,f=d.route.errorElement||fy,l&&(c<0&&u===0?(Kf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):c===u&&(m=!0,y=d.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,u+1)),v=()=>{let p;return h?p=f:m?p=y:d.route.Component?p=j.createElement(d.route.Component,null):d.route.element?p=d.route.element:p=o,j.createElement(gy,{match:d,routeContext:{outlet:o,matches:g,isDataRoute:s!=null},children:p})};return s&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?j.createElement(py,{location:s.location,revalidation:s.revalidation,component:f,error:h,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}function hd(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yy(e){let t=j.useContext(pn);return ke(t,hd(e)),t}function vy(e){let t=j.useContext(ul);return ke(t,hd(e)),t}function wy(e){let t=j.useContext(os);return ke(t,hd(e)),t}function md(e){let t=wy(e),s=t.matches[t.matches.length-1];return ke(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function by(){return md("useRouteId")}function jy(){var n;let e=j.useContext(ud),t=vy("useRouteError"),s=md("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function _y(){let{router:e}=yy("useNavigate"),t=md("useNavigate"),s=j.useRef(!1);return Gf(()=>{s.current=!0}),j.useCallback(async(a,i={})=>{Gt(s.current,Vf),s.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var Hu={};function Kf(e,t,s){!t&&!Hu[e]&&(Hu[e]=!0,Gt(!1,s))}j.memo(Ny);function Ny({routes:e,future:t,state:s}){return Jf(e,void 0,s,t)}function Pn({to:e,replace:t,state:s,relative:n}){ke(gn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=j.useContext(Jt);Gt(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=j.useContext(os),{pathname:l}=cs(),c=Na(),o=dd(e,cd(i),l,n==="path"),d=JSON.stringify(o);return j.useEffect(()=>{c(JSON.parse(d),{replace:t,state:s,relative:n})},[c,d,n,t,s]),null}function Ft(e){ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ky({basename:e="/",children:t=null,location:s,navigationType:n="POP",navigator:a,static:i=!1}){ke(!gn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=j.useMemo(()=>({basename:l,navigator:a,static:i,future:{}}),[l,a,i]);typeof s=="string"&&(s=fn(s));let{pathname:o="/",search:d="",hash:u="",state:h=null,key:m="default"}=s,f=j.useMemo(()=>{let y=Ws(o,l);return y==null?null:{location:{pathname:y,search:d,hash:u,state:h,key:m},navigationType:n}},[l,o,d,u,h,m,n]);return Gt(f!=null,`<Router basename="${l}"> is not able to match the URL "${o}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:j.createElement(Jt.Provider,{value:c},j.createElement(_a.Provider,{children:t,value:f}))}function fd({children:e,location:t}){return hy(ec(e),t)}function ec(e,t=[]){let s=[];return j.Children.forEach(e,(n,a)=>{if(!j.isValidElement(n))return;let i=[...t,a];if(n.type===j.Fragment){s.push.apply(s,ec(n.props.children,i));return}ke(n.type===Ft,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ke(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=ec(n.props.children,i)),s.push(l)}),s}var pi="get",gi="application/x-www-form-urlencoded";function hl(e){return e!=null&&typeof e.tagName=="string"}function Sy(e){return hl(e)&&e.tagName.toLowerCase()==="button"}function Cy(e){return hl(e)&&e.tagName.toLowerCase()==="form"}function Ey(e){return hl(e)&&e.tagName.toLowerCase()==="input"}function Py(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ty(e,t){return e.button===0&&(!t||t==="_self")&&!Py(e)}var Ya=null;function Ry(){if(Ya===null)try{new FormData(document.createElement("form"),0),Ya=!1}catch{Ya=!0}return Ya}var My=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kl(e){return e!=null&&!My.has(e)?(Gt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gi}"`),null):e}function Dy(e,t){let s,n,a,i,l;if(Cy(e)){let c=e.getAttribute("action");n=c?Ws(c,t):null,s=e.getAttribute("method")||pi,a=Kl(e.getAttribute("enctype"))||gi,i=new FormData(e)}else if(Sy(e)||Ey(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||c.getAttribute("action");if(n=o?Ws(o,t):null,s=e.getAttribute("formmethod")||c.getAttribute("method")||pi,a=Kl(e.getAttribute("formenctype"))||Kl(c.getAttribute("enctype"))||gi,i=new FormData(c,e),!Ry()){let{name:d,type:u,value:h}=e;if(u==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,h)}}else{if(hl(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=pi,n=null,a=gi,l=e}return i&&a==="text/plain"&&(l=i,i=void 0),{action:n,method:s.toLowerCase(),encType:a,formData:i,body:l}}function pd(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function Ay(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ly(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Iy(e,t,s){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let l=await Ay(i,s);return l.links?l.links():[]}return[]}));return zy(n.flat(1).filter(Ly).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Wu(e,t,s,n,a,i){let l=(o,d)=>s[d]?o.route.id!==s[d].route.id:!0,c=(o,d)=>{var u;return s[d].pathname!==o.pathname||((u=s[d].route.path)==null?void 0:u.endsWith("*"))&&s[d].params["*"]!==o.params["*"]};return i==="assets"?t.filter((o,d)=>l(o,d)||c(o,d)):i==="data"?t.filter((o,d)=>{var h;let u=n.routes[o.route.id];if(!u||!u.hasLoader)return!1;if(l(o,d)||c(o,d))return!0;if(o.route.shouldRevalidate){let m=o.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((h=s[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:o.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function $y(e,t,{includeHydrateFallback:s}={}){return Oy(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function Oy(e){return[...new Set(e)]}function Uy(e){let t={},s=Object.keys(e).sort();for(let n of s)t[n]=e[n];return t}function zy(e,t){let s=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(Uy(a));return s.has(i)||(s.add(i),n.push({key:i,link:a})),n},[])}function Fy(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function By(){let e=j.useContext(pn);return pd(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function qy(){let e=j.useContext(ul);return pd(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var gd=j.createContext(void 0);gd.displayName="FrameworkContext";function Qf(){let e=j.useContext(gd);return pd(e,"You must render this element inside a <HydratedRouter> element"),e}function Hy(e,t){let s=j.useContext(gd),[n,a]=j.useState(!1),[i,l]=j.useState(!1),{onFocus:c,onBlur:o,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=j.useRef(null);j.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let g=p=>{p.forEach(w=>{l(w.isIntersecting)})},v=new IntersectionObserver(g,{threshold:.5});return m.current&&v.observe(m.current),()=>{v.disconnect()}}},[e]),j.useEffect(()=>{if(n){let g=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(g)}}},[n]);let f=()=>{a(!0)},y=()=>{a(!1),l(!1)};return s?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Tn(c,f),onBlur:Tn(o,y),onMouseEnter:Tn(d,f),onMouseLeave:Tn(u,y),onTouchStart:Tn(h,f)}]:[!1,m,{}]}function Tn(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function Wy({page:e,...t}){let{router:s}=By(),n=j.useMemo(()=>Ff(s.routes,e,s.basename),[s.routes,e,s.basename]);return n?j.createElement(Gy,{page:e,matches:n,...t}):null}function Vy(e){let{manifest:t,routeModules:s}=Qf(),[n,a]=j.useState([]);return j.useEffect(()=>{let i=!1;return Iy(e,t,s).then(l=>{i||a(l)}),()=>{i=!0}},[e,t,s]),n}function Gy({page:e,matches:t,...s}){let n=cs(),{manifest:a,routeModules:i}=Qf(),{loaderData:l,matches:c}=qy(),o=j.useMemo(()=>Wu(e,t,c,a,n,"data"),[e,t,c,a,n]),d=j.useMemo(()=>Wu(e,t,c,a,n,"assets"),[e,t,c,a,n]),u=j.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let f=new Set,y=!1;if(t.forEach(v=>{var w;let p=a.routes[v.route.id];!p||!p.hasLoader||(!o.some(b=>b.route.id===v.route.id)&&v.route.id in l&&((w=i[v.route.id])!=null&&w.shouldRevalidate)||p.hasClientLoader?y=!0:f.add(v.route.id))}),f.size===0)return[];let g=Fy(e);return y&&f.size>0&&g.searchParams.set("_routes",t.filter(v=>f.has(v.route.id)).map(v=>v.route.id).join(",")),[g.pathname+g.search]},[l,n,a,o,t,e,i]),h=j.useMemo(()=>$y(d,a),[d,a]),m=Vy(d);return j.createElement(j.Fragment,null,u.map(f=>j.createElement("link",{key:f,rel:"prefetch",as:"fetch",href:f,...s})),h.map(f=>j.createElement("link",{key:f,rel:"modulepreload",href:f,...s})),m.map(({key:f,link:y})=>j.createElement("link",{key:f,...y})))}function Jy(...e){return t=>{e.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var Yf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Yf&&(window.__reactRouterVersion="7.2.0")}catch{}function Ky({basename:e,children:t,window:s}){let n=j.useRef();n.current==null&&(n.current=Ox({window:s,v5Compat:!0}));let a=n.current,[i,l]=j.useState({action:a.action,location:a.location}),c=j.useCallback(o=>{j.startTransition(()=>l(o))},[l]);return j.useLayoutEffect(()=>a.listen(c),[a,c]),j.createElement(ky,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var Xf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hi=j.forwardRef(function({onClick:t,discover:s="render",prefetch:n="none",relative:a,reloadDocument:i,replace:l,state:c,target:o,to:d,preventScrollReset:u,viewTransition:h,...m},f){let{basename:y}=j.useContext(Jt),g=typeof d=="string"&&Xf.test(d),v,p=!1;if(typeof d=="string"&&g&&(v=d,Yf))try{let L=new URL(window.location.href),T=d.startsWith("//")?new URL(L.protocol+d):new URL(d),O=Ws(T.pathname,y);T.origin===L.origin&&O!=null?d=O+T.search+T.hash:p=!0}catch{Gt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=dy(d,{relative:a}),[b,_,P]=Hy(n,m),C=Zy(d,{replace:l,state:c,target:o,preventScrollReset:u,relative:a,viewTransition:h});function k(L){t&&t(L),L.defaultPrevented||C(L)}let R=j.createElement("a",{...m,...P,href:v||w,onClick:p||i?t:k,ref:Jy(f,_),target:o,"data-discover":!g&&s==="render"?"true":void 0});return b&&!g?j.createElement(j.Fragment,null,R,j.createElement(Wy,{page:w})):R});Hi.displayName="Link";var Qy=j.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:n="",end:a=!1,style:i,to:l,viewTransition:c,children:o,...d},u){let h=ka(l,{relative:d.relative}),m=cs(),f=j.useContext(ul),{navigator:y,basename:g}=j.useContext(Jt),v=f!=null&&nv(h)&&c===!0,p=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,w=m.pathname,b=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;s||(w=w.toLowerCase(),b=b?b.toLowerCase():null,p=p.toLowerCase()),b&&g&&(b=Ws(b,g)||b);const _=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let P=w===p||!a&&w.startsWith(p)&&w.charAt(_)==="/",C=b!=null&&(b===p||!a&&b.startsWith(p)&&b.charAt(p.length)==="/"),k={isActive:P,isPending:C,isTransitioning:v},R=P?t:void 0,L;typeof n=="function"?L=n(k):L=[n,P?"active":null,C?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let T=typeof i=="function"?i(k):i;return j.createElement(Hi,{...d,"aria-current":R,className:L,ref:u,style:T,to:l,viewTransition:c},typeof o=="function"?o(k):o)});Qy.displayName="NavLink";var Yy=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:s,reloadDocument:n,replace:a,state:i,method:l=pi,action:c,onSubmit:o,relative:d,preventScrollReset:u,viewTransition:h,...m},f)=>{let y=sv(),g=rv(c,{relative:d}),v=l.toLowerCase()==="get"?"get":"post",p=typeof c=="string"&&Xf.test(c),w=b=>{if(o&&o(b),b.defaultPrevented)return;b.preventDefault();let _=b.nativeEvent.submitter,P=(_==null?void 0:_.getAttribute("formmethod"))||l;y(_||b.currentTarget,{fetcherKey:t,method:P,navigate:s,replace:a,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return j.createElement("form",{ref:f,method:v,action:g,onSubmit:n?o:w,...m,"data-discover":!p&&e==="render"?"true":void 0})});Yy.displayName="Form";function Xy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zf(e){let t=j.useContext(pn);return ke(t,Xy(e)),t}function Zy(e,{target:t,replace:s,state:n,preventScrollReset:a,relative:i,viewTransition:l}={}){let c=Na(),o=cs(),d=ka(e,{relative:i});return j.useCallback(u=>{if(Ty(u,t)){u.preventDefault();let h=s!==void 0?s:fa(o)===fa(d);c(e,{replace:h,state:n,preventScrollReset:a,relative:i,viewTransition:l})}},[o,c,d,s,n,t,e,a,i,l])}var ev=0,tv=()=>`__${String(++ev)}__`;function sv(){let{router:e}=Zf("useSubmit"),{basename:t}=j.useContext(Jt),s=by();return j.useCallback(async(n,a={})=>{let{action:i,method:l,encType:c,formData:o,body:d}=Dy(n,t);if(a.navigate===!1){let u=a.fetcherKey||tv();await e.fetch(u,s,a.action||i,{preventScrollReset:a.preventScrollReset,formData:o,body:d,formMethod:a.method||l,formEncType:a.encType||c,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:o,body:d,formMethod:a.method||l,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,s])}function rv(e,{relative:t}={}){let{basename:s}=j.useContext(Jt),n=j.useContext(os);ke(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...ka(e||".",{relative:t})},l=cs();if(e==null){i.search=l.search;let c=new URLSearchParams(i.search),o=c.getAll("index");if(o.some(u=>u==="")){c.delete("index"),o.filter(h=>h).forEach(h=>c.append("index",h));let u=c.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(i.pathname=i.pathname==="/"?s:gs([s,i.pathname])),fa(i)}function nv(e,t={}){let s=j.useContext(Wf);ke(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Zf("useViewTransitionState"),a=ka(e,{relative:t.relative});if(!s.isTransitioning)return!1;let i=Ws(s.currentLocation.pathname,n)||s.currentLocation.pathname,l=Ws(s.nextLocation.pathname,n)||s.nextLocation.pathname;return qi(a.pathname,l)!=null||qi(a.pathname,i)!=null}new TextEncoder;function av(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}const iv=e=>{switch(e){case"success":return cv;case"info":return uv;case"warning":return dv;case"error":return hv;default:return null}},lv=Array(12).fill(0),ov=({visible:e,className:t})=>V.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},V.createElement("div",{className:"sonner-spinner"},lv.map((s,n)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),cv=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),dv=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),uv=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hv=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),mv=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),fv=()=>{const[e,t]=V.useState(document.hidden);return V.useEffect(()=>{const s=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),e};let tc=1;class pv{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;const{message:n,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:tc++,l=this.toasts.find(o=>o.id===i),c=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),l?this.toasts=this.toasts.map(o=>o.id===i?(this.publish({...o,...t,id:i,title:n}),{...o,...t,id:i,dismissible:c,title:n}):o):this.addToast({title:n,...a,dismissible:c,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:t,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(n=>n({id:s.id,dismiss:!0}))}),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let n;s.loading!==void 0&&(n=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,l;const c=a.then(async d=>{if(l=["resolve",d],V.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(xv(d)&&!d.ok){i=!1;const h=typeof s.error=="function"?await s.error(`HTTP error! status: ${d.status}`):s.error,m=typeof s.description=="function"?await s.description(`HTTP error! status: ${d.status}`):s.description,y=typeof h=="object"&&!V.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:m,...y})}else if(d instanceof Error){i=!1;const h=typeof s.error=="function"?await s.error(d):s.error,m=typeof s.description=="function"?await s.description(d):s.description,y=typeof h=="object"&&!V.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:m,...y})}else if(s.success!==void 0){i=!1;const h=typeof s.success=="function"?await s.success(d):s.success,m=typeof s.description=="function"?await s.description(d):s.description,y=typeof h=="object"&&!V.isValidElement(h)?h:{message:h};this.create({id:n,type:"success",description:m,...y})}}).catch(async d=>{if(l=["reject",d],s.error!==void 0){i=!1;const u=typeof s.error=="function"?await s.error(d):s.error,h=typeof s.description=="function"?await s.description(d):s.description,f=typeof u=="object"&&!V.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...f})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),s.finally==null||s.finally.call(s)}),o=()=>new Promise((d,u)=>c.then(()=>l[0]==="reject"?u(l[1]):d(l[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(t,s)=>{const n=(s==null?void 0:s.id)||tc++;return this.create({jsx:t(n),id:n,...s}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const lt=new pv,gv=(e,t)=>{const s=(t==null?void 0:t.id)||tc++;return lt.addToast({title:e,...t,id:s}),s},xv=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",yv=gv,vv=()=>lt.toasts,wv=()=>lt.getActiveToasts(),me=Object.assign(yv,{success:lt.success,info:lt.info,warning:lt.warning,error:lt.error,custom:lt.custom,message:lt.message,promise:lt.promise,dismiss:lt.dismiss,loading:lt.loading},{getHistory:vv,getToasts:wv});av("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Xa(e){return e.label!==void 0}const bv=3,jv="24px",_v="16px",Vu=4e3,Nv=356,kv=14,Sv=45,Cv=200;function Zt(...e){return e.filter(Boolean).join(" ")}function Ev(e){const[t,s]=e.split("-"),n=[];return t&&n.push(t),s&&n.push(s),n}const Pv=e=>{var t,s,n,a,i,l,c,o,d;const{invert:u,toast:h,unstyled:m,interacting:f,setHeights:y,visibleToasts:g,heights:v,index:p,toasts:w,expanded:b,removeToast:_,defaultRichColors:P,closeButton:C,style:k,cancelButtonStyle:R,actionButtonStyle:L,className:T="",descriptionClassName:O="",duration:ae,position:A,gap:X,expandByDefault:q,classNames:H,icons:ie,closeButtonAriaLabel:B="Close toast"}=e,[G,Q]=V.useState(null),[M,E]=V.useState(null),[S,z]=V.useState(!1),[Z,ee]=V.useState(!1),[Pe,N]=V.useState(!1),[U,W]=V.useState(!1),[D,le]=V.useState(!1),[te,oe]=V.useState(0),[pe,Qt]=V.useState(0),We=V.useRef(h.duration||ae||Vu),Yt=V.useRef(null),ne=V.useRef(null),Nr=p===0,Zs=p+1<=g,Re=h.type,nt=h.dismissible!==!1,Mt=h.className||"",at=h.descriptionClassName||"",x=V.useMemo(()=>v.findIndex(de=>de.toastId===h.id)||0,[v,h.id]),I=V.useMemo(()=>{var de;return(de=h.closeButton)!=null?de:C},[h.closeButton,C]),J=V.useMemo(()=>h.duration||ae||Vu,[h.duration,ae]),se=V.useRef(0),ce=V.useRef(0),we=V.useRef(0),Xe=V.useRef(null),[er,jt]=A.split("-"),vn=V.useMemo(()=>v.reduce((de,Ie,Ve)=>Ve>=x?de:de+Ie.height,0),[v,x]),wn=fv(),Ta=h.invert||u,kr=Re==="loading";ce.current=V.useMemo(()=>x*X+vn,[x,vn]),V.useEffect(()=>{We.current=J},[J]),V.useEffect(()=>{z(!0)},[]),V.useEffect(()=>{const de=ne.current;if(de){const Ie=de.getBoundingClientRect().height;return Qt(Ie),y(Ve=>[{toastId:h.id,height:Ie,position:h.position},...Ve]),()=>y(Ve=>Ve.filter(ft=>ft.toastId!==h.id))}},[y,h.id]),V.useLayoutEffect(()=>{if(!S)return;const de=ne.current,Ie=de.style.height;de.style.height="auto";const Ve=de.getBoundingClientRect().height;de.style.height=Ie,Qt(Ve),y(ft=>ft.find(ze=>ze.toastId===h.id)?ft.map(ze=>ze.toastId===h.id?{...ze,height:Ve}:ze):[{toastId:h.id,height:Ve,position:h.position},...ft])},[S,h.title,h.description,y,h.id,h.jsx,h.action,h.cancel]);const Dt=V.useCallback(()=>{ee(!0),oe(ce.current),y(de=>de.filter(Ie=>Ie.toastId!==h.id)),setTimeout(()=>{_(h)},Cv)},[h,_,y,ce]);V.useEffect(()=>{if(h.promise&&Re==="loading"||h.duration===1/0||h.type==="loading")return;let de;return b||f||wn?(()=>{if(we.current<se.current){const ft=new Date().getTime()-se.current;We.current=We.current-ft}we.current=new Date().getTime()})():(()=>{We.current!==1/0&&(se.current=new Date().getTime(),de=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),Dt()},We.current))})(),()=>clearTimeout(de)},[b,f,h,Re,wn,Dt]),V.useEffect(()=>{h.delete&&(Dt(),h.onDismiss==null||h.onDismiss.call(h,h))},[Dt,h.delete]);function Ra(){var de;if(ie!=null&&ie.loading){var Ie;return V.createElement("div",{className:Zt(H==null?void 0:H.loader,h==null||(Ie=h.classNames)==null?void 0:Ie.loader,"sonner-loader"),"data-visible":Re==="loading"},ie.loading)}return V.createElement(ov,{className:Zt(H==null?void 0:H.loader,h==null||(de=h.classNames)==null?void 0:de.loader),visible:Re==="loading"})}const tr=h.icon||(ie==null?void 0:ie[Re])||iv(Re);var Cd,Ed;return V.createElement("li",{tabIndex:0,ref:ne,className:Zt(T,Mt,H==null?void 0:H.toast,h==null||(t=h.classNames)==null?void 0:t.toast,H==null?void 0:H.default,H==null?void 0:H[Re],h==null||(s=h.classNames)==null?void 0:s[Re]),"data-sonner-toast":"","data-rich-colors":(Cd=h.richColors)!=null?Cd:P,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":S,"data-promise":!!h.promise,"data-swiped":D,"data-removed":Z,"data-visible":Zs,"data-y-position":er,"data-x-position":jt,"data-index":p,"data-front":Nr,"data-swiping":Pe,"data-dismissible":nt,"data-type":Re,"data-invert":Ta,"data-swipe-out":U,"data-swipe-direction":M,"data-expanded":!!(b||q&&S),style:{"--index":p,"--toasts-before":p,"--z-index":w.length-p,"--offset":`${Z?te:ce.current}px`,"--initial-height":q?"auto":`${pe}px`,...k,...h.style},onDragEnd:()=>{N(!1),Q(null),Xe.current=null},onPointerDown:de=>{kr||!nt||(Yt.current=new Date,oe(ce.current),de.target.setPointerCapture(de.pointerId),de.target.tagName!=="BUTTON"&&(N(!0),Xe.current={x:de.clientX,y:de.clientY}))},onPointerUp:()=>{var de,Ie,Ve;if(U||!nt)return;Xe.current=null;const ft=Number(((de=ne.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ma=Number(((Ie=ne.current)==null?void 0:Ie.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ze=new Date().getTime()-((Ve=Yt.current)==null?void 0:Ve.getTime()),_t=G==="x"?ft:Ma,Da=Math.abs(_t)/ze;if(Math.abs(_t)>=Sv||Da>.11){oe(ce.current),h.onDismiss==null||h.onDismiss.call(h,h),E(G==="x"?ft>0?"right":"left":Ma>0?"down":"up"),Dt(),W(!0);return}else{var At,Lt;(At=ne.current)==null||At.style.setProperty("--swipe-amount-x","0px"),(Lt=ne.current)==null||Lt.style.setProperty("--swipe-amount-y","0px")}le(!1),N(!1),Q(null)},onPointerMove:de=>{var Ie,Ve,ft;if(!Xe.current||!nt||((Ie=window.getSelection())==null?void 0:Ie.toString().length)>0)return;const ze=de.clientY-Xe.current.y,_t=de.clientX-Xe.current.x;var Da;const At=(Da=e.swipeDirections)!=null?Da:Ev(A);!G&&(Math.abs(_t)>1||Math.abs(ze)>1)&&Q(Math.abs(_t)>Math.abs(ze)?"x":"y");let Lt={x:0,y:0};const Pd=sr=>1/(1.5+Math.abs(sr)/20);if(G==="y"){if(At.includes("top")||At.includes("bottom"))if(At.includes("top")&&ze<0||At.includes("bottom")&&ze>0)Lt.y=ze;else{const sr=ze*Pd(ze);Lt.y=Math.abs(sr)<Math.abs(ze)?sr:ze}}else if(G==="x"&&(At.includes("left")||At.includes("right")))if(At.includes("left")&&_t<0||At.includes("right")&&_t>0)Lt.x=_t;else{const sr=_t*Pd(_t);Lt.x=Math.abs(sr)<Math.abs(_t)?sr:_t}(Math.abs(Lt.x)>0||Math.abs(Lt.y)>0)&&le(!0),(Ve=ne.current)==null||Ve.style.setProperty("--swipe-amount-x",`${Lt.x}px`),(ft=ne.current)==null||ft.style.setProperty("--swipe-amount-y",`${Lt.y}px`)}},I&&!h.jsx&&Re!=="loading"?V.createElement("button",{"aria-label":B,"data-disabled":kr,"data-close-button":!0,onClick:kr||!nt?()=>{}:()=>{Dt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Zt(H==null?void 0:H.closeButton,h==null||(n=h.classNames)==null?void 0:n.closeButton)},(Ed=ie==null?void 0:ie.close)!=null?Ed:mv):null,(Re||h.icon||h.promise)&&h.icon!==null&&((ie==null?void 0:ie[Re])!==null||h.icon)?V.createElement("div",{"data-icon":"",className:Zt(H==null?void 0:H.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Ra():null,h.type!=="loading"?tr:null):null,V.createElement("div",{"data-content":"",className:Zt(H==null?void 0:H.content,h==null||(i=h.classNames)==null?void 0:i.content)},V.createElement("div",{"data-title":"",className:Zt(H==null?void 0:H.title,h==null||(l=h.classNames)==null?void 0:l.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?V.createElement("div",{"data-description":"",className:Zt(O,at,H==null?void 0:H.description,h==null||(c=h.classNames)==null?void 0:c.description)},typeof h.description=="function"?h.description():h.description):null),V.isValidElement(h.cancel)?h.cancel:h.cancel&&Xa(h.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||R,onClick:de=>{Xa(h.cancel)&&nt&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,de),Dt())},className:Zt(H==null?void 0:H.cancelButton,h==null||(o=h.classNames)==null?void 0:o.cancelButton)},h.cancel.label):null,V.isValidElement(h.action)?h.action:h.action&&Xa(h.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||L,onClick:de=>{Xa(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,de),!de.defaultPrevented&&Dt())},className:Zt(H==null?void 0:H.actionButton,h==null||(d=h.classNames)==null?void 0:d.actionButton)},h.action.label):null)};function Gu(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Tv(e,t){const s={};return[e,t].forEach((n,a)=>{const i=a===1,l=i?"--mobile-offset":"--offset",c=i?_v:jv;function o(d){["top","right","bottom","left"].forEach(u=>{s[`${l}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?o(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?s[`${l}-${d}`]=c:s[`${l}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):o(c)}),s}const Rv=V.forwardRef(function(t,s){const{invert:n,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:l,closeButton:c,className:o,offset:d,mobileOffset:u,theme:h="light",richColors:m,duration:f,style:y,visibleToasts:g=bv,toastOptions:v,dir:p=Gu(),gap:w=kv,icons:b,containerAriaLabel:_="Notifications"}=t,[P,C]=V.useState([]),k=V.useMemo(()=>Array.from(new Set([a].concat(P.filter(M=>M.position).map(M=>M.position)))),[P,a]),[R,L]=V.useState([]),[T,O]=V.useState(!1),[ae,A]=V.useState(!1),[X,q]=V.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=V.useRef(null),ie=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=V.useRef(null),G=V.useRef(!1),Q=V.useCallback(M=>{C(E=>{var S;return(S=E.find(z=>z.id===M.id))!=null&&S.delete||lt.dismiss(M.id),E.filter(({id:z})=>z!==M.id)})},[]);return V.useEffect(()=>lt.subscribe(M=>{if(M.dismiss){requestAnimationFrame(()=>{C(E=>E.map(S=>S.id===M.id?{...S,delete:!0}:S))});return}setTimeout(()=>{Cx.flushSync(()=>{C(E=>{const S=E.findIndex(z=>z.id===M.id);return S!==-1?[...E.slice(0,S),{...E[S],...M},...E.slice(S+1)]:[M,...E]})})})}),[P]),V.useEffect(()=>{if(h!=="system"){q(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?q("dark"):q("light")),typeof window>"u")return;const M=window.matchMedia("(prefers-color-scheme: dark)");try{M.addEventListener("change",({matches:E})=>{q(E?"dark":"light")})}catch{M.addListener(({matches:S})=>{try{q(S?"dark":"light")}catch(z){console.error(z)}})}},[h]),V.useEffect(()=>{P.length<=1&&O(!1)},[P]),V.useEffect(()=>{const M=E=>{var S;if(i.every(ee=>E[ee]||E.code===ee)){var Z;O(!0),(Z=H.current)==null||Z.focus()}E.code==="Escape"&&(document.activeElement===H.current||(S=H.current)!=null&&S.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[i]),V.useEffect(()=>{if(H.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,G.current=!1)}},[H.current]),V.createElement("section",{ref:s,"aria-label":`${_} ${ie}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((M,E)=>{var S;const[z,Z]=M.split("-");return P.length?V.createElement("ol",{key:M,dir:p==="auto"?Gu():p,tabIndex:-1,ref:H,className:o,"data-sonner-toaster":!0,"data-sonner-theme":X,"data-y-position":z,"data-x-position":Z,style:{"--front-toast-height":`${((S=R[0])==null?void 0:S.height)||0}px`,"--width":`${Nv}px`,"--gap":`${w}px`,...y,...Tv(d,u)},onBlur:ee=>{G.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(G.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||G.current||(G.current=!0,B.current=ee.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{ae||O(!1)},onDragEnd:()=>O(!1),onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||A(!0)},onPointerUp:()=>A(!1)},P.filter(ee=>!ee.position&&E===0||ee.position===M).map((ee,Pe)=>{var N,U;return V.createElement(Pv,{key:ee.id,icons:b,index:Pe,toast:ee,defaultRichColors:m,duration:(N=v==null?void 0:v.duration)!=null?N:f,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:g,closeButton:(U=v==null?void 0:v.closeButton)!=null?U:c,interacting:ae,position:M,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,closeButtonAriaLabel:v==null?void 0:v.closeButtonAriaLabel,removeToast:Q,toasts:P.filter(W=>W.position==ee.position),heights:R.filter(W=>W.position==ee.position),setHeights:L,expandByDefault:l,gap:w,expanded:T,swipeDirections:t.swipeDirections})})):null}))}),Mv="modulepreload",Dv=function(e){return"/"+e},Ju={},nn=function(t,s,n){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(s.map(o=>{if(o=Dv(o),o in Ju)return;Ju[o]=!0;const d=o.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Mv,d||(h.as="script"),h.crossOrigin="",h.href=o,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return a.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})},Av=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>nn(async()=>{const{default:n}=await Promise.resolve().then(()=>xn);return{default:n}},[]).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class xd extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class Lv extends xd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Iv extends xd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class $v extends xd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var sc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(sc||(sc={}));var Ov=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(u){try{d(n.next(u))}catch(h){l(h)}}function o(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(c,o)}d((n=n.apply(e,t||[])).next())})};class Uv{constructor(t,{headers:s={},customFetch:n,region:a=sc.Any}={}){this.url=t,this.headers=s,this.region=a,this.fetch=Av(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return Ov(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:l}=s;let c={},{region:o}=s;o||(o=this.region),o&&o!=="any"&&(c["x-region"]=o);let d;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=l):typeof l=="string"?(c["Content-Type"]="text/plain",d=l):typeof FormData<"u"&&l instanceof FormData?d=l:(c["Content-Type"]="application/json",d=JSON.stringify(l)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),a),body:d}).catch(y=>{throw new Lv(y)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Iv(u);if(!u.ok)throw new $v(u);let m=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return m==="application/json"?f=yield u.json():m==="application/octet-stream"?f=yield u.blob():m==="text/event-stream"?f=u:m==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(a){return{data:null,error:a}}})}}var ct={},yd={},ml={},Sa={},fl={},pl={},zv=function(){if(typeof self<"u")return self;if(typeof window<"u"||typeof window<"u")return window;throw new Error("unable to locate global object")},an=zv();const Fv=an.fetch,ep=an.fetch.bind(an),tp=an.Headers,Bv=an.Request,qv=an.Response,xn=Object.freeze(Object.defineProperty({__proto__:null,Headers:tp,Request:Bv,Response:qv,default:ep,fetch:Fv},Symbol.toStringTag,{value:"Module"})),Hv=tg(xn);var gl={};Object.defineProperty(gl,"__esModule",{value:!0});let Wv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};gl.default=Wv;var sp=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pl,"__esModule",{value:!0});const Vv=sp(Hv),Gv=sp(gl);let Jv=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Vv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=Object.assign({},this.headers),this.headers[t]=s,this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var l,c,o;let d=null,u=null,h=null,m=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const g=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");g&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,m=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{d=JSON.parse(g),Array.isArray(d)&&i.status===404&&(u=[],d=null,m=200,f="OK")}catch{i.status===404&&g===""?(m=204,f="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((o=d==null?void 0:d.details)===null||o===void 0)&&o.includes("0 rows"))&&(d=null,m=200,f="OK"),d&&this.shouldThrowOnError)throw new Gv.default(d)}return{error:d,data:u,count:h,status:m,statusText:f}});return this.shouldThrowOnError||(a=a.catch(i=>{var l,c,o;return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(c=i==null?void 0:i.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(o=i==null?void 0:i.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,s)}};pl.default=Jv;var Kv=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fl,"__esModule",{value:!0});const Qv=Kv(pl);let Yv=class extends Qv.default{select(t){let s=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:s=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${t}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,s,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:s=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:l="text"}={}){var c;const o=[t?"analyze":null,s?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${d}"; options=${o};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fl.default=Yv;var Xv=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sa,"__esModule",{value:!0});const Zv=Xv(fl);let ew=class extends Zv.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const n=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${l}.${s}`),this}match(t){return Object.entries(t).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(t,s,n){return this.url.searchParams.append(t,`not.${s}.${n}`),this}or(t,{foreignTable:s,referencedTable:n=s}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,s,n){return this.url.searchParams.append(t,`${s}.${n}`),this}};Sa.default=ew;var tw=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ml,"__esModule",{value:!0});const Rn=tw(Sa);let sw=class{constructor(t,{headers:s={},schema:n,fetch:a}){this.url=t,this.headers=s,this.schema=n,this.fetch=a}select(t,{head:s=!1,count:n}={}){const a=s?"HEAD":"GET";let i=!1;const l=(t??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",l),n&&(this.headers.Prefer=`count=${n}`),new Rn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:s,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const l=t.reduce((c,o)=>c.concat(Object.keys(o)),[]);if(l.length>0){const c=[...new Set(l)].map(o=>`"${o}"`);this.url.searchParams.set("columns",c.join(","))}}return new Rn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:s,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const l="POST",c=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),i||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(t)){const o=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(o.length>0){const d=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Rn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:s}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new Rn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const s="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Rn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ml.default=sw;var xl={},yl={};Object.defineProperty(yl,"__esModule",{value:!0});yl.version=void 0;yl.version="0.0.0-automated";Object.defineProperty(xl,"__esModule",{value:!0});xl.DEFAULT_HEADERS=void 0;const rw=yl;xl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${rw.version}`};var rp=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yd,"__esModule",{value:!0});const nw=rp(ml),aw=rp(Sa),iw=xl;let lw=class np{constructor(t,{headers:s={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},iw.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=a}from(t){const s=new URL(`${this.url}/${t}`);return new nw.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new np(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:n=!1,get:a=!1,count:i}={}){let l;const c=new URL(`${this.url}/rpc/${t}`);let o;n||a?(l=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{c.searchParams.append(u,h)})):(l="POST",o=s);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new aw.default({method:l,url:c,headers:d,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};yd.default=lw;var yn=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ct,"__esModule",{value:!0});ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const ap=yn(yd);ct.PostgrestClient=ap.default;const ip=yn(ml);ct.PostgrestQueryBuilder=ip.default;const lp=yn(Sa);ct.PostgrestFilterBuilder=lp.default;const op=yn(fl);ct.PostgrestTransformBuilder=op.default;const cp=yn(pl);ct.PostgrestBuilder=cp.default;const dp=yn(gl);ct.PostgrestError=dp.default;var ow=ct.default={PostgrestClient:ap.default,PostgrestQueryBuilder:ip.default,PostgrestFilterBuilder:lp.default,PostgrestTransformBuilder:op.default,PostgrestBuilder:cp.default,PostgrestError:dp.default};const{PostgrestClient:cw,PostgrestQueryBuilder:r_,PostgrestFilterBuilder:n_,PostgrestTransformBuilder:a_,PostgrestBuilder:i_,PostgrestError:l_}=ow,dw="2.11.2",uw={"X-Client-Info":`realtime-js/${dw}`},hw="1.0.0",up=1e4,mw=1e3;var Kr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Kr||(Kr={}));var pt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pt||(pt={}));var Ut;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ut||(Ut={}));var rc;(function(e){e.websocket="websocket"})(rc||(rc={}));var lr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(lr||(lr={}));class fw{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const a=s.getUint8(1),i=s.getUint8(2);let l=this.HEADER_LENGTH+2;const c=n.decode(t.slice(l,l+a));l=l+a;const o=n.decode(t.slice(l,l+i));l=l+i;const d=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:c,event:o,payload:d}}}let hp=class{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ye;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ye||(ye={}));const Ku=(e,t,s={})=>{var n;const a=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,l)=>(i[l]=pw(l,e,t,a),i),{})},pw=(e,t,s,n)=>{const a=t.find(c=>c.name===e),i=a==null?void 0:a.type,l=s[e];return i&&!n.includes(i)?mp(i,l):nc(l)},mp=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return vw(t,s)}switch(e){case ye.bool:return gw(t);case ye.float4:case ye.float8:case ye.int2:case ye.int4:case ye.int8:case ye.numeric:case ye.oid:return xw(t);case ye.json:case ye.jsonb:return yw(t);case ye.timestamp:return ww(t);case ye.abstime:case ye.date:case ye.daterange:case ye.int4range:case ye.int8range:case ye.money:case ye.reltime:case ye.text:case ye.time:case ye.timestamptz:case ye.timetz:case ye.tsrange:case ye.tstzrange:return nc(t);default:return nc(t)}},nc=e=>e,gw=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},xw=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},yw=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},vw=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,s);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(c=>mp(t,c))}return e},ww=e=>typeof e=="string"?e.replace(" ","T"):e,fp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Ql{constructor(t,s,n={},a=up){this.channel=t,this.event=s,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Qu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Qu||(Qu={}));class Kn{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Kn.syncState(this.state,a,i,l),this.pendingDiffs.forEach(o=>{this.state=Kn.syncDiff(this.state,o,i,l)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Kn.syncDiff(this.state,a,i,l),c())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,a){const i=this.cloneDeep(t),l=this.transformState(s),c={},o={};return this.map(i,(d,u)=>{l[d]||(o[d]=u)}),this.map(l,(d,u)=>{const h=i[d];if(h){const m=u.map(v=>v.presence_ref),f=h.map(v=>v.presence_ref),y=u.filter(v=>f.indexOf(v.presence_ref)<0),g=h.filter(v=>m.indexOf(v.presence_ref)<0);y.length>0&&(c[d]=y),g.length>0&&(o[d]=g)}else c[d]=u}),this.syncDiff(i,{joins:c,leaves:o},n,a)}static syncDiff(t,s,n,a){const{joins:i,leaves:l}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(c,o)=>{var d;const u=(d=t[c])!==null&&d!==void 0?d:[];if(t[c]=this.cloneDeep(o),u.length>0){const h=t[c].map(f=>f.presence_ref),m=u.filter(f=>h.indexOf(f.presence_ref)<0);t[c].unshift(...m)}n(c,u,o)}),this.map(l,(c,o)=>{let d=t[c];if(!d)return;const u=o.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[c]=d,a(c,d,o),d.length===0&&delete t[c]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const a=t[n];return"metas"in a?s[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=a,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Yu||(Yu={}));var Xu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Xu||(Xu={}));var us;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(us||(us={}));class vd{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Ql(this,Ut.join,this.params,this.timeout),this.rejoinTimer=new hp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ut.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Kn(this),this.broadcastEndpointURL=fp(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:l,private:c}}=this.params;this._onError(u=>t==null?void 0:t(us.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(us.CLOSED));const o={},d={broadcast:i,presence:l,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:c};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},o)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(us.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,f=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,y=[];for(let g=0;g<f;g++){const v=m[g],{filter:{event:p,schema:w,table:b,filter:_}}=v,P=u&&u[g];if(P&&P.event===p&&P.schema===w&&P.table===b&&P.filter===_)y.push(Object.assign(Object.assign({},v),{id:P.id}));else{this.unsubscribe(),t==null||t(us.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(us.SUBSCRIBED);return}}).receive("error",u=>{t==null||t(us.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(us.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this._on(t,s,n)}async send(t,s={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,c,o;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ut.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const a=new Ql(this,Ut.leave,{},t);a.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(t,s,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),l}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Ql(this,t,s,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var a,i;const l=t.toLocaleLowerCase(),{close:c,error:o,leave:d,join:u}=Ut;if(n&&[c,o,d,u].indexOf(l)>=0&&n!==this._joinRef())return;let m=this._onMessage(l,s,n);if(s&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var y,g,v;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(g=f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===l}).map(f=>f.callback(m,n)):(i=this.bindings[l])===null||i===void 0||i.filter(f=>{var y,g,v,p,w,b;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in f){const _=f.id,P=(y=f.filter)===null||y===void 0?void 0:y.event;return _&&((g=s.ids)===null||g===void 0?void 0:g.includes(_))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((v=s.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(w=(p=f==null?void 0:f.filter)===null||p===void 0?void 0:p.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((b=s==null?void 0:s.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===l}).map(f=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:g,table:v,commit_timestamp:p,type:w,errors:b}=y;m=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:p,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(y))}f.callback(m,n)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const a=t.toLocaleLowerCase(),i={type:a,filter:s,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&vd.isEqual(a.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ut.close,{},t)}_onError(t){this._on(Ut.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Ku(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Ku(t.columns,t.old_record)),s}}const bw=()=>{},jw=typeof WebSocket<"u",_w=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Nw{constructor(t,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=uw,this.params={},this.timeout=up,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=bw,this.conn=null,this.sendBuffer=[],this.serializer=new fw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let l;return i?l=i:typeof fetch>"u"?l=(...c)=>nn(async()=>{const{default:o}=await Promise.resolve().then(()=>xn);return{default:o}},void 0).then(({default:o})=>o(...c)):l=fetch,(...c)=>l(...c)},this.endPoint=`${t}/${rc.websocket}`,this.httpEndpoint=fp(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const a=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,l)=>l(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new hp(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(jw){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new kw(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),nn(async()=>{const{default:t}=await import("./browser-B6PR5kBt.js").then(s=>s.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hw}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Kr.connecting:return lr.Connecting;case Kr.open:return lr.Open;case Kr.closing:return lr.Closing;default:return lr.Closed}}isConnected(){return this.connectionState()===lr.Open}channel(t,s={config:{}}){const n=new vd(`realtime:${t}`,s,this);return this.channels.push(n),n}push(t){const{topic:s,event:n,payload:a,ref:i}=t,l=()=>{this.encode(t,c=>{var o;(o=this.conn)===null||o===void 0||o.send(c)})};this.log("push",`${s} ${n} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(a=>{s&&a.updateJoinPayload({access_token:s}),a.joinedOnce&&a._isJoined()&&a._push(Ut.access_token,{access_token:s})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(mw,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:n,event:a,payload:i,ref:l}=s;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${a} ${l&&"("+l+")"||""}`,i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(a,i,l)),this.stateChangeCallbacks.message.forEach(c=>c(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ut.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${t}${n}${a}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([_w],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class kw{constructor(t,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Kr.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class wd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function $e(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Sw extends wd{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ac extends wd{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var Cw=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(u){try{d(n.next(u))}catch(h){l(h)}}function o(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(c,o)}d((n=n.apply(e,t||[])).next())})};const pp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>nn(async()=>{const{default:n}=await Promise.resolve().then(()=>xn);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},Ew=()=>Cw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield nn(()=>Promise.resolve().then(()=>xn),void 0)).Response:Response}),ic=e=>{if(Array.isArray(e))return e.map(s=>ic(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=ic(n)}),t};var jr=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(u){try{d(n.next(u))}catch(h){l(h)}}function o(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(c,o)}d((n=n.apply(e,t||[])).next())})};const Yl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Pw=(e,t,s)=>jr(void 0,void 0,void 0,function*(){const n=yield Ew();e instanceof n&&!(s!=null&&s.noResolveJson)?e.json().then(a=>{t(new Sw(Yl(a),e.status||500))}).catch(a=>{t(new ac(Yl(a),a))}):t(new ac(Yl(e),e))}),Tw=(e,t,s,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),s))};function Ca(e,t,s,n,a,i){return jr(this,void 0,void 0,function*(){return new Promise((l,c)=>{e(s,Tw(t,n,a,i)).then(o=>{if(!o.ok)throw o;return n!=null&&n.noResolveJson?o:o.json()}).then(o=>l(o)).catch(o=>Pw(o,c,n))})})}function Wi(e,t,s,n){return jr(this,void 0,void 0,function*(){return Ca(e,"GET",t,s,n)})}function Ps(e,t,s,n,a){return jr(this,void 0,void 0,function*(){return Ca(e,"POST",t,n,a,s)})}function Rw(e,t,s,n,a){return jr(this,void 0,void 0,function*(){return Ca(e,"PUT",t,n,a,s)})}function Mw(e,t,s,n){return jr(this,void 0,void 0,function*(){return Ca(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function gp(e,t,s,n,a){return jr(this,void 0,void 0,function*(){return Ca(e,"DELETE",t,n,a,s)})}var it=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(u){try{d(n.next(u))}catch(h){l(h)}}function o(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(c,o)}d((n=n.apply(e,t||[])).next())})};const Dw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Aw{constructor(t,s={},n,a){this.url=t,this.headers=s,this.bucketId=n,this.fetch=pp(a)}uploadOrUpdate(t,s,n,a){return it(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Zu),a);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const o=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,o&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),a!=null&&a.headers&&(c=Object.assign(Object.assign({},c),a.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{})),m=yield h.json();return h.ok?{data:{path:d,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if($e(i))return{data:null,error:i};throw i}})}upload(t,s,n){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,a){return it(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",s);try{let o;const d=Object.assign({upsert:Zu.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",d.cacheControl),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",d.cacheControl)):(o=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(c.toString(),{method:"PUT",body:o,headers:u}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(o){if($e(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(t,s){return it(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const i=yield Ps(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(this.url+i.url),c=l.searchParams.get("token");if(!c)throw new wd("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:c},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}update(t,s,n){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return it(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}copy(t,s,n){return it(this,void 0,void 0,function*(){try{return{data:{path:(yield Ps(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}createSignedUrl(t,s,n){return it(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Ps(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}createSignedUrls(t,s,n){return it(this,void 0,void 0,function*(){try{const a=yield Ps(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}download(t,s){return it(this,void 0,void 0,function*(){const a=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),l=i?`?${i}`:"";try{const c=this._getFinalPath(t);return{data:yield(yield Wi(this.fetch,`${this.url}/${a}/${c}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if($e(c))return{data:null,error:c};throw c}})}info(t){return it(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield Wi(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ic(n),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}exists(t){return it(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield Mw(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if($e(n)&&n instanceof ac){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),a=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&a.push(i);const c=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});o!==""&&a.push(o);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${d}`)}}}remove(t){return it(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}list(t,s,n){return it(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Dw),s),{prefix:t||""});return{data:yield Ps(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const Lw="2.7.1",Iw={"X-Client-Info":`storage-js/${Lw}`};var Cr=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(u){try{d(n.next(u))}catch(h){l(h)}}function o(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(c,o)}d((n=n.apply(e,[])).next())})};class $w{constructor(t,s={},n){this.url=t,this.headers=Object.assign(Object.assign({},Iw),s),this.fetch=pp(n)}listBuckets(){return Cr(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if($e(t))return{data:null,error:t};throw t}})}getBucket(t){return Cr(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Cr(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return Cr(this,void 0,void 0,function*(){try{return{data:yield Rw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Cr(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Cr(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if($e(s))return{data:null,error:s};throw s}})}}class Ow extends $w{constructor(t,s={},n){super(t,s,n)}from(t){return new Aw(this.url,this.headers,t,this.fetch)}}const Uw="2.47.14";let On="";typeof Deno<"u"?On="deno":typeof document<"u"?On="web":typeof navigator<"u"&&navigator.product==="ReactNative"?On="react-native":On="node";const zw={"X-Client-Info":`supabase-js-${On}/${Uw}`},Fw={headers:zw},Bw={schema:"public"},qw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hw={};var Ww=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(u){try{d(n.next(u))}catch(h){l(h)}}function o(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(c,o)}d((n=n.apply(e,t||[])).next())})};const Vw=e=>{let t;return e?t=e:typeof fetch>"u"?t=ep:t=fetch,(...s)=>t(...s)},Gw=()=>typeof Headers>"u"?tp:Headers,Jw=(e,t,s)=>{const n=Vw(s),a=Gw();return(i,l)=>Ww(void 0,void 0,void 0,function*(){var c;const o=(c=yield t())!==null&&c!==void 0?c:e;let d=new a(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${o}`),n(i,Object.assign(Object.assign({},l),{headers:d}))})};var Kw=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(u){try{d(n.next(u))}catch(h){l(h)}}function o(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(c,o)}d((n=n.apply(e,[])).next())})};function Qw(e){return e.replace(/\/$/,"")}function Yw(e,t){const{db:s,auth:n,realtime:a,global:i}=e,{db:l,auth:c,realtime:o,global:d}=t,u={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},o),a),global:Object.assign(Object.assign({},d),i),accessToken:()=>Kw(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}const xp="2.67.3",Xw="http://localhost:9999",Zw="supabase.auth.token",eb={"X-Client-Info":`gotrue-js/${xp}`},eh=10,lc="X-Supabase-Api-Version",yp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function tb(e){return Math.round(Date.now()/1e3)+e}function sb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ts=()=>typeof window<"u"&&typeof document<"u",rr={tested:!1,writable:!1},Qn=()=>{if(!ts())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rr.tested)return rr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),rr.tested=!0,rr.writable=!0}catch{rr.tested=!0,rr.writable=!1}return rr.writable};function rb(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return s.searchParams.forEach((n,a)=>{t[a]=n}),t}const vp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>nn(async()=>{const{default:n}=await Promise.resolve().then(()=>xn);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},nb=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",wp=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Za=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ei=async(e,t)=>{await e.removeItem(t)};function ab(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",n,a,i,l,c,o,d,u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)l=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),d=t.indexOf(e.charAt(u++)),n=l<<2|c>>4,a=(c&15)<<4|o>>2,i=(o&3)<<6|d,s=s+String.fromCharCode(n),o!=64&&a!=0&&(s=s+String.fromCharCode(a)),d!=64&&i!=0&&(s=s+String.fromCharCode(i));return s}class vl{constructor(){this.promise=new vl.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}vl.promiseConstructor=Promise;function th(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=e.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=s[1];return JSON.parse(ab(n))}async function ib(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function lb(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){a(l);return}}})()})}function ob(e){return("0"+e.toString(16)).substr(-2)}function cb(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,ob).join("")}async function db(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}function ub(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hb(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await db(e);return ub(s)}async function Er(e,t,s=!1){const n=cb();let a=n;s&&(a+="/PASSWORD_RECOVERY"),await wp(e,`${t}-code-verifier`,a);const i=await hb(n);return[i,n===i?"plain":"s256"]}const mb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fb(e){const t=e.headers.get(lc);if(!t||!t.match(mb))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class bd extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class pb extends bd{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function gb(e){return ue(e)&&e.name==="AuthApiError"}class bp extends bd{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class _r extends bd{constructor(t,s,n,a){super(t,n,a),this.name=s,this.status=n}}class ks extends _r{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xb(e){return ue(e)&&e.name==="AuthSessionMissingError"}class Xl extends _r{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ti extends _r{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class si extends _r{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yb(e){return ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class sh extends _r{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oc extends _r{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Zl(e){return ue(e)&&e.name==="AuthRetryableFetchError"}class rh extends _r{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}var vb=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};const ir=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wb=[502,503,504];async function nh(e){var t;if(!nb(e))throw new oc(ir(e),0);if(wb.includes(e.status))throw new oc(ir(e),e.status);let s;try{s=await e.json()}catch(i){throw new bp(ir(i),i)}let n;const a=fb(e);if(a&&a.getTime()>=yp["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new rh(ir(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ks}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new rh(ir(s),e.status,s.weak_password.reasons);throw new pb(ir(s),e.status||500,n)}const bb=(e,t,s,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),s))};async function fe(e,t,s,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[lc]||(i[lc]=yp["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",o=await jb(e,t,s+c,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(o):{data:Object.assign({},o),error:null}}async function jb(e,t,s,n,a,i){const l=bb(t,n,a,i);let c;try{c=await e(s,Object.assign({},l))}catch(o){throw console.error(o),new oc(ir(o),0)}if(c.ok||await nh(c),n!=null&&n.noResolveJson)return c;try{return await c.json()}catch(o){await nh(o)}}function Ss(e){var t;let s=null;Sb(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=tb(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function ah(e){const t=Ss(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ms(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function _b(e){return{data:e,error:null}}function Nb(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i}=e,l=vb(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i},o=Object.assign({},l);return{data:{properties:c,user:o},error:null}}function kb(e){return e}function Sb(e){return e.access_token&&e.refresh_token&&e.expires_in}var Cb=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s};class Eb{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=vp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ms})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=Cb(t,["options"]),a=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Nb,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ue(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ms})}catch(s){if(ue(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,a,i,l,c,o;try{const d={nextPage:null,lastPage:0,total:0},u=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:kb});if(u.error)throw u.error;const h=await u.json(),m=(l=u.headers.get("x-total-count"))!==null&&l!==void 0?l:0,f=(o=(c=u.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&o!==void 0?o:[];return f.length>0&&(f.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);d[`${v}Page`]=g}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ue(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ms})}catch(s){if(ue(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Ms})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ms})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:s,error:n}=await fe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:n}}catch(s){if(ue(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}}}const Pb={getItem:e=>Qn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Qn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Qn()&&globalThis.localStorage.removeItem(e)}};function ih(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function Tb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Pr={debug:!!(globalThis&&Qn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Rb extends jp{}async function Mb(e,t,s){Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await s()}finally{Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Pr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Rb(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Pr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Tb();const Db={url:Xw,storageKey:Zw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Mn=30*1e3,lh=3;async function oh(e,t,s){return await s()}class pa{constructor(t){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pa.nextInstanceID,pa.nextInstanceID+=1,this.instanceID>0&&ts()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Db),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Eb({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=vp(a.fetch),this.lock=a.lock||oh,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ts()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Mb:this.lock=oh,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:Qn()?this.storage=Pb:(this.memoryStorage={},this.storage=ih(this.memoryStorage)):(this.memoryStorage={},this.storage=ih(this.memoryStorage)),ts()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=rb(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),ts()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),yb(i)){const o=(t=i.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ue(s)?{error:s}:{error:new bp("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,a;try{const i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ss}),{data:l,error:c}=i;if(c||!l)return{data:{user:null,session:null},error:c};const o=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:d,session:o},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var s,n,a;try{let i;if("email"in t){const{email:u,password:h,options:m}=t;let f=null,y=null;this.flowType==="pkce"&&([f,y]=await Er(this.storage,this.storageKey)),i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:y},xform:Ss})}else if("phone"in t){const{phone:u,password:h,options:m}=t;i=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ss})}else throw new ti("You must provide either an email or phone number and a password");const{data:l,error:c}=i;if(c||!l)return{data:{user:null,session:null},error:c};const o=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:d,session:o},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let s;if("email"in t){const{email:i,password:l,options:c}=t;s=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:ah})}else if("phone"in t){const{phone:i,password:l,options:c}=t;s=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:ah})}else throw new ti("You must provide either an email or phone number and a password");const{data:n,error:a}=s;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Xl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const s=await Za(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(s??"").split("/");try{const{data:i,error:l}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ss});if(await ei(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Xl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(ue(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:s,provider:n,token:a,access_token:i,nonce:l}=t,c=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Ss}),{data:o,error:d}=c;return d?{data:{user:null,session:null},error:d}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Xl}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:d})}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,a,i,l;try{if("email"in t){const{email:c,options:o}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Er(this.storage,this.storageKey));const{error:h}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(s=o==null?void 0:o.data)!==null&&s!==void 0?s:{},create_user:(n=o==null?void 0:o.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:c,options:o}=t,{data:d,error:u}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=o==null?void 0:o.data)!==null&&a!==void 0?a:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(l=o==null?void 0:o.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new ti("You must provide either an email or phone number.")}catch(c){if(ue(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(t){var s,n;try{let a,i;"options"in t&&(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:c}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ss});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const o=l.session,d=l.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:d,session:o},error:null}}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var s,n,a;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Er(this.storage,this.storageKey)),await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:_b})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new ks;const{error:a}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:l}=await fe(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:l,error:c}=await fe(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new ti("You must provide either an email or phone number and a type")}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Za(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(o,d,u)=>(!l&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(o,d,u))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ms}):await this._useSession(async s=>{var n,a,i;const{data:l,error:c}=s;if(c)throw c;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ks}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ms})})}catch(s){if(ue(s))return xb(s)&&(await this._removeSession(),await ei(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new ks;const l=a.session;let c=null,o=null;this.flowType==="pkce"&&t.email!=null&&([c,o]=await Er(this.storage,this.storageKey));const{data:d,error:u}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:o}),jwt:l.access_token,xform:Ms});if(u)throw u;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return th(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ks;const s=Date.now()/1e3;let n=s,a=!0,i=null;const l=th(t.access_token);if(l.exp&&(n=l.exp,a=n<=s),a){const{session:c,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:o}=await this._getUser(t.access_token);if(o)throw o;i={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(ue(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:l,error:c}=s;if(c)throw c;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new ks;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!ts())throw new si("No browser detected.");if(t.error||t.error_description||t.error_code)throw new si(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new sh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new si("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new sh("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:c,expires_at:o,token_type:d}=t;if(!i||!c||!l||!d)throw new si("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(c);let m=u+h;o&&(m=parseInt(o));const f=m-u;f*1e3<=Mn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const y=m-h;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,u);const{data:g,error:v}=await this._getUser(i);if(v)throw v;const p={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:l,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(n){if(ue(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Za(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{error:i};const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:c}=await this.admin.signOut(l,t);if(c&&!(gb(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(await this._removeSession(),await ei(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=sb(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,a;try{const{data:{session:i},error:l}=s;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Er(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:a}=await this._useSession(async i=>{var l,c,o,d,u;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return ts()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ue(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)throw l;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await lb(async a=>(a>0&&await ib(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ss})),(a,i)=>{const l=200*Math.pow(2,a);return i&&Zl(i)&&Date.now()+l-n<Mn})}catch(n){if(this._debug(s,"error",n),ue(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),ts()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Za(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const a=Math.round(Date.now()/1e3),i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)<a+eh;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${eh}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:l}=await this._callRefreshToken(n.refresh_token);l&&(console.error(l),Zl(l)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new ks;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new vl;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new ks;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(a,"error",i),ue(i)){const l={session:null,error:i};return Zl(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,s,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,s)}catch(o){i.push(o)}});if(await Promise.all(l),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await wp(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await ei(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ts()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Mn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Mn}ms, refresh threshold is ${lh} ticks`),a<=lh&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof jp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ts()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const a=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Er(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(c.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await fe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:o,error:d}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((a=o==null?void 0:o.totp)===null||a===void 0)&&a.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return{data:null,error:i};const{data:l,error:c}=await fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(s){if(ue(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?{data:null,error:i}:await fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ue(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(t==null?void 0:t.factors)||[],a=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),i=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const l=this._decodeJWT(a.access_token);let c=null;l.aal&&(c=l.aal);let o=c;((n=(s=a.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const u=l.amr||[];return{data:{currentLevel:c,nextLevel:o,currentAuthenticationMethods:u},error:null}}))}}pa.nextInstanceID=0;const Ab=pa;class Lb extends Ab{constructor(t){super(t)}}var Ib=function(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function c(u){try{d(n.next(u))}catch(h){l(h)}}function o(u){try{d(n.throw(u))}catch(h){l(h)}}function d(u){u.done?i(u.value):a(u.value).then(c,o)}d((n=n.apply(e,[])).next())})};class $b{constructor(t,s,n){var a,i,l;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const c=Qw(t);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const o=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:Bw,realtime:Hw,auth:Object.assign(Object.assign({},qw),{storageKey:o}),global:Fw},u=Yw(n??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch),this.fetch=Jw(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new cw(`${c}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Uv(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ow(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return Ib(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:a,storageKey:i,flowType:l,lock:c,debug:o},d,u){var h;const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lb({url:this.authUrl,headers:Object.assign(Object.assign({},m),d),storageKey:i,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:a,flowType:l,lock:c,debug:o,fetch:u,hasCustomAuthorizationHeader:(h="Authorization"in this.headers)!==null&&h!==void 0?h:!1})}_initRealtimeClient(t){return new Nw(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ob=(e,t,s)=>new $b(e,t,s),$=Ob("https://dkgybdenizwuleiaaqpz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRrZ3liZGVuaXp3dWxlaWFhcXB6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2MzgwMDksImV4cCI6MjA2ODIxNDAwOX0.XQIhw0msnlaG4GTwUu8lGOeC2fwFO6xImzX2mZlTH9U"),_p=j.createContext({session:null,user:void 0,isLogin:!1,logout:async()=>{}});function Ub({children:e}){const[t,s]=j.useState(!1),[n,a]=j.useState(null),[i,l]=j.useState(void 0),c=j.useMemo(()=>!!(n!=null&&n.user),[n]),o=async()=>{try{await $.auth.signOut(),a(null),l(void 0)}catch(d){console.error("Error during logout:",d)}};return j.useEffect(()=>{s(!0),(async()=>{var f;const{data:h,error:m}=await $.auth.getSession();m?console.error("Error fetching session:",m):(a(h.session),l((f=h.session)==null?void 0:f.user)),s(!1)})();const{data:u}=$.auth.onAuthStateChange(async(h,m)=>{a(m),l(m==null?void 0:m.user)});return()=>{u.subscription.unsubscribe()}},[]),r.jsx(_p.Provider,{value:{session:n,isLogin:c,user:i,logout:o},children:e})}const _s=()=>j.useContext(_p),ch={players:[],facilities:[],managers:[],seasons:[]};function Np(e){return 6e4+(e-1)*3e4}function kp(e){return 3e4+e*15e3}function zb(e,t){switch(t.type){case"ADD_PLAYER":return[...e,t.payload.player];case"REMOVE_PLAYER":return e.filter(s=>s.id!==t.payload.player.id);case"START_TRAINING":return e.map(s=>s.id===t.payload.playerId?{...s,training:{stat:t.payload.stat,startTime:Date.now(),period:kp(s.statLevels[t.payload.stat])}}:s);case"COMPLETE_TRAINING":return e.map(s=>s.id===t.payload.playerId&&s.training?{...s,stats:{...s.stats,[s.training.stat]:s.stats[s.training.stat]+5},statLevels:{...s.statLevels,[s.training.stat]:s.statLevels[s.training.stat]+1},level:s.level+1,training:void 0}:s);case"UPDATE_STRATEGY":return e.map(s=>s.id===t.payload.playerId?{...s,strategy:t.payload.strategy}:s);case"EQUIP_ITEM":return e.map(s=>s.id===t.payload.playerId?{...s,equipment:{...s.equipment,[t.payload.equipment.type]:t.payload.equipment}}:s);case"UPDATE_PLAYER_NAME":return e.map(s=>s.id===t.payload.playerId?{...s,name:t.payload.name}:s);case"UPDATE_RANK":return e.map(s=>s.id===t.payload.playerId?{...s,rank:t.payload.rank}:s);case"UPDATE_BEST":return e.map(s=>s.id===t.payload.playerId?{...s,best:t.payload.best}:s);case"ADD_INJURY":return e.map(s=>s.id===t.payload.playerId?{...s,injuries:[...s.injuries||[],t.payload.injury]}:s);case"HEAL_INJURY":return e.map(s=>s.id===t.payload.playerId?{...s,injuries:s.injuries.filter(n=>n.id!==t.payload.injuryId)}:s);default:return e}}function Fb(e,t){switch(t.type){case"START_FACILITY_UPGRADE":return e.map(s=>s.id===t.payload.facilityId?{...s,upgrading:{startTime:Date.now(),period:Np(s.level)}}:s);case"COMPLETE_FACILITY_UPGRADE":case"SPEED_UP_FACILITY":return e.map(s=>s.id===t.payload.facilityId?{...s,...t.payload.upgradedFacility}:s);default:return e}}function Bb(e,t){switch(t.type){case"HIRE_MANAGER":return e.map(s=>s.id===t.payload.managerId?{...s,active:!0,purchasing:{startTime:Date.now(),period:5*24*60*60*1e3}}:s);case"COMPLETE_MANAGER_DURATION":return e.map(s=>s.id===t.payload.managerId?{...s,active:!1,purchasing:void 0}:s);default:return e}}function qb(e,t){var s;switch(t.type){case"SET_GAME_STATE":return(s=t.payload)==null?void 0:s.state;default:return{...e,players:zb(e.players,t),facilities:Fb(e.facilities,t),managers:Bb(e.managers,t)}}}class Ea{constructor(t){this.supabase=t}async batchResourceTransactions(t,s){try{if(!t||!(s!=null&&s.length))return{success:!1,error:"Invalid parameters"};const n=s.map(i=>({user_id:t,resource_type:i.resource_type,amount:i.amount,source:i.source,source_id:i.source_id||null,created_at:new Date().toISOString()})),{error:a}=await this.supabase.from("resource_transactions").insert(n);return a?(console.error("Error in batch resource transactions:",a),{success:!1,error:a.message}):{success:!0}}catch(n){return console.error("Error in batchResourceTransactions:",n),{success:!1,error:"Failed to process resource transactions"}}}async getUserResourceBalances(t){try{const{data:s,error:n}=await this.supabase.from("resource_transactions").select("resource_type, amount").eq("user_id",t);if(n)return console.error("Error getting resource balances:",n),{};console.log("[ResourceService] Raw transactions:",s);const a={shuttlecocks:0,meals:0,coins:0,diamonds:0};return s==null||s.forEach(i=>{const{resource_type:l,amount:c}=i;l in a&&(a[l]+=c)}),console.log("[ResourceService] Final balances:",a),a}catch(s){return console.error("Error in getUserResourceBalances:",s),{}}}async getResourceBalance(t,s){try{const{data:n,error:a}=await this.supabase.from("resource_transactions").select("amount").eq("user_id",t).eq("resource_type",s);return a?(console.error("Error getting resource balance:",a),0):(n==null?void 0:n.reduce((i,l)=>i+l.amount,0))||0}catch(n){return console.error("Error in getResourceBalance:",n),0}}async refreshResourceBalances(){try{const{error:t}=await this.supabase.rpc("refresh_materialized_view",{view_name:"user_resource_balances"});t&&console.warn("Could not refresh materialized view:",t)}catch(t){console.warn("Error refreshing resource balances:",t)}}async addResourceTransaction(t,s,n,a,i){return this.batchResourceTransactions(t,[{resource_type:s,amount:n,source:a,source_id:i}])}async hasSufficientResources(t,s){try{const n=await this.getUserResourceBalances(t);return Object.entries(s).every(([a,i])=>(n[a]||0)>=i)}catch(n){return console.error("Error checking sufficient resources:",n),!1}}}class Qs{constructor(t){this.supabase=t,this.resourceService=new Ea(t)}calcTotalTournamentMatchCount(t){return t-1}async getTournaments(){try{const{data:t,error:s}=await this.supabase.from("tournament_list").select("*").order("start_date",{ascending:!1});if(s)throw console.error("Error fetching tournaments:",s),s;const n=["local","regional","national","international","premier"],a=["upcoming","ongoing","completed"];return(t||[]).map(l=>({...l,tier:n[l.tier]||"local",status:a[l.status]||"upcoming"}))}catch(t){throw console.error("Error in fetching tournaments:",t),t}}async getTournamentById(t){try{const{data:s,error:n}=await this.supabase.from("tournament_list").select("*").eq("id",t).single();if(n)throw console.error("Error fetching tournaments:",n),n;const a=["local","regional","national","international","premier"],i=["upcoming","ongoing","completed"];return{...s,tier:a[s.tier]||"local",status:i[s.status]||"upcoming"}}catch(s){throw console.error("[getTournamentById] Error in fetching tournaments:",s),s}}async getTournamentWithMatches(t){try{console.log("[getTournamentWithMatches] tournamentId",t);const{data:s,error:n}=await this.supabase.from("tournament_list").select("*").eq("id",t).single();if(n)throw console.error("[getTournamentWithMatches] Error fetching tournaments:",n),n;console.log("[getTournamentWithMatches]",s);const{data:a,error:i}=await this.supabase.from("match").select("*").eq("tournament_id",s.id);if(i)throw console.error("[getTournamentWithMatches] Error fetching matches:",i),i;const l=s.registered_players.map(f=>f.player_id),{data:c,error:o}=await this.supabase.from("players").select("id, name, level, is_cpu").in("id",l);if(o)throw console.error("[getTournamentWithMatches] Error fetching players:",o),o;const d=Math.max(...a.map(f=>f.round_level));console.log("tournament.registered_players",s.registered_players);const u=[];for(let f=1;f<=d;f++){const y=a.filter(g=>g.round_level===f).map(g=>{var v,p,w,b,_,P;return{...g,player1_name:(v=c.find(C=>C.id===g.player1_id))==null?void 0:v.name,player1_level:(p=c.find(C=>C.id===g.player1_id))==null?void 0:p.level,player1_is_cpu:(w=c.find(C=>C.id===g.player1_id))==null?void 0:w.is_cpu,player2_name:(b=c.find(C=>C.id===g.player2_id))==null?void 0:b.name,player2_level:(_=c.find(C=>C.id===g.player2_id))==null?void 0:_.level,player2_is_cpu:(P=c.find(C=>C.id===g.player2_id))==null?void 0:P.is_cpu}});u.push({round_level:f,round_name:`Round ${f}`,matches:y})}const h=["local","regional","national","international","premier"],m=["upcoming","ongoing","completed"];return{...s,tier:h[s.tier]||"local",status:m[s.status]||"upcoming",rounds:u}}catch(s){throw s}}async getTournamentsWithMatches(){try{const{data:t,error:s}=await this.supabase.from("tournament_list").select("*").order("start_date",{ascending:!1});if(s)return console.error("Error fetching tournaments:",s),[];const n=[],a=["local","regional","national","international","premier"],i=["upcoming","ongoing","completed"];for(const l of t||[]){const{data:c,error:o}=await this.supabase.from("match").select("*").eq("tournament_id",l.id);if(o)throw console.error("Error fetching matches:",o),o;const d=Math.max(...c.map(h=>h.round_level)),u=[];for(let h=1;h<=d;h++){const m=c.filter(f=>f.round_level===h);u.push({round_level:h,round_name:`Round ${h}`,matches:m})}n.push({...l,tier:a[l.tier]||"local",status:i[l.status]||"upcoming",rounds:u})}return n}catch(t){return console.error("Error in getTournamentsWithRoundsMatches:",t),[]}}async getUserTournamentRegistrations(t){try{const{data:s,error:n}=await this.supabase.from("players").select("id").eq("user_id",t);if(n)return console.error("Error fetching user players:",n),[];const a=(s==null?void 0:s.map(o=>o.id))||[];if(a.length===0)return[];const{data:i,error:l}=await this.supabase.from("tournament_list").select("*").order("start_date",{ascending:!1});return l?(console.error("Error fetching tournaments:",l),[]):(i==null?void 0:i.filter(o=>(o.registered_players||[]).some(u=>a.includes(u.player_id||u.playerId))))||[]}catch(s){return console.error("Error in getUserTournamentRegistrations:",s),[]}}async registerPlayerForTournament(t,s){try{const{data:n,error:a}=await this.supabase.from("tournament_list").select("*").eq("id",t).single();if(a)return console.error("Error fetching tournament:",a),{success:!1,error:a.message};if(!n)return{success:!1,error:"any not found"};if(n.status!==0)return{success:!1,error:"any registration is closed"};if(n.max_participants&&n.current_participants>=n.max_participants)return{success:!1,error:"any is full"};const{data:i,error:l}=await this.supabase.from("players").select("*").eq("id",s).single();if(l)return console.error("Error fetching player:",l),{success:!1,error:l.message};if(n.min_player_level&&i.level<n.min_player_level)return{success:!1,error:"Player level too low for this tournament"};const c=n.registered_players||[];if(c.filter(f=>f.user_id===i.user_id).length>=2)return{success:!1,error:"Max 2 players per user per tournament"};if(c.some(f=>f.player_id===s||f.playerId===s))return{success:!1,error:"Player already registered for this tournament"};if(n.entry_fee){const f=i.user_id;if(!await this.resourceService.hasSufficientResources(f,n.entry_fee))return{success:!1,error:"Insufficient resources for entry fee"};const g=Object.entries(n.entry_fee).map(([p,w])=>({resource_type:p,amount:-w,source:"tournament_entry_fee",source_id:t}));if(!(await this.resourceService.batchResourceTransactions(f,g)).success)return{success:!1,error:"Failed to process entry fee"}}const{data:u}=await this.supabase.from("user_profiles").select("team_name").eq("user_id",i.user_id).single(),h=[...c,{player_id:s,player_name:i.name,user_id:i.user_id,team_name:(u==null?void 0:u.team_name)||"No Team",registered_at:new Date().toISOString()}],{error:m}=await this.supabase.from("tournament_list").update({registered_players:h,current_participants:n.current_participants+1,updated_at:new Date().toISOString()}).eq("id",t);return m?(console.error("Error updating tournament:",m),{success:!1,error:m.message}):{success:!0}}catch(n){return console.error("Error in registerPlayerForTournament:",n),{success:!1,error:"Failed to register player for tournament"}}}async startTournament(t){try{const{data:s,error:n}=await this.supabase.from("tournament_list").select("*").eq("id",t).single();if(n)return console.error("Error fetching tournament:",n),{success:!1,error:n.message};if(!s)return{success:!1,error:"any not found"};if(s.status!==0)return{success:!1,error:"any already started or completed"};const a=s.registered_players||[];if(a.length<2)return{success:!1,error:"Not enough players to start tournament"};const{error:i}=await this.supabase.from("tournament_list").update({status:1,updated_at:new Date().toISOString()}).eq("id",t);if(i)return console.error("Error updating tournament status:",i),{success:!1,error:i.message};const l=await this.generateMatches(t,s.round_interval_minutes,1,a);return l.success?{success:!0}:{success:!1,matches:l.matches}}catch(s){return console.error("Error in startTournament:",s),{success:!1,error:"Failed to start tournament"}}}async getTournamentMatches(t){const{data:s,error:n}=await this.supabase.from("match").select("*").eq("tournament_id",t);return n?(console.error("Error fetching matches:",n),[]):s}async generateMatches(t,s,n,a){try{const i=this.shuffleArray([...a]);console.log("[generateMatches] shuffledPlayers",i);const l=[];for(let d=0;d<i.length;d+=2){const u=i[d],h=i[d+1]||null;console.log("[generateMatches] making match between",u,"and",h),l.push({tournament_id:t,player1_id:u.player_id,player2_id:(h==null?void 0:h.player_id)||null,winner_id:h?null:u.player_id,scheduled_start_time:new Date(new Date().getTime()+1e3*60*s||10).toISOString(),created_at:new Date().toISOString(),completed:!h,status:h?"pending":"bye",score:h?null:"21-0, 21-0",round_level:n})}console.log("[generateMatches] matches",l);const{error:c}=await this.supabase.from("match").insert(l);return c?(console.error("Error creating matches:",c),{success:!1,error:c.message}):{success:!0,matches:[{round_level:n,round_name:`Round ${n}`,matches:l}]}}catch(i){return console.error("Error in generateMatches:",i),{success:!1,error:"Failed to populate first round matches"}}}async getUserNextMatch(t){try{const{data:s,error:n}=await this.supabase.from("players").select("id").eq("user_id",t);if(n)return console.error("Error fetching user players:",n),null;const a=(s==null?void 0:s.map(c=>c.id))||[];if(a.length===0)return null;const{data:i,error:l}=await this.supabase.from("match").select("*").or(a.map(c=>`player1_id.eq.${c},player2_id.eq.${c}`).join(",")).eq("completed",!1).order("created_at",{ascending:!0}).limit(1);return l?(console.error("Error fetching user matches:",l),null):(i==null?void 0:i[0])||null}catch(s){return console.error("Error in getUserNextMatch:",s),null}}async getTournamentProgress(t){try{const{data:s,error:n}=await this.supabase.from("tournament_list").select("*").eq("id",t).single();if(n)return console.error("Error fetching tournament:",n),null;const{data:a,error:i}=await this.supabase.from("match").select("*").eq("tournament_id",t);if(i)return console.error("Error fetching matches:",i),null;const l=this.calcTotalTournamentMatchCount(s.registered_players.length),c=a.filter(d=>d.completed===!0).length,o=l>0?c/l*100:0;return{tournament:s,totalMatchCount:l,completedMatchCount:c,progress:o}}catch(s){return console.error("Error in getTournamentProgress:",s),null}}shuffleArray(t){const s=[...t];for(let n=s.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[s[n],s[a]]=[s[a],s[n]]}return s}async getTournamentAutomationStatus(t){try{const{data:s,error:n}=await this.supabase.from("tournament_list").select("automation_enabled, automation_settings").eq("id",t).single();return n?(console.error("Error fetching tournament automation status:",n),null):{automation_enabled:(s==null?void 0:s.automation_enabled)||!1,automation_settings:(s==null?void 0:s.automation_settings)||null}}catch(s){return console.error("Error in getTournamentAutomationStatus:",s),null}}async toggleAutomation(t,s){try{const{error:n}=await this.supabase.from("tournament_list").update({automation_enabled:s}).eq("id",t);return n?(console.error("Error disabling automation:",n),!1):!0}catch(n){return console.error("Error in disableAutomation:",n),!1}}async getCPUPlayers(){const{data:t,error:s}=await this.supabase.from("players").select("*").eq("is_cpu",!0);if(s)throw s;return t}async updateTournament(t,s,n=[]){if(n.length>0){const{data:i,error:l}=await this.supabase.from("players").select("*").in("id",n);if(l)throw l;const c=(i||[]).map(o=>({player_id:o.id}));s.registered_players=c,s.current_participants=c.length}console.log("updating tournament",s);const{error:a}=await this.supabase.from("tournament_list").update(s).eq("id",t);if(a)throw a;return!0}async createTournament(t,s=[]){if(s.length>0){const{data:i,error:l}=await this.supabase.from("players").select("*").in("id",s);if(l)throw l;const c=(i||[]).map(o=>({player_id:o.id}));t.registered_players=c,t.current_participants=c.length}console.log("creating tournament",t);const{data:n,error:a}=await this.supabase.from("tournament_list").insert(t).select().single();if(a)throw a;return n}async deleteTournament(t){try{const{error:s}=await this.supabase.from("match").delete().eq("tournament_id",t);if(s)throw console.error("Error deleting matches:",s),s;const{error:n}=await this.supabase.from("user_tournament_registrations").delete().eq("tournament_id",t);n&&console.error("Error deleting tournament registrations:",n);const{error:a}=await this.supabase.from("tournament_list").delete().eq("id",t);if(a)throw console.error("Error deleting tournament:",a),a;return console.log(`Successfully deleted tournament ${t} and all associated records`),!0}catch(s){throw console.error("Error in deleteTournament:",s),s}}async getRegisteredPlayers(t){const{data:s,error:n}=await this.supabase.from("user_tournament_registrations").select(`
        player_id,
        players!inner(*)
      `).eq("tournament_id",t).eq("status","active");if(n)throw n;return s}}function Hb(){return{endurance:Math.floor(Math.random()*20)+40,strength:Math.floor(Math.random()*20)+40,agility:Math.floor(Math.random()*20)+40,speed:Math.floor(Math.random()*20)+40,explosiveness:Math.floor(Math.random()*20)+40,injury_prevention:Math.floor(Math.random()*20)+40,smash:Math.floor(Math.random()*20)+40,defense:Math.floor(Math.random()*20)+40,serve:Math.floor(Math.random()*20)+40,stick:Math.floor(Math.random()*20)+40,slice:Math.floor(Math.random()*20)+40,drop:Math.floor(Math.random()*20)+40}}function Wb(){return{endurance:0,strength:0,agility:0,speed:0,explosiveness:0,injury_prevention:0,smash:0,defense:0,serve:0,stick:0,slice:0,drop:0}}function Vb(e){const t={};for(const s in e){const n=e[s];t[s]=Math.floor(n/10)}return t}function dh(){return{physicalCommitment:5,playStyle:5,movementSpeed:5,fatigueManagement:5,rallyConsistency:5,riskTaking:5,attack:5,softAttack:5,serving:5,courtDefense:5,mentalToughness:5,selfConfidence:5}}const Gb=["Alex","Jordan","Morgan","Taylor","Sam","Chris","Pat","Robin","Jamie","Lin","Wei","Chen","Lee","Kim","Park","Sato","Tanaka","Singh","Thomas","Martin","Bernard","Lucas","Hugo","Louis","Nathan","Gabriel","Arthur"],Jb=["Emma","Marie","Sophie","Alice","Julie","Sarah","Laura","Clara","Anna","Mei","Yuki","Sakura","Ji-eun","Min","Priya","Ava","Isabella","Sophia","Charlotte","Amelia","Harper","Evelyn","Abigail","Emily","Elizabeth"],uh=["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Wang","Li","Zhang","Liu","Chen","Kim","Lee","Park","Singh","Patel","Martin","Bernard","Thomas","Petit","Robert","Richard","Durand","Dubois","Anderson","Taylor","Moore","Jackson","Thompson","White","Harris","Clark"];function eo(e){const t=e==="male"?Gb:Jb,s=t[Math.floor(Math.random()*t.length)],n=uh[Math.floor(Math.random()*uh.length)];return`${s} ${n}`}function es(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Kb(){const e=Math.random()*100;return e<.5?{rarity:"legendary",totalStats:es(921,999),max_level:es(400,500)}:e<2?{rarity:"premium",totalStats:es(801,920),max_level:es(300,400)}:e<7?{rarity:"epic",totalStats:es(451,800),max_level:es(220,300)}:e<25?{rarity:"rare",totalStats:es(201,450),max_level:es(180,220)}:{rarity:"common",totalStats:es(151,200),max_level:es(150,180)}}function Qb(e,t){const s=t.map(()=>Math.random()),n=s.reduce((c,o)=>c+o,0),a={};t.forEach((c,o)=>{a[c]=Math.round(s[o]/n*e)});const i=e-Object.values(a).reduce((c,o)=>c+o,0),l=t[Math.floor(Math.random()*t.length)];return a[l]+=i,a}class Ys{constructor(t){this.supabase=t}async updatePlayerRank(t){try{const s=new Date(Date.now()-7776e6).toISOString(),{data:n,error:a}=await this.supabase.from("player_play_history").select("*").or(`player1_id.eq.${t},player2_id.eq.${t}`).gte("created_at",s).order("created_at",{ascending:!1});if(a)return console.error("Error fetching match history:",a),{success:!1,error:a.message};const i={P12:5,P11:7.67,P10:12.67,D9:17.67,D8:22.67,D7:27.67,R6:34.33,R5:42.67,R4:51,N3:62.67,N2:77,N1:93},l=m=>m>=451?"N1":m>=371?"N2":m>=301?"N3":m>=251?"R4":m>=201?"R5":m>=161?"R6":m>=131?"D7":m>=101?"D8":m>=71?"D9":m>=41?"P10":m>=21?"P11":"P12",c=[];for(const m of n||[]){const f=m.player1_id===t;if(!(f?m.result===!0:m.result===!1))continue;const g=f?m.player2_rank:m.player1_rank;if(typeof g!="number")continue;const v=l(g),p=i[v]||0;c.push(p)}const o=c.sort((m,f)=>f-m).slice(0,6),d=Number(o.reduce((m,f)=>m+f,0).toFixed(2)),u=l(d);console.log(u);const{error:h}=await this.supabase.from("players").update({rank:d,rank_label:u,updated_at:new Date().toISOString()}).eq("id",t);return h?(console.error("Error updating player rank:",h),{success:!1,error:h.message}):{success:!0}}catch(s){return console.error("Error in updatePlayerRank:",s),{success:!1,error:"Failed to update player rank"}}}async removeHealedInjuries(t,s){const n=Date.now(),a=s.filter(l=>l.recoveryEndTime>n);if(a.length===s.length)return;const{error:i}=await this.supabase.from("players").update({injuries:a}).eq("id",t);i&&console.error("Failed to update injuries:",i.message)}async getPlayerWithDetails(t){try{const{data:s,error:n}=await this.supabase.from("players").select("*").eq("id",t).eq("is_cpu",!1).single();if(n)return console.error("Error fetching player:",n),null;const{data:a}=await this.supabase.from("player_stats").select("*").eq("player_id",t).single(),{data:i}=await this.supabase.from("player_levels").select("*").eq("player_id",t).single(),{data:l}=await this.supabase.from("player_strategy").select("*").eq("player_id",t).single(),{data:c}=await this.supabase.from("player_equipment").select("*").eq("player_id",t);return{...s,stats:a,levels:i,strategy:l,equipment:c}}catch(s){return console.error("Error in getPlayerWithDetails:",s),null}}async createPlayer(t,s,n="male"){try{const{rarity:a,totalStats:i,max_level:l}=Kb(),o=Qb(i,["endurance","strength","agility","speed","explosiveness","injury_prevention","smash","defense","serve","stick","slice","drop"]),d=dh(),u=Vb(o),h=Object.values(u).reduce((y,g)=>y+g,0),{data:m,error:f}=await this.supabase.from("players").insert({user_id:t,name:s||eo(n),gender:n,is_cpu:!1,rarity:a,level:h,max_level:l,rank:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(f)throw f;return await this.supabase.from("player_stats").insert({player_id:m.id,endurance:o.endurance,strength:o.strength,agility:o.agility,speed:o.speed,explosiveness:o.explosiveness,injury_prevention:o.injury_prevention,smash:o.smash,defense:o.defense,serve:o.serve,stick:o.stick,slice:o.slice,drop:o.drop,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),await this.supabase.from("player_levels").insert({player_id:m.id,endurance:u.endurance,strength:u.strength,agility:u.agility,speed:u.speed,explosiveness:u.explosiveness,injury_prevention:u.injury_prevention,smash:u.smash,defense:u.defense,serve:u.serve,stick:u.stick,slice:u.slice,drop:u.drop,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),await this.supabase.from("player_strategy").insert({player_id:m.id,physical_commitment:d.physicalCommitment,play_style:d.playStyle,movement_speed:d.movementSpeed,fatigue_management:d.fatigueManagement,rally_consistency:d.rallyConsistency,risk_taking:d.riskTaking,attack:d.attack,soft_attack:d.softAttack,serving:d.serving,court_defense:d.courtDefense,mental_toughness:d.mentalToughness,self_confidence:d.selfConfidence,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),{success:!0,player:{...m,stats:o,levels:u,strategy:d,equipment:[]}}}catch(a){return console.error("Error in createPlayer:",a),{success:!1,error:a.message||"Failed to create player"}}}async createCpuPlayer(t,s="beginner",n,a,i){try{const l=i||(Math.random()>.5?"male":"female"),c=n&&a?`${n} Player ${a}`:eo(l),o=p=>{switch(p){case"beginner":return Math.floor(Math.random()*20)+30;case"intermediate":return Math.floor(Math.random()*20)+50;case"advanced":return Math.floor(Math.random()*20)+70;case"expert":return Math.floor(Math.random()*15)+85;case"master":return Math.floor(Math.random()*10)+90;default:return Math.floor(Math.random()*20)+40}},d=p=>{switch(p){case"beginner":return Math.floor(Math.random()*3);case"intermediate":return Math.floor(Math.random()*3)+2;case"advanced":return Math.floor(Math.random()*3)+4;case"expert":return Math.floor(Math.random()*3)+6;case"master":return Math.floor(Math.random()*3)+8;default:return Math.floor(Math.random()*3)}},u=p=>{switch(p){case"beginner":return Math.floor(Math.random()*50);case"intermediate":return Math.floor(Math.random()*100)+50;case"advanced":return Math.floor(Math.random()*100)+150;case"expert":return Math.floor(Math.random()*150)+250;case"master":return Math.floor(Math.random()*150)+400;default:return 0}},{data:h,error:m}=await this.supabase.from("players").insert({user_id:t,name:c,level:Math.floor(Math.random()*20)+1,max_level:Math.floor(Math.random()*50)+150,rank:u(s),gender:l,is_cpu:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(m)return console.error("Error creating CPU player:",m),{success:!1,error:m.message};const{error:f}=await this.supabase.from("player_stats").insert({player_id:h.id,endurance:o(s),strength:o(s),agility:o(s),speed:o(s),explosiveness:o(s),injury_prevention:o(s),smash:o(s),defense:o(s),serve:o(s),stick:o(s),slice:o(s),drop:o(s),created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(console.log(f),f)return console.log("Error creating CPU player stats:",f),{success:!1,error:f.message};const{error:y}=await this.supabase.from("player_levels").insert({player_id:h.id,endurance:d(s),strength:d(s),agility:d(s),speed:d(s),explosiveness:d(s),injury_prevention:d(s),smash:d(s),defense:d(s),serve:d(s),stick:d(s),slice:d(s),drop:d(s),created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(y)return console.log("Error creating CPU player levels:",y),{success:!1,error:y.message};const g=p=>{switch(p){case"beginner":return Math.floor(Math.random()*3)+3;case"intermediate":return Math.floor(Math.random()*3)+4;case"advanced":return Math.floor(Math.random()*3)+5;case"expert":return Math.floor(Math.random()*3)+6;case"master":return Math.floor(Math.random()*3)+7;default:return Math.floor(Math.random()*3)+4}},{error:v}=await this.supabase.from("player_strategy").insert({player_id:h.id,physical_commitment:g(s),play_style:g(s),movement_speed:g(s),fatigue_management:g(s),rally_consistency:g(s),risk_taking:g(s),attack:g(s),soft_attack:g(s),serving:g(s),court_defense:g(s),mental_toughness:g(s),self_confidence:g(s),created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return v?(console.log("Error creating CPU player strategy:",v),{success:!1,error:v.message}):{success:!0,player:h}}catch(l){return console.error("Error in createCpuPlayer:",l),{success:!1,error:"Failed to create CPU player"}}}async generateCpuPlayersForTeam(t,s,n,a,i,l="mixed"){try{const c=[];for(let o=1;o<=i;o++){let d;l==="mixed"?d=Math.random()>.5?"male":"female":d=l;const u=await this.createCpuPlayer(t,a,n,o,d);u.success&&u.player&&(c.push(u.player),await this.supabase.from("team_players").insert({team_id:s,player_id:u.player.id,created_at:new Date().toISOString()}))}return{success:!0,players:c}}catch(c){return console.error("Error in generateCpuPlayersForTeam:",c),{success:!1,error:"Failed to generate CPU players for team"}}}createQuickCpuOpponent(t){const s=Hb(),n=Wb(),a=dh(),i=Math.random()>.5?"male":"female";return{id:`cpu-${Date.now()}`,name:eo(i),gender:i,level:t,maxLevel:t+10,stats:s,statLevels:n,rank:Math.floor(Math.random()*450),training:void 0,strategy:a,equipment:{},injuries:[],best:[]}}async updatePlayerStats(t,s){try{const{error:n}=await this.supabase.from("player_stats").update({endurance:s.endurance,strength:s.strength,agility:s.agility,speed:s.speed,explosiveness:s.explosiveness,injury_prevention:s.injury_prevention,smash:s.smash,defense:s.defense,serve:s.serve,stick:s.stick,slice:s.slice,drop:s.drop,updated_at:new Date().toISOString()}).eq("player_id",t);return n?(console.error("Error updating player stats:",n),{success:!1,error:n.message}):{success:!0}}catch(n){return console.error("Error in updatePlayerStats:",n),{success:!1,error:"Failed to update player stats"}}}async updatePlayerLevels(t,s){try{const{error:n}=await this.supabase.from("player_levels").update({endurance:s.endurance,strength:s.strength,agility:s.agility,speed:s.speed,explosiveness:s.explosiveness,injury_prevention:s.injury_prevention,smash:s.smash,defense:s.defense,serve:s.serve,stick:s.stick,slice:s.slice,drop:s.drop,updated_at:new Date().toISOString()}).eq("player_id",t);if(n)return console.error("Error updating player levels:",n),{success:!1,error:n.message};const a=Object.values(s).reduce((l,c)=>l+c,0),{error:i}=await this.supabase.from("players").update({level:a,updated_at:new Date().toISOString()}).eq("id",t);return i?(console.error("Error syncing player.level:",i),{success:!1,error:i.message}):{success:!0}}catch(n){return console.error("Unexpected error in updatePlayerLevels:",n),{success:!1,error:"Failed to update player levels"}}}async getPlayersByUserId(t){try{const{data:s,error:n}=await this.supabase.from("players").select("*").eq("user_id",t).eq("is_cpu",!1).order("created_at",{ascending:!1});return n?(console.error("Error fetching players by user ID:",n),[]):s||[]}catch(s){return console.error("Error in getPlayersByUserId:",s),[]}}async getPlayerWithTeamName(t){var s,n,a;try{const{data:i,error:l}=await this.supabase.from("players").select(`
          *,
          team_players!inner(
            teams!inner(
              name
            )
          )
        `).eq("id",t).eq("is_cpu",!1).single();return l?(console.error("Error fetching player with team name:",l),null):{...i,teamName:((a=(n=(s=i.team_players)==null?void 0:s[0])==null?void 0:n.teams)==null?void 0:a.name)||"No Team"}}catch(i){return console.error("Error in getPlayerWithTeamName:",i),null}}async getPlayersWithTeamNames(t){try{return(await Promise.all(t.map(n=>this.getPlayerWithTeamName(n)))).filter(n=>n!==null)}catch(s){return console.error("Error in getPlayersWithTeamNames:",s),[]}}async updatePlayerName(t,s){try{const{error:n}=await this.supabase.from("players").update({name:s,updated_at:new Date().toISOString()}).eq("id",t);return n?(console.error("Error updating player name:",n),{success:!1,error:n.message}):{success:!0}}catch(n){return console.error("Error in updatePlayerName:",n),{success:!1,error:"Failed to update player name"}}}}class Sp{constructor(t){this.supabase=t,this.playerService=new Ys(t),this.resourceService=new Ea(t)}async handleNewUser(t,s,n){try{const{data:a}=await this.supabase.from("players").select("id").eq("user_id",t).limit(1);if(a&&a.length>0)return{success:!0};const i=s?s.split("@")[0]:"Player",{error:l}=await this.supabase.from("user_profiles").insert({user_id:t,team_name:n||`${i} Team`,display_name:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});l&&console.warn("Failed to create user profile:",l),console.log("Created user profiles");const c=[{resource_type:"coins",amount:1e3,source:"initial_resources"},{resource_type:"shuttlecocks",amount:50,source:"initial_resources"},{resource_type:"meals",amount:20,source:"initial_resources"},{resource_type:"diamonds",amount:9999999,source:"initial_resources"}],o=await this.resourceService.batchResourceTransactions(t,c);o.success||console.warn("Failed to give initial resources:",o.error);const d=[{user_id:t,name:"Shuttlecock Machine",type:"shuttlecock-machine",level:1,production_rate:1,resource_type:"shuttlecocks",max_players:0,upgrade_cost:{coins:100},created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{user_id:t,name:"Canteen",type:"canteen",level:1,production_rate:1,resource_type:"meals",max_players:0,upgrade_cost:{coins:150},created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{user_id:t,name:"Sponsors",type:"sponsors",level:1,production_rate:2,resource_type:"coins",max_players:0,upgrade_cost:{coins:200},created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{user_id:t,name:"Training Center",type:"training-center",level:1,production_rate:0,resource_type:"training",max_players:2,upgrade_cost:{coins:300,shuttlecocks:50,meals:50},created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],{error:u}=await this.supabase.from("facilities").insert(d);console.log("Created initial facilities"),u&&console.warn("Failed to create initial facilities:",u);const h=[{user_id:t,name:"Jos",facility_type:"shuttlecock-machine",production_bonus:.5,active:!1,image_url:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e",cost:50,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{user_id:t,name:"Gordon Ramsay",facility_type:"canteen",production_bonus:.5,active:!1,image_url:"https://images.unsplash.com/photo-1577219491135-ce391730fb2c",cost:50,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{user_id:t,name:"Ronald Dump",facility_type:"sponsors",production_bonus:.5,active:!1,image_url:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d",cost:50,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],{error:m}=await this.supabase.from("managers").insert(h);return console.log("Created initial managers"),m&&console.warn("Failed to create initial managers:",m),{success:!0}}catch(a){return console.error("Error in handleNewUser:",a),{success:!1,error:"Failed to set up new user"}}}async adminChangeUserPassword(t,s,n){try{if(n){const{data:a}=await this.supabase.from("admin_users").select("id").eq("user_id",n).single();if(!a)return{success:!1,error:"Not authorized"}}return console.log(`Admin ${n} requested password change for user ${t} with new password ${s}`),{success:!1,error:"Password change requires server-side implementation"}}catch(a){return console.error("Error in adminChangeUserPassword:",a),{success:!1,error:"Failed to change user password"}}}async getUserProfile(t){try{const{data:s}=await this.supabase.from("user_profiles").select("*").eq("user_id",t).single(),n=await this.playerService.getPlayersByUserId(t),{data:a,error:i}=await this.supabase.from("facilities").select("*").eq("user_id",t);i&&console.error("Error fetching facilities:",i);const{data:l,error:c}=await this.supabase.from("managers").select("*").eq("user_id",t);c&&console.error("Error fetching managers:",c);const o=await this.resourceService.getUserResourceBalances(t),{data:d,error:u}=await this.supabase.from("tournament_list").select("*").order("start_date",{ascending:!1}).limit(10);u&&console.error("Error fetching tournament history:",u);const h=(d==null?void 0:d.filter(m=>(m.registered_players||[]).some(y=>y.user_id===t)))||[];return{userProfile:s||null,players:n||[],facilities:a||[],managers:l||[],resourceBalances:o,tournamentHistory:h}}catch(s){return console.error("Error in getUserProfile:",s),{userProfile:null,players:[],facilities:[],managers:[],resourceBalances:{},tournamentHistory:[]}}}async getUserStatistics(t){try{const{data:s}=await this.supabase.from("players").select("id").eq("user_id",t),n=(s==null?void 0:s.map(m=>m.id))||[];if(n.length===0)return{totalMatches:0,wins:0,losses:0,winRate:0,tournamentsPlayed:0,tournamentsWon:0};const{data:a}=await this.supabase.from("player_play_history").select("*").or(n.map(m=>`player1_id.eq.${m},player2_id.eq.${m}`).join(","));let i=0,l=0;a==null||a.forEach(m=>{(n.includes(m.player1_id)?m.result:!m.result)?i++:l++});const c=i+l,o=c>0?i/c*100:0,{data:d}=await this.supabase.from("tournament_list").select("registered_players, status");let u=0,h=0;return d==null||d.forEach(m=>{(m.registered_players||[]).some(g=>g.user_id===t)&&u++}),{totalMatches:c,wins:i,losses:l,winRate:Math.round(o*100)/100,tournamentsPlayed:u,tournamentsWon:h}}catch(s){return console.error("Error in getUserStatistics:",s),{totalMatches:0,wins:0,losses:0,winRate:0,tournamentsPlayed:0,tournamentsWon:0}}}async updateUserTeamName(t,s){try{const{error:n}=await this.supabase.from("user_profiles").update({team_name:s,updated_at:new Date().toISOString()}).eq("user_id",t);return n?(console.error("Error updating team name:",n),{success:!1,error:n.message}):{success:!0}}catch(n){return console.error("Error in updateUserTeamName:",n),{success:!1,error:"Failed to update team name"}}}async getUserTeamName(t){try{const{data:s,error:n}=await this.supabase.from("user_profiles").select("team_name").eq("user_id",t).single();return n?(console.error("Error fetching team name:",n),null):(s==null?void 0:s.team_name)||null}catch(s){return console.error("Error in getUserTeamName:",s),null}}async updateUserPreferences(t,s){try{const{data:n}=await this.supabase.from("players").select("id").eq("user_id",t).limit(1).single();if(console.log(`Updating user preferences for user ${t} with preferences ${JSON.stringify(s)}`),n){const{error:a}=await this.supabase.from("players").update({updated_at:new Date().toISOString()}).eq("id",n.id);if(a)return{success:!1,error:a.message}}return{success:!0}}catch(n){return console.error("Error in updateUserPreferences:",n),{success:!1,error:"Failed to update user preferences"}}}async deleteUserAccount(t){try{await this.supabase.from("resource_transactions").delete().eq("user_id",t);const{data:s}=await this.supabase.from("players").select("id").eq("user_id",t),n=(s==null?void 0:s.map(a=>a.id))||[];return n.length>0&&await this.supabase.from("player_play_history").delete().or(n.map(a=>`player1_id.eq.${a},player2_id.eq.${a}`).join(",")),await this.supabase.from("players").delete().eq("user_id",t),await this.supabase.from("facilities").delete().eq("user_id",t),await this.supabase.from("managers").delete().eq("user_id",t),await this.supabase.from("interclub_registrations").delete().eq("user_id",t),{success:!0}}catch(s){return console.error("Error in deleteUserAccount:",s),{success:!1,error:"Failed to delete user account"}}}async getUserActivityLogs(t,s=50,n=0){try{const{data:a,error:i}=await this.supabase.from("user_activity_logs").select("*").eq("user_id",t).order("created_at",{ascending:!1}).range(n,n+s-1);return i?(console.error("Error fetching user activity logs:",i),[]):a||[]}catch(a){return console.error("Error in getUserActivityLogs:",a),[]}}async loadGameState(t){console.log("Loading game state");const s={players:[],facilities:[],managers:[],seasons:[]};if(!t)return s;try{const{data:n}=await this.supabase.from("players").select("*").eq("user_id",t).eq("is_cpu",!1).order("created_at",{ascending:!0}),a=(n==null?void 0:n.map(y=>y.id))||[],{data:i}=a.length>0?await this.supabase.from("player_stats").select("*").in("player_id",a):{data:[]},{data:l}=a.length>0?await this.supabase.from("player_levels").select("*").in("player_id",a):{data:[]},{data:c}=a.length>0?await this.supabase.from("player_strategy").select("*").in("player_id",a):{data:[]},{data:o}=await this.supabase.from("facilities").select("*").eq("user_id",t).order("created_at",{ascending:!0}),{data:d}=await this.supabase.from("managers").select("*").eq("user_id",t).order("created_at",{ascending:!0}),{data:u}=await this.supabase.from("player_play_history").select("*"),{data:h}=await this.supabase.from("season_list").select("*");s.facilities=(o||[]).map(y=>({id:y.id,name:y.name,type:y.type,level:y.level,productionRate:y.production_rate,resourceType:y.resource_type,maxPlayers:y.max_players,upgradeCost:y.upgrade_cost,upgrading:y.upgrading})),s.managers=(d||[]).map(y=>({id:y.id,name:y.name,facilityType:y.facility_type,productionBonus:y.production_bonus,active:y.active,imageUrl:y.image_url,cost:y.cost,purchasing:y.purchasing})),s.seasons=(h||[]).map(y=>({id:y.id,entryFee:{coins:y.entryFee.coins,shuttlecocks:y.entryFee.shuttlecocks,meals:y.entryFee.meals,diamonds:y.entryFee.diamonds,player:y.entryFee.player},startDate:y.start_date,prizePool:y.prizePool,match_days:y.match_days,type:y.type}));const m=y=>(u==null?void 0:u.filter(v=>v.player1_id===y&&v.result===!0||v.player2_id===y&&v.result===!1).map(v=>({opponent_id:v.player1_id===y?v.player2_id:v.player1_id,opponent_rank:v.player1_id===y?v.player2_rank:v.player1_rank,match_date:v.created_at})).sort((v,p)=>p.opponent_rank-v.opponent_rank).slice(0,6))||[],f=[];return(n||[]).map(y=>{const g=[],v=y.equipment,p={};v&&Object.entries(v).map(([L,T])=>{p[L]=g.find(O=>O.id==T)});const w=()=>({endurance:Math.floor(Math.random()*20)+40,strength:Math.floor(Math.random()*20)+40,agility:Math.floor(Math.random()*20)+40,speed:Math.floor(Math.random()*20)+40,explosiveness:Math.floor(Math.random()*20)+40,injuryPrevention:Math.floor(Math.random()*20)+40,smash:Math.floor(Math.random()*20)+40,defense:Math.floor(Math.random()*20)+40,serve:Math.floor(Math.random()*20)+40,stick:Math.floor(Math.random()*20)+40,slice:Math.floor(Math.random()*20)+40,drop:Math.floor(Math.random()*20)+40}),b=()=>({endurance:0,strength:0,agility:0,speed:0,explosiveness:0,injuryPrevention:0,smash:0,defense:0,serve:0,stick:0,slice:0,drop:0}),_=()=>({physicalCommitment:5,playStyle:5,movementSpeed:5,fatigueManagement:5,rallyConsistency:5,riskTaking:5,attack:5,softAttack:5,serving:5,courtDefense:5,mentalToughness:5,selfConfidence:5}),P={id:y.id,gender:y.gender,name:y.name,stats:w(),statLevels:b(),level:y.level,maxLevel:y.max_level,rank:y.rank,best:m(y.id),training:y.training,equipment:p,injuries:y.injuries||[],strategy:_()},C=(i||[]).find(({player_id:L})=>L==y.id);C&&(P.stats={endurance:C.endurance,strength:C.strength,agility:C.agility,speed:C.speed,explosiveness:C.explosiveness,injuryPrevention:C.injury_prevention,smash:C.smash,defense:C.defense,serve:C.serve,stick:C.stick,slice:C.slice,drop:C.drop});const k=(l||[]).find(({player_id:L})=>L==y.id);k&&(P.statLevels={endurance:k.endurance,strength:k.strength,agility:k.agility,speed:k.speed,explosiveness:k.explosiveness,injuryPrevention:k.injury_prevention,smash:k.smash,defense:k.defense,serve:k.serve,stick:k.stick,slice:k.slice,drop:k.drop});const R=(c||[]).find(({player_id:L})=>L==y.id);R&&(P.strategy={physicalCommitment:R.physical_commitment,playStyle:R.play_style,movementSpeed:R.movement_speed,fatigueManagement:R.fatigue_management,rallyConsistency:R.rally_consistency,riskTaking:R.risk_taking,attack:R.attack,softAttack:R.soft_attack,serving:R.serving,courtDefense:R.court_defense,mentalToughness:R.mental_toughness,selfConfidence:R.self_confidence}),f.push(P)}),s.players=f,s}catch(n){return console.log("Error in loadGameState:",n),s}}}class Cp{constructor(t){this.supabase=t,this.playerService=new Ys(t),this.tournamentService=new Qs(t)}async executeTournamentMatch(t){try{const{data:s,error:n}=await this.supabase.from("match").select("*").eq("id",t).single();if(n)return console.error("Error fetching match:",n),{success:!1,error:n.message};if(!s)return{success:!1,error:"Match not found"};if(s.status!=="pending")return{success:!1,error:"Match already completed or in progress"};const a=await this.playerService.getPlayerWithDetails(s.player1_id),i=await this.playerService.getPlayerWithDetails(s.player2_id),l=this.calculatePlayerStrength(a),c=this.calculatePlayerStrength(i);console.log("[Match Strengths]",{player1:{name:a.name,strength:l},player2:{name:i.name,strength:c}});const o=this.simulateMatch(a,i,l,c),{error:d}=await this.supabase.from("match").update({status:"completed",completed:!0,winner_id:o.winnerId,score:o.score,actual_start_time:new Date().toISOString(),actual_end_time:new Date().toISOString()}).eq("id",t);if(d)return console.error("Error updating match:",d),{success:!1,error:d.message};await this.recordMatchHistory(s.player1_id,s.player2_id,o),await Promise.all([this.playerService.updatePlayerRank(s.player1_id),this.playerService.updatePlayerRank(s.player2_id)]);const u={winnerId:o.winnerId,winnerName:o.winnerId===s.player1_id?a.name:i.name,score:o.score},{data:h}=await this.supabase.from("match").select("*").eq("tournament_id",s.tournament_id);if(((h==null?void 0:h.filter(f=>f.round_level===f.round_level).length)||0)===1)console.log("All matches of tournament completed, tournament is over"),await this.tournamentService.updateTournament(s.tournament_id,{status:2,champion_id:o.winnerId});else{console.log("All matches of current round completed, moving to next round");const f=await this.tournamentService.getTournamentById(s.tournament_id),y=(h==null?void 0:h.filter(g=>g.round_level===s.round_level).map(g=>g.winner_id))||[];console.log("remainingPlayers",y),await this.tournamentService.generateMatches(s.tournament_id,f.round_interval_minutes,s.round_level+1,y)}return{success:!0,matchData:u}}catch(s){return console.error("Error in executeTournamentMatch:",s),{success:!1,error:"Failed to execute match"}}}calculatePlayerStrength(t){const s=t.stats||{},n=t.levels||{},a=t.strategy||{},i=((s.endurance||50)*(n.endurance||1)+(s.strength||50)*(n.strength||1)+(s.agility||50)*(n.agility||1)+(s.speed||50)*(n.speed||1)+(s.explosiveness||50)*(n.explosiveness||1))/5,l=((s.smash||50)*(n.smash||1)+(s.defense||50)*(n.defense||1)+(s.serve||50)*(n.serve||1)+(s.stick||50)*(n.stick||1)+(s.slice||50)*(n.slice||1)+(s.drop||50)*(n.drop||1))/6,c=((a.mental_toughness||5)*10+(a.self_confidence||5)*10+(s.injury_prevention||50)*(n.injury_prevention||1))/3,o=(t.level||1)*2+Math.max(0,(1e3-(t.rank||1e3))/20),d=((a.rally_consistency||5)*10+(a.attack||5)*10+(a.court_defense||5)*10)/3,u=i*.25+l*.35+c*.2+o*.1+d*.1,h=this.calculateEquipmentBonus(t.equipment),m=this.calculateInjuryPenalty(t.injuries),f=this.calculateFormFactor(t);return Math.max(10,u+h-m+f)}calculateEquipmentBonus(t){if(!Array.isArray(t)||t.length===0)return 0;let s=0;return t.forEach(n=>{n&&n.stats?Object.values(n.stats).forEach(a=>{typeof a=="number"&&(s+=a*.1)}):s+=1}),Math.min(s,15)}calculateInjuryPenalty(t){return!Array.isArray(t)||t.length===0?0:t.filter(n=>n.recoveryEndTime&&n.recoveryEndTime>Date.now()).reduce((n,a)=>{const i=a.severity||1;return n+i*3},0)}calculateFormFactor(t){const s=t.recent_matches||[];return s.length===0?0:(s.filter(i=>i.winner_id===t.id).length/s.length-.5)*10}simulateMatch(t,s,n,a){const i=.85+Math.random()*.3,l=.85+Math.random()*.3,c=n*i,o=a*l,d=c>o?t.id:s.id,u=d===t.id?t:s,h=d===t.id?s:t,m=this.generateMatchScore(c,o),f=this.calculateMatchDuration(Math.abs(c-o));return{winnerId:d,score:m.score,matchData:{player1_strength:n,player2_strength:a,player1_final_strength:c,player2_final_strength:o,performance_variance:{player1:i,player2:l},winner_name:u.name,loser_name:h.name,match_duration:f,strength_difference:Math.abs(c-o)}}}generateMatchScore(t,s){const n=t+s,a=t/n,i=[];let l=0,c=0;for(;l<2&&c<2;){const d=this.simulateSet(a);i.push(d),d.winner===1?l++:c++}return{score:i.map(d=>`${d.player1Score}-${d.player2Score}`).join(", "),winner:l>c?1:2}}calcTotalTournamentMatchCount(t){return t-1}simulateSet(t){let s=0,n=0;for(;Math.random()<t?s++:n++,!((s>=21||n>=21)&&Math.abs(s-n)>=2||s>=30||n>=30););return{player1Score:s,player2Score:n,winner:s>n?1:2}}calculateMatchDuration(t){const n=Math.max(.8,1.2-t/100);return Math.floor(45*n+Math.random()*15)}async recordMatchHistory(t,s,n){try{await this.supabase.from("player_play_history").insert({player1_id:t,player2_id:s,result:n.winnerId===t,player1_rank:n.matchData.player1_final_strength,player2_rank:n.matchData.player2_final_strength,created_at:new Date().toISOString()})}catch(a){console.error("Error recording match history:",a)}}async getMatchWithDetails(t){try{const{data:s,error:n}=await this.supabase.from("match").select(`
          *,
          player1:player1_id(
            id,
            name,
            level,
            rank
          ),
          player2:player2_id(
            id, 
            name,
            level,
            rank
          )
        `).eq("id",t).single();return n?(console.error("Error fetching match details:",n),null):s}catch(s){return console.error("Error in getMatchWithDetails:",s),null}}}const Yb=["departmental","regional","national","top12"],Xb=["mens_singles","womens_singles","mens_doubles","womens_doubles","mixed_doubles"],mr={departmental:{coins:1e3,shuttlecocks:100,meals:50},regional:{coins:2e3,shuttlecocks:200,meals:100},national:{coins:5e3,shuttlecocks:500,meals:250},top12:{coins:1e4,shuttlecocks:1e3,meals:500}};class Ep{constructor(t){this.supabase=t,this.resourceService=new Ea(t),this.playerService=new Ys(t),this.matchService=new Cp(t)}async getAvailableSeasons(t){try{const s=await this.getUserUnlockedTiers(t),{data:n,error:a}=await this.supabase.from("interclub_seasons").select("*").in("tier",s).eq("status","registration_open").order("start_date",{ascending:!0});if(a)throw console.error("Error fetching available seasons:",a),a;return{seasons:(n||[]).map(l=>({...l,groups:JSON.parse(l.groups||"[]"),week_schedule:JSON.parse(l.week_schedule||"[]")})),unlockedTiers:s}}catch(s){throw console.error("Error in getAvailableSeasons:",s),s}}async getUserUnlockedTiers(t){var s;try{let n=["departmental"];const{data:a,error:i}=await this.supabase.from("interclub_registrations").select(`
          *,
          season:season_id(tier, status)
        `).eq("user_id",t).eq("status","approved");if(i)return console.error("Error fetching past registrations:",i),n;for(const l of a||[])if(((s=l.season)==null?void 0:s.status)==="completed"&&await this.getUserFinalPosition(t,l.season_id)<=2){const o=l.season.tier,d=this.getNextTier(o);d&&!n.includes(d)&&n.push(d)}return n}catch(n){return console.error("Error in getUserUnlockedTiers:",n),["departmental"]}}validatePlayerUsageLimit(t){const s=[t.mens_singles,t.womens_singles,...t.mens_doubles,...t.womens_doubles,...t.mixed_doubles],n={};s.forEach(i=>{n[i]=(n[i]||0)+1});const a=Object.entries(n).filter(([i,l])=>l>3);return a.length>0?{valid:!1,error:`Players used more than 3 times: ${a.map(([l])=>l).join(", ")}`}:{valid:!0}}getNextTier(t){const s=["departmental","regional","national","top12"],n=s.indexOf(t);return n<s.length-1?s[n+1]:null}async getUserFinalPosition(t,s){try{const{data:n,error:a}=await this.supabase.from("interclub_registrations").select("group_assignment").eq("user_id",t).eq("season_id",s).single();if(a||!n)return 999;const l=(await this.getGroupStandings(s,n.group_assignment)).find(c=>c.team_id===t);return(l==null?void 0:l.position)||999}catch(n){return console.error("Error getting final position:",n),999}}async registerForSeason(t,s){try{console.log("[InterclubService] Registering for season:",s);const n=await this.validateRegistrationEligibility(t,s);if(!n.valid)return{success:!1,error:n.error};const{data:a,error:i}=await this.supabase.from("interclub_seasons").select("*").eq("id",s.season_id).single();if(i||!a)return{success:!1,error:"Season not found"};const l=await Promise.all(s.selected_players.map(h=>this.playerService.getPlayerWithDetails(h))),c={season_id:s.season_id,user_id:t,team_name:s.team_name,players:JSON.stringify(l),status:"pending"},{data:o,error:d}=await this.supabase.from("interclub_registrations").insert(c).select().single();if(d)return console.error("Error creating registration:",d),{success:!1,error:d.message};const u=mr[a.tier];return await this.resourceService.batchResourceTransactions(t,[{resource_type:"coins",amount:-u.coins,source:"interclub_registration",source_id:o.id},{resource_type:"shuttlecocks",amount:-u.shuttlecocks,source:"interclub_registration",source_id:o.id},{resource_type:"meals",amount:-u.meals,source:"interclub_registration",source_id:o.id}]),console.log("[InterclubService] Registration successful:",o.id),{success:!0}}catch(n){return console.error("Error in registerForSeason:",n),{success:!1,error:"Failed to register for season"}}}async validateRegistrationEligibility(t,s){try{const{data:n,error:a}=await this.supabase.from("interclub_seasons").select("*").eq("id",s.season_id).single();if(a||!n)return{valid:!1,error:"Season not found"};if(n.status!=="registration_open")return{valid:!1,error:"Registration is not open for this season"};const i=new Date,l=new Date(n.registration_deadline);if(i>l)return{valid:!1,error:"Registration deadline has passed"};const{data:c}=await this.supabase.from("interclub_registrations").select("id").eq("season_id",s.season_id).eq("user_id",t).single();if(c)return{valid:!1,error:"Already registered for this season"};if(s.selected_players.length<5)return{valid:!1,error:"Minimum 5 players required"};const o=mr[n.tier],d=await this.resourceService.getUserResourceBalances(t);if(d.coins<o.coins||d.shuttlecocks<o.shuttlecocks||d.meals<o.meals)return{valid:!1,error:"Insufficient resources"};const{data:u}=await this.supabase.from("players").select("id").eq("user_id",t).in("id",s.selected_players);return!u||u.length!==s.selected_players.length?{valid:!1,error:"Invalid player selection"}:{valid:!0}}catch(n){return console.error("Error validating registration:",n),{valid:!1,error:"Validation failed"}}}async getUserRegistrations(t){try{const{data:s,error:n}=await this.supabase.from("interclub_registrations").select(`
          *,
          season:season_id(*)
        `).eq("user_id",t).order("created_at",{ascending:!1});if(n)throw console.error("Error fetching user registrations:",n),n;return(s||[]).map(a=>({...a,players:JSON.parse(a.players||"[]")}))}catch(s){throw console.error("Error in getUserRegistrations:",s),s}}async submitLineup(t,s){try{console.log("[InterclubService] Submitting lineup:",s);const n=await this.validateLineupSubmission(t,s);if(!n.valid)return{success:!1,error:n.error};const a=this.validatePlayerUsageLimit(s.lineup);if(!a.valid)return{success:!1,error:a.error};const{data:i,error:l}=await this.supabase.from("interclub_matches").select("*").eq("id",s.encounter_id).single();if(l||!i)return{success:!1,error:"Encounter not found"};const o=i.home_team_id===t?"home_lineup":"away_lineup",d=await this.buildLineupWithPlayerDetails(s.lineup),u={encounter_id:s.encounter_id,team_id:t,submitted_by:t,submitted_at:new Date().toISOString(),lineup:d,is_auto_generated:!1},{error:h}=await this.supabase.from("interclub_matches").update({[o]:JSON.stringify(u),status:this.calculateEncounterStatus(i,o)}).eq("id",s.encounter_id);return h?(console.error("Error updating encounter with lineup:",h),{success:!1,error:h.message}):(console.log("[InterclubService] Lineup submitted successfully"),{success:!0})}catch(n){return console.error("Error in submitLineup:",n),{success:!1,error:"Failed to submit lineup"}}}generateMatchSchedule(t){const s=[],n=t.length;let a=1;for(let i=0;i<n;i++)for(let l=i+1;l<n;l++)s.push({home_team_id:t[i],away_team_id:t[l],matchday_number:a++}),s.push({home_team_id:t[l],away_team_id:t[i],matchday_number:a++});return s}async validateLineupSubmission(t,s){try{const{data:n,error:a}=await this.supabase.from("interclub_matches").select("*").eq("id",s.encounter_id).single();if(a||!n)return{valid:!1,error:"Encounter not found"};if(n.home_team_id!==t&&n.away_team_id!==t)return{valid:!1,error:"Not authorized to submit lineup for this encounter"};const i=new Date(n.match_date),l=new Date,c=2;if(l>new Date(i.getTime()-c*60*60*1e3))return{valid:!1,error:"Lineup submission deadline has passed"};const o=await this.validateLineupConstraints(t,s.lineup);return o.valid?{valid:!0}:o}catch(n){return console.error("Error validating lineup submission:",n),{valid:!1,error:"Validation failed"}}}async validateLineupConstraints(t,s){try{const n=[s.mens_singles,s.womens_singles,...s.mens_doubles,...s.womens_doubles,...s.mixed_doubles],a={};n.forEach(g=>{a[g]=(a[g]||0)+1});for(const[g,v]of Object.entries(a))if(v>3)return{valid:!1,error:"Player can participate in maximum 3 matches"};const{data:i,error:l}=await this.supabase.from("players").select("id, name, gender").eq("user_id",t).in("id",n);if(l||!i)return{valid:!1,error:"Failed to validate players"};const c=i.reduce((g,v)=>(g[v.id]=v,g),{}),o=c[s.mens_singles],d=c[s.womens_singles],u=s.mens_doubles.map(g=>c[g]),h=s.womens_doubles.map(g=>c[g]),m=s.mixed_doubles.map(g=>c[g]);if((o==null?void 0:o.gender)!=="male")return{valid:!1,error:"Men's singles must be played by a male player"};if((d==null?void 0:d.gender)!=="female")return{valid:!1,error:"Women's singles must be played by a female player"};if(u.some(g=>(g==null?void 0:g.gender)!=="male"))return{valid:!1,error:"Men's doubles must be played by male players"};if(h.some(g=>(g==null?void 0:g.gender)!=="female"))return{valid:!1,error:"Women's doubles must be played by female players"};const f=m.find(g=>(g==null?void 0:g.gender)==="male"),y=m.find(g=>(g==null?void 0:g.gender)==="female");return!f||!y?{valid:!1,error:"Mixed doubles must have one male and one female player"}:{valid:!0}}catch(n){return console.error("Error validating lineup constraints:",n),{valid:!1,error:"Constraint validation failed"}}}async buildLineupWithPlayerDetails(t){const s=[t.mens_singles,t.womens_singles,...t.mens_doubles,...t.womens_doubles,...t.mixed_doubles],a=(await Promise.all(s.map(i=>this.playerService.getPlayerWithDetails(i)))).reduce((i,l)=>(i[l.id]=l,i),{});return{mens_singles:a[t.mens_singles],womens_singles:a[t.womens_singles],mens_doubles:t.mens_doubles.map(i=>a[i]),womens_doubles:t.womens_doubles.map(i=>a[i]),mixed_doubles:t.mixed_doubles.map(i=>a[i])}}calculateEncounterStatus(t,s){const n=t.home_lineup||s==="home_lineup",a=t.away_lineup||s==="away_lineup";return n&&a?"ready":"lineup_pending"}async autoGenerateLineup(t,s){var n,a,i;try{console.log("[InterclubService] Auto-generating lineup for encounter:",s);const{data:l,error:c}=await this.supabase.from("players").select("*").eq("user_id",t).order("rank",{ascending:!0});if(c||!l||l.length<5)return{success:!1,error:"Insufficient players for auto-generation"};const o=l.filter(f=>f.gender==="male"),d=l.filter(f=>f.gender==="female");if(o.length<3||d.length<2)return{success:!1,error:"Insufficient players by gender for auto-generation"};const u={mens_singles:o[0].id,womens_singles:d[0].id,mens_doubles:[o[1].id,o[2].id],womens_doubles:[d[1].id,((n=d[2])==null?void 0:n.id)||d[0].id],mixed_doubles:[((a=o[3])==null?void 0:a.id)||o[0].id,((i=d[1])==null?void 0:i.id)||d[0].id]},h=this.validatePlayerUsageLimit(u);if(!h.valid)return{success:!1,error:h.error};const m={encounter_id:s,lineup:u};return await this.submitLineup(t,m)}catch(l){return console.error("Error in autoGenerateLineup:",l),{success:!1,error:"Failed to auto-generate lineup"}}}async executeEncounter(t){try{console.log("[InterclubService] Executing encounter:",t);const{data:s,error:n}=await this.supabase.from("interclub_matches").select("*").eq("id",t).single();if(n||!s)return{success:!1,error:"Encounter not found"};if(s.status!=="ready")return{success:!1,error:"Encounter not ready for execution"};const a=JSON.parse(s.home_lineup||"{}"),i=JSON.parse(s.away_lineup||"{}"),l=[];let c=0,o=0;for(const f of Xb){const y=await this.executeIndividualMatch(f,a.lineup,i.lineup);l.push({match_type:f,...y}),y.winner==="home"?c++:o++}const d=c>o?"home":"away",u=d==="home"?s.home_team_id:s.away_team_id,h=`${c}-${o}`,{error:m}=await this.supabase.from("interclub_matches").update({status:"completed",results:JSON.stringify(l),winner_team_id:u,final_score:h,updated_at:new Date().toISOString()}).eq("id",t);return m?(console.error("Error updating encounter results:",m),{success:!1,error:m.message}):(await this.updateGroupStandings(s.season_id,s.group_number),console.log("[InterclubService] Encounter executed successfully:",{finalScore:h,winner:d}),{success:!0,results:{finalScore:h,winner:d,matchResults:l}})}catch(s){return console.error("Error in executeEncounter:",s),{success:!1,error:"Failed to execute encounter"}}}async executeIndividualMatch(t,s,n){try{const a=this.getPlayersForMatchType(t,s),i=this.getPlayersForMatchType(t,n);return t.includes("singles")?this.simulateSinglesMatch(a[0],i[0]):this.simulateDoublesMatch(a,i)}catch(a){console.error("Error executing individual match:",a);const i=this.getPlayersForMatchType(t,s),l=this.getPlayersForMatchType(t,n);return{winner:Math.random()>.5?"home":"away",score:"21-19, 21-17",players:{home:i,away:l}}}}getPlayersForMatchType(t,s){switch(t){case"mens_singles":return[s.mens_singles];case"womens_singles":return[s.womens_singles];case"mens_doubles":return s.mens_doubles;case"womens_doubles":return s.womens_doubles;case"mixed_doubles":return s.mixed_doubles;default:return[]}}simulateSinglesMatch(t,s){const n=(t.rank||500)+Math.random()*100,a=(s.rank||500)+Math.random()*100,i=n>a?"home":"away",c=(i==="home"?n>a:a>n)?["21-15, 21-18","21-12, 21-16","21-18, 19-21, 21-15"]:["19-21, 21-18, 21-19","15-21, 21-19, 21-17"];return{winner:i,score:c[Math.floor(Math.random()*c.length)],players:{home:[t],away:[s]}}}simulateDoublesMatch(t,s){const n=t.reduce((u,h)=>u+(h.rank||500),0)/t.length,a=s.reduce((u,h)=>u+(h.rank||500),0)/s.length,i=n*(.8+Math.random()*.4),l=a*(.8+Math.random()*.4),c=i>l?"home":"away",d=(c==="home"?i>l:l>i)?["21-15, 21-18","21-12, 21-16","21-18, 19-21, 21-15"]:["19-21, 21-18, 21-19","15-21, 21-19, 21-17"];return{winner:c,score:d[Math.floor(Math.random()*d.length)],players:{home:t,away:s}}}async getGroupStandings(t,s){try{const{data:n,error:a}=await this.supabase.from("interclub_matches").select("*").eq("season_id",t).eq("group_number",s).eq("status","completed");if(a)return console.error("Error fetching encounters:",a),[];const{data:i,error:l}=await this.supabase.from("interclub_registrations").select("*").eq("season_id",t).eq("group_assignment",s);if(l)return console.error("Error fetching registrations:",l),[];const c={};i==null||i.forEach(d=>{c[d.user_id]={team_id:d.user_id,team_name:d.team_name,is_cpu:!1,position:0,matches_played:0,encounters_won:0,encounters_lost:0,individual_matches_won:0,individual_matches_lost:0,points:0,form:[]}}),n==null||n.forEach(d=>{const u=d.home_team_id,h=d.away_team_id,m=JSON.parse(d.results||"[]");c[u]&&c[u].matches_played++,c[h]&&c[h].matches_played++;let f=0,y=0;m.forEach(g=>{g.winner==="home"?f++:y++}),c[u]&&(c[u].individual_matches_won+=f,c[u].individual_matches_lost+=y,f>y?(c[u].encounters_won++,c[u].points+=3,c[u].form.push("W")):(c[u].encounters_lost++,c[u].form.push("L"))),c[h]&&(c[h].individual_matches_won+=y,c[h].individual_matches_lost+=f,y>f?(c[h].encounters_won++,c[h].points+=3,c[h].form.push("W")):(c[h].encounters_lost++,c[h].form.push("L")))});const o=Object.values(c).sort((d,u)=>{if(u.points!==d.points)return u.points-d.points;const h=d.individual_matches_won-d.individual_matches_lost;return u.individual_matches_won-u.individual_matches_lost-h});return o.forEach((d,u)=>{d.position=u+1,d.form=d.form.slice(-5)}),o}catch(n){return console.error("Error in getGroupStandings:",n),[]}}async updateGroupStandings(t,s){try{const n=await this.getGroupStandings(t,s),{data:a,error:i}=await this.supabase.from("interclub_seasons").select("groups").eq("id",t).single();if(i||!a){console.error("Error fetching season for standings update");return}const l=JSON.parse(a.groups||"[]"),c=l.findIndex(o=>o.group_number===s);c>=0&&(l[c].standings=n,await this.supabase.from("interclub_seasons").update({groups:JSON.stringify(l),updated_at:new Date().toISOString()}).eq("id",t))}catch(n){console.error("Error updating group standings:",n)}}async getUserNextEncounter(t){try{const{data:s,error:n}=await this.supabase.from("interclub_matches").select("*").or(`home_team_id.eq.${t},away_team_id.eq.${t}`).in("status",["lineup_pending","ready"]).order("match_date",{ascending:!0}).limit(1).single();if(n||!s)return null;const a=s.home_lineup?JSON.parse(s.home_lineup):null,i=s.away_lineup?JSON.parse(s.away_lineup):null;return{...s,home_lineup:a,away_lineup:i,matches:[]}}catch(s){return console.error("Error in getUserNextEncounter:",s),null}}async getUserCurrentSeasonStatus(t){try{const{data:s,error:n}=await this.supabase.from("interclub_registrations").select(`
          *,
          season:season_id(*)
        `).eq("user_id",t).eq("status","approved").order("created_at",{ascending:!1});if(n)return console.error("Error fetching season status:",n),null;const a=s==null?void 0:s.filter(i=>i.season.status==="active"||i.season.status==="registration_closed");if(a&&a.length>0){const i=a[0],l=await this.getGroupStandings(i.season_id,i.group_assignment),c=l.find(o=>o.team_id===t);return{registration:i,standing:c,standings:l}}return null}catch(s){return console.error("Error in getUserCurrentSeasonStatus:",s),null}}}const Zb=new Ea($);async function ej(e,t,s,n=!0){if(!s||!t||!e){console.error("[recordResourceUpdate] Invalid parameters:",{userId:e,source:t,changes:s,isAdd:n});return}const a=Object.entries(s).map(([l,c])=>({resource_type:l,amount:n?c:-c,source:t}));console.log("[recordResourceUpdate] Recording transactions:",a);const i=await Zb.batchResourceTransactions(e,a);if(!i.success)throw console.error("[recordResourceUpdate] Failed to record transactions:",i.error),new Error(`Resource update failed: ${i.error}`);console.log("[recordResourceUpdate] Transactions recorded successfully")}async function tj(e,t,s){e.id&&await $.from("players").update({training:{stat:t,startTime:Date.now(),period:kp(e.statLevels[t])}}).eq("id",e.id)}async function sj(e,t,s){e.id&&(await $.from("players").update({training:null,level:e.level+1}).eq("id",e.id),await $.from("player_stats").update({[t]:s}).eq("player_id",e.id),await $.from("player_levels").update([{[t]:e.statLevels[t]+1}]).eq("player_id",e.id))}async function rj(e,t){e&&await $.from("player_strategy").update([{physical_commitment:t.physicalCommitment,play_style:t.playStyle,movement_speed:t.movementSpeed,fatigue_management:t.fatigueManagement,rally_consistency:t.rallyConsistency,risk_taking:t.riskTaking,attack:t.attack,soft_attack:t.softAttack,serving:t.serving,court_defense:t.courtDefense,mental_toughness:t.mentalToughness,self_confidence:t.selfConfidence}]).eq("player_id",e)}async function nj(e){await $.from("managers").update([{active:!1,purchasing:null}]).eq("id",e)}async function aj(e){await $.from("managers").update([{active:!0,purchasing:{startTime:Date.now(),period:5*24*60*60*1e3}}]).eq("id",e)}async function ij(e,t){await $.from("facilities").update([{upgrading:{startTime:Date.now(),period:Np(e.level)}}]).eq("id",e.id)}async function lj(e,t){await $.from("facilities").update([{level:t.level,production_rate:t.productionRate,max_players:t.maxPlayers,upgrade_cost:t.upgradeCost,upgrading:t.upgrading||null}]).eq("id",e.id)}async function Pp(e,t,s,n){e&&await $.from("players").update([{equipment:{...Object.fromEntries(Object.entries(e.equipment||{}).map(([a,i])=>[a,i.id])),[t.type]:t.id}}]).eq("id",e.id)}async function Tp(e,t){if(!e)return;const s=Date.now(),n=t.filter(a=>a.recoveryEndTime>s);console.log(n),await $.from("players").update([{injuries:n}]).eq("id",e.id)}class oj{constructor(){this.table="facilities"}async getFacilities(t){const{data:s,error:n}=await $.from(this.table).select("*");return n?(console.error("[FacilityService] Error fetching facilities:",n),[]):(s||[]).map(a=>({id:a.id,name:a.name,type:a.type,level:a.level,productionRate:a.production_rate,resourceType:a.resource_type||void 0,maxPlayers:a.max_players||0,upgradeCost:a.upgrade_cost||{coins:0,shuttlecocks:0,meals:0,diamonds:0},upgrading:a.upgrading||void 0}))}}class cj{constructor(){this.table="managers"}async getManagersByUser(t){const{data:s,error:n}=await $.from(this.table).select("*").eq("user_id",t);return n?(console.error("[ManagerService] Error fetching managers:",n),[]):(s||[]).map(a=>({id:a.id,name:a.name,facilityType:a.facility_type,productionBonus:a.production_bonus||0,active:a.active||!1,imageUrl:a.image_url||"",cost:a.cost||0,purchasing:a.purchasing||void 0}))}}const Rp=j.createContext(void 0),to=new Ea($),dj=new cj,uj=new oj,hj=new Qs($),mj=new Sp($);function fj({children:e}){console.log("[GameProvider] mounted");const[t,s]=j.useReducer(qb,ch),[n,a]=j.useState([]),{isLogin:i,user:l}=_s(),[c,o]=j.useState({shuttlecocks:10,meals:10,coins:200,diamonds:9999999}),d=j.useCallback(async(b,_,P=!0)=>{if(!(l!=null&&l.id)){console.error("No user ID available for resource update");return}console.log(`[updateResources] ${b}:`,{changes:_,isAdd:P});try{await ej(l.id,b,_,P);const C=await to.getUserResourceBalances(l.id),k={shuttlecocks:C.shuttlecocks||0,meals:C.meals||0,coins:C.coins||0,diamonds:C.diamonds||0};k?(console.log("[updateResources] Reloaded resources:",k),o(k)):console.error("Failed to reload resources after update")}catch(C){console.error("Error updating resources:",C)}},[l]),u=async()=>{const b=await hj.getTournaments();a(b)},h=async()=>{if(!l||!l.email){s({type:"SET_GAME_STATE",payload:{state:ch}});return}console.log("[GameContext] Loading game state for user:",l.id);const[b,_,P]=await Promise.all([mj.loadGameState(l.id),uj.getFacilities(l.id),dj.getManagersByUser(l.id)]);console.log("[GameContext] Game state loaded:",b),console.log("[GameContext] Facilities:",_),console.log("[GameContext] Managers:",P);const C={...b,facilities:_,managers:P};s({type:"SET_GAME_STATE",payload:{state:C}}),await u()},m=j.useCallback(async()=>{l!=null&&l.id&&(console.log("[GameContext] Manual refresh triggered"),await Promise.all([h(),(async()=>{const b=await to.getUserResourceBalances(l.id),_={shuttlecocks:b.shuttlecocks||0,meals:b.meals||0,coins:b.coins||0,diamonds:b.diamonds||0};_&&o(_)})()]))},[l==null?void 0:l.id]);j.useEffect(()=>{if(console.log("Running use effect one"),!l)return;console.log("User found continuing");const b=async()=>{console.log("[GameContext] Loading resources for user:",l.id);const P=await to.getUserResourceBalances(l.id),C={shuttlecocks:P.shuttlecocks||0,meals:P.meals||0,coins:P.coins||0,diamonds:P.diamonds||0};C?(console.log("[GameContext] Resources loaded:",C),o(C)):console.error("[GameContext] Failed to load resources")},_=async()=>{console.log("[GameContext] Loading complete game state and resources"),await Promise.all([h(),b()])};console.log("Triggering load everything"),_(),setInterval(async()=>{console.log("[GameContext] Periodic refresh triggered"),await _()},6e4)},[i,l==null?void 0:l.id]);const w={gameState:t,resources:c,tournaments:n,setTournaments:a,updateResources:d,setGameState:b=>{s({type:"SET_GAME_STATE",payload:{state:b(t)}})},dispatchGameState:s,equipItem:async(b,_)=>{const P=t.players.find(C=>C.id===b);if(P)try{await Pp(P,_,"equip"),s({type:"EQUIP_ITEM",payload:{playerId:b,equipment:_}})}catch(C){console.error("Failed to equip item:",C)}},updatePlayerName:(b,_)=>{s({type:"UPDATE_PLAYER_NAME",payload:{playerId:b,name:_}})},healInjury:(b,_,P)=>{console.log("healing injury",b,_,P),s({type:"HEAL_INJURY",payload:{playerId:b,injuryId:_}})},purchaseResources:(b,_,P)=>{c.diamonds<P||d("shop_purchase",{[b]:_,diamonds:-P})},refreshGameState:m};return r.jsx(Rp.Provider,{value:w,children:e})}function Kt(){const e=j.useContext(Rp);if(e===void 0)throw new Error("useGame must be used within a GameProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Y=(e,t)=>{const s=j.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:o,...d},u)=>j.createElement("svg",{ref:u,...pj,width:a,height:a,stroke:n,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${gj(e)}`,c].join(" "),...d},[...t.map(([h,m])=>j.createElement(h,m)),...Array.isArray(o)?o:[o]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=Y("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Y("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=Y("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=Y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=Y("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=Y("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=Y("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=Y("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=Y("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=Y("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=Y("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Y("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=Y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=Y("ChevronFirst",[["path",{d:"m17 18-6-6 6-6",key:"1yerx2"}],["path",{d:"M7 6v12",key:"1p53r6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=Y("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=Y("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=Y("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=Y("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=Y("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=Y("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=Y("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=Y("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=Y("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=Y("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=Y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=Y("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=Y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=Y("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=Y("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=Y("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=Y("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=Y("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=Y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=Y("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=Y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=Y("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=Y("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=Y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=Y("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=Y("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Y("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=Y("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Y("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=Y("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=Y("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=Y("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=Y("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=Y("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Y("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=Y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Y("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=Y("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Y("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=Y("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Uj=new Sp($);function zj({onClose:e}){const[t,s]=j.useState(""),[n,a]=j.useState(""),[i,l]=j.useState(""),[c,o]=j.useState(""),[d,u]=j.useState(""),[h,m]=j.useState(""),[f,y]=j.useState(""),[g,v]=j.useState(""),[p,w]=j.useState(""),[b,_]=j.useState(0),{user:P}=_s(),{refreshGameState:C}=Kt();j.useEffect(()=>{s(""),m(""),y(""),v(""),w(""),a(""),l(""),o(""),(async()=>{P&&!P.email_confirmed_at&&(_(1),a(P.email))})()},[]);const k=async()=>{if(!h||!f||!g){s("Name Fields required");return}if(!p.trim()){s("Team name is required");return}if(!n){s("Email required");return}if(!i){s("Password required");return}if(i.length<6){s("Password length must be at least 6.");return}if(!c){s("Confirm Password required");return}if(i!==c){s("Passwords do not match");return}try{const{data:L,error:T}=await $.auth.signUp({email:n,password:i,options:{data:{manager_name:h,name:f,surname:g,team_name:p.trim()},emailRedirectTo:void 0}});if(console.log("[handleRegister] data",L),T){console.error("Registration Error:",T.message),s(T.message);return}if(L.user){if(!L.user.email_confirmed_at){console.log("[handleRegister] Email not confirmed, prompting for code..."),_(1);return}console.log("[handleRegister] Creating user profile and game data...");const O=await Uj.handleNewUser(L.user.id,n,p.trim());if(!O.success){console.error("User setup error:",O.error),s(O.error||"Failed to set up user profile");return}const{data:ae,error:A}=await $.auth.signInWithPassword({email:n,password:i});console.log("[handleRegister] signInData",ae),A?(console.error("Auto-login Error:",A.message),s("Registration successful, but auto-login failed. Please try logging in manually.")):(console.log("[handleRegister] Registration and setup completed successfully"),console.log("[handleRegister] Triggering game state refresh..."),setTimeout(async()=>{await C(),console.log("[handleRegister] Game state refresh completed")},1e3),e())}}catch(L){console.error("Unexpected error:",L),s("An unexpected error occurred. Please try again.")}},R=async()=>{const{data:L,error:T}=await $.auth.verifyOtp({email:n,token:d,type:"signup"});console.log("[handleCode] data",L),T?console.error("Error verifying OTP:",T):e()};return r.jsx("div",{children:b===0?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Manager Name"}),r.jsx("input",{type:"text",value:h,placeholder:"Manager Name",onChange:L=>{m(L.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name"}),r.jsx("input",{type:"text",value:f,placeholder:"Name",onChange:L=>{y(L.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Surname"}),r.jsx("input",{type:"text",value:g,placeholder:"Surname",onChange:L=>{v(L.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Team Name"}),r.jsx("input",{type:"text",value:p,placeholder:"Enter your team name",onChange:L=>{w(L.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email"}),r.jsx("input",{type:"email",value:n,placeholder:"Email",onChange:L=>{a(L.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password"}),r.jsx("input",{type:"password",value:i,placeholder:"Password",onChange:L=>{l(L.target.value)}})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Confirm Password"}),r.jsx("input",{type:"password",value:c,placeholder:"Confirm Password",onChange:L=>{o(L.target.value)}})]}),t&&r.jsx("div",{className:"error text-red-500 text-sm",children:t}),r.jsx("button",{className:"btn w-full",onClick:async()=>{await k()},children:"Register"})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{className:"w-full",type:"text",value:d,placeholder:"VERIFICATION CODE",onChange:L=>{u(L.target.value)}}),r.jsx("button",{className:"btn w-full",onClick:async()=>{await R()},children:"Confirm Email"})]})})}function Fj({onClose:e}){const[t,s]=j.useState(""),[n,a]=j.useState(""),[i,l]=j.useState(""),[c,o]=j.useState(0),[d,u]=j.useState(""),h=async()=>{if(!t){u("Email is required");return}if(!n){u("Password is required");return}u("");const{data:g,error:v}=await $.auth.signInWithPassword({email:t,password:n});if(v){console.error("Login Error:",v.message),v.message==="Email not confirmed"?o(1):u(v.message);return}g.session&&e()},m=async g=>{g.key==="Enter"&&(g.preventDefault(),h())},f=async()=>{const{data:g,error:v}=await $.auth.verifyOtp({email:t,token:i,type:"signup"});if(console.log("[handleConfirmCode] data",g),v){console.error("Error verifying OTP:",v.message),u(v.message);return}e()},y=async()=>{const{data:g,error:v}=await $.auth.resetPasswordForEmail(t);console.log("[requestNewCode] data",g),v?(console.error("Error requesting new verification code:",v.message),u(v.message)):me.success("A new verification code has been sent to your email.")};return r.jsx("div",{children:c===0?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"text",placeholder:"Email",value:t,onChange:g=>s(g.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:g=>a(g.target.value),onKeyDown:m})]}),d&&r.jsx("div",{className:"error text-red-500 text-sm",children:d}),r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("button",{onClick:async()=>{await h()},className:"btn w-full",children:"Login"}),r.jsx("button",{className:"btn-outline w-full",onClick:async()=>await y(),children:"Forgot Password?"})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{className:"w-full",type:"text",value:i,placeholder:"Enter your confirmation code",onChange:g=>l(g.target.value)}),d&&r.jsx("div",{className:"error text-red-500 text-sm",children:d}),r.jsx("button",{className:"btn w-full",onClick:async()=>{await f()},children:"Confirm Email"})]})})}function Bj({isOpen:e,type:t,onClose:s}){return r.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 ${e?"":"hidden"}`,children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:t=="login"?"Login":"Register"}),r.jsx("button",{onClick:s,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(tt,{className:"w-5 h-5"})})]}),t=="login"?r.jsx(Fj,{onClose:s}):r.jsx(zj,{onClose:s})]})})}const qj="/assets/first-BIUqa8K8.jpg",Hj="/assets/second-DlJGdHk5.jpg",Wj="/assets/third-BmRlTXSF.jpg";function Op(){const[e,t]=j.useState(null),{isLogin:s,user:n}=_s(),a=Na(),i=()=>{s?a("/dashboard"):t("login")},l=async()=>{await $.auth.signOut()};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"h-screen relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:qj,className:"w-full"}),r.jsx("button",{className:"absolute btn-slide top-[70%] left-[7%]",style:{fontSize:"2vw"},onClick:i,children:"Play now"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:Hj,className:"w-full"}),r.jsx("button",{className:"absolute btn-slide top-[34.3%] left-[7.5%]",style:{fontSize:"2vw"},onClick:i,children:"Play now"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:Wj,className:"w-full"}),r.jsx("button",{className:"absolute btn-slide top-[34.3%] left-[7.5%]",style:{fontSize:"2vw"},onClick:i,children:"Play now"})]}),r.jsx("div",{className:"absolute right-5 top-3",children:s?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"font-bold",children:n==null?void 0:n.user_metadata.name}),r.jsx("button",{className:"btn-outline",onClick:()=>l(),children:"Log out"})]}):r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{className:"btn-outline",onClick:()=>t("login"),children:"Login"}),r.jsx("button",{className:"btn-outline",onClick:()=>t("register"),children:"Register"})]})})]}),r.jsx(Bj,{isOpen:!!e,type:e,onClose:()=>{t(null)}})]})}const uc=[{stat:"endurance",icon:bl,label:"Endurance",color:"text-red-500"},{stat:"strength",icon:Mp,label:"Strength",color:"text-orange-500"},{stat:"agility",icon:Oj,label:"Agility",color:"text-green-500"},{stat:"speed",icon:Sd,label:"Speed",color:"text-yellow-500"},{stat:"explosiveness",icon:Cj,label:"Explosiveness",color:"text-purple-500"},{stat:"injuryPrevention",icon:Nd,label:"Injury Prevention",color:"text-blue-500"}],hc=[{stat:"smash",icon:cn,label:"Smash",color:"text-red-500"},{stat:"defense",icon:Nd,label:"Defense",color:"text-orange-500"},{stat:"serve",icon:Aj,label:"Serve",color:"text-green-500"},{stat:"stick",icon:dn,label:"Stick",color:"text-yellow-500"},{stat:"slice",icon:Lj,label:"Slice",color:"text-purple-500"},{stat:"drop",icon:Ct,label:"Drop Shot",color:"text-blue-500"}];function hh({player:e,onClose:t,onStartTraining:s,calculateTrainingCost:n,canAffordTraining:a,type:i}){const l=i==="physical"?uc:hc,c=`${i==="physical"?"Physical":"Technical"} Training`;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold",children:[c," - ",e.name]}),r.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"space-y-4",children:r.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.map(o=>{const d=n(e,o.stat),u=a(d);return r.jsxs("button",{onClick:()=>s(o.stat),disabled:!u||!!e.training,className:`p-3 rounded-lg text-left transition-colors ${u&&!e.training?"bg-blue-50 hover:bg-blue-100 text-blue-700":"bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(o.icon,{className:`w-4 h-4 ${o.color}`}),r.jsx("span",{className:"font-medium",children:o.label})]}),r.jsxs("div",{className:"text-sm mt-1",children:["Current: ",e.stats[o.stat]]}),r.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Cost:",r.jsx("div",{className:"grid grid-cols-1 gap-1",children:Object.entries(d).map(([h,m])=>m>0&&r.jsxs("div",{children:[h,": ",m]},h))})]})]},o.stat)})})})]})})}const Vj=[{id:"speed-elite",name:"Speed Elite",type:"shoes",rarity:"epic",stats:{speed:5,agility:3},price:{coins:2e3,diamonds:10},imageUrl:"https://images.unsplash.com/photo-1542291026-7eec264c27ff"},{id:"power-max",name:"Power Max",type:"shoes",rarity:"rare",stats:{explosiveness:4,strength:2},price:{coins:1500,diamonds:5},imageUrl:"https://images.unsplash.com/photo-1608231387042-66d1773070a5"},{id:"thunder-pro",name:"Thunder Pro",type:"racket",rarity:"legendary",stats:{smash:6,strength:4},price:{coins:3e3,diamonds:15},imageUrl:"https://images.unsplash.com/photo-1617083934555-ac7d4fee8909"},{id:"control-master",name:"Control Master",type:"racket",rarity:"epic",stats:{defense:5,serve:3},price:{coins:2500,diamonds:12},imageUrl:"https://images.unsplash.com/photo-1617083934555-ac7d4fee8909"},{id:"power-string",name:"Power String",type:"strings",rarity:"rare",stats:{smash:3,strength:2},price:{coins:1e3,diamonds:5},imageUrl:"https://images.unsplash.com/photo-1617083934555-ac7d4fee8909"},{id:"pro-jersey",name:"Pro Jersey",type:"shirt",rarity:"epic",stats:{endurance:4,agility:2},price:{coins:1500,diamonds:8},imageUrl:"https://images.unsplash.com/photo-1576566588028-4147f3842f27"},{id:"flex-shorts",name:"Flex Shorts",type:"shorts",rarity:"rare",stats:{speed:3,agility:2},price:{coins:1200,diamonds:6},imageUrl:"https://images.unsplash.com/photo-1591195853828-11db59a44f6b"}];function Gj({equipment:e,isEquipped:t,onEquip:s,canAfford:n}){const a={common:"text-gray-500",rare:"text-blue-500",epic:"text-purple-500",legendary:"text-yellow-500"};return r.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"aspect-w-1 aspect-h-1 mb-4",children:r.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-48 object-cover rounded-lg"})}),r.jsx("h3",{className:`font-bold ${a[e.rarity]}`,children:e.name}),r.jsx("div",{className:"mt-2 space-y-1 text-sm",children:Object.entries(e.stats).map(([i,l])=>r.jsxs("div",{className:"text-gray-600",children:["+",l," ",i]},i))}),r.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"text-yellow-500",children:[e.price.coins," coins"]}),r.jsxs("div",{className:"text-purple-500",children:[e.price.diamonds," diamonds"]})]}),r.jsx("button",{onClick:()=>s(e),disabled:!n||t,className:`px-4 py-2 rounded-lg text-sm font-medium ${t?"bg-green-500 text-white cursor-default":n?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:t?"Equipped":n?"Equip":"Cannot Afford"})]})]})}const Jj=[{type:"shoes",label:"Shoes"},{type:"racket",label:"Racket"},{type:"strings",label:"Strings"},{type:"shirt",label:"Shirt"},{type:"shorts",label:"Shorts"}];function Kj({onClose:e,playerEquipment:t,onEquip:s,resources:n}){const[a,i]=j.useState("shoes"),l=Vj.filter(o=>o.type===a),c=o=>n.coins>=o.price.coins&&n.diamonds>=o.price.diamonds;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(kd,{className:"w-6 h-6 text-blue-500"}),r.jsx("h2",{className:"text-xl font-bold",children:"Equipment Shop"})]}),r.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex space-x-4 mb-6",children:Jj.map(({type:o,label:d})=>r.jsx("button",{onClick:()=>i(o),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===o?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:d},o))}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(o=>{var d;return r.jsx(Gj,{equipment:o,isEquipped:((d=t[o.type])==null?void 0:d.id)===o.id,onEquip:s,canAfford:c(o)},o.id)})})]})})}function Up({timeLeft:e,onSpeedUp:t,disabled:s}){const n=Math.ceil(e/1e4);return r.jsxs("button",{onClick:t,disabled:s,className:`flex items-center space-x-2 px-3 py-1 rounded-lg text-sm ${s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-purple-100 text-purple-700 hover:bg-purple-200"}`,children:[r.jsx(vr,{className:"w-4 h-4"}),r.jsxs("span",{children:["Speed up (",n," )"]})]})}function zp(e,t,s,n=1e3){const[a,i]=j.useState(0),[l,c]=j.useState(0);return j.useEffect(()=>{if(!t||!e){i(0),c(0);return}const o=()=>{const u=Date.now(),h=e+t-u,m=Math.max(0,Math.min(100,(t-h)/t*100)),f=Math.max(0,Math.ceil(h/1e3));i(m),c(f),f==0&&s&&s()};o();const d=setInterval(o,n);return()=>clearInterval(d)},[e,t,n]),{progress:a,timeLeft:l}}const mh=[{type:"Ankle sprain",severity:"minor",recovery:30,affectedStats:["speed","agility"],statPenalty:20},{type:"Muscle strain",severity:"minor",recovery:45,affectedStats:["strength","explosiveness"],statPenalty:25},{type:"Knee pain",severity:"moderate",recovery:60,affectedStats:["speed","agility","explosiveness"],statPenalty:30},{type:"Wrist sprain",severity:"moderate",recovery:90,affectedStats:["smash","defense","serve"],statPenalty:35},{type:"Back injury",severity:"severe",recovery:120,affectedStats:["endurance","strength","agility","speed","explosiveness"],statPenalty:40}];function Qj(e){const s=e.stats.injuryPrevention/200;return Math.max(.3,.8-s)}function fh(e){const t=Qj(e);if(Math.random()<t){const n=mh[Math.floor(Math.random()*mh.length)],a=Date.now();let i;return n.affectedStats&&n.statPenalty&&(i={},n.affectedStats.forEach(l=>{const c=e.stats[l];i[l]=Math.max(0,c-n.statPenalty)})),{id:`injury-${a}-${Math.random().toString(36).substr(2,9)}`,type:n.type,severity:n.severity,recoveryTime:n.recovery*60*1e3,recoveryEndTime:a+n.recovery*60*1e3,affectedStats:i,createdAt:a}}return null}function Yj(e){const t=Date.now();return(e.injuries||[]).filter(s=>s.recoveryEndTime>t)}function Fp(e){const t=Yj(e);if(t.length===0)return{};const s={};return t.forEach(n=>{n.affectedStats&&Object.entries(n.affectedStats).forEach(([a,i])=>{const l=a;(s[l]===void 0||i<s[l])&&(s[l]=i)})}),s}const so={endurance:1,strength:1.2,agility:1.3,speed:1.2,explosiveness:1.1,injuryPrevention:1,smash:1.4,defense:1.2,serve:1.3,stick:1.1,slice:1.2,drop:1.3};function Xj(e){const t={};return e.equipment&&Object.values(e.equipment).forEach(s=>{s&&s.stats&&Object.entries(s.stats).forEach(([n,a])=>{t[n]=(t[n]||0)+a})}),t}function Zj(e){if(!e||!e.stats||!e.statLevels)return{score:0,details:{baseScore:0,balanceScore:1,specialization:[],weaknesses:[],physicalScore:0,technicalScore:0,equipmentBonuses:{}}};const t=Xj(e),s=Fp(e),n=["endurance","strength","agility","speed","explosiveness","injuryPrevention"],a=["smash","defense","serve","stick","slice","drop"],i={...e.stats};Object.entries(t).forEach(([v,p])=>{v in i&&(i[v]+=p||0)}),Object.entries(s).forEach(([v,p])=>{v in i&&(i[v]=p)});const l=n.reduce((v,p)=>{const w=i[p]||0;return v+w},0),c=a.reduce((v,p)=>{const w=i[p]||0;return v+w},0),o=l+c,d=Object.values(e.statLevels).filter(v=>typeof v=="number"),u=d.length>0?d.reduce((v,p)=>v+p,0)/d.length:0,h=Object.entries(e.statLevels).filter(([v,p])=>typeof p=="number"&&p>u*1.3).map(([v])=>v),m=Object.entries(e.statLevels).filter(([v,p])=>typeof p=="number"&&p<u*.7).map(([v])=>v),y=Math.max(.8,1-m.length*.05);return{score:Math.round(o*y),details:{baseScore:Math.round(o),balanceScore:Number(y.toFixed(2)),specialization:h,weaknesses:m,physicalScore:Math.round(l),technicalScore:Math.round(c),equipmentBonuses:t}}}function ph({baseValue:e,effectiveValue:t,maxValue:s,bonus:n,Icon:a,label:i,color:l,level:c,isAffectedByInjury:o}){const d=t+n;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(a,{className:`w-4 h-4 ${o?"text-red-500":"text-gray-600"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:`text-xs ${o?"text-red-600 font-medium":"text-gray-600"}`,children:i}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Level ",c]})]}),r.jsxs("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden relative",children:[r.jsx("div",{className:`h-full ${l} transition-all duration-300`,style:{width:`${t*100/s}%`}}),n>0&&r.jsx("div",{className:"h-full bg-green-500 absolute top-0 left-0 opacity-50",style:{width:`${d*100/s}%`}}),o&&r.jsx("div",{className:"h-full border-r-2 border-red-400 absolute top-0",style:{left:`${e*100/s}%`}})]})]}),r.jsxs("div",{className:`text-sm font-medium ${o?"text-red-600":""}`,children:[t,n>0&&r.jsxs("span",{className:"text-green-600 ml-1",children:["+",n]}),o&&r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",e,")"]})]})]})}function gh(e){return e?"bg-blue-500":"bg-purple-500"}function e1({player:e,equipmentBonuses:t,injuryEffects:s}){const[n,a]=j.useState(!1),[i,l]=j.useState(!1),c=j.useMemo(()=>{let d=500;return uc.map(u=>{const h=e.stats[u.stat],m=t[u.stat]||0;d=Math.max(d,h+m)}),hc.map(u=>{const h=e.stats[u.stat],m=t[u.stat]||0;d=Math.max(d,h+m)}),d},[e.stats,t]),o=d=>{const u=e.stats[d],h=s[d];return h!==void 0?h:u};return r.jsxs("div",{className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>a(!n),className:`px-4 py-2 rounded-lg text-sm font-medium ${n?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:n?"Hide Physical Stats":"Show Physical Stats"}),r.jsx("button",{onClick:()=>l(!i),className:`px-4 py-2 rounded-lg text-sm font-medium ${i?"bg-purple-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:i?"Hide Technical Stats":"Show Technical Stats"})]}),n&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium text-gray-700",children:"Physical Stats"}),uc.map(d=>{const u=d.stat in s,h=e.stats[d.stat],m=o(d.stat);return r.jsx(ph,{baseValue:h,effectiveValue:m,maxValue:c,bonus:t[d.stat]||0,Icon:d.icon,label:d.label,color:gh(!0),level:e.statLevels[d.stat]||0,isAffectedByInjury:u})})]}),i&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium text-gray-700",children:"Technical Stats"}),hc.map(d=>{const u=d.stat in s,h=e.stats[d.stat],m=o(d.stat);return r.jsx(ph,{baseValue:h,effectiveValue:m,bonus:t[d.stat]||0,maxValue:c,Icon:d.icon,label:d.label,color:gh(!1),level:e.statLevels[d.stat]||0,isAffectedByInjury:u})})]})]})}const t1=[{id:"bandage",name:"Bandage",description:"Reduces recovery time by 30%",icon:vj,cost:2,recoveryReduction:.3,color:"bg-green-100 text-green-800",forSeverity:["minor"]},{id:"first-aid-kit",name:"First Aid Kit",description:"Reduces recovery time by 50%",icon:_j,cost:4,recoveryReduction:.5,color:"bg-blue-100 text-blue-800",forSeverity:["minor","moderate"]},{id:"medical-kit",name:"Medical Kit",description:"Reduces recovery time by 70%",icon:bl,cost:8,recoveryReduction:.7,color:"bg-purple-100 text-purple-800",forSeverity:["minor","moderate","severe"]}];function s1({player:e,onClose:t,onHeal:s,resources:n}){const[a,i]=j.useState(Date.now());j.useEffect(()=>{const o=setInterval(()=>{i(Date.now())},1e3);return()=>clearInterval(o)},[]);const l=j.useCallback(o=>{const d=Math.max(0,o-a),u=Math.floor(d/(1e3*60)),h=Math.floor(d/1e3%60);return u===0?`${h} seconds`:`${u} minutes ${h} seconds`},[a]);if(!e.injuries||e.injuries.length===0)return null;const c=j.useMemo(()=>e.injuries.filter(o=>o.recoveryEndTime>a),[e.injuries,a]);return c.length>0&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(bl,{className:"w-6 h-6 text-red-500"}),r.jsx("h2",{className:"text-xl font-bold",children:"Heal Injuries"})]}),r.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"space-y-4",children:c.map((o,d)=>r.jsxs("div",{className:`p-4 rounded-lg ${o.severity==="minor"?"bg-yellow-50":o.severity==="moderate"?"bg-orange-50":"bg-red-50"}`,children:[r.jsxs("h3",{className:"font-medium mb-2",children:[e.name,"'s Injury"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[o.type," (",o.severity,")"]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Recovery time: ",l(o.recoveryEndTime)]})]},d))}),r.jsx("div",{className:"mt-6 space-y-3",children:t1.filter(o=>c.some(d=>o.forSeverity.includes(d.severity))).map(o=>r.jsxs("button",{onClick:()=>s(o.id,o.recoveryReduction),disabled:n.diamonds<o.cost,className:`w-full px-4 py-3 rounded-lg flex items-center justify-between ${n.diamonds>=o.cost?`${o.color} hover:bg-opacity-80`:"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(o.icon,{className:"w-5 h-5"}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium",children:o.name}),r.jsx("div",{className:"text-sm",children:o.description})]})]}),r.jsxs("div",{className:"font-medium",children:[o.cost," "]})]},o.id))}),r.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Your diamonds: ",n.diamonds," "]})]})})}function r1({label:e,description:t,value:s,onChange:n}){return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{className:"text-sm font-medium",children:e}),r.jsxs("div",{className:"group relative",children:[r.jsx(Vi,{className:"w-4 h-4 text-gray-400"}),r.jsx("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded p-2 w-48",children:t})]})]}),r.jsxs("span",{className:"text-sm font-medium",children:[s,"/10"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:s,onChange:a=>n(Number(a.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),r.jsx("div",{className:"absolute top-0 left-0 h-2 bg-blue-500 rounded-l-lg pointer-events-none",style:{width:`${s/10*100}%`}})]})]})}function n1({player:e,onClose:t,onUpdateStrategy:s}){const[n,a]=V.useState(e.strategy),i=(c,o)=>{const d={...n,[c]:o};a(d)},l=[{key:"physicalCommitment",label:"Implication Physique",description:"Endurance et puissance"},{key:"playStyle",label:"Style de Frappe",description:"Puissance des frappes"},{key:"movementSpeed",label:"Vitesse de Dplacement",description:"Agilit sur le terrain"},{key:"fatigueManagement",label:"Gestion de la Fatigue",description:"Potentiel physique"},{key:"rallyConsistency",label:"Consistance changes",description:"Rgularit"},{key:"riskTaking",label:"Prise de Risque",description:"Impact/Prcision"},{key:"attack",label:"Attaque",description:"Smash (10/10)"},{key:"softAttack",label:"Soft Attaque",description:"Drop shot (10/10)"},{key:"serving",label:"Mise en Jeu",description:"Service (10/10)"},{key:"courtDefense",label:"Protection Terrain",description:"Dfense (10/10)"},{key:"mentalToughness",label:"Rsilience Mentale",description:"Service"},{key:"selfConfidence",label:"Confiance en Soi",description:"Smash + Dfense"}];return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{s(e.id,n),t()},children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:c=>c.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold",children:["Stratgie de ",e.name]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Ajustez les curseurs pour dfinir la stratgie du joueur"})]}),r.jsx("button",{onClick:()=>{s(e.id,n),t()},className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"space-y-6",children:l.map(({key:c,label:o,description:d})=>r.jsx(r1,{label:o,description:d,value:n[c],onChange:u=>i(c,u)},c))}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Priorits pour le calcul des matchs"}),r.jsxs("ul",{className:"space-y-1 text-sm text-blue-600",children:[r.jsx("li",{children:"Score: 60%"}),r.jsx("li",{children:"Stratgie: 30%"}),r.jsx("li",{children:"Classement: 10%"})]})]})]})})}function Ji(e){if(e<60)return`${e}s`;const t=Math.floor(e/60),s=Math.floor(e%60);return`${t}m ${s}s`}const a1=({rank:e,players:t,best:s})=>{const[n,a]=j.useState({visible:!1,x:0,y:0,content:""}),i=j.useRef(null),l=Math.floor(e*100/450),c={P12:[0,20],P11:[21,40],P10:[41,70],D9:[71,100],D8:[101,130],D7:[131,160],R6:[161,200],R5:[201,250],R4:[251,300],N3:[301,370],N2:[371,450],N1:[451,451]},o=g=>Object.keys(c).find(v=>{const[p,w]=c[v];return g>=p&&g<=w})||"N/A",d=Object.keys(c),u={};d.forEach(g=>{const[v,p]=c[g];u[g]=v/450*100});const h=d.find(g=>c[g][0]>e),m=h?u[h]:100,f=g=>{if(i.current){const v=i.current.getBoundingClientRect(),p=g.clientX-v.left;let w=0;for(const[b,_]of Object.entries(c))if(console.log("[handleMouseMove] level, range =>",b,_),e>=_[0]&&e<=_[1]){w=_[1];break}a({visible:!0,x:p,y:-30,content:`${parseFloat(e.toString()).toFixed(2)} / ${parseFloat(w.toString()).toFixed(2)}`})}},y=()=>{a(g=>({...g,visible:!1}))};return r.jsxs("div",{className:"relative w-full bg-gray-300 rounded-md",style:{height:"5px"},children:[r.jsx("div",{ref:i,onMouseMove:f,onMouseLeave:y,className:"h-full bg-blue-500 transition-all duration-500 rounded-md",style:{width:`${l>100?100:l}%`}}),r.jsx("div",{className:"absolute top-0 h-full w-[2px] bg-red-500",style:{left:`${m}%`,transform:"translateX(-50%)"}}),r.jsxs("div",{className:"relative group ml-auto",children:[r.jsx("span",{className:"absolute text-xs text-center text-black font-semibold",style:{right:"-5%",top:"-25px",transform:"translateX(-50%)"},children:r.jsx(Vi,{className:"w-5 h-5 text-blue-500"})}),r.jsx("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 bg-black text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap",children:s==null?void 0:s.map((g,v)=>{var p;return r.jsxs("div",{className:"mb-2",children:[new Date(g.match_date).toLocaleDateString()," :",g.opponent_id!=null?(p=t.find(w=>w.id===g.opponent_id.toString()))==null?void 0:p.name:"CPU player"," ",`${g.opponent_rank}(${o(g.opponent_rank)})`]},v)})})]}),n.visible&&r.jsx("div",{className:"absolute bg-black text-white text-sm px-2 py-1 rounded pointer-events-none",style:{top:`${n.y}px`,left:`${n.x}px`,transform:"translateX(-50%)"},children:n.content})]})};function i1({player:e,onClose:t}){const{resources:s,gameState:n,updateResources:a,dispatchGameState:i}=Kt(),l=async o=>{try{await $.from("player_equipment_history").delete().eq("player_id",o),await $.from("player_equipment").delete().eq("player_id",o),await $.from("player_training_history").delete().eq("player_id",o);const{error:d}=await $.from("player_strategy").delete().eq("player_id",o);if(d)return console.error("Error deleting player strategy:",d),!1;const{error:u}=await $.from("player_levels").delete().eq("player_id",o);if(u)return console.error("Error deleting player levels:",u),!1;const{error:h}=await $.from("player_stats").delete().eq("player_id",o);if(h)return console.error("Error deleting player stats:",h),!1;const{error:m}=await $.from("players").delete().eq("id",o);return m?(console.error("Error deleting player:",m),!1):!0}catch(d){return console.error("Error in removePlayer:",d),!1}},c=async()=>{if(s.coins<0){me.warning("Not enough coins! You need 0 coins to remove a player.");return}try{if(!await l(e.id)){me.error("Failed to remove player. Please try again.");return}a("manual_adjustment",{coins:0},!1),i({type:"REMOVE_PLAYER",payload:{player:e}}),console.log(`Successfully removed player ${e.name} for 0 coins`),t()}catch(d){console.error("Error removing player:",d),me.error("Failed to remove player. Please try again.")}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>{t()},children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:o=>o.stopPropagation(),children:[r.jsx("span",{className:"text-xl",children:"Remove"})," ",r.jsx("span",{children:e.name}),r.jsx("br",{}),r.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[r.jsx("button",{onClick:c,className:"px-5 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 transition-all duration-200 shadow-md",children:"Ok"}),r.jsx("button",{onClick:()=>{t()},className:"px-5 py-2 rounded-xl border border-gray-300 text-gray-700 hover:bg-gray-100 transition-all duration-200 shadow-sm",children:"Cancel"})]})]})})}const l1=new Ys($);function o1({player:e,players:t,onStartTraining:s,calculateTrainingCost:n,canAffordTraining:a,onNameChange:i,onSpeedUpTraining:l,canAffordSpeedUp:c,resources:o,onEquipItem:d,onHeal:u,onUpdateStrategy:h}){var N,U;const[m,f]=j.useState(!1),[y,g]=j.useState(!1),[v,p]=j.useState(!1),[w,b]=j.useState(!1),[_,P]=j.useState(!1),[C,k]=j.useState(!1),[R,L]=j.useState(e.name),[T,O]=j.useState(!1),[ae,A]=j.useState(!1),X=j.useCallback(()=>{e.training&&l(e.id)},[e]),{progress:q,timeLeft:H}=zp((N=e.training)==null?void 0:N.startTime,(U=e.training)==null?void 0:U.period,X),[ie,B]=j.useState(Date.now()),G=["P12","P11","P10","D9","D8","D7","R6","R5","R4","N3","N2","N1"],Q=W=>W<=20?12:W<=40?11:W<=70?10:W<100?9:W<130?8:W<160?7:W<200?6:W<250?5:W<300?4:W<370?3:W<450?2:W>450?1:0;j.useEffect(()=>{const W=setInterval(()=>{B(Date.now())},1e3);return()=>clearInterval(W)},[]);const M=j.useMemo(()=>Zj(e),[e]),E=j.useMemo(()=>e.level<e.maxLevel&&!e.training,[e]),S=j.useMemo(()=>{var W;return((W=e.injuries)==null?void 0:W.filter(D=>D.recoveryEndTime>ie))||[]},[e.injuries,ie]),z=j.useMemo(()=>S.length>0,[S]);S.length>0&&S.forEach(async W=>{const D=Date.now();if(W.recoveryEndTime-D<=1e3){const te=e.injuries.filter(pe=>pe.id!==W.id),{error:oe}=await $.from("players").update({injuries:te}).eq("id",e.id);oe?console.error(`Failed to remove healed injury: ${W.id}`,oe.message):console.log(`Healed injury removed: ${W.id}`)}});const Z=j.useMemo(()=>({emoji:e.gender==="male"?"":"",color:e.gender==="male"?"text-blue-500":"text-pink-500"}),[e.gender]),ee=W=>{W.preventDefault(),R.trim()&&(i(e.id,R.trim()),k(!1))},Pe=W=>{switch(W){case"minor":return"bg-yellow-50 text-yellow-700";case"moderate":return"bg-orange-50 text-orange-700";case"severe":return"bg-red-50 text-red-700";default:return"bg-gray-50 text-gray-700"}};return console.log("player =>",e),j.useEffect(()=>{l1.updatePlayerRank(e.id)}),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[C?r.jsx("form",{onSubmit:ee,className:"flex items-center space-x-2",children:r.jsx("input",{type:"text",value:R,onChange:W=>L(W.target.value),className:"px-2 py-1 border rounded-md text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,onBlur:ee})}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`text-lg ${Z.color}`,children:Z.emoji}),r.jsx("h3",{className:"text-lg font-semibold",children:e.name}),r.jsx("button",{onClick:()=>k(!0),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(Dj,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})})]}),r.jsx("span",{className:`badge-rank-${Q(e.rank)}`})]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[r.jsxs("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:["Level ",e.level,"/",e.maxLevel]}),r.jsx("button",{onClick:()=>P(!_),className:"text-sm text-blue-500 hover:text-blue-600",children:_?"Hide Details":"Show Details"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>f(!0),disabled:!E,className:`p-2 rounded-lg ${E?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,title:"Physical Training",children:r.jsx(Nj,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>g(!0),disabled:!E,className:`p-2 rounded-lg ${E?"bg-purple-500 text-white hover:bg-purple-600":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,title:"Technical Training",children:r.jsx(bj,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>p(!0),className:"p-2 rounded-lg bg-green-500 text-white hover:bg-green-600",title:"Customize Equipment",children:r.jsx(Ip,{className:"w-4 h-4"})}),z&&r.jsx("button",{onClick:()=>b(!0),className:"p-2 rounded-lg bg-red-500 text-white hover:bg-red-600",title:"Heal Injury",children:r.jsx(bl,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>O(!0),className:"p-2 rounded-lg bg-indigo-500 text-white hover:bg-indigo-600",title:"Stratgie",children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>A(!0),className:"p-2 rounded-lg bg-indigo-500 text-white hover:bg-indigo-600",title:"delete",children:r.jsx(Ij,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"text-lg font-semibold",children:["Score: ",M.score]}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Physical: ",M.details.physicalScore," | Technical:"," ",M.details.technicalScore]})]})}),_&&r.jsx("div",{className:"mb-4 bg-gray-50 rounded-lg p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Score Details"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("p",{children:["Base Score: ",M.details.baseScore]}),r.jsxs("p",{children:["Balance Multiplier: ",M.details.balanceScore,"x"]}),M.details.specialization.length>0&&r.jsxs("p",{children:["Specializations:"," ",M.details.specialization.join(", ")]}),M.details.weaknesses.length>0&&r.jsxs("p",{className:"text-red-500",children:["Weaknesses: ",M.details.weaknesses.join(", ")]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2 mb-5",children:"Rank"}),r.jsx(a1,{rank:e.rank,players:t,best:e==null?void 0:e.best}),r.jsxs("div",{className:"flex justify-between w-full",children:[r.jsx("span",{children:G[12-Q(e.rank)]}),r.jsx("span",{children:G[13-Q(e.rank)]})]}),Object.keys(M.details.equipmentBonuses).length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Equipment Bonuses"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(M.details.equipmentBonuses).map(([W,D])=>r.jsxs("p",{className:"text-green-600",children:["+",D," ",W]},W))})]})]})]})}),r.jsx(e1,{player:e,equipmentBonuses:M.details.equipmentBonuses,injuryEffects:Fp(e)}),e.training&&r.jsx("div",{className:"mt-4 pt-4 border-t",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("p",{className:"text-sm text-blue-600",children:["Training ",e.training.stat,"..."]}),r.jsx(Up,{timeLeft:H*1e3,onSpeedUp:X,disabled:!c(Math.ceil(H/10))})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000",style:{width:`${q}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[Ji(H)," remaining"]})]})}),z&&r.jsxs("div",{className:"mt-4 pt-4 border-t space-y-3",children:[r.jsx("h4",{className:"font-medium text-gray-700",children:"Active Injuries:"}),S.map((W,D)=>r.jsxs("div",{className:`p-4 rounded-lg ${Pe(W.severity)}`,children:[r.jsx("div",{className:"font-medium mb-1",children:W.type}),r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("div",{children:["Recovery time:"," ",Ji(Math.max(0,Math.floor((W.recoveryEndTime-ie)/1e3)))]}),W.affectedStats&&r.jsxs("div",{children:["Affected stats:"," ",Object.keys(W.affectedStats).join(", ")]})]})]},D))]})]}),m&&r.jsx(hh,{player:e,onClose:()=>f(!1),onStartTraining:W=>{s(e.id,W),f(!1)},calculateTrainingCost:n,canAffordTraining:a,type:"physical"}),y&&r.jsx(hh,{player:e,onClose:()=>g(!1),onStartTraining:W=>{s(e.id,W),g(!1)},calculateTrainingCost:n,canAffordTraining:a,type:"technical"}),v&&r.jsx(Kj,{onClose:()=>p(!1),playerEquipment:e.equipment,onEquip:W=>{d(e.id,W),p(!1)},resources:o}),w&&z&&r.jsx(s1,{player:e,onClose:()=>b(!1),onHeal:(W,D)=>{u==null||u(e.id,W,D),b(!1)},resources:o}),T&&r.jsx(n1,{player:e,onClose:()=>O(!1),onUpdateStrategy:h}),ae&&r.jsx(i1,{player:e,onClose:()=>A(!1)})]})}const xh={physical:{shuttlecocks:5,meals:3,coins:50},technical:{shuttlecocks:8,meals:4,coins:75}},c1=["endurance","strength","agility","speed","explosiveness","injuryPrevention"];function yh(e,t){const s=e.statLevels[t],n=c1.includes(t)?xh.physical:xh.technical;return{shuttlecocks:Math.round(n.shuttlecocks*Math.pow(1.5,s)*so[t]),meals:Math.round(n.meals*Math.pow(1.5,s)*so[t]),coins:Math.round(n.coins*Math.pow(1.5,s)*so[t])}}function Bp(e){return Math.max(1,Math.ceil(e/1e4))}const d1=100;function qp(e){return d1*Math.pow(2,e-1)}function u1({currentPlayers:e,maxPlayers:t,coins:s,onRecruit:n}){const a=qp(e),i=e<t&&s>=a;return r.jsx(r.Fragment,{children:e<t&&r.jsxs("button",{onClick:n,disabled:!i,className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${i?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:[r.jsx(Gi,{className:"w-4 h-4"}),r.jsxs("span",{children:["Recruit Player (",a," coins)"]})]})})}const ro=new Ys($);function h1(){var f;const{resources:e,gameState:t,updateResources:s,dispatchGameState:n,setGameState:a}=Kt(),{user:i}=_s(),l=async(y,g)=>{await ro.updatePlayerName(y,g),n({type:"UPDATE_PLAYER_NAME",payload:{playerId:y,name:g}})},c=async(y,g)=>{const v=t.players.find(b=>b.id===y);if(!v||v.training||v.level>=v.maxLevel)return;const p=yh(v,g);Object.entries(p).every(([b,_])=>e[b]>=_)&&(await tj(v,g),s("training_cost",p,!1),n({type:"START_TRAINING",payload:{playerId:y,stat:g}}))},o=async(y,g)=>{const v=t.players.find(p=>p.id===y);v&&v.strategy!=g&&(await rj(y,g),n({type:"UPDATE_STRATEGY",payload:{playerId:y,strategy:g}}))},d=async y=>{const g=t.players.find(b=>b.id===y);if(!(g!=null&&g.training))return;const v=g.training.startTime+g.training.period-Date.now(),p=Bp(v);if(e.diamonds<p)return;s("manual_adjustment",{diamonds:-p});const w=g.stats[g.training.stat]+5;await sj(g,g.training.stat,w),n({type:"COMPLETE_TRAINING",payload:{playerId:y}})},u=async(y,g)=>{const v=t.players.find(p=>p.id===y);v&&(s("equipment_purchase",g.price,!1),await Pp(v,g),n({type:"EQUIP_ITEM",payload:{playerId:y,equipment:g}}))},h=async()=>{var v;const y=qp(t.players.length),g=((v=t.facilities.find(p=>p.type==="training-center"))==null?void 0:v.maxPlayers)||1;if(!(t.players.length>=g||e.coins<y)&&(s("manual_adjustment",{coins:-y}),i!=null&&i.id)){const p=await ro.createPlayer(i.id);if(console.log("Recruit player result:",p),p.success&&p.player){const w={id:p.player.id,name:p.player.name,gender:p.player.gender,level:p.player.level,maxLevel:p.player.max_level,rank:p.player.rank,stats:p.player.stats,statLevels:p.player.levels,strategy:p.player.strategy,training:void 0,equipment:{},injuries:[],best:[]};n({type:"ADD_PLAYER",payload:{player:w}})}}},m=async(y,g,v)=>{const w={bandage:2,"first-aid-kit":4,"medical-kit":8}[g];if(!w||e.diamonds<w)return;s("manual_adjustment",{diamonds:-w});const b=t.players.find(k=>k.id===y);if(!b||!b.injuries||b.injuries.length===0)return;const _=Date.now();await ro.removeHealedInjuries(y,b.injuries);const C=b.injuries.filter(k=>k.recoveryEndTime>_).map(k=>{const L=(k.recoveryEndTime-_)*(1-v);return{...k,recoveryEndTime:_+L}});await Tp(b,C),a(k=>({...k,players:k.players.map(R=>R.id===y?{...R,injuries:C}:R)}))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Be,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"My Club"})]}),r.jsx(u1,{currentPlayers:t.players.length,maxPlayers:((f=t.facilities.find(y=>y.type==="training-center"))==null?void 0:f.maxPlayers)||1,coins:e.coins,onRecruit:h})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.players.map(y=>r.jsx(o1,{player:y,players:t.players,onStartTraining:c,calculateTrainingCost:yh,canAffordTraining:g=>Object.entries(g).every(([v,p])=>e[v]>=p),onNameChange:l,onUpdateStrategy:o,onSpeedUpTraining:d,canAffordSpeedUp:g=>e.diamonds>=g,resources:e,onEquipItem:u,onHeal:m},y.id))})]})}function vh(e){const t=Hp(e,e.level+1),s=e.type==="training-center"?e.maxPlayers+1:e.maxPlayers,n=e.level+1,a=Wp(e.type,n+1);return{level:n,productionRate:t,maxPlayers:s,upgradeCost:a,upgrading:void 0}}function Hp(e,t){if(e.type==="training-center")return 0;const n={"shuttlecock-machine":1,canteen:1,sponsors:2}[e.type]||1;return Math.ceil(n*(1+(t-1)*.5))}function wh(e,t=e.level,s=[]){if(e.type==="training-center")return 0;const n=Hp(e,t),a=s.find(l=>l.facilityType===e.type&&l.active);return a?Math.ceil(n*(1+a.productionBonus)):n}function Wp(e,t){const s=100*Math.pow(2,t-1);return{coins:Math.floor(s),shuttlecocks:e==="training-center"?Math.floor(s/4):0,meals:e==="training-center"?Math.floor(s/4):0,diamonds:0}}function Vp(e){return Wp(e.type,e.level+1)}function m1(){var l;const{gameState:e,refreshGameState:t}=Kt(),[s,n]=j.useState(!1),a=c=>{if(c.type==="training-center")return{current:c.maxPlayers,bonus:0,total:c.maxPlayers};const o=e.managers.filter(m=>m.active),d=wh(c,c.level,[]),u=wh(c,c.level,o),h=u-d;return{current:d,bonus:h,total:u}},i=async()=>{n(!0);try{await t()}finally{n(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Dp,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Tableau de bord"})]}),r.jsxs("button",{onClick:i,disabled:s,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${s?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[r.jsx(Ap,{className:`w-4 h-4 ${s?"animate-spin":""}`}),r.jsx("span",{children:s?"Refreshing...":"Refresh"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Vue d'ensemble du club"}),r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Statistiques"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{children:["Joueurs totaux: ",e.players.length,"/",((l=e.facilities.find(c=>c.type==="training-center"))==null?void 0:l.maxPlayers)||1]}),r.jsxs("p",{children:["Installations totales: ",e.facilities.length]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Production"}),e.facilities.map(c=>{const o=a(c),d=e.managers.find(u=>u.facilityType===c.type&&u.active);return r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h3",{className:"font-semibold text-lg",children:c.name}),r.jsxs("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:["Niveau ",c.level]})]}),c.type==="training-center"?r.jsxs("p",{className:"text-gray-600",children:["Capacit maximale: ",c.maxPlayers," joueurs"]}):r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Production de base:"}),r.jsxs("span",{children:[o.current," ",c.resourceType,"/min"]})]}),d&&r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-green-600",children:["Bonus (",d.name,"):"]}),r.jsxs("span",{className:"text-green-600",children:["+",o.bonus," ",c.resourceType,"/min"]})]}),r.jsxs("div",{className:"flex items-center justify-between font-medium pt-2 border-t",children:[r.jsx("span",{children:"Production totale:"}),r.jsxs("span",{children:[o.total," ",c.resourceType,"/min"]})]}),c.upgrading&&r.jsx("div",{className:"mt-2 py-2 px-3 bg-yellow-50 text-yellow-800 rounded-lg text-sm",children:"Amlioration en cours..."})]})]},c.id)})]})]})]})}function f1({facility:e,onUpgrade:t,onSpeedUp:s,canAfford:n,canAffordSpeedUp:a}){var d,u;const i=j.useCallback(()=>{e.upgrading&&s(e.id)},[e]),{progress:l,timeLeft:c}=zp((d=e.upgrading)==null?void 0:d.startTime,(u=e.upgrading)==null?void 0:u.period,i),o=e.upgradeCost||Vp(e);return r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(jd,{className:"w-6 h-6 text-blue-500"}),r.jsx("h3",{className:"text-lg font-semibold",children:e.name})]}),r.jsxs("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full",children:["Level ",e.level]})]}),r.jsxs("div",{className:"space-y-3",children:[e.type==="training-center"?r.jsxs("div",{className:"text-sm text-gray-600",children:["Max Players: ",e.maxPlayers]}):r.jsxs("div",{className:"text-sm text-gray-600",children:["Production Rate: ",e.productionRate,"/min"]}),e.upgrading?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"text-sm text-blue-600",children:"Upgrading..."}),r.jsx(Up,{timeLeft:c*1e3,onSpeedUp:i,disabled:!a(Math.ceil(c/10))})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000",style:{width:`${l}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[Ji(c)," remaining"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"border-t pt-3",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Upgrade Cost:"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(o).map(([h,m])=>m>0&&r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsxs("span",{className:"text-gray-600",children:[h,":"]}),r.jsx("span",{className:"font-medium",children:m})]},h))})]}),r.jsxs("button",{onClick:()=>t(e.id),disabled:!n||e.upgrading,className:`w-full py-2 px-4 rounded-lg flex items-center justify-center space-x-2 ${n&&!e.upgrading?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:[r.jsx(xj,{className:"w-4 h-4"}),r.jsx("span",{children:"Upgrade"})]})]})]})]})}function p1({manager:e,onHire:t,canAfford:s}){const{dispatchGameState:n}=Kt(),a={"shuttlecock-machine":"Machine  volants",canteen:"Cantine",sponsors:"Sponsors"},[i,l]=j.useState(0),c=j.useMemo(()=>Math.floor(i/(24*3600)),[i]),o=j.useMemo(()=>Math.floor(i%(24*3600)/3600),[i]),d=j.useMemo(()=>Math.floor(i%3600/60),[i]);return j.useEffect(()=>{const u=()=>{const m=e.purchasing?Math.max(0,Math.floor((e.purchasing.startTime+e.purchasing.period-Date.now())/1e3)):0;l(m),m||(n({type:"COMPLETE_MANAGER_DURATION",payload:{managerId:e.id}}),nj(e.id))},h=setInterval(u,1e4);return u(),()=>clearInterval(h)},[e.purchasing]),r.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-16 h-16 rounded-full object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.name}),r.jsx("p",{className:"text-sm text-gray-600",children:a[e.facilityType]}),r.jsxs("p",{className:"text-sm text-green-600",children:["+",e.productionBonus*100,"% de production"]}),e.active&&i>0&&r.jsxs("p",{className:"text-sm text-blue-600",children:["Temps restant: ",c,"j ",o,"h ",d,"m"]})]}),r.jsx("button",{onClick:()=>t(e.id),disabled:e.active||!s,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${e.active?"bg-green-500 text-white cursor-default":s?"bg-purple-500 text-white hover:bg-purple-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:e.active?r.jsx("span",{children:"Actif"}):r.jsxs(r.Fragment,{children:[r.jsx(Qe,{className:"w-4 h-4"}),r.jsx("span",{children:e.cost})]})})]})})}function g1(){const{resources:e,gameState:t,updateResources:s,dispatchGameState:n}=Kt(),a=async c=>{console.log("handleUpgradeFacility",c);const o=t.facilities.find(m=>m.id===c);if(!o||o.upgrading)return;const d=o.upgradeCost||Vp(o);if(!Object.entries(d).every(([m,f])=>e[m]>=f))return;s("upgrade_cost",d,!1);const h=vh(o);n({type:"START_FACILITY_UPGRADE",payload:{facilityId:c,upgradedFacility:h}}),await ij(o)},i=async c=>{const o=t.facilities.find(m=>m.id===c);if(!(o!=null&&o.upgrading))return;const d=o.upgrading.startTime+o.upgrading.period-Date.now(),u=Bp(d);if(e.diamonds<u)return;s("manual_adjustment",{diamonds:-u});const h=vh(o);n({type:"SPEED_UP_FACILITY",payload:{facilityId:c,upgradedFacility:h}}),await lj(o,h)},l=async c=>{const o=t.managers.find(d=>d.id===c);!o||o.active||e.diamonds<o.cost||(s("manual_adjustment",{diamonds:-o.cost}),n({type:"HIRE_MANAGER",payload:{managerId:c}}),await aj(c))};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(jd,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Installations"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.facilities.map(c=>r.jsx(f1,{facility:c,onUpgrade:a,onSpeedUp:i,canAfford:Object.entries(c.upgradeCost).every(([o,d])=>e[o]>=d),canAffordSpeedUp:o=>e.diamonds>=o},c.id))}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Managers"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.managers.map(c=>r.jsx(p1,{manager:c,onHire:l,canAfford:e.diamonds>=c.cost},c.id))})]})]})}const x1=()=>{var A,X,q,H,ie,B,G,Q,M;const{gameState:e,resources:t,refreshGameState:s}=Kt(),{user:n}=_s(),[a]=j.useState(()=>new Ep($)),[i,l]=j.useState("selection"),[c,o]=j.useState(!0),[d,u]=j.useState([]),[h,m]=j.useState(["departmental"]),[f,y]=j.useState(null),[g,v]=j.useState(null),[p,w]=j.useState(null),[b,_]=j.useState([]),[P,C]=j.useState(""),[k,R]=j.useState("");j.useState(null),j.useEffect(()=>{n!=null&&n.id&&L()},[n==null?void 0:n.id]);const L=async()=>{if(n!=null&&n.id)try{o(!0);const{seasons:E,unlockedTiers:S}=await a.getAvailableSeasons(n.id);u(E),m(S);const z=await a.getUserCurrentSeasonStatus(n.id);if(v(z),z){const Z=await a.getUserNextEncounter(n.id);w(Z),l("dashboard")}}catch(E){console.error("Error loading interclub data:",E)}finally{o(!1)}},T=async()=>{if(!(n!=null&&n.id)||!f||b.length<5||!P.trim()){R("Please complete all registration requirements");return}try{o(!0);const E={season_id:f.id,team_name:P.trim(),selected_players:b},S=await a.registerForSeason(n.id,E);S.success?(await s(),await L(),l("selection"),R("")):R(S.error||"Registration failed")}catch(E){console.error("Registration error:",E),R("Registration failed")}finally{o(!1)}},O=E=>{const S=mr[E],z={departmental:"Departmental",regional:"Regional",national:"National",top12:"TOP 12"},Z={departmental:"Beginner level",regional:"Intermediate level",national:"Advanced level",top12:"Elite level"};return{name:z[E],description:Z[E],requirements:S,unlocked:h.includes(E)}},ae=E=>{const S=mr[E.tier];return t.coins>=S.coins&&t.shuttlecocks>=S.shuttlecocks&&t.meals>=S.meals&&e.players.length>=5};if(c)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})});if(i==="selection")return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx(re,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Interclubs"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Tier Progression"}),r.jsx("div",{className:"grid md:grid-cols-4 gap-4",children:Yb.map((E,S)=>{const z=O(E),Z=z.unlocked;return r.jsxs("div",{className:`relative p-4 rounded-lg border-2 transition-all ${Z?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50 opacity-60"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[S===0&&r.jsx(re,{className:"w-5 h-5 text-bronze"}),S===1&&r.jsx(re,{className:"w-5 h-5 text-gray-500"}),S===2&&r.jsx(re,{className:"w-5 h-5 text-yellow-500"}),S===3&&r.jsx(Wt,{className:"w-5 h-5 text-purple-500"}),r.jsx("span",{className:"font-bold",children:z.name})]}),Z&&r.jsx(ns,{className:"w-5 h-5 text-green-500"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:z.description}),!Z&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-20 rounded-lg",children:r.jsx(on,{className:"w-6 h-6 text-gray-400"})})]},E)})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-6",children:"Available Seasons"}),d.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(bs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"No seasons available at the moment"})]}):r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(E=>{const S=O(E.tier),z=ae(E),Z=S.unlocked&&z;return r.jsxs("div",{className:`border rounded-lg p-6 transition-all ${Z?"border-blue-200 hover:border-blue-400 hover:shadow-md cursor-pointer":"border-gray-200 opacity-75"}`,onClick:()=>Z&&(y(E),l("registration")),children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-bold text-lg",children:E.name}),r.jsxs("div",{className:"flex items-center space-x-1",children:[E.tier==="departmental"&&r.jsx(re,{className:"w-4 h-4 text-bronze"}),E.tier==="regional"&&r.jsx(re,{className:"w-4 h-4 text-gray-500"}),E.tier==="national"&&r.jsx(re,{className:"w-4 h-4 text-yellow-500"}),E.tier==="top12"&&r.jsx(Wt,{className:"w-4 h-4 text-purple-500"}),r.jsx("span",{className:"text-sm font-medium",children:S.name})]})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:S.description}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{children:"Start:"}),r.jsx("span",{children:new Date(E.start_date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{children:"Registration deadline:"}),r.jsx("span",{children:new Date(E.registration_deadline).toLocaleDateString()})]})]}),r.jsxs("div",{className:"border-t pt-3",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Requirements:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:`flex items-center space-x-1 ${e.players.length>=5?"text-green-600":"text-red-600"}`,children:[r.jsx(Be,{className:"w-3 h-3"}),r.jsx("span",{children:"5 players"})]}),r.jsxs("div",{className:`flex items-center space-x-1 ${t.coins>=S.requirements.coins?"text-green-600":"text-red-600"}`,children:[r.jsx(Ne,{className:"w-3 h-3"}),r.jsx("span",{children:S.requirements.coins})]}),r.jsxs("div",{className:`flex items-center space-x-1 ${t.shuttlecocks>=S.requirements.shuttlecocks?"text-green-600":"text-red-600"}`,children:[r.jsx(Ct,{className:"w-3 h-3"}),r.jsx("span",{children:S.requirements.shuttlecocks})]}),r.jsxs("div",{className:`flex items-center space-x-1 ${t.meals>=S.requirements.meals?"text-green-600":"text-red-600"}`,children:[r.jsx(as,{className:"w-3 h-3"}),r.jsx("span",{children:S.requirements.meals})]})]})]}),!S.unlocked&&r.jsx("div",{className:"mt-3 text-xs bg-yellow-50 text-yellow-700 p-2 rounded",children:"Finish in top 2 to unlock this tier"}),!z&&S.unlocked&&r.jsx("div",{className:"mt-3 text-xs bg-red-50 text-red-700 p-2 rounded",children:"Insufficient resources"})]},E.id)})})]})]});if(i==="registration"&&f){const E=O(f.tier);return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx("button",{onClick:()=>l("selection"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(xi,{className:"w-6 h-6"})}),r.jsx(re,{className:"w-8 h-8 text-blue-500"}),r.jsxs("h1",{className:"text-2xl font-bold",children:["Registration - ",f.name]})]}),r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Season Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Tier:"}),r.jsx("span",{className:"font-medium",children:E.name})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Start:"}),r.jsx("span",{children:new Date(f.start_date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"End:"}),r.jsx("span",{children:new Date(f.end_date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Registration deadline:"}),r.jsx("span",{children:new Date(f.registration_deadline).toLocaleDateString()})]})]}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Registration cost:"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-500"}),r.jsx("span",{children:"Coins"})]}),r.jsx("span",{className:"font-medium",children:E.requirements.coins})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ct,{className:"w-4 h-4 text-blue-500"}),r.jsx("span",{children:"Shuttlecocks"})]}),r.jsx("span",{className:"font-medium",children:E.requirements.shuttlecocks})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(as,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{children:"Meals"})]}),r.jsx("span",{className:"font-medium",children:E.requirements.meals})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Registration"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Team Name"}),r.jsx("input",{type:"text",value:P,onChange:S=>C(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your team name"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Select your players (",b.length,"/5 minimum)"]}),r.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:e.players.map(S=>r.jsxs("label",{className:"flex items-center p-3 hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:b.includes(S.id),onChange:z=>{z.target.checked?b.length<10&&_([...b,S.id]):_(b.filter(Z=>Z!==S.id))},className:"mr-3"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium",children:S.name}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Level ",S.level,"  ",S.gender==="male"?"Male":"Female"]})]})]},S.id))})]}),k&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:k}),r.jsx("button",{onClick:T,disabled:c||b.length<5||!P.trim(),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Registering...":"Register for Season"})]})]})]})})]})}if(i==="dashboard"&&g)return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx(re,{className:"w-8 h-8 text-blue-500"}),r.jsxs("h1",{className:"text-2xl font-bold",children:["Interclub Season - ",g.registration.season.name]})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:p?r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[r.jsx(dn,{className:"w-6 h-6 mr-2 text-blue-500"}),"Next Match"]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-medium",children:["MD",p.matchday_number]}),r.jsx("span",{className:"text-sm text-gray-600",children:new Date(p.match_date).toLocaleDateString()})]}),r.jsx("div",{className:"text-lg font-bold text-center",children:p.home_team_id===(n==null?void 0:n.id)?"HOME":"AWAY"})]}),r.jsxs("div",{className:"flex justify-center space-x-4",children:[p.status==="lineup_pending"&&r.jsxs("button",{onClick:()=>l("lineup"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[r.jsx(ln,{className:"w-4 h-4"}),r.jsx("span",{children:"Create Lineup"})]}),r.jsxs("button",{onClick:()=>l("standings"),className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 flex items-center space-x-2",children:[r.jsx(yi,{className:"w-4 h-4"}),r.jsx("span",{children:"View Standings"})]})]})]}):r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Active Season"}),r.jsx("p",{className:"text-gray-600",children:"All matches are completed or pending scheduling."})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[r.jsx(Un,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Your Position"]}),g.standing?r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:["#",g.standing.position]}),r.jsxs("div",{className:"text-gray-600 mb-4",children:[g.standing.points," points"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Matches played:"}),r.jsx("span",{children:g.standing.matches_played})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Wins:"}),r.jsx("span",{className:"text-green-600",children:g.standing.encounters_won})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Losses:"}),r.jsx("span",{className:"text-red-600",children:g.standing.encounters_lost})]})]}),g.standing.form&&g.standing.form.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Recent form:"}),r.jsx("div",{className:"flex justify-center space-x-1 mt-1",children:g.standing.form.slice(-5).map((E,S)=>r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${E==="W"?"bg-green-500":"bg-red-500"}`,children:E},S))})]})]}):r.jsx("p",{className:"text-gray-600 text-center",children:"Position not available"})]})]})]});if(i==="lineup"&&p){const[E,S]=j.useState({mens_singles:"",womens_singles:"",mens_doubles:["",""],womens_doubles:["",""],mixed_doubles:["",""]}),z=e.players.filter(N=>N.gender==="male"),Z=e.players.filter(N=>N.gender==="female"),ee=()=>E.mens_singles&&E.womens_singles&&E.mens_doubles[0]&&E.mens_doubles[1]&&E.womens_doubles[0]&&E.womens_doubles[1]&&E.mixed_doubles[0]&&E.mixed_doubles[1],Pe=async()=>{if(!ee())return;const N={encounter_id:p.id,lineup:E};try{o(!0),(await a.submitLineup(n.id,N)).success&&(await L(),l("dashboard"))}catch(U){console.error("Lineup submission error:",U)}finally{o(!1)}};return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx("button",{onClick:()=>l("dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(xi,{className:"w-6 h-6"})}),r.jsx(ln,{className:"w-8 h-8 text-blue-500"}),r.jsxs("h1",{className:"text-2xl font-bold",children:["Lineup - MD",p.matchday_number]})]}),r.jsx("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-6",children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Match Lineups"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Men's Singles (MS)"}),r.jsxs("select",{value:E.mens_singles,onChange:N=>S({...E,mens_singles:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select a player"}),z.map(N=>r.jsxs("option",{value:N.id,children:[N.name," (Level ",N.level,")"]},N.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Women's Singles (WS)"}),r.jsxs("select",{value:E.womens_singles,onChange:N=>S({...E,womens_singles:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select a player"}),Z.map(N=>r.jsxs("option",{value:N.id,children:[N.name," (Level ",N.level,")"]},N.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Men's Doubles (MD)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("select",{value:E.mens_doubles[0],onChange:N=>S({...E,mens_doubles:[N.target.value,E.mens_doubles[1]]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Player 1"}),z.map(N=>r.jsxs("option",{value:N.id,children:[N.name," (Level ",N.level,")"]},N.id))]}),r.jsxs("select",{value:E.mens_doubles[1],onChange:N=>S({...E,mens_doubles:[E.mens_doubles[0],N.target.value]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Player 2"}),z.map(N=>r.jsxs("option",{value:N.id,children:[N.name," (Level ",N.level,")"]},N.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Women's Doubles (WD)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("select",{value:E.womens_doubles[0],onChange:N=>S({...E,womens_doubles:[N.target.value,E.womens_doubles[1]]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Player 1"}),Z.map(N=>r.jsxs("option",{value:N.id,children:[N.name," (Level ",N.level,")"]},N.id))]}),r.jsxs("select",{value:E.womens_doubles[1],onChange:N=>S({...E,womens_doubles:[E.womens_doubles[0],N.target.value]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Player 2"}),Z.map(N=>r.jsxs("option",{value:N.id,children:[N.name," (Level ",N.level,")"]},N.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mixed Doubles (XD)"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("select",{value:E.mixed_doubles[0],onChange:N=>S({...E,mixed_doubles:[N.target.value,E.mixed_doubles[1]]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Male Player"}),z.map(N=>r.jsxs("option",{value:N.id,children:[N.name," (Level ",N.level,")"]},N.id))]}),r.jsxs("select",{value:E.mixed_doubles[1],onChange:N=>S({...E,mixed_doubles:[E.mixed_doubles[0],N.target.value]}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Female Player"}),Z.map(N=>r.jsxs("option",{value:N.id,children:[N.name," (Level ",N.level,")"]},N.id))]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-bold mb-4",children:"Lineup Summary"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"bg-white p-3 rounded",children:[r.jsx("span",{className:"font-medium",children:"MS:"})," ",E.mens_singles?(A=e.players.find(N=>N.id===E.mens_singles))==null?void 0:A.name:"Not assigned"]}),r.jsxs("div",{className:"bg-white p-3 rounded",children:[r.jsx("span",{className:"font-medium",children:"WS:"})," ",E.womens_singles?(X=e.players.find(N=>N.id===E.womens_singles))==null?void 0:X.name:"Not assigned"]}),r.jsxs("div",{className:"bg-white p-3 rounded",children:[r.jsx("span",{className:"font-medium",children:"MD:"})," ",E.mens_doubles[0]&&E.mens_doubles[1]?`${(q=e.players.find(N=>N.id===E.mens_doubles[0]))==null?void 0:q.name} / ${(H=e.players.find(N=>N.id===E.mens_doubles[1]))==null?void 0:H.name}`:"Not assigned"]}),r.jsxs("div",{className:"bg-white p-3 rounded",children:[r.jsx("span",{className:"font-medium",children:"WD:"})," ",E.womens_doubles[0]&&E.womens_doubles[1]?`${(ie=e.players.find(N=>N.id===E.womens_doubles[0]))==null?void 0:ie.name} / ${(B=e.players.find(N=>N.id===E.womens_doubles[1]))==null?void 0:B.name}`:"Not assigned"]}),r.jsxs("div",{className:"bg-white p-3 rounded",children:[r.jsx("span",{className:"font-medium",children:"XD:"})," ",E.mixed_doubles[0]&&E.mixed_doubles[1]?`${(G=e.players.find(N=>N.id===E.mixed_doubles[0]))==null?void 0:G.name} / ${(Q=e.players.find(N=>N.id===E.mixed_doubles[1]))==null?void 0:Q.name}`:"Not assigned"]})]}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:Pe,disabled:!ee()||c,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Submitting...":"Submit Lineup"})})]})]})})]})}return i==="standings"&&g?r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx("button",{onClick:()=>l("dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx(xi,{className:"w-6 h-6"})}),r.jsx(re,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Group Standings"})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Points"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"P"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"W"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"L"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"+/-"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Form"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(M=g.standings)==null?void 0:M.map((E,S)=>{var z;return r.jsxs("tr",{className:E.team_id===(n==null?void 0:n.id)?"bg-blue-50":"",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-lg font-bold",children:E.position}),E.position<=2&&r.jsx(Wt,{className:"w-4 h-4 ml-1 text-yellow-500"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium",children:E.team_name}),E.team_id===(n==null?void 0:n.id)&&r.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"YOU"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-lg font-bold text-blue-600",children:E.points}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.matches_played}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-green-600",children:E.encounters_won}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-red-600",children:E.encounters_lost}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[E.individual_matches_won-E.individual_matches_lost>0?"+":"",E.individual_matches_won-E.individual_matches_lost]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex space-x-1",children:(z=E.form)==null?void 0:z.slice(-5).map((Z,ee)=>r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white ${Z==="W"?"bg-green-500":"bg-red-500"}`,children:Z},ee))})})]},E.team_id)})})]})})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Interclub"}),r.jsx("p",{className:"text-gray-600",children:"Loading..."})]})})},bh=["Finding opponent...","Preparing match...","Setting up court...","Match starting soon...","Players warming up...","Checking equipment...","Analyzing strategies...","Getting ready..."];function y1(){const[e,t]=j.useState(0),[s,n]=j.useState(10),[a,i]=j.useState(!1);return j.useEffect(()=>{const l=setInterval(()=>{t(o=>(o+1)%bh.length)},1250),c=setInterval(()=>{n(o=>Math.max(0,o-1))},1e3);return setTimeout(()=>i(!0),500),()=>{clearInterval(l),clearInterval(c)}},[]),r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 text-center",children:[r.jsx("div",{className:"relative h-32 mb-6",children:r.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-8",children:[r.jsx("div",{className:`w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center transition-all duration-500 ${a?"translate-x-0 opacity-100":"-translate-x-full opacity-0"}`,children:r.jsx(cn,{className:"w-8 h-8 text-white"})}),r.jsx("div",{className:`text-2xl font-bold text-gray-800 transition-opacity duration-500 ${a?"opacity-100":"opacity-0"}`,children:"VS"}),r.jsx("div",{className:`w-16 h-16 bg-red-500 rounded-full flex items-center justify-center transition-all duration-500 ${a?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:r.jsx(cn,{className:"w-8 h-8 text-white"})})]})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Match in Progress"}),r.jsx("p",{className:"text-gray-600 animate-pulse min-h-[1.5rem]",children:bh[e]}),r.jsxs("div",{className:"mt-8 space-y-2",children:[r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000",style:{width:`${(10-s)/10*100}%`}})}),r.jsxs("div",{className:"text-sm text-gray-500",children:[Ji(s)," remaining"]})]}),r.jsxs("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:[r.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 bg-blue-500 rounded-full animate-ping"}),r.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 bg-red-500 rounded-full animate-ping"}),r.jsx("div",{className:"absolute bottom-4 left-4 w-2 h-2 bg-yellow-500 rounded-full animate-ping"}),r.jsx("div",{className:"absolute bottom-4 right-4 w-2 h-2 bg-green-500 rounded-full animate-ping"})]})]})})}function v1({matchResult:e,rewards:t,onClose:s}){if(!e||!e.winner||!e.loser)return console.error("Invalid match result:",e),null;const{winner:n,loser:a,score:i,summary:l,newInjury:c}=e,o=u=>{switch(u){case"minor":return"text-yellow-600 bg-yellow-50";case"moderate":return"text-orange-600 bg-orange-50";case"severe":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},d=()=>{try{s(t)}catch(u){console.error("Error closing match result:",u)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Match Results"}),r.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(re,{className:`w-12 h-12 mx-auto mb-3 ${n.id.startsWith("cpu")?"text-gray-400":"text-yellow-500"}`}),r.jsxs("h4",{className:"text-lg font-semibold mb-1",children:[n.name," defeats ",a.name]}),r.jsxs("p",{className:"text-gray-600",children:["Score: ",i]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium mb-3",children:"Match Summary:"}),r.jsx("div",{className:"space-y-2",children:l.map((u,h)=>r.jsx("p",{className:"text-gray-600 text-sm",children:u},h))})]}),c&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h5",{className:"font-medium",children:"Injury Report:"}),r.jsx("div",{className:`rounded-lg p-4 ${o(c.severity)}`,children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(wl,{className:"w-5 h-5 mt-0.5"}),r.jsx("div",{children:r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("p",{children:["Player: ",e.players[0].name]}),r.jsxs("p",{children:["Injury: ",c.type]}),r.jsxs("p",{children:["Severity: ",c.severity]}),r.jsxs("p",{children:["Recovery Time:"," ",Math.max(0,c.recoveryTime/6e4)," minutes"]}),c.affectedStats&&Object.keys(c.affectedStats).length>0&&r.jsxs("p",{children:["Affected Stats:"," ",Object.keys(c.affectedStats).join(", ")]})]})})]})})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium mb-2",children:"Rewards:"}),r.jsx("div",{className:"space-y-1",children:t.coins>0&&r.jsxs("div",{className:"text-yellow-600",children:["+",t.coins," coins"]})})]}),r.jsx("button",{onClick:d,className:"w-full py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Continue"})]})]})})}function jh(e){console.log(JSON.stringify(e.stats));const t=Object.entries(e.stats).filter(([i])=>["endurance","strength","agility","speed","explosiveness","injuryPrevention"].includes(i)).reduce((i,[l,c])=>i+c,0),s=Object.entries(e.stats).filter(([i])=>["smash","defense","serve","stick","slice","drop"].includes(i)).reduce((i,[l,c])=>i+c,0);let n=0;e.equipment&&Object.values(e.equipment).forEach(i=>{i&&Object.values(i.stats).forEach(l=>{n+=l})});const a=e.level*5;return(t+s+n)*(1+a/100)}function w1(e,t,s,n){const a=[],[i,l,c]=s.split(", "),o=[i,l,c].filter(Boolean);return a.push(`${e.name} faced off against ${t.name} in an intense match.`),o.forEach((d,u)=>{const[h,m]=d.split("-").map(Number),f=u+1;h-m>5?(a.push(`Set ${f}: A dominant performance with a score of ${d}.`),e.stats.smash>70&&a.push(`${e.name}'s powerful smashes were unstoppable.`)):h-m<=2?(a.push(`Set ${f}: A nail-biting set ending ${d}.`),e.stats.endurance>t.stats.endurance&&a.push(`${e.name}'s superior endurance made the difference.`)):(a.push(`Set ${f}: A solid set victory with ${d}.`),e.stats.agility>65&&a.push(`${e.name}'s agility on the court was remarkable.`))}),e.stats.serve>60&&a.push(`${e.name}'s serves were particularly effective.`),e.stats.defense>65&&a.push(`Some impressive defense shots from ${e.name}.`),o.length===2?a.push(`${e.name} secured a straight-sets victory.`):a.push(`${e.name} emerged victorious in a full three-set match.`),a}const b1=new Ys($);function j1(e,t){const s=jh(e),n=jh(t);console.log(e.id.includes("cpu")?e.id:e.name," ",e.level,e.rank," ",s," ",t.id.includes("cpu")?t.id:t.name," ",t.level,t.rank,n);const a=s+n,i=s/a,l=[0,0],c=[];for(let f=0;f<3;f++){let y=0,g=0;for(;y<21&&g<21||Math.abs(y-g)<2;)Math.random()<i?y++:g++;if(c.push(`${y}-${g}`),y>g?l[0]++:l[1]++,l[0]===2||l[1]===2)break}const o=l[0]>l[1]?e:t,d=l[0]>l[1]?t:e,u=c.join(", "),h=fh(e),m=fh(t);return{players:[e,t],winner:o,loser:d,score:u,summary:w1(o,d,u),newInjury:h,newInjury1:m}}function _1(e){const t=b1.createQuickCpuOpponent(e.level);return j1(e,t)}const Dn={coins:50,shuttlecocks:5};function N1(){const{gameState:e,resources:t,updateResources:s,dispatchGameState:n}=Kt(),[a,i]=j.useState(null),[l,c]=j.useState(!1),[o,d]=j.useState(null),u=j.useMemo(()=>t.coins>=Dn.coins&&t.shuttlecocks>=Dn.shuttlecocks,[t]),h=f=>{c(!0),d(null),s("upgrade_cost",Dn,!1),setTimeout(()=>{const y=e.players.find(g=>g.id===f);if(y)try{const g=_1(y);g.newInjury&&(n({type:"ADD_INJURY",payload:{playerId:y.id,injury:g.newInjury}}),Tp(y,[...y.injuries||[],g.newInjury])),d(g)}catch(g){console.error("Error simulating match:",g)}c(!1)},1e4)},m=async f=>{d(null),i(null),c(!1),s("tournament_reward",f)};return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[r.jsx(cn,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Quick Match"})]}),r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[r.jsx("h2",{className:"text-lg font-semibold mr-2",children:"Start a Quick Match"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ct,{className:"w-5 h-5 text-blue-500"}),r.jsx("span",{children:Dn.shuttlecocks})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ne,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{children:Dn.coins})]})]}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Challenge an opponent to a quick match and earn rewards instantly! Select your player and get ready for an exciting match."}),r.jsx("div",{className:"space-y-3 mb-6",children:e.players.map(f=>r.jsxs("label",{className:`flex items-center space-x-3 p-3 rounded-lg border cursor-pointer hover:bg-gray-50 ${a===f.id?"border-blue-500 bg-blue-50":""}`,children:[r.jsx("input",{type:"radio",checked:a===f.id,onChange:()=>i(f.id),className:"w-4 h-4 text-blue-500"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:f.name}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Level ",f.level]})]})]},f.id))}),r.jsx("button",{onClick:()=>a&&h(a),disabled:!a||l||!u,className:`w-full py-3 rounded-lg flex items-center justify-center space-x-2 ${a&&!l&&u?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:r.jsx("div",{className:"flex items-center justify-center gap-3",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(cn,{className:"w-5 h-5"}),r.jsx("span",{children:"Start Quick Match"})]})})})]})}),l&&r.jsx(y1,{}),o&&!l&&r.jsx(v1,{matchResult:o,rewards:{coins:o.winner.id===a?200:50},onClose:m})]})}const k1=({isOpen:e,onClose:t,tournament:s,eligiblePlayers:n,onSelectPlayer:a})=>{const[i,l]=j.useState(null);if(!e)return null;const c=()=>{i&&(a(i),t())},o=u=>{const h=(u.stats.smash+u.stats.defense+u.stats.serve+u.stats.stick+u.stats.slice+u.stats.drop)/6,m=(u.stats.endurance+u.stats.strength+u.stats.agility+u.stats.speed+u.stats.explosiveness+u.stats.injuryPrevention)/6;return{technical:Math.round(h),physical:Math.round(m)}},d=r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] min-h-screen",onClick:u=>{u.target===u.currentTarget&&t()},children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto mx-4",onClick:u=>u.stopPropagation(),children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Select Player for ",s.name]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"px-6 py-6",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Tournament Requirements"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsxs("p",{children:["Minimum Level: ",s.minPlayerLevel]}),r.jsxs("p",{children:["Tier: ",s.tier.charAt(0).toUpperCase()+s.tier.slice(1)]})]})]}),r.jsxs("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:[r.jsxs("h3",{className:"font-semibold text-gray-900",children:["Eligible Players (",n.length,")"]}),n.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Vs,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{children:"No eligible players found"}),r.jsxs("p",{className:"text-sm",children:["Players must be level ",s.minPlayerLevel," or higher and not injured"]})]}):n.map(u=>{const h=o(u),m=(i==null?void 0:i.id)===u.id;return r.jsxs("div",{onClick:()=>l(u),className:`border rounded-lg p-4 cursor-pointer transition-all ${m?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${m?"bg-blue-200":"bg-gray-200"}`,children:r.jsx(Vs,{className:`w-6 h-6 ${m?"text-blue-600":"text-gray-600"}`})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:u.name}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(yj,{className:"w-4 h-4 mr-1"}),"Level ",u.level]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Nd,{className:"w-4 h-4 mr-1"}),"Physical ",h.physical]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Sd,{className:"w-4 h-4 mr-1"}),"Technical ",h.technical]})]})]})]}),m&&r.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),m&&r.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h5",{className:"text-xs font-medium text-blue-800 mb-2",children:"Technical Skills"}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Smash:"}),r.jsx("span",{children:u.stats.smash})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Defense:"}),r.jsx("span",{children:u.stats.defense})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Serve:"}),r.jsx("span",{children:u.stats.serve})]})]})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"text-xs font-medium text-blue-800 mb-2",children:"Physical Stats"}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Endurance:"}),r.jsx("span",{children:u.stats.endurance})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Strength:"}),r.jsx("span",{children:u.stats.strength})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Agility:"}),r.jsx("span",{children:u.stats.agility})]})]})]})]})})]},u.id)})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),r.jsx("button",{onClick:c,disabled:!i,className:`px-6 py-2 rounded-lg transition-colors ${i?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:"Register Player"})]})]})]})});return ld.createPortal(d,document.body)},S1=({tournament:e,onClose:t,userPosition:s,userRewards:n})=>{const a=()=>{var d;return((d=e.registeredPlayers)==null?void 0:d.slice(0,8).map((u,h)=>({position:h+1,playerName:u.playerName,clubName:u.clubName,isUser:!1})))||[]},i=o=>{switch(o){case 1:return r.jsx(re,{className:"w-6 h-6 text-yellow-500"});case 2:return r.jsx(Un,{className:"w-6 h-6 text-gray-400"});case 3:return r.jsx(Un,{className:"w-6 h-6 text-amber-600"});default:return r.jsx(on,{className:"w-6 h-6 text-gray-300"})}},l=o=>{switch(o){case 1:return e.prizePool.first;case 2:return e.prizePool.second;case 3:return e.prizePool.third;default:return{}}},c=a();return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[r.jsx(re,{className:"w-6 h-6 mr-2 text-yellow-500"}),e.name," - Results"]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"px-6 py-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6 mb-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Tournament Complete!"}),r.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(re,{className:"w-4 h-4 mr-1 text-yellow-500"}),e.tier.charAt(0).toUpperCase()+e.tier.slice(1)," Tournament"]}),r.jsxs("div",{children:["Participants: ",e.currentParticipants]}),r.jsxs("div",{children:["Date: ",new Date(e.startDate).toLocaleDateString()]})]})]})}),s&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-green-900",children:"Your Performance"}),r.jsxs("p",{className:"text-green-800",children:["You finished in position ",s," out of ",e.currentParticipants," players!"]})]}),r.jsx("div",{className:"text-right",children:n&&r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-medium text-green-900 mb-1",children:"Rewards Earned:"}),r.jsxs("div",{className:"space-y-1",children:[n.coins&&r.jsxs("div",{className:"flex items-center justify-end",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:n.coins})]}),n.diamonds&&r.jsxs("div",{className:"flex items-center justify-end",children:[r.jsx(Qe,{className:"w-4 h-4 text-purple-500 mr-1"}),r.jsx("span",{children:n.diamonds})]})]})]})})]})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Final Rankings"}),r.jsxs("div",{className:"space-y-3",children:[c.map(o=>{const d=l(o.position);return r.jsx("div",{className:`border rounded-lg p-4 ${o.isUser?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"flex items-center justify-center w-10 h-10",children:i(o.position)}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:o.playerName}),r.jsx("p",{className:"text-sm text-gray-600",children:o.clubName})]}),r.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["#",o.position]})]}),(d.coins||d.diamonds)&&r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:"Rewards"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[d.coins&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{className:"text-sm font-medium",children:d.coins})]}),d.diamonds&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Qe,{className:"w-4 h-4 text-purple-500 mr-1"}),r.jsx("span",{className:"text-sm font-medium",children:d.diamonds})]})]})]})]})},`${o.position}-${o.playerName}`)}),c.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(re,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{children:"No ranking data available"})]})]})]}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Prize Pool"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[r.jsx(re,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),r.jsx("h4",{className:"font-semibold text-yellow-900",children:"1st Place"}),r.jsxs("div",{className:"text-sm space-y-1 mt-2",children:[e.prizePool.first.coins&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:e.prizePool.first.coins})]}),e.prizePool.first.diamonds&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Qe,{className:"w-4 h-4 text-purple-500 mr-1"}),r.jsx("span",{children:e.prizePool.first.diamonds})]})]})]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center",children:[r.jsx(Un,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),r.jsx("h4",{className:"font-semibold text-gray-700",children:"2nd Place"}),r.jsxs("div",{className:"text-sm space-y-1 mt-2",children:[e.prizePool.second.coins&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:e.prizePool.second.coins})]}),e.prizePool.second.diamonds&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Qe,{className:"w-4 h-4 text-purple-500 mr-1"}),r.jsx("span",{children:e.prizePool.second.diamonds})]})]})]}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 text-center",children:[r.jsx(Un,{className:"w-8 h-8 text-amber-600 mx-auto mb-2"}),r.jsx("h4",{className:"font-semibold text-amber-800",children:"3rd Place"}),r.jsxs("div",{className:"text-sm space-y-1 mt-2",children:[e.prizePool.third.coins&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:e.prizePool.third.coins})]}),e.prizePool.third.diamonds&&r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Qe,{className:"w-4 h-4 text-purple-500 mr-1"}),r.jsx("span",{children:e.prizePool.third.diamonds})]})]})]})]})]}),r.jsx("div",{className:"flex justify-center mt-8",children:r.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Close Results"})})]})]})})},C1=({registeredPlayers:e,tournamentName:t,rounds:s,currentPlayerId:n,onBack:a})=>{const i=h=>h?(h.is_cpu,h.name):"TBD",l=()=>{if(!s||s.length===0)return null;const h=s[s.length-1];if(h.matches.every(f=>f.completed)&&h.matches.length>0){const f=h.matches[h.matches.length-1];console.log("Final match winner:",f.winner);for(let y=0;y<e.length;y++)if(e[y].id===f.winner)return e[y];return null}return null},c=()=>!s||s.length===0?!1:s.every(h=>h.matches.every(m=>m.completed)),o=l(),d=c();console.log("Tournament winner:",o),console.log("Tournament completed:",d);const u=()=>o?o.name?o.name:typeof o=="string"?o:i(o):"Unknown";return r.jsxs("div",{className:"w-full bg-white rounded-xl shadow-lg p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(re,{className:"w-8 h-8 text-yellow-500"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t}),d&&r.jsxs("div",{className:"flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full",children:[r.jsx(Wt,{className:"w-4 h-4 mr-1"}),r.jsx("span",{className:"text-sm font-medium",children:"Completed"})]})]}),r.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition-colors",children:"Back"})]}),d&&o&&r.jsx("div",{className:"mb-6 bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-xl p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center mb-4",children:[r.jsx(Wt,{className:"w-12 h-12 text-yellow-500 mr-3"}),r.jsx(re,{className:"w-16 h-16 text-yellow-500"}),r.jsx(Wt,{className:"w-12 h-12 text-yellow-500 ml-3"})]}),r.jsx("h3",{className:"text-3xl font-bold text-yellow-800 mb-2",children:" Tournament Champion! "}),r.jsxs("div",{className:"bg-white bg-opacity-70 rounded-lg p-4 inline-block",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(on,{className:"w-6 h-6 text-yellow-500"}),r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:u()}),r.jsx(on,{className:"w-6 h-6 text-yellow-500"})]}),o.id===n&&r.jsx("div",{className:"mt-2 text-green-700 font-semibold",children:"Congratulations! You won the tournament! "})]})]})}),r.jsx("div",{className:"space-y-6",children:s.map((h,m)=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:h.name}),r.jsxs("span",{className:"text-sm text-gray-600",children:[h.matches.filter(f=>f.completed).length,"/",h.matches.length," matches"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:h.matches.map(f=>{var g,v,p,w;console.log("Match data:",{matchId:f.id,completed:f.completed,winner:f.winner,players:f.players,player0:f.players[0],player1:f.players[1]});const y=(b,_)=>!b||!_||!f.completed?!1:_.id===b.id||_===b.id||typeof _=="string"&&_===b.id||_===b;return r.jsxs("div",{className:`border rounded p-3 ${f.completed?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Match ",f.id]}),f.completed?r.jsx(ns,{className:"w-4 h-4 text-green-500"}):r.jsx(vr,{className:"w-4 h-4 text-yellow-500"})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:`p-2 rounded-md ${y(f.players[0],f.winner)?"bg-green-100 border border-green-300 ":""}`,children:[((g=f.players[0])==null?void 0:g.name)||"TBD",y(f.players[0],f.winner)&&r.jsx(re,{className:"w-3 h-3 text-yellow-500 inline ml-1 float-right"}),((v=f.players[0])==null?void 0:v.id)===n&&r.jsx("span",{className:"text-xs text-blue-600 font-medium ml-1",children:"(You)"})]}),r.jsx("div",{className:"text-center text-xs text-gray-500",children:"vs"}),r.jsxs("div",{className:`p-2 rounded-md ${y(f.players[1],f.winner)?"bg-green-100 border border-green-300":""}`,children:[((p=f.players[1])==null?void 0:p.name)||"TBD",y(f.players[1],f.winner)&&r.jsx(re,{className:"w-3 h-3 text-yellow-500 inline ml-1 float-right"}),((w=f.players[1])==null?void 0:w.id)===n&&r.jsx("span",{className:"text-xs text-blue-600 font-medium ml-1",children:"(You)"})]})]}),f.score&&r.jsxs("div",{className:"text-xs text-gray-600 mt-4 text-center bg-white p-2",children:["Score: ",f.score]})]},f.id)})})]},m))}),(!s||s.length===0)&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(re,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Tournament Bracket Available"}),r.jsx("p",{className:"text-gray-500",children:"The tournament bracket will appear once the tournament starts."})]})]})},_h=new Qs($),E1=j.memo(({tournament:e,className:t})=>{const[s,n]=j.useState(0);j.useEffect(()=>{const c=()=>{const d=Date.now(),u=e.status==="ongoing"&&e.next_round_start_time?e.next_round_start_time:e.start_date,h=Math.max(0,u-d);n(h)};c();const o=setInterval(c,1e3);return()=>clearInterval(o)},[e.start_date,e.next_round_start_time,e.status]);const a=c=>{if(c<=0)return"Tournament Started!";const o=Math.floor(c/1e3)%60,d=Math.floor(c/(1e3*60))%60,u=Math.floor(c/(1e3*60*60))%24,h=Math.floor(c/(1e3*60*60*24)),m=[];return h>0&&m.push(`${h}d`),u>0&&m.push(`${u}h`),d>0&&m.push(`${d}m`),o>0&&h===0&&m.push(`${o}s`),m.join(" ")||"Starting..."},i=s<=0,l=s>0&&s<=3e5;return r.jsxs("div",{className:`flex items-center space-x-2 px-6 py-3 rounded-full ${i?"bg-red-100":l?"bg-yellow-100":"bg-blue-100"} ${t||""}`,children:[r.jsx($p,{className:`w-6 h-6 ${i?"text-red-600":l?"text-yellow-600":"text-blue-600"} animate-pulse`}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`text-lg font-mono font-bold ${i?"text-red-700":l?"text-yellow-700":"text-blue-700"}`,children:a(s)}),r.jsx("div",{className:`text-xs ${i?"text-red-600":l?"text-yellow-600":"text-blue-600"}`,children:i?e.status==="ongoing"&&e.next_round_start_time?"Round Ready!":"Tournament Started!":e.status==="ongoing"&&e.next_round_start_time?"Until Next Round":"Until Tournament Starts"})]})]})});function P1(){var X,q,H,ie,B,G,Q;const{gameState:e,resources:t}=Kt(),[s,n]=j.useState([]),[a,i]=j.useState(!0),[l,c]=j.useState([]),[o,d]=j.useState(null),[u,h]=j.useState(!1),[m,f]=j.useState(null),[y,g]=j.useState([]),[v,p]=j.useState(!1),[w,b]=j.useState(null),[_,P]=j.useState(null);j.useEffect(()=>{C()},[e.players]);const C=j.useCallback(async()=>{try{i(!0);const M=await _h.getTournaments();n(M),console.log("loadedTournaments",M),console.log("gameState.players",e.players);const E=M.filter(S=>S.registered_players.some(Z=>e.players.some(ee=>ee.id===Z.player_id))).map(S=>S.id);if(console.log("registeredTournamentIds",E),c(E),_){const S=M.find(z=>z.id===_.id);S&&P(S)}}catch(M){console.error("Error loading tournaments:",M)}finally{i(!1)}},[e.players,_]),k=j.useCallback(M=>{if(M.status!=="upcoming"||M.start_date<=Date.now()||M.current_participants>=M.max_participants||e.players.filter(z=>{var Z;return z.level>=M.min_player_level&&!((Z=z.injuries)!=null&&Z.length)}).length===0)return!1;const S=M.entry_fee||{};return(S.coins||0)<=(t.coins||0)&&(S.shuttlecocks||0)<=(t.shuttlecocks||0)&&(S.meals||0)<=(t.meals||0)&&(S.diamonds||0)<=(t.diamonds||0)},[e.players,t]),R=j.useCallback(M=>{if(M.status!=="upcoming")return M.status==="ongoing"?"Tournament In Progress":"Tournament Ended";if(M.start_date<=Date.now())return"Registration Closed";if(M.current_participants>=M.max_participants)return"Tournament Full";if(console.log("Min player level",M.min_player_level),e.players.filter(Z=>{var ee;return Z.level>=M.min_player_level&&!((ee=Z.injuries)!=null&&ee.length)}).length===0)return"No Eligible Players";const S=M.entry_fee||{};return(S.coins||0)<=(t.coins||0)&&(S.shuttlecocks||0)<=(t.shuttlecocks||0)&&(S.meals||0)<=(t.meals||0)&&(S.diamonds||0)<=(t.diamonds||0)?"Register for Tournament":"Insufficient Resources"},[e.players,t]),L=j.useCallback(M=>{console.log("handleRegisterClick called with tournament:",M),console.log("Current showPlayerSelection state:",u),console.log("gameState.players:",e.players);const E=e.players.filter(S=>{var z;return S.level>=M.min_player_level&&!((z=S.injuries)!=null&&z.length)});if(console.log("eligiblePlayers found:",E),E.length===0){console.log("No eligible players, showing notification"),d({type:"error",message:"No eligible players for this tournament"});return}console.log("Setting tournament and players, opening modal"),f(M),g(E),h(!0),console.log("Modal should now be open, showPlayerSelection set to true")},[e.players,u]),T=async M=>{if(m)try{if(m.status!=="upcoming")throw new Error("Tournament is no longer accepting registrations");if(m.start_date<=Date.now())throw new Error("Tournament registration period has ended");if(m.current_participants>=m.max_participants)throw new Error("Tournament is full");const E=await _h.registerPlayerForTournament(m.id,M.id);if(E.error)throw new Error(E.error);c(S=>[...S,m.id]),C(),d({type:"success",message:`Successfully registered ${M.name} for ${m.name}!`}),h(!1),setTimeout(()=>d(null),3e3)}catch(E){console.error("Error registering for tournament:",E);let S="Failed to register for tournament";if(E instanceof Error){const z=E.message.toLowerCase();z.includes("already started")?S="Tournament has already started":z.includes("registration is closed")||z.includes("registration period has ended")?S="Registration period has ended":z.includes("full")||z.includes("no more spots")?S="Tournament is full":z.includes("already registered")?S="Player is already registered for this tournament":z.includes("level")&&z.includes("too low")?S=`Player level is too low (minimum: ${m.min_player_level})`:z.includes("not found")?S="Player not found or invalid":S=E.message}d({type:"error",message:S}),setTimeout(()=>d(null),5e3)}},O=j.useCallback(M=>{const E=Date.now(),S=new Date(M).getTime()-E;if(S<=0)return"Started";const z=Math.floor(S/(1e3*60*60*24)),Z=Math.floor(S%(1e3*60*60*24)/(1e3*60*60)),ee=Math.floor(S%(1e3*60*60)/(1e3*60));return z>0?`Starts in ${z}d ${Z}h`:Z>0?`Starts in ${Z}h ${ee}m`:`Starts in ${ee}m`},[]),ae=j.useCallback(M=>{P(M)},[]),A=j.useCallback(()=>{P(null)},[]);if(a)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})});if(_){const M=l.includes(_.id),E=k(_);return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("button",{onClick:A,className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[r.jsx(xi,{className:"w-5 h-5 mr-2"}),"Back to Tournaments"]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[r.jsx(re,{className:"w-8 h-8 mr-3 text-yellow-500"}),_.name]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[r.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:_.tier.charAt(0).toUpperCase()+_.tier.slice(1)}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${_.status==="upcoming"?"bg-blue-100 text-blue-800":_.status==="ongoing"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.status.charAt(0).toUpperCase()+_.status.slice(1)})]})]}),(_.status==="upcoming"||_.status==="ongoing"&&_.next_round_start_time)&&r.jsx(E1,{tournament:_})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(Be,{className:"w-5 h-5 mr-3"}),r.jsxs("span",{children:[_.current_participants,"/",_.max_participants," participants"]})]}),r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(bs,{className:"w-5 h-5 mr-3"}),r.jsxs("span",{children:[new Date(_.start_date).toLocaleDateString()," at ",new Date(_.start_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(re,{className:"w-5 h-5 mr-3"}),r.jsxs("span",{children:["Min Level: ",_.min_player_level]})]})]}),_.entry_fee&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Entry Fee"}),r.jsx("div",{className:"space-y-1",children:_.entry_fee.coins&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-500 mr-2"}),r.jsxs("span",{children:[_.entry_fee.coins," coins"]})]})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Prize Pool"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),r.jsxs("span",{children:["1st: ",((q=(X=_.prize_pool)==null?void 0:X.first)==null?void 0:q.coins)||0," coins"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full mr-2"}),r.jsxs("span",{children:["2nd: ",((ie=(H=_.prize_pool)==null?void 0:H.second)==null?void 0:ie.coins)||0," coins"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),r.jsxs("span",{children:["3rd: ",((G=(B=_.prize_pool)==null?void 0:B.third)==null?void 0:G.coins)||0," coins"]})]})]})]})]}),!M&&r.jsx("button",{onClick:()=>L(_),disabled:!E,className:`w-full md:w-auto px-6 py-3 rounded-lg transition-colors ${E?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:R(_)}),M&&r.jsxs("div",{className:"flex items-center text-green-700 bg-green-100 px-4 py-2 rounded-lg w-full md:w-auto",children:[r.jsx(ns,{className:"w-5 h-5 mr-2"}),"You are registered for this tournament"]})]}),_.rounds&&_.rounds.length>0&&M&&(_.status==="ongoing"||_.status==="completed"||_.start_date<=Date.now())&&r.jsx(C1,{registeredPlayers:e.players,tournamentName:_.name,rounds:_.rounds,currentPlayerId:((Q=e.players[0])==null?void 0:Q.id)||"",onBack:A}),(!M||_.start_date>Date.now()&&_.status==="upcoming")&&r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:[r.jsx(re,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),M?r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-medium text-gray-600 mb-2",children:"Tournament Bracket Will Appear When Started"}),r.jsx("p",{className:"text-gray-500",children:"The tournament bracket will be visible once the tournament begins."})]}):r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-medium text-gray-600 mb-2",children:"Register to View Tournament Bracket"}),r.jsx("p",{className:"text-gray-500",children:"You must be registered for this tournament to view the bracket and match details."})]})]}),o&&r.jsxs("div",{className:`fixed top-4 right-4 p-4 rounded-lg flex items-center z-50 ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[o.type==="success"?r.jsx(ns,{className:"w-5 h-5 mr-2"}):r.jsx(ga,{className:"w-5 h-5 mr-2"}),o.message]}),m&&r.jsx(k1,{isOpen:u,onClose:()=>h(!1),tournament:m,eligiblePlayers:y,onSelectPlayer:T})]})}return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[r.jsx(re,{className:"w-8 h-8 mr-3 text-yellow-500"}),"Tournaments"]}),r.jsx("p",{className:"text-gray-600",children:"Compete in tournaments to win prizes and climb the rankings"})]})}),o&&r.jsxs("div",{className:`p-4 rounded-lg flex items-center ${o.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[o.type==="success"?r.jsx(ns,{className:"w-5 h-5 mr-2"}):r.jsx(ga,{className:"w-5 h-5 mr-2"}),o.message]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length===0?r.jsxs("div",{className:"col-span-full text-center py-12",children:[r.jsx(re,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-lg font-medium text-gray-500",children:"No tournaments available"}),r.jsx("p",{className:"text-gray-400",children:"Check back later for new tournaments"})]}):s.map(M=>r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>ae(M),children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:M.name}),r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:M.tier.charAt(0).toUpperCase()+M.tier.slice(1)}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M.status==="upcoming"?"bg-blue-100 text-blue-800":M.status==="ongoing"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:M.status.charAt(0).toUpperCase()+M.status.slice(1)})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Be,{className:"w-4 h-4 mr-2"}),M.current_participants,"/",M.max_participants," participants"]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(bs,{className:"w-4 h-4 mr-2"}),new Date(M.start_date).toLocaleDateString()," at ",new Date(M.start_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),M.status==="upcoming"&&r.jsxs("div",{className:"flex items-center text-sm text-blue-600",children:[r.jsx(vr,{className:"w-4 h-4 mr-2"}),O(M.start_date)]})]}),M.entry_fee&&r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Entry Fee"}),r.jsx("div",{className:"flex items-center space-x-3 text-sm",children:M.entry_fee.coins&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:M.entry_fee.coins})]})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Click to view details"}),l.includes(M.id)&&r.jsxs("div",{className:"flex items-center text-green-600",children:[r.jsx(ns,{className:"w-4 h-4 mr-1"}),r.jsx("span",{className:"text-xs",children:"Registered"})]})]})]},M.id))}),v&&w&&r.jsx(S1,{tournament:w,onClose:()=>p(!1)})]})}const T1=async e=>{try{const{data:t,error:s}=await $.from("admin_users").select("*").eq("user_id",e).single();return s||!t?null:t}catch(t){return console.error("Error checking admin permissions:",t),null}},R1=async(e,t,s,n,a)=>{try{console.log("Logging admin activity:",{adminUserId:e,actionType:t,targetType:s,targetId:n,details:a})}catch(i){console.error("Error logging admin activity:",i)}},Gp=j.createContext(void 0),M1=({children:e})=>{const[t,s]=j.useState(null),[n,a]=j.useState(!0),{user:i}=_s(),l=j.useCallback(async()=>{if(!(i!=null&&i.id)){s(null);return}a(!0);try{const h=await T1(i.id);s(h)}catch(h){console.error("Error checking admin status:",h),s(null)}finally{a(!1)}},[i==null?void 0:i.id]),c=j.useCallback(async()=>{a(!0),await l()},[l]),o=j.useCallback(h=>t&&t.permissions[h]||!1,[t]),d=j.useCallback(async(h,m,f,y)=>{t&&await R1(t.id,h,m,f,y)},[t]);j.useEffect(()=>{l()},[l]);const u={adminUser:t,isAdmin:!!t,loading:n,hasPermission:o,logActivity:d,refreshAdminStatus:c};return r.jsx(Gp.Provider,{value:u,children:e})},Xs=()=>{const e=j.useContext(Gp);if(e===void 0)throw new Error("useAdmin must be used within an AdminProvider");return e},D1=({tournament:e,isOpen:t,onClose:s,onSuccess:n})=>{const[a,i]=j.useState([]),[l,c]=j.useState(!1),[o,d]=j.useState(null),[u,h]=j.useState(""),[m,f]=j.useState("real");j.useEffect(()=>{t&&y()},[t,m]);const y=async()=>{try{c(!0);const{data:w,error:b}=await $.from("players").select("*").eq("is_cpu",m==="cpu").order("name");if(b){console.error("Error loading players:",b);return}i(w||[])}catch(w){console.error("Error loading players:",w)}finally{c(!1)}},g=async w=>{try{d(w.id);const{data:b,error:_}=await $.rpc("admin_register_player_for_tournament",{p_tournament_id:e.id,p_player_id:w.id,p_force_registration:!1});if(_)throw new Error(_.message);console.log("Player registered successfully:",b),n(),s()}catch(b){console.error("Error registering player:",b),me.error(`Failed to register player: ${b.message}`)}finally{d(null)}},v=a.filter(w=>w.name.toLowerCase().includes(u.toLowerCase())),p=w=>{var b;return((b=e.registered_players)==null?void 0:b.some(_=>_.playerId===w))||!1};return t?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Register Players"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Add players to ",r.jsx("span",{className:"font-medium",children:e.name})]})]}),r.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(re,{className:"w-5 h-5 text-blue-600 mr-2"}),r.jsx("span",{className:"font-medium text-blue-900",children:e.name})]}),r.jsxs("div",{className:"flex items-center text-sm text-blue-700",children:[r.jsx(Be,{className:"w-4 h-4 mr-1"}),e.current_participants,"/",e.max_participants," participants"]})]})}),r.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[r.jsx("button",{onClick:()=>f("real"),className:`px-4 py-2 font-medium text-sm transition-colors ${m==="real"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Real Players"}),r.jsx("button",{onClick:()=>f("cpu"),className:`px-4 py-2 font-medium text-sm transition-colors ${m==="cpu"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"CPU Players"})]}),r.jsxs("div",{className:"relative mb-4",children:[r.jsx(Pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:`Search ${m==="real"?"real":"CPU"} players...`,value:u,onChange:w=>h(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:l?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):v.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Be,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsxs("p",{children:["No ",m==="real"?"real":"CPU"," players found"]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:v.map(w=>r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:w.name}),r.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[r.jsxs("span",{children:["Level ",w.level]}),m==="real"&&r.jsx("span",{children:"Real Player"})]})]}),r.jsx("div",{children:p(w.id)?r.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Registered"}):r.jsx("button",{onClick:()=>g(w),disabled:o===w.id,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:o===w.id?"Registering...":"Register"})})]},w.id))})}),r.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:r.jsx("div",{className:"flex justify-end space-x-3",children:r.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})})})]})}):null},no=new Qs($),Jp=({tournament:e,onSave:t,onCancel:s})=>{var b,_,P,C,k,R,L,T,O,ae,A,X,q,H,ie,B,G,Q,M,E,S,z,Z,ee,Pe,N,U,W;const{logActivity:n}=Xs(),[a,i]=j.useState(!1),[l,c]=j.useState([]),[o,d]=j.useState({name:(e==null?void 0:e.name)||"",tier:(e==null?void 0:e.tier)||"local",status:(e==null?void 0:e.status)||"upcoming",startDate:e?new Date(e.start_date).toISOString().slice(0,16):"",endDate:e?new Date(e.end_date).toISOString().slice(0,16):"",minPlayerLevel:(e==null?void 0:e.min_player_level)||1,maxParticipants:(e==null?void 0:e.max_participants)||8,roundIntervalMinutes:(e==null?void 0:e.round_interval_minutes)||10,entryFee:{coins:((b=e==null?void 0:e.entry_fee)==null?void 0:b.coins)||0,shuttlecocks:((_=e==null?void 0:e.entry_fee)==null?void 0:_.shuttlecocks)||0,meals:((P=e==null?void 0:e.entry_fee)==null?void 0:P.meals)||0,diamonds:((C=e==null?void 0:e.entry_fee)==null?void 0:C.diamonds)||0},prizePool:{first:{coins:((R=(k=e==null?void 0:e.prize_pool)==null?void 0:k.first)==null?void 0:R.coins)||0,shuttlecocks:((T=(L=e==null?void 0:e.prize_pool)==null?void 0:L.first)==null?void 0:T.shuttlecocks)||0,meals:((ae=(O=e==null?void 0:e.prize_pool)==null?void 0:O.first)==null?void 0:ae.meals)||0,diamonds:((X=(A=e==null?void 0:e.prize_pool)==null?void 0:A.first)==null?void 0:X.diamonds)||0},second:{coins:((H=(q=e==null?void 0:e.prize_pool)==null?void 0:q.second)==null?void 0:H.coins)||0,shuttlecocks:((B=(ie=e==null?void 0:e.prize_pool)==null?void 0:ie.second)==null?void 0:B.shuttlecocks)||0,meals:((Q=(G=e==null?void 0:e.prize_pool)==null?void 0:G.second)==null?void 0:Q.meals)||0,diamonds:((E=(M=e==null?void 0:e.prize_pool)==null?void 0:M.second)==null?void 0:E.diamonds)||0},third:{coins:((z=(S=e==null?void 0:e.prize_pool)==null?void 0:S.third)==null?void 0:z.coins)||0,shuttlecocks:((ee=(Z=e==null?void 0:e.prize_pool)==null?void 0:Z.third)==null?void 0:ee.shuttlecocks)||0,meals:((N=(Pe=e==null?void 0:e.prize_pool)==null?void 0:Pe.third)==null?void 0:N.meals)||0,diamonds:((W=(U=e==null?void 0:e.prize_pool)==null?void 0:U.third)==null?void 0:W.diamonds)||0}},registeredPlayers:(e==null?void 0:e.registered_players)||[]}),[u,h]=j.useState([]),[m,f]=j.useState(!1);j.useEffect(()=>{var le,te,oe,pe,Qt,We,Yt,ne,Nr,Zs,Re,nt,Mt,at,x,I,J,se,ce,we,Xe,er,jt,vn,wn,Ta,kr,Dt,Ra;e&&(d({name:e.name,tier:e.tier,status:e.status,startDate:new Date(e.start_date).toISOString().slice(0,16),endDate:new Date(e.end_date).toISOString().slice(0,16),minPlayerLevel:e.min_player_level,maxParticipants:e.max_participants,roundIntervalMinutes:e.round_interval_minutes||10,entryFee:{coins:((le=e.entry_fee)==null?void 0:le.coins)||0,shuttlecocks:((te=e.entry_fee)==null?void 0:te.shuttlecocks)||0,meals:((oe=e.entry_fee)==null?void 0:oe.meals)||0,diamonds:((pe=e.entry_fee)==null?void 0:pe.diamonds)||0},prizePool:{first:{coins:((We=(Qt=e.prize_pool)==null?void 0:Qt.first)==null?void 0:We.coins)||0,shuttlecocks:((ne=(Yt=e.prize_pool)==null?void 0:Yt.first)==null?void 0:ne.shuttlecocks)||0,meals:((Zs=(Nr=e.prize_pool)==null?void 0:Nr.first)==null?void 0:Zs.meals)||0,diamonds:((nt=(Re=e.prize_pool)==null?void 0:Re.first)==null?void 0:nt.diamonds)||0},second:{coins:((at=(Mt=e.prize_pool)==null?void 0:Mt.second)==null?void 0:at.coins)||0,shuttlecocks:((I=(x=e.prize_pool)==null?void 0:x.second)==null?void 0:I.shuttlecocks)||0,meals:((se=(J=e.prize_pool)==null?void 0:J.second)==null?void 0:se.meals)||0,diamonds:((we=(ce=e.prize_pool)==null?void 0:ce.second)==null?void 0:we.diamonds)||0},third:{coins:((er=(Xe=e.prize_pool)==null?void 0:Xe.third)==null?void 0:er.coins)||0,shuttlecocks:((vn=(jt=e.prize_pool)==null?void 0:jt.third)==null?void 0:vn.shuttlecocks)||0,meals:((Ta=(wn=e.prize_pool)==null?void 0:wn.third)==null?void 0:Ta.meals)||0,diamonds:((Dt=(kr=e.prize_pool)==null?void 0:kr.third)==null?void 0:Dt.diamonds)||0}},registeredPlayers:e.registered_players||[]}),h(((Ra=e.registered_players)==null?void 0:Ra.map(tr=>tr.player_id))||[])),(async()=>{try{const tr=await no.getCPUPlayers();c(tr||[])}catch(tr){console.error("Error loading CPU players:",tr)}})()},[e]);const y=async D=>{if(D.preventDefault(),i(!0),new Date(o.endDate).getTime()<new Date(o.startDate).getTime()){me.error("End date cannot be before start date"),i(!1);return}console.log("Form data status",o.status),console.log("Index",["upcoming","ongoing","completed"].indexOf(o.status));try{const le={name:o.name,tier:["local","regional","national","international","premier"].indexOf(o.tier),status:["upcoming","ongoing","completed"].indexOf(o.status),start_date:new Date(o.startDate).toISOString(),end_date:new Date(o.endDate).toISOString(),min_player_level:o.minPlayerLevel,max_participants:o.maxParticipants,current_participants:(e==null?void 0:e.current_participants)||0,round_interval_minutes:o.roundIntervalMinutes||10,entry_fee:o.entryFee,prize_pool:o.prizePool,registered_players:(e==null?void 0:e.registered_players)||[]};if(e)await no.updateTournament(e.id,le,u),await n("tournament_updated","tournament",e.id);else{const te=await no.createTournament(le,u);await n("tournament_created","tournament",te.id)}t({id:(e==null?void 0:e.id)||"new",name:o.name,tier:o.tier,status:o.status,start_date:new Date(o.startDate).getTime(),end_date:new Date(o.endDate).getTime(),min_player_level:o.minPlayerLevel,max_participants:o.maxParticipants,current_participants:(e==null?void 0:e.current_participants)||0,entry_fee:o.entryFee,prize_pool:o.prizePool,registered_players:(e==null?void 0:e.registered_players)||[],round_interval_minutes:o.roundIntervalMinutes,current_round_level:(e==null?void 0:e.current_round_level)||0})}catch(le){console.error("Error saving tournament:",le),me.error("Failed to save tournament. Please try again.")}finally{i(!1)}},g=(D,le)=>{d(te=>({...te,[D]:le}))},v=(D,le,te,oe)=>{d(pe=>({...pe,[D]:le?{...pe[D],[le]:{...pe[D][le],[te]:oe}}:{...pe[D],[te]:oe}}))},p=[{value:"local",label:"Local Tournament",color:"text-gray-600"},{value:"regional",label:"Regional Tournament",color:"text-blue-600"},{value:"national",label:"National Tournament",color:"text-green-600"},{value:"international",label:"International Tournament",color:"text-yellow-600"},{value:"premier",label:"Premier Tournament",color:"text-purple-600"}],w=[{value:"upcoming",label:"Upcoming",color:"text-blue-600"},{value:"ongoing",label:"Ongoing",color:"text-green-600"},{value:"completed",label:"Completed",color:"text-gray-600"}];return r.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[r.jsx("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:y,children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:e?"Edit Tournament":"Create New Tournament"}),r.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"px-6 py-6 space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tournament Name"}),r.jsx("input",{type:"text",value:o.name,onChange:D=>g("name",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter tournament name",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tournament Tier"}),r.jsx("select",{value:o.tier,onChange:D=>g("tier",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:p.map(D=>r.jsx("option",{value:D.value,children:D.label},D.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsx("select",{value:o.status,onChange:D=>g("status",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:w.map(D=>r.jsx("option",{value:D.value,children:D.label},D.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Participants"}),r.jsx("select",{value:o.maxParticipants,onChange:D=>g("maxParticipants",parseInt(D.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[8,16,24,32,48,64].map(D=>r.jsx("option",{value:D,children:D},D))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Player Level"}),r.jsx("input",{type:"number",value:o.minPlayerLevel,onChange:D=>g("minPlayerLevel",parseInt(D.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"15"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(bs,{className:"w-4 h-4 inline mr-1"}),"Start Date & Time"]}),r.jsx("input",{type:"datetime-local",value:o.startDate,onChange:D=>g("startDate",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[r.jsx(bs,{className:"w-4 h-4 inline mr-1"}),"End Date & Time"]}),r.jsx("input",{type:"datetime-local",value:o.endDate,onChange:D=>g("endDate",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Round Interval (minutes)"}),r.jsx("input",{type:"number",min:"1",max:"60",value:o.roundIntervalMinutes,onChange:D=>g("roundIntervalMinutes",parseInt(D.target.value)||10),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"10"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Time between rounds (default: 10 minutes)"})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Ne,{className:"w-5 h-5 mr-2"}),"Entry Fee"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ne,{className:"w-4 h-4 inline mr-1 text-yellow-500"}),"Coins"]}),r.jsx("input",{type:"number",value:o.entryFee.coins,onChange:D=>v("entryFee",null,"coins",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ct,{className:"w-4 h-4 inline mr-1 text-blue-500"}),"Shuttlecocks"]}),r.jsx("input",{type:"number",value:o.entryFee.shuttlecocks,onChange:D=>v("entryFee",null,"shuttlecocks",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(as,{className:"w-4 h-4 inline mr-1 text-green-500"}),"Meals"]}),r.jsx("input",{type:"number",value:o.entryFee.meals,onChange:D=>v("entryFee",null,"meals",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Qe,{className:"w-4 h-4 inline mr-1 text-purple-500"}),"Diamonds"]}),r.jsx("input",{type:"number",value:o.entryFee.diamonds,onChange:D=>v("entryFee",null,"diamonds",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(re,{className:"w-5 h-5 mr-2"}),"Prize Pool"]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" First Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.first.coins,onChange:D=>v("prizePool","first","coins",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.first.shuttlecocks,onChange:D=>v("prizePool","first","shuttlecocks",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.first.meals,onChange:D=>v("prizePool","first","meals",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.first.diamonds,onChange:D=>v("prizePool","first","diamonds",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" Second Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.second.coins,onChange:D=>v("prizePool","second","coins",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.second.shuttlecocks,onChange:D=>v("prizePool","second","shuttlecocks",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.second.meals,onChange:D=>v("prizePool","second","meals",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.second.diamonds,onChange:D=>v("prizePool","second","diamonds",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" Third Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.third.coins,onChange:D=>v("prizePool","third","coins",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.third.shuttlecocks,onChange:D=>v("prizePool","third","shuttlecocks",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.third.meals,onChange:D=>v("prizePool","third","meals",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:o.prizePool.third.diamonds,onChange:D=>v("prizePool","third","diamonds",parseInt(D.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(cc,{className:"w-5 h-5 mr-2"}),"CPU Players Assignment"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-4",children:l.map(D=>r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.includes(D.id),onChange:le=>{le.target.checked?h(te=>[...te,D.id]):h(te=>te.filter(oe=>oe!==D.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:D.name}),r.jsxs("span",{className:"text-xs text-gray-500",children:["Lv.",D.level]})]},D.id))}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Selected: ",u.length," CPU players"]})]}),e&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Gi,{className:"w-5 h-5 mr-2"}),"Player Registration"]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Register real players or additional CPU players to this tournament without resource deduction."}),r.jsx("button",{type:"button",onClick:()=>f(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Register Players"})]})]})]}),r.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:a,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:a,children:a?"Saving...":e?"Update Tournament":"Create Tournament"})]})]})}),e&&r.jsx(D1,{tournament:e,isOpen:m,onClose:()=>f(!1),onSuccess:()=>{console.log("Player registered successfully")}})]})},A1=new Ys($),Kp=()=>{const{adminUser:e,logActivity:t}=Xs(),[s,n]=j.useState(!1),[a,i]=j.useState(!1),[l,c]=j.useState(!1),[o,d]=j.useState(!1),[u,h]=j.useState(null),[m,f]=j.useState({totalUsers:0,activeTournaments:0,activeSeasons:0,cpuTeams:0,recentActivities:[]}),[y,g]=j.useState(!0);j.useEffect(()=>{L(),t("dashboard_viewed")},[]);const[v,p]=j.useState({name:"",description:"",skillLevel:"intermediate",playerCount:6,genderBalance:"mixed",isActive:!0}),w=async A=>{A.preventDefault(),g(!0);try{const{data:X,error:q}=await $.from("cpu_teams").insert({name:v.name,description:v.description,skill_level:v.skillLevel,player_count:v.playerCount,gender_balance:v.genderBalance,is_active:v.isActive}).select().single();if(q){console.error("Error creating CPU team:",q);return}await t("cpu_team_created","cpu_team",X.id),c(!1)}catch(X){console.error("Error saving CPU team:",X)}finally{g(!1)}},b=()=>{p({name:"",description:"",skillLevel:"intermediate",playerCount:6,genderBalance:"mixed",isActive:!0}),c(!0)},_=async()=>{var A,X;if(u)try{g(!0),console.log("[AdminCpuTeams] Generating CPU players using PlayerService...");const{data:{user:q}}=await $.auth.getUser();if(!q)throw new Error("No authenticated user found");const H=q.id;console.log("[AdminCpuTeams] Using current admin user ID for CPU players:",H);const ie=await A1.generateCpuPlayersForTeam(H,u.teamId,u.teamName,u.skillLevel,u.playerCount,u.genderBalance);if(!ie.success)throw new Error(ie.error||"Failed to generate CPU players");console.log(`[AdminCpuTeams] Successfully generated ${(A=ie.players)==null?void 0:A.length} CPU players`),await t("cpu_players_generated","cpu_team",u.teamId,{playerCount:u.playerCount}),d(!1),h(null),me.success(`Successfully generated ${(X=ie.players)==null?void 0:X.length} CPU players!`)}catch(q){console.error("[AdminCpuTeams] Error generating CPU players:",q),me.error("Failed to create CPU players. Please try again.")}finally{g(!1)}},P=()=>{d(!1),h(null)},[C,k]=j.useState({name:"",tier:"departmental",start_date:"",end_date:"",registration_deadline:"",max_teams_per_group:8,status:"draft",entry_fee:{coins:0,shuttlecocks:0,meals:0,diamonds:0},prize_pool:{first:{coins:0,shuttlecocks:0,meals:0,diamonds:0},second:{coins:0,shuttlecocks:0,meals:0,diamonds:0},third:{coins:0,shuttlecocks:0,meals:0,diamonds:0}}}),R=(A,X,q,H)=>{k(ie=>({...ie,[A]:X?{...ie[A],[X]:{...ie[A][X],[q]:H}}:{...ie[A],[q]:H}}))},L=async()=>{try{g(!0);const[A,X]=await Promise.all([$.rpc("get_admin_dashboard_stats"),$.from("admin_activity_logs").select("id, action_type, target_type, target_id, details, created_at, admin_user_id").order("created_at",{ascending:!1}).limit(10)]);if(A.error||X.error){console.error("Error loading dashboard data:",A.error||X.error);return}const q=A.data;f({totalUsers:(q==null?void 0:q.total_users)||0,activeTournaments:(q==null?void 0:q.active_tournaments)||0,activeSeasons:(q==null?void 0:q.active_seasons)||0,cpuTeams:(q==null?void 0:q.total_cpu_teams)||0,recentActivities:X.data||[]})}catch(A){console.error("Error loading dashboard stats:",A)}finally{g(!1)}},T=()=>{n(!0)},O=()=>{k({name:"",tier:"departmental",start_date:"",end_date:"",registration_deadline:"",max_teams_per_group:8,status:"draft",entry_fee:{coins:0,shuttlecocks:0,meals:0,diamonds:0},prize_pool:{first:{coins:0,shuttlecocks:0,meals:0,diamonds:0},second:{coins:0,shuttlecocks:0,meals:0,diamonds:0},third:{coins:0,shuttlecocks:0,meals:0,diamonds:0}}}),i(!0)},ae=async A=>{A.preventDefault();try{g(!0);const X={name:C.name,tier:C.tier,start_date:new Date(C.start_date).toISOString(),end_date:new Date(C.end_date).toISOString(),registration_deadline:new Date(C.registration_deadline).toISOString(),max_teams_per_group:C.max_teams_per_group,status:C.status,groups:JSON.stringify([]),week_schedule:JSON.stringify([])},{error:q}=await $.from("interclub_seasons").insert(X);if(q)throw q;t("interclub_season_created_enhanced"),i(!1)}catch(X){console.error("Error creating season:",X)}finally{g(!1)}};return y?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome to Admin Dashboard"}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Last login: ",new Date().toLocaleDateString()]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.totalUsers})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Tournaments"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.activeTournaments})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Seasons"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.activeSeasons})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"CPU Teams & Players"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.cpuTeams})]})]})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx("button",{onClick:T,className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-xl mr-3",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Create Tournament"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Set up a new tournament"})]})]})}),r.jsx("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",onClick:O,children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-xl mr-3",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Launch Season"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Start interclub season"})]})]})}),r.jsx("button",{onClick:b,className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-xl mr-3",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Add CPU Team"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Create AI opponents"})]})]})})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Admin Activity"}),m.recentActivities.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"}):r.jsx("div",{className:"space-y-3",children:m.recentActivities.slice(0,5).map((A,X)=>r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.action_type.replace(/_/g," ").replace(/\b\w/g,q=>q.toUpperCase())}),A.target_type&&r.jsxs("p",{className:"text-xs text-gray-500",children:["Target: ",A.target_type]})]})]}),r.jsx("span",{className:"text-xs text-gray-400",children:new Date(A.created_at).toLocaleDateString()})]},X))})]}),s&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Tournament"}),r.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"px-6 py-6",children:r.jsx(Jp,{tournament:null,onSave:A=>{console.log("Tournament saved from dashboard:",A),n(!1),me.success("Tournament created successfully!")},onCancel:()=>n(!1)})})]})}),a&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-[50vw] max-h-[90vh] overflow-y-auto",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"New Interclub Season"}),r.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Season name"}),r.jsx("input",{type:"text",value:C.name,onChange:A=>k({...C,name:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tier"}),r.jsxs("select",{value:C.tier,onChange:A=>k({...C,tier:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"departmental",children:"Departmental"}),r.jsx("option",{value:"regional",children:"Regional"}),r.jsx("option",{value:"national",children:"National"}),r.jsx("option",{value:"top12",children:"TOP 12"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start date"}),r.jsx("input",{type:"datetime-local",value:C.start_date,onChange:A=>k({...C,start_date:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"End date"}),r.jsx("input",{type:"datetime-local",value:C.end_date,onChange:A=>k({...C,end_date:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Registration deadline"}),r.jsx("input",{type:"datetime-local",value:C.registration_deadline,onChange:A=>k({...C,registration_deadline:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max teams per group"}),r.jsx("input",{type:"number",min:"5",max:"8",value:C.max_teams_per_group,onChange:A=>k({...C,max_teams_per_group:parseInt(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Initial status"}),r.jsxs("select",{value:C.status,onChange:A=>k({...C,status:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"registration_open",children:"Registration Open"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Ne,{className:"w-5 h-5 mr-2"}),"Entry Fee"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ne,{className:"w-4 h-4 inline mr-1 text-yellow-500"}),"Coins"]}),r.jsx("input",{type:"number",value:C.entry_fee.coins,onChange:A=>R("entry_fee",null,"coins",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ct,{className:"w-4 h-4 inline mr-1 text-blue-500"}),"Shuttlecocks"]}),r.jsx("input",{type:"number",value:C.entry_fee.shuttlecocks,onChange:A=>R("entry_fee",null,"shuttlecocks",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(as,{className:"w-4 h-4 inline mr-1 text-green-500"}),"Meals"]}),r.jsx("input",{type:"number",value:C.entry_fee.meals,onChange:A=>R("entry_fee",null,"meals",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Qe,{className:"w-4 h-4 inline mr-1 text-purple-500"}),"Diamonds"]}),r.jsx("input",{type:"number",value:C.entry_fee.diamonds,onChange:A=>R("entry_fee",null,"diamonds",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(re,{className:"w-5 h-5 mr-2"}),"Prize Pool"]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" First Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.first.coins,onChange:A=>R("prize_pool","first","coins",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.first.shuttlecocks,onChange:A=>R("prize_pool","first","shuttlecocks",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.first.meals,onChange:A=>R("prize_pool","first","meals",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.first.diamonds,onChange:A=>R("prize_pool","first","diamonds",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" Second Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.second.coins,onChange:A=>R("prize_pool","second","coins",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.second.shuttlecocks,onChange:A=>R("prize_pool","second","shuttlecocks",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.second.meals,onChange:A=>R("prize_pool","second","meals",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.second.diamonds,onChange:A=>R("prize_pool","second","diamonds",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" Third Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.third.coins,onChange:A=>R("prize_pool","third","coins",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.third.shuttlecocks,onChange:A=>R("prize_pool","third","shuttlecocks",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.third.meals,onChange:A=>R("prize_pool","third","meals",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:C.prize_pool.third.diamonds,onChange:A=>R("prize_pool","third","diamonds",parseInt(A.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:y,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:y?"Creating...":"Create Season"})]})]})]})}),l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:w,children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create New CPU Team"}),r.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),r.jsxs("div",{className:"px-6 py-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),r.jsx("input",{type:"text",value:v.name,onChange:A=>p(X=>({...X,name:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter team name",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:v.description,onChange:A=>p(X=>({...X,description:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter team description",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Level"}),r.jsxs("select",{value:v.skillLevel,onChange:A=>p(X=>({...X,skillLevel:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"beginner",children:"Beginner"}),r.jsx("option",{value:"intermediate",children:"Intermediate"}),r.jsx("option",{value:"advanced",children:"Advanced"}),r.jsx("option",{value:"expert",children:"Expert"}),r.jsx("option",{value:"master",children:"Master"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player Count"}),r.jsx("input",{type:"number",value:v.playerCount,onChange:A=>p(X=>({...X,playerCount:parseInt(A.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"20"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender Balance"}),r.jsxs("select",{value:v.genderBalance,onChange:A=>p(X=>({...X,genderBalance:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"mixed",children:"Mixed"}),r.jsx("option",{value:"male",children:"Male Only"}),r.jsx("option",{value:"female",children:"Female Only"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:v.isActive,onChange:A=>p(X=>({...X,isActive:A.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Active team"})]})]})]}),r.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:y,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:y,children:"Create Team"})]})]})})}),o&&u&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg w-full max-w-md mx-4",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-full mr-4",children:r.jsx(wl,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Generate CPU Players"}),r.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Team:"}),r.jsx("span",{className:"font-medium text-gray-900",children:u.teamName})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Skill Level:"}),r.jsx("span",{className:"font-medium text-gray-900 capitalize",children:u.skillLevel})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players to Generate:"}),r.jsx("span",{className:"font-medium text-gray-900",children:u.playerCount})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Gender Balance:"}),r.jsx("span",{className:"font-medium text-gray-900 capitalize",children:u.genderBalance})]})]}),r.jsxs("p",{className:"mt-4 text-sm text-gray-600",children:["Are you sure you want to generate ",r.jsxs("strong",{children:[u.playerCount," CPU players"]})," for the ",r.jsx("strong",{children:u.teamName})," team?"]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:P,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",disabled:y,children:"Cancel"}),r.jsx("button",{onClick:_,className:"flex-1 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:y,children:y?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Generating..."]}):"Generate Players"})]})]})})})]})},L1=new Cp($),I1=new Qs($),$1=({tournamentId:e,onMatchComplete:t})=>{const[s,n]=j.useState([]),[a,i]=j.useState(!1),[l,c]=j.useState(null),[o,d]=j.useState(null);j.useEffect(()=>{u()},[e]);const u=async()=>{try{i(!0),console.log("[MatchExecutor] Loading matches with JavaScript logic",e);const f=await I1.getTournamentWithMatches(e);console.log("tournamentWithMatches",f),n(f.rounds),console.log("[MatchExecutor] Loaded. tournamentWithMatches =>",f)}catch(f){console.error("[MatchExecutor] Error loading matches:",f),d("Failed to load matches")}finally{i(!1)}},h=async f=>{c(f),d(null);try{console.log("[MatchExecutor] Executing match with JavaScript logic:",f);const y=await L1.executeTournamentMatch(f);y.success?(await u(),t(),me.success(`Match completed! Winner: ${y.matchData.winnerName}
Score: ${y.matchData.score}`,{duration:6e3})):me.error(y.error||"Failed to execute match")}catch(y){console.error("[MatchExecutor] Error executing match:",y),d(y.message||"Failed to execute match")}finally{c(null)}},m=async f=>{i(!0),d(null);try{const y=s[f-1].matches.filter(p=>!p.completed);if(console.log("roundLevel",f),console.log("total matches",s),console.log("round matches",y),y.length===0){me.info("No incomplete matches in this round");return}console.log(`Starting execution of ${y.length} matches in round ${f}`);let g=0,v=[];for(const p of y)try{console.log(`[MatchExecutor] Executing match ${p.id}:`,{player1:p.player1_id,player2:p.player2_id}),await h(p.id),console.log(`[MatchExecutor] Match ${p.id} completed successfully`),g++,await new Promise(w=>setTimeout(w,300))}catch(w){console.error(`[MatchExecutor] Failed to execute match ${p.id}:`,w),v.push({match:p,error:w.message||"Unknown error"})}if(await u(),t(),v.length>0){console.error("Failed matches:",v);const p=v.map(w=>`Match ${w.match.id}: ${w.error}`).join(`
`);me.warning(`Round partially completed!
${g}/${y.length} matches executed successfully.

Failed matches:
${p}`,{duration:6e3}),d(`Failed to execute ${v.length} matches. Check console for details.`)}else me.success(`Round completed! ${g}/${y.length} matches executed successfully.`)}catch(y){console.error("Error executing round matches:",y),d(y.message||"Failed to execute round matches")}finally{i(!1)}};return a&&s.length===0?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mr-2"}),r.jsx("span",{children:"Loading matches..."})]}):(console.log("[matches]",s),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Match Execution"}),r.jsxs("button",{onClick:u,disabled:a,className:"flex items-center px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:[r.jsx(Ap,{className:`w-4 h-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]})]}),o&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(ga,{className:"w-4 h-4 text-red-600 mr-2"}),r.jsx("span",{className:"text-red-800 text-sm",children:o})]})}),s.map(f=>{const y=f.matches.filter(v=>v.completed===!1),g=f.matches.filter(v=>v.completed===!0);return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg mb-6",children:[r.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:[f.round_name," (Level ",f.round_level,")"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[g.length,"/",f.matches.length," matches completed"]})]}),y.length>0&&r.jsxs("button",{onClick:()=>m(f.round_level),disabled:a,className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm",children:[r.jsx(Sd,{className:"w-4 h-4 mr-2"}),"Execute All (",y.length,")"]})]})}),r.jsx("div",{className:"p-4",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.matches.map(v=>{const p=l===v.match_id;return r.jsxs("div",{className:`border rounded-lg p-4 ${v.completed?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Match"}),v.winner_id?r.jsx(ns,{className:"w-4 h-4 text-green-500"}):r.jsx(vr,{className:"w-4 h-4 text-yellow-500"})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${v.winner_id===v.player1_id?"bg-green-100 border border-green-300":"bg-white"}`,children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Vs,{className:`w-4 h-4 mr-2 ${v.player1_is_cpu?"text-blue-500":"text-green-500"}`}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:v.player1_name}),r.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(Lv.",v.player1_level,") ",v.player1_is_cpu?"CPU":"Player"]})]})]}),v.winner_id===v.player1_id&&r.jsx(re,{className:"w-4 h-4 text-yellow-500"})]}),r.jsx("div",{className:"text-center text-xs text-gray-500 py-1",children:"vs"}),r.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${v.winner_id===v.player2_id?"bg-green-100 border border-green-300":"bg-white"}`,children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Vs,{className:`w-4 h-4 mr-2 ${v.player2_is_cpu?"text-blue-500":"text-green-500"}`}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:v.player2_name}),r.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(Lv.",v.player2_level,") ",v.player2_is_cpu?"CPU":"Player"]})]})]}),v.winner_id===v.player2_id&&r.jsx(re,{className:"w-4 h-4 text-yellow-500"})]})]}),v.score&&r.jsxs("div",{className:"text-xs text-gray-600 mb-3 p-2 bg-gray-100 rounded",children:[r.jsx("strong",{children:"Score:"})," ",v.score]}),!v.completed&&r.jsx("button",{onClick:()=>h(v.id),disabled:p||a,className:"w-full flex items-center justify-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Executing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Execute Match"]})}),!v.completed&&(!v.player1_id||!v.player2_id)&&r.jsx("div",{className:"text-center text-xs text-gray-500 py-2 bg-gray-100 rounded",children:"Waiting for players..."})]},v.match_id)})})})]},`${f.round_level}-${f.round_name}`)}),s.length===0&&!a&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(vr,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{children:"No matches found for this tournament"})]})]}))},O1=new Qs($),U1=({tournament:e})=>{const[t,s]=j.useState(0),[n,a]=j.useState(!1),[i,l]=j.useState(!1),[c,o]=j.useState(null),[d]=j.useState(e.start_date);j.useEffect(()=>{if(e.status!=="upcoming")return;if(c||n||i){console.log("[TournamentAutoStarter] Stopping countdown due to:",{error:c,isStarting:n,hasStarted:i});return}const y=()=>{const v=Date.now(),p=Math.max(0,new Date(d).getTime()-v);console.log("[TournamentAutoStarter] Time left:",p/1e3,"seconds"),s(p),p===0&&!n&&!i&&!c&&u()};y();const g=setInterval(y,1e3);return()=>clearInterval(g)},[c,n,i,e.status]);const u=async()=>{try{a(!0),o(null),(await O1.startTournament(e.id)).success?(console.log("[TournamentAutoStarter] Tournament auto-started successfully"),l(!0),o(null)):o("Failed to start tournament")}catch(y){console.error("[TournamentAutoStarter] Error auto-starting tournament:",y),o(y.message||"Failed to start tournament")}finally{a(!1)}},h=y=>{if(y<=0)return"Starting Tournament...";const g=Math.floor(y/1e3)%60,v=Math.floor(y/(1e3*60))%60,p=Math.floor(y/(1e3*60*60))%24,w=Math.floor(y/(1e3*60*60*24)),b=[];return w>0&&b.push(`${w}d`),p>0&&b.push(`${p}h`),v>0&&b.push(`${v}m`),g>0&&w===0&&b.push(`${g}s`),b.join(" ")||"Starting..."};if(e.status!=="upcoming")return null;const m=t>0&&t<=3e5,f=t<=0;return r.jsxs("div",{className:`rounded-lg p-4 mb-4 ${c?"bg-red-50 border border-red-200":i?"bg-green-50 border border-green-200":f?"bg-red-50 border border-red-200":m?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[c?r.jsx(ga,{className:"w-5 h-5 text-red-600 mr-2"}):i?r.jsx(ns,{className:"w-5 h-5 text-green-600 mr-2"}):n?r.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}):r.jsx($p,{className:`w-5 h-5 mr-2 ${f?"text-red-600 animate-pulse":m?"text-yellow-600":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("h4",{className:`font-medium ${c?"text-red-800":i?"text-green-800":f?"text-red-800":m?"text-yellow-800":"text-blue-800"}`,children:c?"Auto-Start Failed!":i?"Tournament Started!":n?"Starting Tournament...":f?"Auto-Starting Tournament":"Tournament Auto-Start"}),r.jsx("p",{className:`text-sm ${c?"text-red-600":i?"text-green-600":f?"text-red-600":m?"text-yellow-600":"text-blue-600"}`,children:c?`Error: ${c}`:i?"Tournament has been automatically started and is now ongoing":n?"Please wait while the tournament is being started...":f?"Tournament start time reached - starting automatically":"Tournament will start automatically when the countdown reaches zero"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:`text-2xl font-mono font-bold ${c?"text-red-700":i?"text-green-700":f?"text-red-700":m?"text-yellow-700":"text-blue-700"}`,children:i?"STARTED":h(t)}),!i&&r.jsx("div",{className:`text-xs ${c||f?"text-red-600":m?"text-yellow-600":"text-blue-600"}`,children:f?"Starting now...":"until tournament starts"})]})]}),c&&r.jsx("div",{className:"mt-3 pt-3 border-t border-red-200",children:r.jsxs("button",{onClick:()=>o(null),className:"flex items-center px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:[r.jsx(Lp,{className:"w-4 h-4 mr-1"}),"Reset Error"]})}),!c&&!i&&!n&&t<=6e4&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:r.jsxs("button",{onClick:u,disabled:n,className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 text-sm",children:[r.jsx(Bt,{className:"w-4 h-4 mr-1"}),"Start Now (Manual)"]})}),t<=0&&!i&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:r.jsxs("button",{onClick:u,disabled:n,className:"flex items-center px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 text-sm",children:[r.jsx(Bt,{className:"w-4 h-4 mr-1"}),"Start Now (Manual)"]})})]})},Nh=new Qs($),z1=({tournament:e,onTournamentUpdate:t})=>{const[s,n]=j.useState(!1),[a,i]=j.useState(null),[l,c]=j.useState("matches"),[o,d]=j.useState([]),[u,h]=j.useState(""),m=async()=>{try{return(await Nh.getRegisteredPlayers(e.id)||[]).map(P=>({id:P.players.id,name:P.players.name,level:P.players.level,is_cpu:P.players.is_cpu||!1}))}catch(_){return console.error("Error loading registered players:",_),[]}},f=async()=>{n(!0),i(null);try{await Nh.startTournament(e.id),console.log("[TournamentManagement] Tournament started successfully",e.id),t(),me.success("Tournament started successfully!")}catch(_){console.error("[TournamentManagement] Error starting tournament:",_),i(_.message||"Failed to start tournament")}finally{n(!1)}},y=()=>e.status==="upcoming"&&new Date(e.start_date)<=new Date,g=()=>{if(!e.rounds)return{totalMatches:0,completedMatches:0,currentRound:null};let _=0,P=0,C=null;return e.rounds.forEach(k=>{_+=k.matches.length;const R=k.matches.filter(L=>L.completed).length;P+=R,!C&&R<k.matches.length&&(C=k)}),{totalMatches:_,completedMatches:P,currentRound:C}},v=async()=>{if(!e.rounds||e.rounds.length===0){h("");return}const _=e.rounds[e.rounds.length-1];if(_.matches.every(C=>C.completed)&&_.matches.length>0){const C=_.matches[_.matches.length-1];if(console.log("Admin - Final match winner:",C.winner),o.length===0){const k=await m();d(k);for(let R=0;R<k.length;R++)if(k[R].id===C.winner){h(k[R].name);return}}else for(let k=0;k<o.length;k++)if(o[k].id===C.winner){h(o[k].name);return}}h("")};j.useEffect(()=>{p()&&v()},[e.rounds,o]);const p=()=>!e.rounds||e.rounds.length===0?!1:e.rounds.every(_=>_.matches.every(P=>P.completed)),w=g(),b=p();return r.jsxs("div",{children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[r.jsx(re,{className:"w-6 h-6 text-yellow-500 mr-2"}),e.name,b&&r.jsxs("div",{className:"flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full ml-3",children:[r.jsx(Wt,{className:"w-4 h-4 mr-1"}),r.jsx("span",{className:"text-sm font-medium",children:"Completed"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${e.status==="upcoming"?"bg-blue-100 text-blue-800":e.status==="ongoing"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),r.jsxs("span",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Be,{className:"w-4 h-4 mr-1"}),e.current_participants,"/",e.max_participants," participants"]}),r.jsxs("span",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(bs,{className:"w-4 h-4 mr-1"}),new Date(e.start_date).toLocaleDateString()]}),e.status==="ongoing"&&r.jsxs("span",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(dn,{className:"w-4 h-4 mr-1"}),w.completedMatches,"/",w.totalMatches," matches completed"]})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:y()&&r.jsxs("button",{onClick:f,disabled:s,className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[r.jsx(Bt,{className:"w-4 h-4 mr-2"}),s?"Starting...":"Start Now (Manual)"]})})]})}),b&&r.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300 rounded-xl p-6 mb-6",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center mb-4",children:[r.jsx(Wt,{className:"w-10 h-10 text-yellow-500 mr-3"}),r.jsx(re,{className:"w-12 h-12 text-yellow-500"}),r.jsx(Wt,{className:"w-10 h-10 text-yellow-500 ml-3"})]}),r.jsx("h3",{className:"text-xl font-bold text-yellow-800 mb-2",children:" Tournament Champion "}),r.jsx("div",{className:"bg-white bg-opacity-70 rounded-lg p-4 inline-block",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(on,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{className:"text-xl font-bold text-gray-900",children:u||"Loading..."}),r.jsx(on,{className:"w-5 h-5 text-yellow-500"})]})})]})}),r.jsx("div",{className:"mb-6",children:r.jsx(U1,{tournament:e})}),a&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(ga,{className:"w-5 h-5 text-red-600 mr-2"}),r.jsx("span",{className:"text-red-800",children:a})]})}),e.status==="ongoing"&&w.currentRound&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-blue-900",children:["Current Round: ",w.currentRound.name]}),r.jsxs("p",{className:"text-blue-700 text-sm",children:[w.currentRound.matches.filter(_=>_.completed).length," of ",w.currentRound.matches.length," matches completed"]})]}),r.jsxs("div",{className:"flex items-center text-blue-700",children:[r.jsx(vr,{className:"w-5 h-5 mr-2"}),r.jsx("span",{className:"text-sm",children:"In Progress"})]})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"flex space-x-8 px-6",children:[r.jsxs("button",{onClick:()=>c("matches"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="matches"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Bt,{className:"w-4 h-4 inline mr-2"}),"Manual Execution"]}),r.jsxs("button",{onClick:()=>c("info"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="info"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Vi,{className:"w-4 h-4 inline mr-2"}),"Information"]})]})}),r.jsxs("div",{className:"p-6",children:[l==="matches"&&r.jsx($1,{tournamentId:e.id,onMatchComplete:t}),l==="info"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[r.jsx(Vi,{className:"w-4 h-4 mr-2"}),"Tournament Details"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"ID:"}),r.jsx("span",{className:"font-mono text-xs",children:e.id})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tier:"}),r.jsx("span",{className:"capitalize",children:e.tier})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Min Level:"}),r.jsx("span",{children:e.min_player_level})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Max Participants:"}),r.jsx("span",{children:e.max_participants})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Round Interval:"}),r.jsxs("span",{children:[e.round_interval_minutes," minutes"]})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[r.jsx(Mp,{className:"w-4 h-4 mr-2"}),"Tournament Stats"]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Total Matches:"}),r.jsx("span",{className:"font-medium",children:w.totalMatches})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Completed Matches:"}),r.jsx("span",{className:"font-medium text-green-600",children:w.completedMatches})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Remaining Matches:"}),r.jsx("span",{className:"font-medium text-yellow-600",children:w.totalMatches-w.completedMatches})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Progress:"}),r.jsxs("span",{className:"font-medium",children:[w.totalMatches>0?Math.round(w.completedMatches/w.totalMatches*100):0,"%"]})]})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[r.jsx(re,{className:"w-4 h-4 mr-2"}),"Prize Pool Configuration"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[r.jsx("h5",{className:"font-medium text-yellow-800 mb-2",children:"1st Place"}),r.jsxs("div",{className:"text-sm text-yellow-700",children:[e.prize_pool.first.coins&&r.jsxs("div",{children:["Coins: ",e.prize_pool.first.coins]}),e.prize_pool.first.diamonds&&r.jsxs("div",{children:["Diamonds: ",e.prize_pool.first.diamonds]}),e.prize_pool.first.shuttlecocks&&r.jsxs("div",{children:["Shuttlecocks: ",e.prize_pool.first.shuttlecocks]}),e.prize_pool.first.meals&&r.jsxs("div",{children:["Meals: ",e.prize_pool.first.meals]})]})]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"2nd Place"}),r.jsxs("div",{className:"text-sm text-gray-700",children:[e.prize_pool.second.coins&&r.jsxs("div",{children:["Coins: ",e.prize_pool.second.coins]}),e.prize_pool.second.diamonds&&r.jsxs("div",{children:["Diamonds: ",e.prize_pool.second.diamonds]}),e.prize_pool.second.shuttlecocks&&r.jsxs("div",{children:["Shuttlecocks: ",e.prize_pool.second.shuttlecocks]}),e.prize_pool.second.meals&&r.jsxs("div",{children:["Meals: ",e.prize_pool.second.meals]})]})]}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[r.jsx("h5",{className:"font-medium text-amber-800 mb-2",children:"3rd Place"}),r.jsxs("div",{className:"text-sm text-amber-700",children:[e.prize_pool.third.coins&&r.jsxs("div",{children:["Coins: ",e.prize_pool.third.coins]}),e.prize_pool.third.diamonds&&r.jsxs("div",{children:["Diamonds: ",e.prize_pool.third.diamonds]}),e.prize_pool.third.shuttlecocks&&r.jsxs("div",{children:["Shuttlecocks: ",e.prize_pool.third.shuttlecocks]}),e.prize_pool.third.meals&&r.jsxs("div",{children:["Meals: ",e.prize_pool.third.meals]})]})]})]})]})]})]})]})]})},ao=new Qs($),Qp=()=>{const{logActivity:e}=Xs(),[t,s]=j.useState([]),[n,a]=j.useState(!0),[i,l]=j.useState(""),[c,o]=j.useState("all"),[d,u]=j.useState("all"),[h,m]=j.useState(!1),[f,y]=j.useState(null),[g,v]=j.useState(null);j.useEffect(()=>{p(),e("tournaments_viewed")},[]);const p=async()=>{try{a(!0);const T=await ao.getTournaments();console.log("[AdminTournaments] Tournament list loaded successfully:",T),s(T)}catch(T){console.error("[AdminTournaments] Error loading tournaments:",T)}finally{a(!1)}},w=async T=>{try{a(!0);const O=await ao.getTournamentWithMatches(T);return v(O),console.log("[AdminTournaments] Tournament details loaded successfully:",O),O||null}catch(O){return console.error("[AdminTournaments] Error loading tournament details:",O),null}finally{a(!1)}},b=()=>{y(null),m(!0)},_=async T=>{y(T),m(!0)},P=async T=>{let O=T;if(!T.rounds||T.rounds.length===0){const ae=await w(T.id);ae&&(O=ae)}v(O)},C=async T=>{if(confirm("Are you sure you want to delete this tournament?"))try{await ao.deleteTournament(T),s(t.filter(O=>O.id!==T)),await e("tournament_deleted","tournament",T)}catch(O){console.error("Error deleting tournament:",O),me.error("Failed to delete tournament. Please try again.")}},k=t.filter(T=>{const O=T.name.toLowerCase().includes(i.toLowerCase()),ae=c==="all"||T.tier===c,A=d==="all"||T.status===d;return O&&ae&&A});console.log("[filteredTournaments]",k);const R=T=>{switch(T){case"local":return"bg-gray-100 text-gray-800";case"regional":return"bg-blue-100 text-blue-800";case"national":return"bg-green-100 text-green-800";case"international":return"bg-yellow-100 text-yellow-800";case"premier":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},L=T=>{switch(T){case"upcoming":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tournament Management"}),r.jsx("p",{className:"text-gray-600",children:"Create, manage, and monitor tournaments"})]}),r.jsxs("button",{onClick:b,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(_d,{className:"w-4 h-4 mr-2"}),"Create Tournament"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(re,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tournaments"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(Bt,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(T=>T.status==="ongoing").length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(bs,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(T=>T.status==="upcoming").length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:r.jsx(re,{className:"w-6 h-6 text-gray-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(T=>T.status==="completed").length})]})]})})]}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Search tournaments...",value:i,onChange:T=>l(T.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]})}),r.jsx("div",{className:"w-full sm:w-48",children:r.jsxs("select",{value:c,onChange:T=>o(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Tiers"}),r.jsx("option",{value:"local",children:"Local"}),r.jsx("option",{value:"regional",children:"Regional"}),r.jsx("option",{value:"national",children:"National"}),r.jsx("option",{value:"international",children:"International"}),r.jsx("option",{value:"premier",children:"Premier"})]})}),r.jsx("div",{className:"w-full sm:w-48",children:r.jsxs("select",{value:d,onChange:T=>u(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"upcoming",children:"Upcoming"}),r.jsx("option",{value:"ongoing",children:"Ongoing"}),r.jsx("option",{value:"completed",children:"Completed"})]})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tournament"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participants"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entry Fee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prize Pool"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(re,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-lg font-medium",children:"No tournaments found"}),r.jsx("p",{className:"mt-1",children:"Create your first tournament to get started"})]})}):k.map(T=>{var O,ae,A;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.name}),r.jsx("div",{className:"flex items-center mt-1",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R(T.tier)}`,children:T.tier.charAt(0).toUpperCase()+T.tier.slice(1)})})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L(T.status)}`,children:T.status.charAt(0).toUpperCase()+T.status.slice(1)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Be,{className:"w-4 h-4 text-gray-400 mr-1"}),T.current_participants||0,"/",T.max_participants]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsx("div",{className:"flex items-center space-x-2",children:((O=T.entry_fee)==null?void 0:O.coins)&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:T.entry_fee.coins})]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsx("div",{className:"flex items-center space-x-2",children:((A=(ae=T.prize_pool)==null?void 0:ae.first)==null?void 0:A.coins)&&r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-500 mr-1"}),r.jsx("span",{children:T.prize_pool.first.coins})]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{children:[r.jsx("div",{children:new Date(T.start_date).toLocaleDateString()}),r.jsxs("div",{className:"text-gray-500 text-xs",children:["to ",new Date(T.end_date).toLocaleDateString()]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>P(T),className:"text-green-600 hover:text-green-900 p-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Manage Tournament",children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>_(T),className:"text-blue-600 hover:text-blue-900 p-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Edit Tournament",children:r.jsx(Qr,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>C(T.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Tournament",children:r.jsx(xa,{className:"w-4 h-4"})})]})})]},T.id)})})]})})}),h&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:f?"Edit Tournament":"Create New Tournament"}),r.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"px-6 py-6",children:r.jsx(Jp,{tournament:f,onSave:T=>{console.log("Tournament saved:",T),m(!1),p()},onCancel:()=>m(!1)})})]})}),g&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 h-full",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Manage Tournament: ",g.name]}),r.jsx("button",{onClick:()=>v(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"px-6 py-6",children:r.jsx(z1,{tournament:g,onTournamentUpdate:()=>{p();const T=t.find(O=>O.id===g.id);T&&v(T)}})})]})})]})},F1=new Ys($),Yp=()=>{const{logActivity:e}=Xs(),[t,s]=j.useState([]),[n,a]=j.useState([]),[i,l]=j.useState(!0),[c,o]=j.useState(""),[d,u]=j.useState("all"),[h,m]=j.useState(!1),[f,y]=j.useState(null),[g,v]=j.useState(null),[p,w]=j.useState(!1),[b,_]=j.useState(null),[P,C]=j.useState("teams"),[k,R]=j.useState({name:"",description:"",skillLevel:"intermediate",playerCount:6,genderBalance:"mixed",isActive:!0}),[L,T]=j.useState({name:"",gender:"male",level:1,rank:1,maxLevel:156,is_cpu:!0,stats:{endurance:0,strength:0,agility:0,speed:0,explosiveness:0,injuryPrevention:0,smash:0,defense:0,serve:0,stick:0,slice:0,drop:0},equipment:{racket:void 0,shoes:void 0,strings:void 0,shirt:void 0,shorts:void 0},injuries:[],strategy:{physicalCommitment:0,playStyle:0,movementSpeed:0,fatigueManagement:0,rallyConsistency:0,riskTaking:0,attack:0,softAttack:0,serving:0,courtDefense:0,mentalToughness:0,selfConfidence:0},best:[]});j.useEffect(()=>{O(),ae(),e("cpu_teams_viewed")},[]);const O=async()=>{try{l(!0);const{data:N,error:U}=await $.from("cpu_teams").select("*").order("created_at",{ascending:!1});if(U){console.error("Error loading CPU teams:",U);return}const{data:W,error:D}=await $.from("player_team_assignments").select(`
          team_id,
          player:players(*)
        `);if(D){console.error("Error loading player assignments:",D);return}const le=W.reduce((oe,pe)=>(oe[pe.team_id]||(oe[pe.team_id]=[]),pe.player&&oe[pe.team_id].push(pe.player),oe),{}),te=(N||[]).map(oe=>({id:oe.id,name:oe.name,description:oe.description,skillLevel:oe.skill_level,playerCount:oe.player_count,genderBalance:oe.gender_balance,players:le[oe.id]||[],isActive:oe.is_active,createdAt:oe.created_at}));s(te)}catch(N){console.error("Error loading CPU teams:",N)}finally{l(!1)}},ae=async()=>{try{l(!0);const{data:N,error:U}=await $.from("players").select("*").eq("is_cpu",!0).order("name");if(U){console.error("Error loading CPU players:",U);return}if(!N){a([]);return}const W=await Promise.all(N.map(async D=>{const le=["diamond","coins","shuttlecocks","meals"],te={diamonds:0,coins:0,shuttlecocks:0,meals:0},{data:oe}=await $.from("resource_transactions").select("amount, resource_type").eq("user_id",D.user_id).in("resource_type",le);if(oe)for(const{amount:We,resource_type:Yt}of oe)switch(Yt){case"diamond":te.diamonds+=We;break;case"coins":te.coins+=We;break;case"shuttlecocks":te.shuttlecocks+=We;break;case"meals":te.meals+=We;break}const{data:pe,error:Qt}=await $.from("player_levels").select("*").eq("player_id",D.id).single();return Qt&&console.warn(`No level data for player ${D.id}:`,Qt.message),{...D,...te,maxLevel:D.maxLevel||156,stats:pe||{}}}));a(W)}catch(N){console.error("Error loading CPU players:",N)}finally{l(!1)}},A=()=>{y(null),R({name:"",description:"",skillLevel:"intermediate",playerCount:6,genderBalance:"mixed",isActive:!0}),m(!0)},X=()=>{v(null),T({name:"",gender:"male",level:1,rank:1,maxLevel:156,is_cpu:!0,stats:{endurance:0,strength:0,agility:0,speed:0,explosiveness:0,injuryPrevention:0,smash:0,defense:0,serve:0,stick:0,slice:0,drop:0},equipment:{racket:void 0,shoes:void 0,strings:void 0,shirt:void 0,shorts:void 0},injuries:[],strategy:{physicalCommitment:0,playStyle:0,movementSpeed:0,fatigueManagement:0,rallyConsistency:0,riskTaking:0,attack:0,softAttack:0,serving:0,courtDefense:0,mentalToughness:0,selfConfidence:0}}),m(!0)},q=N=>{y(N),R({name:N.name,description:N.description,skillLevel:N.skillLevel,playerCount:N.playerCount,genderBalance:N.genderBalance,isActive:N.isActive}),m(!0)},H=N=>{v(N),T({name:N.name,gender:N.gender,level:N.level,rank:N.rank,maxLevel:N.maxLevel,is_cpu:!0,stats:N.stats,statLevels:N.statLevels,equipment:N.equipment,injuries:N.injuries,strategy:N.strategy,best:N.best}),m(!0)},ie=async N=>{if(confirm("Are you sure you want to delete this CPU team? This will also remove all associated CPU players."))try{const{data:U,error:W}=await $.from("player_team_assignments").select("player_id").eq("team_id",N);if(W){console.error("Error getting team assignments:",W),me.error("Failed to delete CPU team. Please try again.");return}if(U&&U.length>0){const le=U.map(oe=>oe.player_id),{error:te}=await $.from("players").delete().in("id",le);if(te){console.error("Error deleting CPU players:",te),me.error("Failed to delete CPU players. Please try again.");return}}const{error:D}=await $.from("cpu_teams").delete().eq("id",N);if(D){console.error("Error deleting CPU team:",D),me.error("Failed to delete CPU team. Please try again.");return}await e("cpu_team_deleted","cpu_team",N),O(),ae()}catch(U){console.error("Error deleting CPU team:",U),me.error("Failed to delete CPU team. Please try again.")}},B=async N=>{if(confirm("Are you sure you want to delete this CPU player?"))try{const{error:U}=await $.from("player_team_assignments").delete().eq("player_id",N);if(U){console.error("Error deleting player assignments:",U),me.error("Failed to delete CPU player assignments. Please try again.");return}const{error:W}=await $.from("players").delete().eq("id",N);if(W){console.error("Error deleting CPU player:",W),me.error("Failed to delete CPU player. Please try again.");return}await e("cpu_player_deleted","player",N),ae(),O(),me.success("CPU player deleted successfully")}catch(U){console.error("Error deleting CPU player:",U),me.error("Failed to delete CPU player. Please try again.")}},G=async N=>{N.preventDefault(),l(!0);try{if(f){const{error:U}=await $.from("cpu_teams").update({name:k.name,description:k.description,skill_level:k.skillLevel,player_count:k.playerCount,gender_balance:k.genderBalance,is_active:k.isActive,updated_at:new Date().toISOString()}).eq("id",f.id);if(U){console.error("Error updating CPU team:",U);return}await e("cpu_team_updated","cpu_team",f.id)}else{const{data:U,error:W}=await $.from("cpu_teams").insert({name:k.name,description:k.description,skill_level:k.skillLevel,player_count:k.playerCount,gender_balance:k.genderBalance,is_active:k.isActive}).select().single();if(W){console.error("Error creating CPU team:",W);return}await e("cpu_team_created","cpu_team",U.id)}m(!1),O()}catch(U){console.error("Error saving CPU team:",U)}finally{l(!1)}},Q=async N=>{N.preventDefault(),l(!0);try{const{stats:U,strategy:W,...D}=L;if(g){const{error:le}=await $.from("players").update({name:D.name,gender:D.gender,level:D.level,rank:D.rank,max_level:D.maxLevel,equipment:D.equipment,injuries:D.injuries,best:D.best,updated_at:new Date().toISOString()}).eq("id",g.id);if(le)throw le;await $.from("player_levels").update({endurance:U.endurance,strength:U.strength,agility:U.agility,speed:U.speed,explosiveness:U.explosiveness,injury_prevention:U.injuryPrevention,smash:U.smash,defense:U.defense,serve:U.serve,stick:U.stick,slice:U.slice,drop:U.drop}).eq("player_id",g.id);const te=L.strategy;await $.from("player_strategy").update({physical_commitment:te.physicalCommitment,play_style:te.playStyle,movement_speed:te.movementSpeed,fatigue_management:te.fatigueManagement,rally_consistency:te.rallyConsistency,risk_taking:te.riskTaking,attack:te.attack,soft_attack:te.softAttack,serving:te.serving,court_defense:te.courtDefense,mental_toughness:te.mentalToughness,self_confidence:te.selfConfidence}).eq("player_id",g.id),await e("cpu_player_updated","player",g.id),me.success("CPU player updated successfully")}else{const{data:{user:le}}=await $.auth.getUser();if(!le)throw new Error("No authenticated user");const{data:te,error:oe}=await $.from("players").insert({name:D.name,gender:D.gender,level:D.level,rank:D.rank,max_level:D.maxLevel,injuries:D.injuries,is_cpu:!0,user_id:le.id}).select().single();if(oe||!te)throw oe;await $.from("player_levels").insert({player_id:te.id,endurance:U.endurance,strength:U.strength,agility:U.agility,speed:U.speed,explosiveness:U.explosiveness,injury_prevention:U.injuryPrevention,smash:U.smash,defense:U.defense,serve:U.serve,stick:U.stick,slice:U.slice,drop:U.drop});const pe=L.strategy;await $.from("player_strategy").insert({player_id:te.id,physical_commitment:pe.physicalCommitment,play_style:pe.playStyle,movement_speed:pe.movementSpeed,fatigue_management:pe.fatigueManagement,rally_consistency:pe.rallyConsistency,risk_taking:pe.riskTaking,attack:pe.attack,soft_attack:pe.softAttack,serving:pe.serving,court_defense:pe.courtDefense,mental_toughness:pe.mentalToughness,self_confidence:pe.selfConfidence}),await e("cpu_player_created","player",te.id),me.success("CPU player created successfully")}m(!1),ae()}catch(U){console.error("Error saving CPU player:",U),me.error("Failed to save CPU player. Please try again.")}finally{l(!1)}},M=(N,U,W,D,le)=>{_({teamId:N,teamName:U,skillLevel:W,playerCount:D,genderBalance:le}),w(!0)},E=async()=>{var N,U;if(b)try{l(!0),console.log("[AdminCpuTeams] Generating CPU players using PlayerService...");const{data:{user:W}}=await $.auth.getUser();if(!W)throw new Error("No authenticated user found");const D=W.id;console.log("[AdminCpuTeams] Using current admin user ID for CPU players:",D);const le=await F1.generateCpuPlayersForTeam(D,b.teamId,b.teamName,b.skillLevel,b.playerCount,b.genderBalance);if(!le.success)throw new Error(le.error||"Failed to generate CPU players");console.log(`[AdminCpuTeams] Successfully generated ${(N=le.players)==null?void 0:N.length} CPU players`),await e("cpu_players_generated","cpu_team",b.teamId,{playerCount:b.playerCount}),O(),ae(),w(!1),_(null),me.success(`Successfully generated ${(U=le.players)==null?void 0:U.length} CPU players!`)}catch(W){console.error("[AdminCpuTeams] Error generating CPU players:",W),me.error("Failed to create CPU players. Please try again.")}finally{l(!1)}},S=()=>{w(!1),_(null)},z=t.filter(N=>{const U=N.name.toLowerCase().includes(c.toLowerCase()),W=d==="all"||N.skillLevel===d;return U&&W}),Z=n.filter(N=>N.name.toLowerCase().includes(c.toLowerCase())),ee=N=>{switch(N){case"beginner":return"bg-gray-100 text-gray-800";case"intermediate":return"bg-blue-100 text-blue-800";case"advanced":return"bg-green-100 text-green-800";case"expert":return"bg-yellow-100 text-yellow-800";case"master":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},Pe=N=>{switch(N){case"mixed":return"";case"male":return"";case"female":return"";default:return""}};return i&&t.length===0&&n.length===0?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CPU Teams and Players Management"}),r.jsx("p",{className:"text-gray-600",children:"Create and manage CPU teams and players"})]}),r.jsxs("button",{onClick:P==="teams"?A:X,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(_d,{className:"w-4 h-4 mr-2"}),P==="teams"?"Create CPU Team":"Create CPU Player"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(cc,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Teams"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(dc,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Teams"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(N=>N.isActive).length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(Be,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total CPU Players"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(dn,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Team Size"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length>0?Math.round(t.reduce((N,U)=>N+U.players.length,0)/t.length):0})]})]})})]}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6",children:r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsx("button",{onClick:()=>C("teams"),className:`px-4 py-2 font-medium text-sm ${P==="teams"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Teams"}),r.jsx("button",{onClick:()=>C("players"),className:`px-4 py-2 font-medium text-sm ${P==="players"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Players"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:P==="teams"?"Search CPU teams...":"Search CPU players...",value:c,onChange:N=>o(N.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]})}),P==="teams"&&r.jsx("div",{className:"w-full sm:w-48",children:r.jsxs("select",{value:d,onChange:N=>u(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Skill Levels"}),r.jsx("option",{value:"beginner",children:"Beginner"}),r.jsx("option",{value:"intermediate",children:"Intermediate"}),r.jsx("option",{value:"advanced",children:"Advanced"}),r.jsx("option",{value:"expert",children:"Expert"}),r.jsx("option",{value:"master",children:"Master"})]})})]})}),P==="teams"&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Skill Level"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Players"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gender Balance"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(cc,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-lg font-medium",children:"No CPU teams found"}),r.jsx("p",{className:"mt-1",children:"Create your first CPU team to get started"})]})}):z.map(N=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.name}),r.jsx("div",{className:"text-sm text-gray-500",children:N.description})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ee(N.skillLevel)}`,children:N.skillLevel.charAt(0).toUpperCase()+N.skillLevel.slice(1)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Be,{className:"w-4 h-4 text-gray-400 mr-1"}),N.players.length,"/",N.playerCount,N.players.length<N.playerCount&&r.jsx("button",{onClick:()=>M(N.id,N.name,N.skillLevel,N.playerCount-N.players.length,N.genderBalance),className:"ml-2 text-xs text-blue-600 hover:text-blue-800",children:"Generate"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"mr-1",children:Pe(N.genderBalance)}),N.genderBalance.charAt(0).toUpperCase()+N.genderBalance.slice(1)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:N.isActive?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>q(N),className:"text-blue-600 hover:text-blue-900 p-1",title:"Edit Team",children:r.jsx(Qr,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>ie(N.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Team",children:r.jsx(xa,{className:"w-4 h-4"})})]})})]},N.id))})]})})}),P==="players"&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto max-w-[81vw]",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Player"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gender"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Endurance"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Strength"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agility"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Speed"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Explosiveness"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Smash"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Defense"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Serve"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stick"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slice"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Drop"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Vs,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-lg font-medium",children:"No CPU players found"}),r.jsx("p",{className:"mt-1",children:"Create your first CPU player to get started"})]})}):Z.map(N=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.name})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[N.level,"/",N.maxLevel]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.rank}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"mr-1",children:Pe(N.gender??"male")}),(N.gender??"male").charAt(0).toUpperCase()+(N.gender??"male").slice(1)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-blue-500 mr-1",children:""}),N.stats.endurance]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-blue-500 mr-1",children:""}),N.stats.strength]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-green-500 mr-1",children:""}),N.stats.agility]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-purple-500 mr-1",children:""}),N.stats.speed]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-red-500 mr-1",children:""}),N.stats.explosiveness]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-indigo-500 mr-1",children:""}),N.stats.smash]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-gray-500 mr-1",children:""}),N.stats.defense]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-cyan-500 mr-1",children:""}),N.stats.serve]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-orange-500 mr-1",children:""}),N.stats.stick]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-pink-500 mr-1",children:""}),N.stats.slice]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-lime-500 mr-1",children:""}),N.stats.drop]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>H(N),className:"text-blue-600 hover:text-blue-900 p-1",title:"Edit Player",children:r.jsx(Qr,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>B(N.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete Player",children:r.jsx(xa,{className:"w-4 h-4"})})]})})]},N.id))})]})})}),h&&P==="teams"&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:G,children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:f?"Edit CPU Team":"Create New CPU Team"}),r.jsx("button",{type:"button",onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),r.jsxs("div",{className:"px-6 py-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),r.jsx("input",{type:"text",value:k.name,onChange:N=>R(U=>({...U,name:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter team name",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:k.description,onChange:N=>R(U=>({...U,description:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter team description",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skill Level"}),r.jsxs("select",{value:k.skillLevel,onChange:N=>R(U=>({...U,skillLevel:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"beginner",children:"Beginner"}),r.jsx("option",{value:"intermediate",children:"Intermediate"}),r.jsx("option",{value:"advanced",children:"Advanced"}),r.jsx("option",{value:"expert",children:"Expert"}),r.jsx("option",{value:"master",children:"Master"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player Count"}),r.jsx("input",{type:"number",value:k.playerCount,onChange:N=>R(U=>({...U,playerCount:parseInt(N.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"20"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender Balance"}),r.jsxs("select",{value:k.genderBalance,onChange:N=>R(U=>({...U,genderBalance:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"mixed",children:"Mixed"}),r.jsx("option",{value:"male",children:"Male Only"}),r.jsx("option",{value:"female",children:"Female Only"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:k.isActive,onChange:N=>R(U=>({...U,isActive:N.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Active team"})]})]})]}),r.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:i,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:i,children:i?"Saving...":f?"Update Team":"Create Team"})]})]})})}),h&&P==="players"&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:r.jsxs("form",{onSubmit:Q,children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:g?"Edit CPU Player":"Create New CPU Player"}),r.jsx("button",{type:"button",onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),r.jsxs("div",{className:"px-6 py-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Player Name"}),r.jsx("input",{type:"text",value:L.name||"",onChange:N=>T(U=>({...U,name:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter player name",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),r.jsxs("select",{value:L.gender||"male",onChange:N=>T(U=>({...U,gender:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level"}),r.jsx("input",{type:"number",value:L.level||1,onChange:N=>T(U=>({...U,level:parseInt(N.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:L.maxLevel||156})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rank"}),r.jsx("input",{type:"number",value:L.rank||1,onChange:N=>T(U=>({...U,rank:parseInt(N.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Level"}),r.jsx("input",{type:"number",value:L.maxLevel||156,onChange:N=>T(U=>({...U,maxLevel:parseInt(N.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),r.jsxs("div",{className:"mb-6 border-t border-gray-200 pt-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Resources"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["diamonds","shuttlecocks","coins","meals"].map(N=>r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 capitalize",children:N}),r.jsx("input",{type:"number",value:L[N]||0,onChange:U=>T(W=>({...W,[N]:parseInt(U.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]},N))})]}),r.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Stats"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["endurance","strength","agility","speed","explosiveness","smash","defense","serve","stick","slice","drop"].map(N=>{var U;return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 capitalize",children:N}),r.jsx("input",{type:"number",value:((U=L.stats)==null?void 0:U[N])??0,onChange:W=>T(D=>({...D,stats:{...D.stats,[N]:parseInt(W.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]},N)})})]})]}),r.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",disabled:i,children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",disabled:i,children:i?"Saving...":g?"Update Player":"Create Player"})]})]})})}),p&&b&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg w-full max-w-md mx-4",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-full mr-4",children:r.jsx(wl,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Generate CPU Players"}),r.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Team:"}),r.jsx("span",{className:"font-medium text-gray-900",children:b.teamName})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Skill Level:"}),r.jsx("span",{className:"font-medium text-gray-900 capitalize",children:b.skillLevel})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Players to Generate:"}),r.jsx("span",{className:"font-medium text-gray-900",children:b.playerCount})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Gender Balance:"}),r.jsx("span",{className:"font-medium text-gray-900 capitalize",children:b.genderBalance})]})]}),r.jsxs("p",{className:"mt-4 text-sm text-gray-600",children:["Are you sure you want to generate ",r.jsxs("strong",{children:[b.playerCount," CPU players"]})," for the ",r.jsx("strong",{children:b.teamName})," team?"]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",disabled:i,children:"Cancel"}),r.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:i,children:i?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Generating..."]}):"Generate Players"})]})]})})})]})},Xp=()=>{const{logActivity:e}=Xs();j.useState(()=>new Ep($));const[t,s]=j.useState(null),[n,a]=j.useState([]),[i,l]=j.useState({name:"",teams:[]}),[c,o]=j.useState([]),[d,u]=j.useState([]),[h,m]=j.useState([]),[f,y]=j.useState([]),[g,v]=j.useState(!0),[p,w]=j.useState("seasons"),[b,_]=j.useState(""),[P,C]=j.useState("all"),[k,R]=j.useState(!1),[L,T]=j.useState(null),[O,ae]=j.useState(null),[A,X]=j.useState(!1),[q,H]=j.useState({name:"",seasonId:"",availableTeams:[],selectedTeams:[]}),[ie,B]=j.useState([]),[G,Q]=j.useState(null),[M,E]=j.useState({diamonds:0,meals:0,shuttlecocks:0,coins:0}),[S,z]=j.useState({name:"",tier:"departmental",start_date:"",end_date:"",registration_deadline:"",max_teams_per_group:8,status:"draft",entry_fee:{coins:0,shuttlecocks:0,meals:0,diamonds:0},prize_pool:{first:{coins:0,shuttlecocks:0,meals:0,diamonds:0},second:{coins:0,shuttlecocks:0,meals:0,diamonds:0},third:{coins:0,shuttlecocks:0,meals:0,diamonds:0}}}),Z=async()=>{try{v(!0);const{data:x}=await $.from("players").select("id, name, user_id").eq("is_cpu",!1);if(!x)return;const I=await Promise.all(x.map(async J=>{const{data:se}=await $.from("resource_transactions").select("resource_type, amount").eq("user_id",J.user_id),ce={diamonds:0,meals:0,shuttlecocks:0,coins:0};return se==null||se.forEach(we=>{we.resource_type==="diamonds"&&(ce.diamonds+=we.amount),we.resource_type==="meals"&&(ce.meals+=we.amount),we.resource_type==="shuttlecocks"&&(ce.shuttlecocks+=we.amount),we.resource_type==="coins"&&(ce.coins+=we.amount)}),{user_id:J.user_id,manager_id:J.id,manager_name:J.name,resources:ce}}));B(I)}catch(x){console.error("Error loading clubs:",x)}finally{v(!1)}};j.useEffect(()=>{D(),le(),te(),oe(),Z(),e("admin_interclub_enhanced_viewed")},[]),j.useEffect(()=>{t&&(l({name:t.name,teams:[...t.teams]}),ee(t.id))},[t]),j.useEffect(()=>{D(),le(),te(),oe(),e("admin_interclub_enhanced_viewed")},[]);const ee=async x=>{const{data:I}=await $.from("cpu_teams").select("id, name, group_id").or(`group_id.eq.${x},group_id.is.null`),{data:J}=await $.from("interclub_teams").select("id, team_name, group_id").or(`group_id.eq.${x},group_id.is.null`);a([...(I==null?void 0:I.map(se=>({id:se.id,type:"cpu",team_name:se.name})))||[],...(J==null?void 0:J.map(se=>({id:se.id,type:"player",team_name:se.team_name})))||[]])},Pe=async()=>{if(G)try{v(!0),console.log(G.user_id),await Promise.all(Object.entries(M).map(async([x,I])=>{console.log(x,I);const{error:J}=await $.from("resource_transactions").insert({user_id:G.user_id,source:"manual_adjustment",resource_type:x,amount:Number(I)});if(J)throw new Error(`Failed to insert ${x}: ${J.message}`)})),await e("club_resources_updated","player",G.user_id),Q(null),await Z()}catch(x){console.error("Error updating club resources:",x)}finally{v(!1)}},N=async x=>{try{v(!0);const{data:I}=await $.from("cpu_teams").select("id, name").is("group_id",null),{data:J}=await $.from("interclub_teams").select("id, name").is("group_id",null);H(se=>({...se,availableTeams:[...I?I.map(ce=>({id:ce.id,name:ce.name,type:"cpu"})):[],...J?J.map(ce=>({id:ce.id,name:ce.name,type:"player"})):[]]}))}catch(I){console.error("Error loading teams:",I)}finally{v(!1)}},U=x=>{l(I=>{const J=I.teams.some(se=>se.id===x.id&&se.type===x.type);return{...I,teams:J?I.teams.filter(se=>!(se.id===x.id&&se.type===x.type)):[...I.teams,x]}})},W=async()=>{try{await $.from("interclub_groups").update({name:i.name}).eq("id",t==null?void 0:t.id);const x=i.teams.map(I=>(console.log(I),$.from(I.type==="cpu"?"cpu_teams":"interclub_registrations").update({group_id:t==null?void 0:t.id}).eq("id",I.id)));await Promise.all(x),await D(),s(null)}catch(x){console.error("Error saving group:",x)}},D=async()=>{try{v(!0);const{data:x,error:I}=await $.from("interclub_seasons").select(`
        *,
        groups:interclub_groups!season_id(
          *,
          cpu_teams:cpu_teams!group_id(
            id,
            name
          ),
          player_teams:interclub_teams!group_id(
            id,
            name
          )
        )
      `).order("created_at",{ascending:!1});if(console.log(x),I)throw I;if(!x)return o([]);const J=x.map(se=>{var ce;return{...se,groups:((ce=se.groups)==null?void 0:ce.map(we=>{var Xe,er;return{id:we.id,name:we.name,created_at:we.created_at,teams:[...((Xe=we.cpu_teams)==null?void 0:Xe.map(jt=>({id:jt.id,type:"cpu",team_name:jt.name||`CPU Team ${jt.id}`})))||[],...((er=we.player_teams)==null?void 0:er.map(jt=>({id:jt.id,type:"player",team_name:jt.name||`Team ${jt.id}`})))||[]]}}))||[],week_schedule:JSON.parse(se.week_schedule||"[]")}});o(J)}catch(x){console.error("Error loading seasons:",x)}finally{v(!1)}},le=async()=>{try{const{data:x,error:I}=await $.from("interclub_registrations").select(`
          *,
          season:season_id(name, tier, status)
        `).order("created_at",{ascending:!1});if(I){console.error("Error loading registrations:",I);return}const J=(x||[]).map(se=>({...se,players:JSON.parse(se.players||"[]")}));u(J)}catch(x){console.error("Error loading registrations:",x)}},te=async()=>{},oe=async()=>{try{const{data:x,error:I}=await $.from("interclub_matches").select("*").order("match_date",{ascending:!0});if(I){console.error("Error loading matches:",I);return}y(x||[])}catch(x){console.error("Error loading matches:",x)}},pe=()=>{z({name:"",tier:"departmental",start_date:"",end_date:"",registration_deadline:"",max_teams_per_group:8,status:"draft",entry_fee:{coins:0,shuttlecocks:0,meals:0,diamonds:0},prize_pool:{first:{coins:0,shuttlecocks:0,meals:0,diamonds:0},second:{coins:0,shuttlecocks:0,meals:0,diamonds:0},third:{coins:0,shuttlecocks:0,meals:0,diamonds:0}}}),R(!0)},Qt=async x=>{x.preventDefault();try{v(!0);const I={name:S.name,tier:S.tier,start_date:new Date(S.start_date).toISOString(),end_date:new Date(S.end_date).toISOString(),registration_deadline:new Date(S.registration_deadline).toISOString(),max_teams_per_group:S.max_teams_per_group,status:S.status,groups:JSON.stringify([]),week_schedule:JSON.stringify([]),entry_fee:S.entry_fee,prize_pool:S.prize_pool},{error:J}=await $.from("interclub_seasons").insert(I);if(J)throw J;e("interclub_season_created_enhanced"),R(!1),await D()}catch(I){console.error("Error creating season:",I)}finally{v(!1)}},We=async(x,I)=>{try{v(!0);const{error:J}=await $.from("interclub_registrations").update({status:I,reviewed_at:new Date().toISOString()}).eq("id",x);if(J)throw J;e(`interclub_registration_${I}`,"registration",x),await le()}catch(J){console.error(`Error ${I} registration:`,J)}finally{v(!1)}},Yt=async x=>{try{v(!0);const{data:I,count:J,error:se}=await $.from("interclub_registrations").select("*",{count:"exact"}).eq("season_id",x).eq("status","approved");if(se||!J||J<4){alert("Minimum 4 approved teams required to generate schedule");return}const{error:ce}=await $.from("interclub_seasons").update({status:"active",updated_at:new Date().toISOString()}).eq("id",x);if(ce){console.error("Failed to update season status:",ce);return}e("interclub_schedule_generated","season",x),await D()}catch(I){console.error("Error generating schedule:",I)}finally{v(!1)}},ne=(x,I,J,se)=>{z(ce=>({...ce,[x]:I?{...ce[x],[I]:{...ce[x][I],[J]:se}}:{...ce[x],[J]:se}}))},Nr=async x=>{if(confirm("Are you sure you want to delete this season? This action is irreversible."))try{v(!0);const{error:I}=await $.from("interclub_seasons").delete().eq("id",x);if(I){console.error("Error deleting season:",I);return}e("interclub_season_deleted","season",x),await D()}catch(I){console.error("Error deleting season:",I)}finally{v(!1)}},Zs=async(x,I)=>{try{v(!0);const{error:J}=await $.from("interclub_seasons").update({status:I,updated_at:new Date().toISOString()}).eq("id",x);if(J){console.error("Error updating season status:",J);return}e("interclub_season_status_updated","season",x,{newStatus:I}),await D()}catch(J){console.error("Error updating season status:",J)}finally{v(!1)}},Re=x=>({departmental:"Departmental",regional:"Regional",national:"National",top12:"TOP 12"})[x]||x,nt=x=>x==="departmental"?r.jsx(re,{className:"w-4 h-4 text-yellow-600"}):x==="regional"?r.jsx(re,{className:"w-4 h-4 text-gray-500"}):x==="national"?r.jsx(re,{className:"w-4 h-4 text-yellow-500"}):x==="top12"?r.jsx(Wt,{className:"w-4 h-4 text-purple-500"}):r.jsx(re,{className:"w-4 h-4"}),Mt=x=>({draft:"bg-gray-100 text-gray-800",registration_open:"bg-green-100 text-green-800",registration_closed:"bg-yellow-100 text-yellow-800",active:"bg-blue-100 text-blue-800",completed:"bg-purple-100 text-purple-800",pending:"bg-orange-100 text-orange-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[x]||"bg-gray-100 text-gray-800",at=x=>new Date(x).toLocaleDateString("en-US");return g&&c.length===0?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(re,{className:"w-8 h-8 text-blue-500"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Interclub Administration"})]}),r.jsxs("button",{onClick:pe,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[r.jsx(_d,{className:"w-4 h-4"}),r.jsx("span",{children:"New Season"})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"seasons",label:"Seasons",icon:bs},{id:"registrations",label:"Registrations",icon:Be},{id:"groups",label:"Groups",icon:dn},{id:"matches",label:"Matches",icon:Bt},{id:"stats",label:"Statistics",icon:wj},{id:"clubs",label:"Clubs",icon:Be}].map(({id:x,label:I,icon:J})=>r.jsxs("button",{onClick:()=>w(x),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${p===x?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[r.jsx(J,{className:"w-4 h-4"}),r.jsx("span",{children:I})]},x))})})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Pa,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search...",value:b,onChange:x=>_(x.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(kj,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsxs("select",{value:P,onChange:x=>C(x.target.value),className:"pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All statuses"}),p==="seasons"?r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"registration_open",children:"Registration Open"}),r.jsx("option",{value:"registration_closed",children:"Registration Closed"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"completed",children:"Completed"})]}):r.jsxs(r.Fragment,{children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})]}),r.jsxs("button",{onClick:()=>{D(),le(),te(),oe()},disabled:g,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center space-x-2",children:[r.jsx(Lp,{className:"w-4 h-4"}),r.jsx("span",{children:"Refresh"})]})]})}),p==="seasons"&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Season"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tier"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teams"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.filter(x=>{const I=x.name.toLowerCase().includes(b.toLowerCase()),J=P==="all"||x.status===P;return I&&J}).map(x=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"font-medium text-gray-900",children:x.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[nt(x.tier),r.jsx("span",{className:"text-sm",children:Re(x.tier)})]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[r.jsxs("div",{children:[at(x.start_date)," - ",at(x.end_date)]}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Deadline: ",at(x.registration_deadline)]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Mt(x.status)}`,children:x.status})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[d.filter(I=>I.season_id===x.id&&I.status==="approved").length," / ",x.max_teams_per_group*4]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>{T(x),z({name:x.name,tier:x.tier,start_date:x.start_date,end_date:x.end_date,registration_deadline:x.registration_deadline,max_teams_per_group:x.max_teams_per_group,status:x.status,entry_fee:x.entry_fee||{coins:0,shuttlecocks:0,meals:0,diamonds:0},prize_pool:x.prize_pool||{first:{coins:0,shuttlecocks:0,meals:0,diamonds:0},second:{coins:0,shuttlecocks:0,meals:0,diamonds:0},third:{coins:0,shuttlecocks:0,meals:0,diamonds:0}}})},className:"text-blue-600 hover:text-blue-900",title:"Edit",children:r.jsx(Qr,{className:"w-4 h-4"})}),x.status==="registration_closed"&&r.jsx("button",{onClick:()=>Yt(x.id),className:"text-green-600 hover:text-green-900",title:"Generate schedule",children:r.jsx(Bt,{className:"w-4 h-4"})}),x.status==="draft"&&r.jsx("button",{onClick:()=>Zs(x.id,"registration_open"),className:"text-purple-600 hover:text-purple-900",title:"Open registrations",children:r.jsx(Gi,{className:"w-4 h-4"})}),x.status==="registration_open"&&r.jsx("button",{onClick:()=>Zs(x.id,"registration_closed"),className:"text-orange-600 hover:text-orange-900",title:"Close registrations",children:r.jsx(Mj,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>ae(x),className:"text-gray-600 hover:text-gray-900",title:"View details",children:r.jsx(yi,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Nr(x.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:r.jsx(xa,{className:"w-4 h-4"})})]})})]},x.id))})]})})}),p==="registrations"&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Season"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Players"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.filter(x=>{var se,ce;const I=x.team_name.toLowerCase().includes(b.toLowerCase())||((ce=(se=x.season)==null?void 0:se.name)==null?void 0:ce.toLowerCase().includes(b.toLowerCase())),J=P==="all"||x.status===P;return I&&J}).map(x=>{var I;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"font-medium text-gray-900",children:x.team_name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((I=x.season)==null?void 0:I.name)||"N/A"}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[x.players.length," players"]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Mt(x.status)}`,children:x.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:at(x.created_at)}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[x.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>We(x.id,"approved"),className:"text-green-600 hover:text-green-900",children:r.jsx(ns,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>We(x.id,"rejected"),className:"text-red-600 hover:text-red-900",children:r.jsx(Tr,{className:"w-4 h-4"})})]}),r.jsx("button",{onClick:()=>alert(`Team: ${x.team_name}
Players: ${x.players.map(J=>J.name).join(", ")}
Status: ${x.status}
Registered: ${at(x.created_at)}`),className:"text-gray-600 hover:text-gray-900",title:"View Details",children:r.jsx(yi,{className:"w-4 h-4"})})]})]},x.id)})})]})})}),k&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-5",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-[50vw] max-h-[90vh] overflow-y-auto",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"New Interclub Season"}),r.jsxs("form",{onSubmit:Qt,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Season name"}),r.jsx("input",{type:"text",value:S.name,onChange:x=>z({...S,name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tier"}),r.jsxs("select",{value:S.tier,onChange:x=>z({...S,tier:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"departmental",children:"Departmental"}),r.jsx("option",{value:"regional",children:"Regional"}),r.jsx("option",{value:"national",children:"National"}),r.jsx("option",{value:"top12",children:"TOP 12"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start date"}),r.jsx("input",{type:"datetime-local",value:S.start_date,onChange:x=>z({...S,start_date:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"End date"}),r.jsx("input",{type:"datetime-local",value:S.end_date,onChange:x=>z({...S,end_date:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Registration deadline"}),r.jsx("input",{type:"datetime-local",value:S.registration_deadline,onChange:x=>z({...S,registration_deadline:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max teams per group"}),r.jsx("input",{type:"number",min:"5",max:"8",value:S.max_teams_per_group,onChange:x=>z({...S,max_teams_per_group:parseInt(x.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Initial status"}),r.jsxs("select",{value:S.status,onChange:x=>z({...S,status:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"registration_open",children:"Registration Open"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Ne,{className:"w-5 h-5 mr-2"}),"Entry Fee"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ne,{className:"w-4 h-4 inline mr-1 text-yellow-500"}),"Coins"]}),r.jsx("input",{type:"number",value:S.entry_fee.coins,onChange:x=>ne("entry_fee",null,"coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ct,{className:"w-4 h-4 inline mr-1 text-blue-500"}),"Shuttlecocks"]}),r.jsx("input",{type:"number",value:S.entry_fee.shuttlecocks,onChange:x=>ne("entry_fee",null,"shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(as,{className:"w-4 h-4 inline mr-1 text-green-500"}),"Meals"]}),r.jsx("input",{type:"number",value:S.entry_fee.meals,onChange:x=>ne("entry_fee",null,"meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Qe,{className:"w-4 h-4 inline mr-1 text-purple-500"}),"Diamonds"]}),r.jsx("input",{type:"number",value:S.entry_fee.diamonds,onChange:x=>ne("entry_fee",null,"diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(re,{className:"w-5 h-5 mr-2"}),"Prize Pool"]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" First Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.coins,onChange:x=>ne("prize_pool","first","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.shuttlecocks,onChange:x=>ne("prize_pool","first","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.meals,onChange:x=>ne("prize_pool","first","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.diamonds,onChange:x=>ne("prize_pool","first","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" Second Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.coins,onChange:x=>ne("prize_pool","second","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.shuttlecocks,onChange:x=>ne("prize_pool","second","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.meals,onChange:x=>ne("prize_pool","second","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.diamonds,onChange:x=>ne("prize_pool","second","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" Third Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.coins,onChange:x=>ne("prize_pool","third","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.shuttlecocks,onChange:x=>ne("prize_pool","third","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.meals,onChange:x=>ne("prize_pool","third","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.diamonds,onChange:x=>ne("prize_pool","third","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>R(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:g,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g?"Creating...":"Create Season"})]})]})]})}),p==="groups"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Group Management"}),r.jsxs("button",{onClick:()=>X(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[r.jsx(Gi,{className:"w-4 h-4"}),r.jsx("span",{children:"Create Groups"})]})]}),c.map(x=>r.jsxs("div",{className:"border rounded-lg p-4 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[nt(x.tier),r.jsx("h4",{className:"font-medium",children:x.name}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Mt(x.status)}`,children:x.status})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[d.filter(I=>I.season_id===x.id&&I.status==="approved").length," approved teams"]})]}),x.groups&&x.groups.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.groups.map((I,J)=>{var se;return r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 relative",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("h5",{className:"font-medium",children:["Groupe ",J+1]}),r.jsx("button",{onClick:()=>s(I),className:"text-blue-600 hover:text-blue-800 p-1",title:"Manage group",children:r.jsx(Qr,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"space-y-1",children:(se=I.teams)==null?void 0:se.map((ce,we)=>r.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[r.jsx(Be,{className:"w-3 h-3 mr-1"}),ce.team_name||`Team ${we+1}`]},`${ce.id}-${we}`))})]},J)})}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(dn,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No groups created for this season"}),x.status==="registration_closed"&&r.jsx("button",{onClick:()=>Yt(x.id),className:"mt-3 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Generate Groups"})]})]},x.id))]})}),p==="matches"&&r.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Match Management"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track interclub encounters"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Season"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Group"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Encounter"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Bt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No matches scheduled"}),r.jsx("p",{className:"text-sm",children:"Matches will appear after group generation"})]})}):f.map(x=>{var I;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:((I=c.find(J=>J.id===x.season_id))==null?void 0:I.name)||"N/A"}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["Groupe ",x.group_id]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["J",x.matchday_number]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:at(x.match_date)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Mt(x.status)}`,children:x.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.home_score!==void 0&&x.away_score!==void 0?`${x.home_score}-${x.away_score}`:"-"}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[r.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:r.jsx(yi,{className:"w-4 h-4"})}),x.status==="scheduled"&&r.jsx("button",{className:"text-green-600 hover:text-green-900",children:r.jsx(Bt,{className:"w-4 h-4"})})]})]},x.id)})})]})})]}),p==="stats"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active seasons"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.filter(x=>x.status==="active").length})]}),r.jsx("div",{className:"bg-blue-50 rounded-full p-3",children:r.jsx(bs,{className:"w-6 h-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending registrations"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(x=>x.status==="pending").length})]}),r.jsx("div",{className:"bg-yellow-50 rounded-full p-3",children:r.jsx(vr,{className:"w-6 h-6 text-yellow-600"})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Registered teams"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(x=>x.status==="approved").length})]}),r.jsx("div",{className:"bg-green-50 rounded-full p-3",children:r.jsx(Be,{className:"w-6 h-6 text-green-600"})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Matches played"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:f.filter(x=>x.status==="completed").length})]}),r.jsx("div",{className:"bg-purple-50 rounded-full p-3",children:r.jsx(re,{className:"w-6 h-6 text-purple-600"})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Distribution by tier"}),r.jsx("div",{className:"space-y-3",children:Object.entries(c.reduce((x,I)=>(x[I.tier]=(x[I.tier]||0)+1,x),{})).map(([x,I])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[nt(x),r.jsx("span",{className:"text-sm font-medium",children:Re(x)})]}),r.jsxs("span",{className:"text-sm text-gray-600",children:[I," seasons"]})]},x))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent activity"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-green-100 rounded-full p-2",children:r.jsx(ns,{className:"w-4 h-4 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Approved registrations"}),r.jsxs("p",{className:"text-xs text-gray-500",children:[d.filter(x=>x.status==="approved").length," teams"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:r.jsx(Bt,{className:"w-4 h-4 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Matches in progress"}),r.jsxs("p",{className:"text-xs text-gray-500",children:[f.filter(x=>x.status==="in_progress").length," encounters"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-purple-100 rounded-full p-2",children:r.jsx(re,{className:"w-4 h-4 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Completed matches"}),r.jsxs("p",{className:"text-xs text-gray-500",children:[f.filter(x=>x.status==="completed").length," encounters"]})]})]})]})]})]})]}),p==="clubs"&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Manager"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Manager ID"}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.jsx(Qe,{className:"w-4 h-4 inline mr-1 text-purple-500"}),"Diamonds"]}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.jsx(as,{className:"w-4 h-4 inline mr-1 text-green-500"}),"Meals"]}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.jsx(Ct,{className:"w-4 h-4 inline mr-1 text-blue-500"}),"Shuttlecocks"]}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.jsx(Ne,{className:"w-4 h-4 inline mr-1 text-yellow-500"}),"Coins"]}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ie.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Vs,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No clubs found"})]})}):ie.map(x=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"font-medium text-gray-900",children:x.manager_name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.manager_id}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.resources.diamonds}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.resources.meals}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.resources.shuttlecocks}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.resources.coins}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsx("button",{onClick:()=>{Q(x),E(x.resources)},className:"text-blue-600 hover:text-blue-900",children:r.jsx(Qr,{className:"w-4 h-4"})})})]},x.manager_id))})]})})}),G&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Edit Club Resources"}),r.jsx("button",{onClick:()=>Q(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Tr,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:G.manager_name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Manager ID: ",G.manager_id]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center",children:[r.jsx(Qe,{className:"w-4 h-4 mr-2 text-purple-500"}),"Diamonds"]}),r.jsx("input",{type:"number",value:M.diamonds,onChange:x=>E({...M,diamonds:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center",children:[r.jsx(as,{className:"w-4 h-4 mr-2 text-green-500"}),"Meals"]}),r.jsx("input",{type:"number",value:M.meals,onChange:x=>E({...M,meals:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center",children:[r.jsx(Ct,{className:"w-4 h-4 mr-2 text-blue-500"}),"Shuttlecocks"]}),r.jsx("input",{type:"number",value:M.shuttlecocks,onChange:x=>E({...M,shuttlecocks:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1 flex items-center",children:[r.jsx(Ne,{className:"w-4 h-4 mr-2 text-yellow-500"}),"Coins"]}),r.jsx("input",{type:"number",value:M.coins,onChange:x=>E({...M,coins:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",min:"0"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancel"}),r.jsx("button",{onClick:Pe,disabled:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g?"Saving...":"Save Changes"})]})]})}),L&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-[50vw] max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Edit Season"}),r.jsx("button",{onClick:()=>T(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Tr,{className:"w-6 h-6"})})]}),r.jsxs("form",{onSubmit:async x=>{x.preventDefault();try{v(!0);const{error:I}=await $.from("interclub_seasons").update({name:S.name,tier:S.tier,start_date:S.start_date,end_date:S.end_date,registration_deadline:S.registration_deadline,status:S.status,max_teams_per_group:S.max_teams_per_group,entry_fee:S.entry_fee,prize_pool:S.prize_pool,updated_at:new Date().toISOString()}).eq("id",L.id);if(I)throw I;e("interclub_season_updated","season",L.id),await D(),T(null),z({name:"",tier:"departmental",start_date:"",end_date:"",registration_deadline:"",max_teams_per_group:8,status:"draft",entry_fee:{coins:0,shuttlecocks:0,meals:0,diamonds:0},prize_pool:{first:{coins:0,shuttlecocks:0,meals:0,diamonds:0},second:{coins:0,shuttlecocks:0,meals:0,diamonds:0},third:{coins:0,shuttlecocks:0,meals:0,diamonds:0}}})}catch(I){console.error("Error updating season:",I)}finally{v(!1)}},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Season name"}),r.jsx("input",{type:"text",value:S.name,onChange:x=>z({...S,name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tier"}),r.jsxs("select",{value:S.tier,onChange:x=>z({...S,tier:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"departmental",children:"Departmental"}),r.jsx("option",{value:"regional",children:"Regional"}),r.jsx("option",{value:"national",children:"National"}),r.jsx("option",{value:"top12",children:"TOP 12"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start date"}),r.jsx("input",{type:"datetime-local",value:new Date(S.start_date).toISOString().slice(0,16),onChange:x=>z({...S,start_date:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"End date"}),r.jsx("input",{type:"datetime-local",value:new Date(S.end_date).toISOString().slice(0,16),onChange:x=>z({...S,end_date:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Registration deadline"}),r.jsx("input",{type:"datetime-local",value:new Date(S.registration_deadline).toISOString().slice(0,16),onChange:x=>z({...S,registration_deadline:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max teams per group"}),r.jsx("input",{type:"number",min:"4",max:"12",value:S.max_teams_per_group,onChange:x=>z({...S,max_teams_per_group:parseInt(x.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),r.jsxs("select",{value:S.status,onChange:x=>z({...S,status:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"registration_open",children:"Registration Open"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Ne,{className:"w-5 h-5 mr-2"}),"Entry Fee"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ne,{className:"w-4 h-4 inline mr-1 text-yellow-500"}),"Coins"]}),r.jsx("input",{type:"number",value:S.entry_fee.coins,onChange:x=>ne("entry_fee",null,"coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ct,{className:"w-4 h-4 inline mr-1 text-blue-500"}),"Shuttlecocks"]}),r.jsx("input",{type:"number",value:S.entry_fee.shuttlecocks,onChange:x=>ne("entry_fee",null,"shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(as,{className:"w-4 h-4 inline mr-1 text-green-500"}),"Meals"]}),r.jsx("input",{type:"number",value:S.entry_fee.meals,onChange:x=>ne("entry_fee",null,"meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Qe,{className:"w-4 h-4 inline mr-1 text-purple-500"}),"Diamonds"]}),r.jsx("input",{type:"number",value:S.entry_fee.diamonds,onChange:x=>ne("entry_fee",null,"diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(re,{className:"w-5 h-5 mr-2"}),"Prize Pool"]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" First Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.coins,onChange:x=>ne("prize_pool","first","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.shuttlecocks,onChange:x=>ne("prize_pool","first","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.meals,onChange:x=>ne("prize_pool","first","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.first.diamonds,onChange:x=>ne("prize_pool","first","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" Second Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.coins,onChange:x=>ne("prize_pool","second","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.shuttlecocks,onChange:x=>ne("prize_pool","second","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.meals,onChange:x=>ne("prize_pool","second","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.second.diamonds,onChange:x=>ne("prize_pool","second","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-md font-medium text-gray-800 mb-3",children:" Third Place"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.coins,onChange:x=>ne("prize_pool","third","coins",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Coins",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.shuttlecocks,onChange:x=>ne("prize_pool","third","shuttlecocks",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Shuttlecocks",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.meals,onChange:x=>ne("prize_pool","third","meals",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Meals",min:"0"})}),r.jsx("div",{children:r.jsx("input",{type:"number",value:S.prize_pool.third.diamonds,onChange:x=>ne("prize_pool","third","diamonds",parseInt(x.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Diamonds",min:"0"})})]})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"submit",disabled:g,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g?"Updating...":"Update Season"}),r.jsx("button",{type:"button",onClick:()=>T(null),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),O&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[nt(O.tier),r.jsx("h2",{className:"text-2xl font-bold",children:O.name}),r.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${Mt(O.status)}`,children:O.status})]}),r.jsx("button",{onClick:()=>ae(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Tr,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Season Information"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tier:"}),r.jsx("span",{className:"font-medium",children:Re(O.tier)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Start Date:"}),r.jsx("span",{children:at(O.start_date)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"End Date:"}),r.jsx("span",{children:at(O.end_date)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Registration Deadline:"}),r.jsx("span",{children:at(O.registration_deadline)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Max Teams per Group:"}),r.jsx("span",{children:O.max_teams_per_group})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Tier Requirements"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Coins:"}),r.jsx("span",{children:mr[O.tier].coins})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Shuttlecocks:"}),r.jsx("span",{children:mr[O.tier].shuttlecocks})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Meals:"}),r.jsx("span",{children:mr[O.tier].meals})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Registration Statistics"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Total Registrations:"}),r.jsx("span",{children:d.filter(x=>x.season_id===O.id).length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Approved:"}),r.jsx("span",{className:"text-green-600 font-medium",children:d.filter(x=>x.season_id===O.id&&x.status==="approved").length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Pending:"}),r.jsx("span",{className:"text-yellow-600 font-medium",children:d.filter(x=>x.season_id===O.id&&x.status==="pending").length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Rejected:"}),r.jsx("span",{className:"text-red-600 font-medium",children:d.filter(x=>x.season_id===O.id&&x.status==="rejected").length})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Groups"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Groups Created:"}),r.jsx("span",{children:h.filter(x=>x.season_id===O.id).length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Matches Scheduled:"}),r.jsx("span",{children:f.filter(x=>x.season_id===O.id).length})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Matches Completed:"}),r.jsx("span",{children:f.filter(x=>x.season_id===O.id&&x.status==="completed").length})]})]})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Registered Teams"}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:d.filter(x=>x.season_id===O.id).length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No teams registered yet"}):r.jsx("div",{className:"space-y-2",children:d.filter(x=>x.season_id===O.id).map(x=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:x.team_name}),r.jsxs("div",{className:"text-sm text-gray-600",children:[x.players.length," players"]})]}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Mt(x.status)}`,children:x.status})]},x.id))})})]}),r.jsx("div",{className:"flex justify-end mt-6",children:r.jsx("button",{onClick:()=>ae(null),className:"bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400",children:"Close"})})]})}),A&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Create New Group"}),r.jsx("button",{onClick:()=>X(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Tr,{className:"w-6 h-6"})})]}),r.jsxs("form",{onSubmit:async x=>{x.preventDefault();try{v(!0);const{data:I,error:J}=await $.from("interclub_groups").insert({name:q.name,season_id:q.seasonId}).select().single();if(J)throw J;const se=q.selectedTeams.map(async ce=>{const we=ce.type==="cpu"?"cpu_teams":"interclub_teams",{error:Xe}=await $.from(we).update({group_id:I.id}).eq("id",ce.id);if(Xe)throw Xe});await Promise.all(se),e("interclub_group_created_with_teams","group",I.id),X(!1),await te()}catch(I){console.error("Error creating group:",I)}finally{v(!1)}},className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Group Name"}),r.jsx("input",{type:"text",value:q.name,onChange:x=>H({...q,name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,placeholder:"Group A, Group B, etc."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Season"}),r.jsxs("select",{value:q.seasonId,onChange:x=>{H({...q,seasonId:x.target.value}),N(x.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Select a season"}),c.map(x=>r.jsxs("option",{value:x.id,children:[x.name," (",Re(x.tier),")"]},x.id))]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-medium",children:"Available Teams"}),r.jsx("div",{className:"border rounded-lg p-3 max-h-60 overflow-y-auto mt-[2px]",children:q.availableTeams.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:q.seasonId?"No teams available":"Select a season first"}):r.jsx("div",{className:"space-y-2",children:q.availableTeams.map(x=>r.jsx("div",{className:`p-2 rounded cursor-pointer ${q.selectedTeams.some(I=>I.id===x.id&&I.type===x.type)?"bg-blue-100":"hover:bg-gray-100"}`,onClick:()=>{const I=q.selectedTeams.some(J=>J.id===x.id&&J.type===x.type);H(J=>({...J,selectedTeams:I?J.selectedTeams.filter(se=>!(se.id===x.id&&se.type===x.type)):[...J.selectedTeams,x]}))},children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:q.selectedTeams.some(I=>I.id===x.id&&I.type===x.type),className:"mr-2",readOnly:!0}),r.jsx("span",{children:x.name}),r.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",x.type==="cpu"?"CPU Team":"Player Team",")"]})]})},`${x.type}-${x.id}`))})})]})]}),r.jsxs("div",{className:"pt-4",children:[r.jsxs("h3",{className:"text-sm font-medium mb-2",children:["Selected Teams (",q.selectedTeams.length,")"]}),q.selectedTeams.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:q.selectedTeams.map(x=>r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[x.name,r.jsx("button",{type:"button",onClick:I=>{I.stopPropagation(),H(J=>({...J,selectedTeams:J.selectedTeams.filter(se=>!(se.id===x.id&&se.type===x.type))}))},className:"ml-2 text-blue-600 hover:text-blue-900",children:r.jsx(Tr,{className:"w-4 h-4"})})]},`selected-${x.type}-${x.id}`))}):r.jsx("p",{className:"text-gray-500 text-sm",children:"No teams selected yet"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>X(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:g||!q.seasonId||q.selectedTeams.length===0,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:g?"Creating...":"Create Group"})]})]})]})}),t&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-bold",children:"Manage Group"}),r.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-gray-700",children:r.jsx(tt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Group Name"}),r.jsx("input",{type:"text",value:i.name,onChange:x=>l({...i,name:x.target.value}),className:"w-full px-3 py-2 border rounded"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Teams"}),r.jsx("div",{className:"max-h-60 overflow-y-auto border rounded p-2",children:n.map(x=>r.jsx("div",{className:"flex items-center justify-between py-2",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:i.teams.some(I=>I.id===x.id&&I.type===x.type),onChange:()=>U(x),className:"mr-2"}),r.jsx("span",{children:x.team_name}),r.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",x.type,")"]})]})},x.id))})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>s(null),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),r.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save Changes"})]})]})})]})},Zp=()=>{const{logActivity:e}=Xs(),[t,s]=j.useState([]),[n,a]=j.useState(!0),[i,l]=j.useState(""),[c,o]=j.useState("all"),[d,u]=j.useState(!1),[h,m]=j.useState(null),[f,y]=j.useState("");j.useEffect(()=>{g(),e("users_viewed")},[]);const g=async()=>{try{a(!0),console.log("[AdminUsers] Loading users with JavaScript logic...");const{data:k,error:R}=await $.from("admin_users").select("user_id, permissions, created_at");R&&console.error("[AdminUsers] Error loading admin users:",R);const L=new Set((k||[]).map(q=>q.user_id)),{data:T,error:O}=await $.from("resource_transactions").select("user_id").not("user_id","is",null);O&&console.error("[AdminUsers] Error loading user transactions:",O);const A=[...new Set((T||[]).map(q=>q.user_id))].map(async q=>{const{data:H}=await $.from("profiles").select("*").eq("id",q).single();return{id:q,email:(H==null?void 0:H.email)||`user-${q.slice(0,8)}@unknown.com`,team_name:(H==null?void 0:H.team_name)||void 0,full_name:(H==null?void 0:H.full_name)||(H==null?void 0:H.display_name)||void 0,avatar_url:(H==null?void 0:H.avatar_url)||void 0,is_admin:L.has(q),is_banned:!1,email_verified:!0,last_login:null,created_at:(H==null?void 0:H.created_at)||new Date().toISOString(),updated_at:(H==null?void 0:H.updated_at)||new Date().toISOString(),login_count:0,profile:H||null}}),X=await Promise.all(A);for(const q of k||[])X.find(H=>H.id===q.user_id)||X.push({id:q.user_id,email:`admin-${q.user_id.slice(0,8)}@unknown.com`,team_name:void 0,full_name:void 0,avatar_url:void 0,is_admin:!0,is_banned:!1,email_verified:!0,last_login:null,created_at:q.created_at,updated_at:q.created_at,login_count:0,profile:null});console.log("[AdminUsers] Users loaded successfully:",X.length,"users"),s(X)}catch(k){console.error("[AdminUsers] Unexpected error loading users:",k)}finally{a(!1)}},v=async(k,R)=>{const L=R?"ban":"unban";if(confirm(`Are you sure you want to ${L} this user?`))try{console.log(`${R?"Banning":"Unbanning"} user:`,k);const T=null;await e(`user_${L}ned`,"user",k),g()}catch(T){console.error(`Error ${L}ning user:`,T)}},p=async(k,R)=>{const L=R?"promote to admin":"demote from admin";if(confirm(`Are you sure you want to ${L} this user?`))try{console.log(`[AdminUsers] ${R?"Promoting":"Demoting"} user:`,k);let T=null;if(R){const{error:O}=await $.from("admin_users").insert({user_id:k,permissions:{tournaments:!0,interclub:!0,users:!0,cpu_teams:!0}});T=O}else{const{error:O}=await $.from("admin_users").delete().eq("user_id",k);T=O}if(T){console.error("[AdminUsers] Error changing admin status:",T),me.error(`Failed to ${L}. Please try again.`);return}console.log(`[AdminUsers] Successfully ${R?"promoted":"demoted"} user`),await e(R?"user_promoted_admin":"user_demoted_admin","user",k),g()}catch(T){console.error("[AdminUsers] Error changing admin status:",T),me.error(`Failed to ${L}. Please try again.`)}},w=async()=>{if(!(!h||!f))try{console.log("[AdminUsers] Password change requested for user:",h.id),me.warning("Password change functionality requires server-side implementation. Please contact system administrator."),await e("user_password_change_requested","user",h.id),u(!1),m(null),y("")}catch(k){console.error("[AdminUsers] Error requesting password change:",k),me.error("Failed to request password change. Please try again.")}},b=async k=>{if(confirm("Are you sure you want to permanently delete this user? This action cannot be undone."))try{console.log("[AdminUsers] User deletion requested:",k),me.warning("User deletion functionality requires server-side implementation. Please contact system administrator."),await e("user_deletion_requested","user",k)}catch(R){console.error("[AdminUsers] Error requesting user deletion:",R),me.error("Failed to request user deletion. Please try again.")}},_=t.filter(k=>{var T,O;const R=k.email.toLowerCase().includes(i.toLowerCase())||((T=k.team_name)==null?void 0:T.toLowerCase().includes(i.toLowerCase()))||((O=k.full_name)==null?void 0:O.toLowerCase().includes(i.toLowerCase())),L=c==="all"||c==="active"&&!k.is_banned||c==="banned"&&k.is_banned||c==="admin"&&k.is_admin||c==="unverified"&&!k.email_verified;return R&&L}),P=k=>k.is_banned?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Banned"}):k.is_admin?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Admin"}):k.email_verified?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"}):r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Unverified"}),C=k=>k?new Date(k).toLocaleDateString():"Never";return n?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),r.jsx("p",{className:"text-gray-600",children:"Manage user accounts, permissions, and access"})]}),r.jsx("div",{className:"flex space-x-3",children:r.jsxs("button",{onClick:g,className:"flex items-center px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(ln,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Be,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(dc,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(k=>!k.is_banned).length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(Vs,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(k=>k.is_admin).length})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:r.jsx(wl,{className:"w-6 h-6 text-red-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Banned"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(k=>k.is_banned).length})]})]})})]}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200 mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Search users by email, username, or name...",value:i,onChange:k=>l(k.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]})}),r.jsx("div",{className:"w-full sm:w-48",children:r.jsxs("select",{value:c,onChange:k=>o(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Users"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"banned",children:"Banned"}),r.jsx("option",{value:"admin",children:"Admins"}),r.jsx("option",{value:"unverified",children:"Unverified"})]})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Login Count"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Be,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-lg font-medium",children:"No users found"}),r.jsx("p",{className:"mt-1",children:"Try adjusting your search or filters"})]})}):_.map(k=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:k.avatar_url?r.jsx("img",{className:"h-10 w-10 rounded-full",src:k.avatar_url,alt:""}):r.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:r.jsx(Vs,{className:"w-5 h-5 text-gray-600"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.full_name||k.team_name||"Unnamed User"}),r.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[r.jsx(Rj,{className:"w-3 h-3 mr-1"}),k.email]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P(k)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C(k.last_login)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C(k.created_at)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.login_count||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>{m(k),u(!0)},className:"text-blue-600 hover:text-blue-900 p-1",title:"Change Password",children:r.jsx(Ej,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>p(k.id,!k.is_admin),className:`p-1 ${k.is_admin?"text-orange-600 hover:text-orange-900":"text-purple-600 hover:text-purple-900"}`,title:k.is_admin?"Remove Admin":"Make Admin",children:r.jsx(dc,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>v(k.id,!k.is_banned),className:`p-1 ${k.is_banned?"text-green-600 hover:text-green-900":"text-yellow-600 hover:text-yellow-900"}`,title:k.is_banned?"Unban User":"Ban User",children:k.is_banned?r.jsx($j,{className:"w-4 h-4"}):r.jsx(Pj,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>b(k.id),className:"text-red-600 hover:text-red-900 p-1",title:"Delete User",children:r.jsx(xa,{className:"w-4 h-4"})})]})})]},k.id))})]})})}),d&&h&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Change Password for ",h.email]})}),r.jsxs("div",{className:"px-6 py-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),r.jsx("input",{type:"password",value:f,onChange:k=>y(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter new password",minLength:8}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Password must be at least 8 characters long"})]}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>{u(!1),m(null),y("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),r.jsx("button",{onClick:w,disabled:f.length<8,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Change Password"})]})]})})]})},eg=()=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Activity Logs"}),r.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Export Logs"})]}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:r.jsx("p",{className:"text-gray-600",children:"Activity logs features coming soon..."})})]}),kh=[{key:"home",layout:"",path:"",component:r.jsx(Op,{})},{key:"dashboard",layout:"",path:"dashboard",component:r.jsx(m1,{})},{key:"club",layout:"",path:"club",component:r.jsx(h1,{})},{key:"tournaments",layout:"",path:"tournaments",component:r.jsx(P1,{})},{key:"quick-match",layout:"",path:"quick-match",component:r.jsx(N1,{})},{key:"interclub",layout:"",path:"interclub",component:r.jsx(x1,{})},{key:"facilities",layout:"",path:"facilities",component:r.jsx(g1,{})},{key:"admin_dashboard",layout:"",path:"admin/dashboard",component:r.jsx(Kp,{})},{key:"admin_tournaments",layout:"",path:"admin/tournaments",component:r.jsx(Qp,{})},{key:"admin_interclub",layout:"",path:"admin/interclub",component:r.jsx(Xp,{})},{key:"admin_cputeams",layout:"",path:"admin/cpuTeams",component:r.jsx(Yp,{})},{key:"admin_users",layout:"",path:"admin/users",component:r.jsx(Zp,{})},{key:"admin_logs",layout:"",path:"admin/logs",component:r.jsx(eg,{})}];function B1({selectedSection:e,onSectionChange:t,onOpenShop:s}){const n=[{id:"dashboard",icon:Dp,label:"Dashboard"},{id:"club",icon:Be,label:"My Club"},{id:"tournaments",icon:re,label:"Tournaments"},{id:"quick-match",icon:cn,label:"Quick Match"},{id:"interclub",icon:Sj,label:"Interclubs"},{id:"facilities",icon:jd,label:"Facilities"}];return r.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg p-4",children:r.jsxs("div",{className:"flex justify-around max-w-2xl mx-auto",children:[n.map(({id:a,icon:i,label:l})=>r.jsxs("button",{onClick:()=>t(a),className:`flex flex-col items-center p-2 rounded-lg transition-colors ${e===a?"text-blue-600 bg-blue-50":"text-gray-600 hover:bg-gray-50"}`,children:[r.jsx(i,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm mt-1",children:l})]},a)),r.jsxs("button",{onClick:s,className:"flex flex-col items-center p-2 rounded-lg transition-colors text-purple-600 hover:bg-purple-50",children:[r.jsx(kd,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm mt-1",children:"Shop"})]})]})})}const q1=[{id:"specialist-pack",name:"Pack Diamants + Spcialiste",description:"Obtenez 1000 diamants et dbloquez un spcialiste exclusif",price:"89",originalPrice:"99",icon:Qe,color:"bg-purple-500",textColor:"text-purple-500",borderColor:"border-purple-200",hoverColor:"hover:bg-purple-600"},{id:"tshirt-pack",name:"T-Shirt Officiel",description:"T-shirt exclusif du jeu + 500 diamants offerts",price:"79",icon:Ip,color:"bg-blue-500",textColor:"text-blue-500",borderColor:"border-blue-200",hoverColor:"hover:bg-blue-600"},{id:"master-pack",name:"Master Gem Pack",description:"Pack ultime avec 5000 diamants et bonus exclusifs",price:"299",originalPrice:"399",icon:Wt,color:"bg-yellow-500",textColor:"text-yellow-500",borderColor:"border-yellow-200",hoverColor:"hover:bg-yellow-600"}],H1=[{id:"diamonds-1",amount:100,price:"9",color:"bg-purple-500"},{id:"diamonds-2",amount:250,price:"19",color:"bg-purple-500"},{id:"diamonds-3",amount:650,price:"49",color:"bg-purple-500"},{id:"diamonds-4",amount:1400,price:"79",color:"bg-purple-500"},{id:"diamonds-5",amount:3e3,price:"149",color:"bg-purple-500"},{id:"diamonds-6",amount:7e3,price:"299",color:"bg-purple-500"}],W1={shuttlecocks:{icon:Ct,color:"text-blue-500",packs:[{amount:50,cost:1},{amount:150,cost:2},{amount:500,cost:5},{amount:1e3,cost:8}]},meals:{icon:as,color:"text-green-500",packs:[{amount:30,cost:1},{amount:100,cost:2},{amount:300,cost:5},{amount:600,cost:8}]},coins:{icon:Ne,color:"text-yellow-500",packs:[{amount:1e3,cost:1},{amount:3e3,cost:2},{amount:1e4,cost:5},{amount:25e3,cost:10}]}};function V1({onClose:e}){const{resources:t,purchaseResources:s}=Kt(),[n,a]=j.useState("main"),i=()=>r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:q1.map(c=>r.jsxs("div",{className:`relative border ${c.borderColor} rounded-xl p-6 hover:shadow-lg transition-shadow`,children:[c.originalPrice&&r.jsx("div",{className:"absolute top-4 right-4 bg-red-100 text-red-600 px-3 py-1 rounded-full text-sm font-medium",children:"-25%"}),r.jsx("div",{className:`w-12 h-12 ${c.color} rounded-lg flex items-center justify-center mb-4`,children:r.jsx(c.icon,{className:"w-6 h-6 text-white"})}),r.jsx("h3",{className:"text-lg font-bold mb-2",children:c.name}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:c.description}),r.jsxs("div",{className:"flex items-baseline space-x-2",children:[r.jsx("span",{className:"text-xl font-bold",children:c.price}),c.originalPrice&&r.jsx("span",{className:"text-sm text-gray-400 line-through",children:c.originalPrice})]}),r.jsx("button",{className:`mt-4 w-full py-2 ${c.color} text-white rounded-lg ${c.hoverColor} transition-colors`,children:"Acheter"})]},c.id))}),r.jsx("h3",{className:"text-xl font-bold mb-6",children:"Packs de Diamants"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:H1.map(c=>r.jsxs("div",{className:"border border-purple-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"flex items-center justify-center mb-3",children:r.jsx(Qe,{className:"w-8 h-8 text-purple-500"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-bold text-lg mb-1",children:c.amount}),r.jsx("div",{className:"text-gray-600 text-sm mb-3",children:"Diamants"}),r.jsx("button",{className:"w-full py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:c.price})]})]},c.id))})]}),l=()=>r.jsxs("div",{className:"space-y-8",children:[Object.entries(W1).map(([c,{icon:o,color:d,packs:u}])=>r.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(o,{className:`w-6 h-6 ${d}`}),r.jsx("h3",{className:"text-lg font-bold capitalize",children:c})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:u.map(({amount:h,cost:m},f)=>r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"text-center mb-3",children:[r.jsx("div",{className:"font-bold text-xl mb-1",children:h}),r.jsx("div",{className:"text-sm text-gray-600 capitalize",children:c})]}),r.jsxs("button",{onClick:()=>s(c,h,m),disabled:t.diamonds<m,className:`w-full py-2 rounded-lg flex items-center justify-center space-x-2 ${t.diamonds>=m?"bg-purple-500 text-white hover:bg-purple-600":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:[r.jsx("span",{children:m}),r.jsx(Qe,{className:"w-4 h-4"})]})]},f))})]},c)),r.jsxs("div",{className:"text-center text-sm text-gray-600 bg-purple-50 p-4 rounded-lg",children:["Vos diamants disponibles: ",r.jsx("span",{className:"font-bold",children:t.diamonds})," "]})]});return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-7xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(kd,{className:"w-8 h-8 text-purple-500"}),r.jsx("h2",{className:"text-2xl font-bold",children:"Boutique"})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full",children:r.jsx(tt,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"flex space-x-4 mb-8",children:[r.jsx("button",{onClick:()=>a("main"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="main"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Boutique"}),r.jsx("button",{onClick:()=>a("resources"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="resources"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Ressources"})]}),n==="main"?i():l()]})})}function G1(){const{resources:e}=Kt(),{user:t}=_s(),{isAdmin:s}=Xs(),n=Na(),[a,i]=j.useState(!1),l=async()=>{await $.auth.signOut(),n("/")},c=()=>{var o,d;return(o=t==null?void 0:t.user_metadata)!=null&&o.name?t.user_metadata.name:(d=t==null?void 0:t.user_metadata)!=null&&d.manager_name?t.user_metadata.manager_name:t!=null&&t.email?t.email.split("@")[0]:"User"};return r.jsx("div",{className:"fixed top-0 left-0 right-0 bg-white shadow-md p-4 z-50",children:r.jsxs("div",{className:"flex items-center justify-between mx-auto",children:[r.jsx("div",{className:"w-48 hidden lg:block"}),r.jsxs("div",{className:"flex items-center space-x-8",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ct,{className:"w-5 h-5 text-blue-500"}),r.jsx("span",{className:"font-medium",children:e.shuttlecocks})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(as,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"font-medium",children:e.meals})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ne,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{className:"font-medium",children:e.coins})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Qe,{className:"w-5 h-5 text-purple-500"}),r.jsx("span",{className:"font-medium",children:e.diamonds})]})]}),r.jsxs("div",{className:"relative w-48 flex justify-end",children:[r.jsxs("button",{onClick:()=>i(!a),className:"flex items-center space-x-2 px-3 py-2 rounded-full hover:bg-gray-100 transition-all duration-200",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:c().charAt(0).toUpperCase()}),r.jsx(jj,{className:`w-4 h-4 text-gray-500 transition-transform duration-200 ${a?"rotate-180":""}`})]}),a&&r.jsx("div",{className:"absolute top-10 right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",onMouseLeave:()=>i(!1),children:r.jsxs("div",{className:"py-2",children:[r.jsx("div",{className:"px-4 py-2 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:c().charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:c()}),r.jsx("p",{className:"text-xs text-gray-500",children:t==null?void 0:t.email})]})]})}),r.jsxs("div",{className:"py-1",children:[s&&r.jsxs("button",{onClick:()=>{n("/admin"),i(!1)},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors",children:[r.jsx(ln,{className:"w-4 h-4 mr-3"}),"Admin Panel"]}),r.jsxs("button",{onClick:()=>{l(),i(!1)},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-red-600 transition-colors",children:[r.jsx(Tj,{className:"w-4 h-4 mr-3"}),"Logout"]})]})]})})]})]})})}function J1(){const e=cs(),[t,s]=V.useState("Main Dashboard"),[n,a]=j.useState(!1),i=Na();V.useEffect(()=>{l(kh)},[e.pathname]);const l=o=>{let d="forum";for(let u=0;u<o.length;u++)window.location.href.indexOf(o[u].layout+"/"+o[u].path)!==-1&&s(o[u].key);return d},c=o=>o.map((d,u)=>d.layout===""?r.jsx(Ft,{path:`/${d.path}`,element:d.component},u):null);return r.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[r.jsx(G1,{}),r.jsx("main",{className:"container mt-6 mx-auto px-4 py-20",children:r.jsx(fd,{children:c(kh)})}),r.jsx(B1,{selectedSection:t,onOpenShop:()=>a(!0),onSectionChange:o=>i("/"+o)}),n&&r.jsx(V1,{onClose:()=>a(!1)})]})}const K1=()=>{var m;const{adminUser:e,hasPermission:t,isAdmin:s,loading:n}=Xs(),{user:a,logout:i,isLogin:l}=_s(),c=cs(),[o,d]=j.useState(!1);if(n||!l)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:l?"Verifying admin access...":"Checking authentication..."})]})});if(l&&!n&&!s)return r.jsx(Pn,{to:"/dashboard",replace:!0});const u=[{path:"/admin",name:"Dashboard",icon:"",exact:!0},{path:"/admin/tournaments",name:"Tournaments",icon:"",permission:"tournaments"},{path:"/admin/interclub",name:"Interclub",icon:"",permission:"interclub"},{path:"/admin/cpu-teams",name:"CPU Teams & Players",icon:"",permission:"cpu_teams"},{path:"/admin/users",name:"Users",icon:"",permission:"users"},{path:"/admin/logs",name:"Activity Logs",icon:""}],h=(f,y=!1)=>y?c.pathname===f:c.pathname.startsWith(f);return r.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[o&&r.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>d(!1)}),r.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 ${o?"translate-x-0":"-translate-x-full"}`,children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-6 bg-blue-600 text-white",children:[r.jsx("h1",{className:"text-xl font-bold",children:"Admin Panel"}),r.jsx("button",{onClick:()=>d(!1),className:"lg:hidden",children:""})]}),r.jsx("nav",{className:"mt-8",children:u.map(f=>f.permission&&!t(f.permission)?null:r.jsxs(Hi,{to:f.path,className:`flex items-center px-6 py-3 text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors ${h(f.path,f.exact)?"bg-blue-50 text-blue-600 border-r-4 border-blue-600":""}`,onClick:()=>d(!1),children:[r.jsx("span",{className:"mr-3 text-lg",children:f.icon}),f.name]},f.path))}),r.jsx("div",{className:"absolute bottom-0 w-full p-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold",children:(m=a==null?void 0:a.email)==null?void 0:m.charAt(0).toUpperCase()}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Admin"}),r.jsx("p",{className:"text-xs text-gray-500",children:a==null?void 0:a.email})]})]}),r.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",title:"Logout",children:""})]})})]}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[r.jsx("button",{onClick:()=>d(!0),className:"lg:hidden",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Leadminton Admin"}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsx(Hi,{to:"/dashboard",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:" Back to Game"})})]})}),r.jsx("main",{className:"flex-1 p-6 bg-gray-100",children:r.jsxs(fd,{children:[r.jsx(Ft,{path:"/",element:r.jsx(Kp,{})}),r.jsx(Ft,{path:"/tournaments",element:t("tournaments")?r.jsx(Qp,{}):r.jsx(Pn,{to:"/admin",replace:!0})}),r.jsx(Ft,{path:"/interclub",element:t("interclub")?r.jsx(Xp,{}):r.jsx(Pn,{to:"/admin",replace:!0})}),r.jsx(Ft,{path:"/cpu-teams",element:t("cpu_teams")?r.jsx(Yp,{}):r.jsx(Pn,{to:"/admin",replace:!0})}),r.jsx(Ft,{path:"/users",element:t("users")?r.jsx(Zp,{}):r.jsx(Pn,{to:"/admin",replace:!0})}),r.jsx(Ft,{path:"/logs",element:r.jsx(eg,{})})]})})]})]})};function Q1(){_s();const[e,t]=j.useState(!1),[s,n]=j.useState(null);return e?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading game..."})]})}):s?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full",children:[r.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Error"}),r.jsx("p",{className:"text-gray-600 mb-6",children:s}),r.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]})}):r.jsx(M1,{children:r.jsxs(fd,{children:[r.jsx(Ft,{path:"/",element:r.jsx(Op,{})}),r.jsx(Ft,{path:"/admin/*",element:r.jsx(K1,{})}),r.jsx(Ft,{path:"/*",element:r.jsx(J1,{})})]})})}typeof window>"u"&&(window.global=window);zf(document.getElementById("root")).render(r.jsx(Ky,{children:r.jsx(j.StrictMode,{children:r.jsx(Ub,{children:r.jsxs(fj,{children:[r.jsx(Q1,{}),r.jsx(Rv,{position:"top-right",richColors:!0,closeButton:!0,duration:4e3})]})})})}));export{Sh as g};
